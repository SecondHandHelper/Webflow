<script>
  
  async function uploadToStorage(file) {
    
    		console.log('Now the uploadToStorage function is running and has access to the file:', file);
    
        	let promise = new Promise((resolve, reject) => {
            // This code is from this page: https://firebase.google.com/docs/storage/web/upload-files
    				const storageRef = storage.ref().child('images/' + file.name);
    				const uploadTask = storageRef.put(file);
    				uploadTask
    				.then(snap=>{
      					let result = storageRef.getDownloadURL()
                	resolve(result);
    				})
    		});
        
        const result = await promise;
    		
        console.log('This is the result from uploadToStorage: ', result);

    		return result;
  }


</script>