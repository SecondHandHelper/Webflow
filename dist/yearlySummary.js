!function(e,t,n,r,o,i,a){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof l[r]&&l[r],d=s.i||{},u=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function y(t,n){if(!u[t]){if(!e[t]){var o="function"==typeof l[r]&&l[r];if(!n&&o)return o(t,!0);if(s)return s(t,!0);if(c&&"string"==typeof t)return c(t);var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}d.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},d.cache={};var a=u[t]=new y.Module(t);e[t][0].call(a.exports,d,a,a.exports,l)}return u[t].exports;function d(e){var t=d.resolve(e);return!1===t?{}:y(t)}}y.isParcelRequire=!0,y.Module=function(e){this.id=e,this.bundle=y,this.require=c,this.exports={}},y.modules=e,y.cache=u,y.parent=s,y.distDir=void 0,y.publicUrl=void 0,y.devServer=void 0,y.i=d,y.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(y,"root",{get:function(){return l[r]}}),l[r]=y;for(var p=0;p<t.length;p++)y(t[p]);if(n){var f=y(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof define&&define.amd&&define(function(){return f})}}({"2Qeid":[function(e,t,n,r){function o(){let e=getParamsObject();if(navigator.share)navigator.share({url:`https://maiapp.se/yearly-summary?id=${e.id}&year=${e.year}`}).then(()=>{console.log("Thanks for sharing!")}).catch(e=>{console.error(e),errorHandler.report(e)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let t=`https://maiapp.se/yearly-summary?id=${e.id}&year=${e.year}`;navigator.clipboard.writeText(t),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}(async function(){let e=getParamsObject();mainHeading.innerText=`Tack f\xf6r ${e.year}!`,shareButtonText.innerText=`Dela ditt ${e.year}`,mainHeading.style.visibility="visible";let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,year:e.year})},n=await fetch("https://europe-west3-second-hand-helper.cloudfunctions.net/yearlyData",t);if(!n.ok)throw Error("Network response was not ok.");let r=(await n.json()).data;console.log("yearlyData: ",r),r.sold&&(document.getElementById("moneyEarned").innerHTML=`${parseInt(r.earned).toLocaleString("en-US").replaceAll(","," ")} kr`,document.getElementById("soldItems").innerText=`${r.sold} st plagg`,document.getElementById("savedCo2").innerHTML=r.co2kg<100?`${parseInt(r.co2kg).toLocaleString("sv")} kg CO<sub>2</sub>`:`${(parseInt(r.co2kg)/1e3).toLocaleString("sv")} ton CO<sub>2</sub>`,r.name?document.getElementById("letterTitle").innerHTML=r.name.charAt(0).toUpperCase()+r.name.slice(1)+`${"2023"===e.year?",":""}`:document.getElementById("letterTitle").style.display="none",document.getElementById("letterBody").innerText=r.letter+`${"2023"===e.year?"\n\nTillsammans ser vi till att plaggen får komma till användning, och vi hoppas vi får förtroendet att fortsätta sälja dina kläder under 2024!":""}`,document.getElementById("topStatsLoadingIcon").style.display="none",topStatsDiv.style.visibility="visible",letterDiv.style.display="flex",document.getElementById("shareYearlyHeaderButton").addEventListener("click",o),document.getElementById("shareYearlyButton").addEventListener("click",o),"2024"===e.year&&(document.getElementById("letterEnding").style.display="none"))})(),user.whenSet(async()=>{let e=getParamsObject();authUser.current.uid.includes(e.id)&&(airplaneIcon.style.display="block",shareYearlyButton.style.display="block",db.collection("users").doc(authUser.current.uid).update({elementViews:firebase.firestore.FieldValue.arrayUnion({elementID:"yearlySummary",timestamp:new Date})}),analytics.track("Element Viewed",{elementID:"yearlySummary"}))})},{}]},["2Qeid"],"2Qeid","parcelRequire81ca");
//# sourceMappingURL=yearlySummary.js.map
