{"mappings":"C,A,WCAA,eAAe,IACb,GAAI,CAAC,KAAK,OAAO,CAAC,YAAY,EAAE,aAC5B,OAAO,SAAS,IAAI,CAAG,WAG3B,GADA,SAAS,cAAc,CAAC,gBAAgB,SAAS,CAAG,KAAK,OAAO,CAAC,YAAY,CAAC,YAAY,CACtF,KAAK,OAAO,EAAE,cAAc,eAAe,OAAS,EAAG,CACvD,SAAS,cAAc,CAAC,YAAY,SAAS,CAAC,GAAG,CAAC,sBAClD,SAAS,cAAc,CAAC,kBAAkB,SAAS,CAAG,KAAK,OAAO,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CACpG,SAAS,cAAc,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,OACvD,SAAS,cAAc,CAAC,mBAAmB,KAAK,CAAC,OAAO,CAAG,QAE3D,IAAM,EAAgB,AADQ,CAAA,MAAM,SAAS,GAAG,GAAG,SAAS,CAAC,gBAAgB,aAAa,CAAC,kBAA3F,EAC4C,IAAI,CAC5C,EAAmB,EAAc,aAAa,CAAC,MAAM,CAAC,CAAC,EAAK,IAAQ,EAAM,EAAI,SAAS,CAAE,EAC7F,CAAA,SAAS,cAAc,CAAC,aAAa,SAAS,CAAG,CAAC,EAAE,EAAiB,CAAC,CAGtE,SAAS,cAAc,CAAC,YAAY,SAAS,CAAI,AAAA,CAAA,AAAmB,GAAnB,EAAwB,GAAA,EAAM,cAAc,CAAC,MAE9F,SAAS,cAAc,CAAC,gBAAgB,KAAK,CAAC,OAAO,CAAG,EAAc,SAAS,CAAG,EAAc,aAAa,CAAG,QAAU,OAC1H,SAAS,cAAc,CAAC,aAAa,SAAS,CAAG,EAAc,SAAS,CACxE,SAAS,cAAc,CAAC,iBAAiB,SAAS,CAAG,EAAc,aAAa,CAChF,SAAS,cAAc,CAAC,sBAAsB,SAAS,CAAG,CAAC,CAAC,EAAE,EAAc,SAAS,CAAC,CAAC,CACvF,SAAS,cAAc,CAAC,qBAAqB,SAAS,CAAG,EAAc,aAAa,CAAC,MAAM,CAC3F,SAAS,cAAc,CAAC,qBAAqB,SAAS,CAAG,EAAc,aAAa,CAAC,MAAM,CAAC,AAAA,GAAO,AAAe,cAAf,EAAI,MAAM,EAAoB,AAAe,SAAf,EAAI,MAAM,EAAa,MAAM,CAC9J,SAAS,cAAc,CAAC,oBAAoB,SAAS,CAAG,EAAc,aAAa,CAAC,MAAM,CAAC,AAAA,GAAO,AAAe,SAAf,EAAI,MAAM,EAAa,MAAM,CAC/H,IAAM,EAAmB,SAAS,cAAc,CAAC,oBAC3C,EAA2B,SAAS,cAAc,CAAC,4BAEzD,IAAK,GAAM,CAAC,EAAK,EAAc,GAD/B,EAAyB,SAAS,CAAG,GACF,EAAc,aAAa,CAAC,OAAO,IAAI,CACtE,IAAM,EAAS,EAAiB,SAAS,CAAC,CAAA,EAC1C,CAAA,EAAO,EAAE,CAAG,CAAC,EAAE,EAAO,EAAE,CAAC,CAAC,EAAE,EAAI,CAAC,CACjC,EAAO,UAAU,CAAC,SAAS,CAAG,EAAc,IAAI,CAChD,EAAO,UAAU,CAAC,EAAE,CAAC,SAAS,CAO/B,AAAA,CAAA,CACH,WAAY,eACZ,UAAW,iBACX,KAAM,YACV,CAAA,CAAC,CAXmD,EAAc,MAAM,CAW/D,CAVD,EAAyB,WAAW,CAAC,EACzC,CACJ,CACF,CAUA,wBAAwB,gBAAgB,CAAC,QAAS,WAClD,SAAS,cAAc,CAAC,gBAAgB,SAAS,CAAG,GACpD,KAAK,OAAO,CAAC,E","sources":["<anon>","referral.js"],"sourcesContent":["(function () {\nasync function $a7b7692d7c6b353d$var$main() {\n    if (!user.current.referralData?.referralCode) return location.href = \"/private\";\n    document.getElementById(\"referralCode\").innerText = user.current.referralData.referralCode;\n    if (user.current?.referralData?.referredUsers?.length > 0) {\n        document.getElementById(\"topStats\").classList.add(\"animatedBackground\");\n        document.getElementById(\"invitedFriends\").innerText = user.current.referralData.referredUsers.length;\n        document.getElementById(\"topStatsDiv\").style.display = \"flex\";\n        document.getElementById(\"referralDetails\").style.display = \"block\";\n        const referralStatsResponse = await firebase.app().functions(\"europe-west1\").httpsCallable(\"referralStats\")();\n        const referralStats = referralStatsResponse.data;\n        let friendsSoldItems = referralStats.referredUsers.reduce((acc, usr)=>acc + usr.soldItems, 0);\n        document.getElementById(\"soldItems\").innerText = `${friendsSoldItems}`;\n        // https://supermiljobloggen.se/nyheter/secondhand-200-ganger-mindre-klimatskadligt-an-nyproducerat/\n        // 1 plagg orsakar 10 kg CO2 (2-17), och köpa begagnat orsakar 10/200 kg = 0.02kg så i genomsnitt 10kg sparat/plagg\n        document.getElementById(\"savedCo2\").innerText = (friendsSoldItems * 10 / 1000).toLocaleString(\"sv\");\n        document.getElementById(\"nextFreePill\").style.display = referralStats.freeSells > referralStats.usedFreeSells ? \"block\" : \"none\";\n        document.getElementById(\"freeSells\").innerText = referralStats.freeSells;\n        document.getElementById(\"usedFreeSells\").innerText = referralStats.usedFreeSells;\n        document.getElementById(\"availableFreeSells\").innerText = `/${referralStats.freeSells}`;\n        document.getElementById(\"invitesRegistered\").innerText = referralStats.referredUsers.length;\n        document.getElementById(\"invitesAddedItems\").innerText = referralStats.referredUsers.filter((usr)=>usr.status === \"activated\" || usr.status === \"sold\").length;\n        document.getElementById(\"invitesSoldItems\").innerText = referralStats.referredUsers.filter((usr)=>usr.status === \"sold\").length;\n        const invitedFriendRow = document.getElementById(\"invitedFriendRow\");\n        const invitedFriendStatusesDiv = document.getElementById(\"invitedFriendStatusesDiv\");\n        invitedFriendStatusesDiv.innerHTML = \"\";\n        for (const [idx, invitedFriend] of referralStats.referredUsers.entries()){\n            const newRow = invitedFriendRow.cloneNode(true);\n            newRow.id = `${newRow.id}_${idx}`;\n            newRow.firstChild.innerText = invitedFriend.name;\n            newRow.childNodes[1].innerText = $a7b7692d7c6b353d$var$statusText(invitedFriend.status);\n            invitedFriendStatusesDiv.appendChild(newRow);\n        }\n    }\n}\nfunction $a7b7692d7c6b353d$var$statusText(status) {\n    return ({\n        registered: \"Skapat konto\",\n        activated: \"Lagt upp plagg\",\n        sold: \"S\\xe5lt plagg\"\n    })[status];\n}\nshareReferralLinkButton.addEventListener(\"click\", shareCode);\ndocument.getElementById(\"referralCode\").innerText = \"\";\nuser.whenSet($a7b7692d7c6b353d$var$main);\n\n})();\n//# sourceMappingURL=referral.js.map\n","async function main() {\n  if (!user.current.referralData?.referralCode) {\n      return location.href = '/private';\n  }\n  document.getElementById('referralCode').innerText = user.current.referralData.referralCode;\n  if (user.current?.referralData?.referredUsers?.length > 0) {\n      document.getElementById('topStats').classList.add(\"animatedBackground\");\n      document.getElementById('invitedFriends').innerText = user.current.referralData.referredUsers.length;\n      document.getElementById('topStatsDiv').style.display = 'flex';\n      document.getElementById('referralDetails').style.display = 'block';\n      const referralStatsResponse = await firebase.app().functions(\"europe-west1\").httpsCallable('referralStats')();\n      const referralStats = referralStatsResponse.data;\n      let friendsSoldItems = referralStats.referredUsers.reduce((acc, usr) => acc + usr.soldItems, 0);\n      document.getElementById('soldItems').innerText = `${friendsSoldItems}`;\n      // https://supermiljobloggen.se/nyheter/secondhand-200-ganger-mindre-klimatskadligt-an-nyproducerat/\n      // 1 plagg orsakar 10 kg CO2 (2-17), och köpa begagnat orsakar 10/200 kg = 0.02kg så i genomsnitt 10kg sparat/plagg\n      document.getElementById('savedCo2').innerText = (friendsSoldItems * 10 / 1000).toLocaleString('sv');\n      \n      document.getElementById('nextFreePill').style.display = referralStats.freeSells > referralStats.usedFreeSells ? 'block' : 'none';\n      document.getElementById('freeSells').innerText = referralStats.freeSells;\n      document.getElementById('usedFreeSells').innerText = referralStats.usedFreeSells;\n      document.getElementById('availableFreeSells').innerText = `/${referralStats.freeSells}`;\n      document.getElementById('invitesRegistered').innerText = referralStats.referredUsers.length\n      document.getElementById('invitesAddedItems').innerText = referralStats.referredUsers.filter(usr => usr.status === 'activated' || usr.status === 'sold').length;\n      document.getElementById('invitesSoldItems').innerText = referralStats.referredUsers.filter(usr => usr.status === 'sold').length;\n      const invitedFriendRow = document.getElementById('invitedFriendRow');\n      const invitedFriendStatusesDiv = document.getElementById('invitedFriendStatusesDiv');\n      invitedFriendStatusesDiv.innerHTML = '';\n      for (const [idx, invitedFriend] of referralStats.referredUsers.entries()) {\n          const newRow = invitedFriendRow.cloneNode(true);\n          newRow.id = `${newRow.id}_${idx}`;\n          newRow.firstChild.innerText = invitedFriend.name;\n          newRow.childNodes[1].innerText = statusText(invitedFriend.status);\n          invitedFriendStatusesDiv.appendChild(newRow);\n      }\n  }\n}\n\nfunction statusText(status) {\n  return {\n      registered: 'Skapat konto',\n      activated: 'Lagt upp plagg',\n      sold: 'Sålt plagg'\n  }[status];\n}\n\nshareReferralLinkButton.addEventListener('click', shareCode);\ndocument.getElementById('referralCode').innerText = '';\nuser.whenSet(main);"],"names":["$a7b7692d7c6b353d$var$main","user","current","referralData","referralCode","location","href","document","getElementById","innerText","referredUsers","length","classList","add","style","display","referralStats","referralStatsResponse","firebase","app","functions","httpsCallable","data","friendsSoldItems","reduce","acc","usr","soldItems","toLocaleString","freeSells","usedFreeSells","filter","status","invitedFriendRow","invitedFriendStatusesDiv","idx","invitedFriend","innerHTML","entries","newRow","cloneNode","id","firstChild","name","childNodes","registered","activated","sold","appendChild","shareReferralLinkButton","addEventListener","shareCode","whenSet"],"version":3,"file":"referral.js.map"}