{"mappings":"C,A,WCAA,eAAe,IACb,GAAI,CAAC,KAAK,OAAA,CAAQ,YAAA,EAAc,aAC9B,OAAO,SAAS,IAAA,CAAO,WAGzB,GADA,SAAS,cAAA,CAAe,gBAAgB,SAAA,CAAY,KAAK,OAAA,CAAQ,YAAA,CAAa,YAA9E,CACI,KAAK,OAAA,EAAS,cAAc,eAAe,OAAS,EAAG,CACzD,SAAS,cAAA,CAAe,YAAY,KAAK,CAAC,wBAAwB,CAAG,SACrE,IAAM,EAAwB,MAAM,SAAS,GAAA,GAAM,SAAA,CAAU,gBAAgB,aAAA,CAAc,mBACrF,EAAgB,EAAsB,IAA5C,AACA,CAAA,SAAS,cAAA,CAAe,kBAAkB,SAAA,CAAY,KAAK,OAAA,CAAQ,YAAA,CAAa,aAAA,CAAc,MAA9F,CACA,IAAI,EAAmB,EAAc,aAAA,CAAc,MAAA,CAAO,CAAC,EAAK,IAAQ,EAAM,EAAI,SAAA,CAAW,EAC7F,CAAA,SAAS,cAAA,CAAe,aAAa,SAAA,CAAY,CAAC,EAAE,EAAiB,CAAC,CACtE,oGAAoG;AACpG,mHAAmH;AACnH,SAAS,cAAA,CAAe,YAAY,SAAA,CAAa,AAAA,CAAA,AAAmB,GAAnB,EAAwB,GAAA,EAAM,cAAA,CAAe,MAC9F,SAAS,cAAA,CAAe,eAAe,KAAA,CAAM,OAAA,CAAU,OAEvD,SAAS,cAAA,CAAe,mBAAmB,KAAA,CAAM,OAAA,CAAU,QAC3D,SAAS,cAAA,CAAe,gBAAgB,KAAA,CAAM,OAAA,CAAU,EAAc,SAAA,CAAY,EAAc,aAAA,CAAgB,QAAU,OAC1H,SAAS,cAAA,CAAe,aAAa,SAAA,CAAY,EAAc,SAA/D,CACA,SAAS,cAAA,CAAe,iBAAiB,SAAA,CAAY,EAAc,aAAnE,CACA,SAAS,cAAA,CAAe,sBAAsB,SAAA,CAAY,CAAC,CAAC,EAAE,EAAc,SAAA,CAAY,EAAc,aAAA,CAAc,CAAC,CACrH,SAAS,cAAA,CAAe,qBAAqB,SAAA,CAAY,EAAc,aAAA,CAAc,MAAA,CAAO,AAAA,GAAO,AAAe,eAAf,EAAI,MAAA,EAAyB,MAAhI,CACA,SAAS,cAAA,CAAe,qBAAqB,SAAA,CAAY,EAAc,aAAA,CAAc,MAAA,CAAO,AAAA,GAAO,AAAe,cAAf,EAAI,MAAA,EAAwB,MAA/H,CACA,SAAS,cAAA,CAAe,oBAAoB,SAAA,CAAY,EAAc,aAAA,CAAc,MAAA,CAAO,AAAA,GAAO,AAAe,SAAf,EAAI,MAAA,EAAmB,MAAzH,CACA,IAAM,EAAmB,SAAS,cAAA,CAAe,oBAC3C,EAA2B,SAAS,cAAA,CAAe,4BAEzD,IAAK,GAAM,CAAC,EAAK,EAAc,GAD/B,EAAyB,SAAA,CAAY,GACF,EAAc,aAAA,CAAc,OAAA,IAAW,CACxE,IAAM,EAAS,EAAiB,SAAA,CAAU,CAAA,EAC1C,CAAA,EAAO,EAAA,CAAK,CAAC,EAAE,EAAO,EAAA,CAAG,CAAC,EAAE,EAAI,CAAC,CACjC,EAAO,UAAA,CAAW,SAAA,CAAY,EAAc,IAA5C,CACA,EAAO,UAAU,CAAC,EAAE,CAAC,SAAA,CAOlB,AAAA,CAAA,CACL,WAAY,eACZ,UAAW,iBACX,KAAM,eACR,CAAA,CAAC,CAX+C,EAAc,MAA1D,CAWK,CAVL,EAAyB,WAAA,CAAY,EACvC,CACF,CACF,CAUA,SAAS,cAAA,CAAe,gBAAgB,SAAA,CAAY,GACpD,KAAK,OAAA,CAAQ,E,G,qC","sources":["<anon>","referral.js"],"sourcesContent":["(function () {\nasync function $a7b7692d7c6b353d$var$main() {\n    if (!user.current.referralData?.referralCode) return location.href = \"/private\";\n    document.getElementById(\"referralCode\").innerText = user.current.referralData.referralCode;\n    if (user.current?.referralData?.referredUsers?.length > 0) {\n        document.getElementById(\"topStats\").style[\"background-position-x\"] = \"-135px\";\n        const referralStatsResponse = await firebase.app().functions(\"europe-west1\").httpsCallable(\"referralStats\")();\n        const referralStats = referralStatsResponse.data;\n        document.getElementById(\"invitedFriends\").innerText = user.current.referralData.referredUsers.length;\n        let friendsSoldItems = referralStats.referredUsers.reduce((acc, usr)=>acc + usr.soldItems, 0);\n        document.getElementById(\"soldItems\").innerText = `${friendsSoldItems}`;\n        // https://supermiljobloggen.se/nyheter/secondhand-200-ganger-mindre-klimatskadligt-an-nyproducerat/\n        // 1 plagg orsakar 10 kg CO2 (2-17), och köpa begagnat orsakar 10/200 kg = 0.02kg så i genomsnitt 10kg sparat/plagg\n        document.getElementById(\"savedCo2\").innerText = (friendsSoldItems * 10 / 1000).toLocaleString(\"sv\");\n        document.getElementById(\"topStatsDiv\").style.display = \"flex\";\n        document.getElementById(\"referralDetails\").style.display = \"block\";\n        document.getElementById(\"nextFreePill\").style.display = referralStats.freeSells > referralStats.usedFreeSells ? \"block\" : \"none\";\n        document.getElementById(\"freeSells\").innerText = referralStats.freeSells;\n        document.getElementById(\"usedFreeSells\").innerText = referralStats.usedFreeSells;\n        document.getElementById(\"availableFreeSells\").innerText = `/${referralStats.freeSells - referralStats.usedFreeSells}`;\n        document.getElementById(\"invitesRegistered\").innerText = referralStats.referredUsers.filter((usr)=>usr.status === \"registered\").length;\n        document.getElementById(\"invitesAddedItems\").innerText = referralStats.referredUsers.filter((usr)=>usr.status === \"activated\").length;\n        document.getElementById(\"invitesSoldItems\").innerText = referralStats.referredUsers.filter((usr)=>usr.status === \"sold\").length;\n        const invitedFriendRow = document.getElementById(\"invitedFriendRow\");\n        const invitedFriendStatusesDiv = document.getElementById(\"invitedFriendStatusesDiv\");\n        invitedFriendStatusesDiv.innerHTML = \"\";\n        for (const [idx, invitedFriend] of referralStats.referredUsers.entries()){\n            const newRow = invitedFriendRow.cloneNode(true);\n            newRow.id = `${newRow.id}_${idx}`;\n            newRow.firstChild.innerText = invitedFriend.name;\n            newRow.childNodes[1].innerText = $a7b7692d7c6b353d$var$statusText(invitedFriend.status);\n            invitedFriendStatusesDiv.appendChild(newRow);\n        }\n    }\n}\nfunction $a7b7692d7c6b353d$var$statusText(status) {\n    return ({\n        registered: \"Skapat konto\",\n        activated: \"Lagt upp plagg\",\n        sold: \"S\\xe5lt plagg\"\n    })[status];\n}\ndocument.getElementById(\"referralCode\").innerText = \"\";\nuser.whenSet($a7b7692d7c6b353d$var$main);\n\n})();\n//# sourceMappingURL=referral.js.map\n","async function main() {\n  if (!user.current.referralData?.referralCode) {\n    return location.href = '/private';\n  }\n  document.getElementById('referralCode').innerText = user.current.referralData.referralCode;\n  if (user.current?.referralData?.referredUsers?.length > 0) {\n    document.getElementById('topStats').style['background-position-x'] = '-135px';\n    const referralStatsResponse = await firebase.app().functions(\"europe-west1\").httpsCallable('referralStats')();\n    const referralStats = referralStatsResponse.data;\n    document.getElementById('invitedFriends').innerText = user.current.referralData.referredUsers.length;\n    let friendsSoldItems = referralStats.referredUsers.reduce((acc, usr) => acc + usr.soldItems, 0);\n    document.getElementById('soldItems').innerText = `${friendsSoldItems}`;\n    // https://supermiljobloggen.se/nyheter/secondhand-200-ganger-mindre-klimatskadligt-an-nyproducerat/\n    // 1 plagg orsakar 10 kg CO2 (2-17), och köpa begagnat orsakar 10/200 kg = 0.02kg så i genomsnitt 10kg sparat/plagg\n    document.getElementById('savedCo2').innerText = (friendsSoldItems * 10 / 1000).toLocaleString('sv');\n    document.getElementById('topStatsDiv').style.display = 'flex';\n\n    document.getElementById('referralDetails').style.display = 'block';\n    document.getElementById('nextFreePill').style.display = referralStats.freeSells > referralStats.usedFreeSells ? 'block' : 'none';\n    document.getElementById('freeSells').innerText = referralStats.freeSells;\n    document.getElementById('usedFreeSells').innerText = referralStats.usedFreeSells;\n    document.getElementById('availableFreeSells').innerText = `/${referralStats.freeSells - referralStats.usedFreeSells}`;\n    document.getElementById('invitesRegistered').innerText = referralStats.referredUsers.filter(usr => usr.status === 'registered').length\n    document.getElementById('invitesAddedItems').innerText = referralStats.referredUsers.filter(usr => usr.status === 'activated').length;\n    document.getElementById('invitesSoldItems').innerText = referralStats.referredUsers.filter(usr => usr.status === 'sold').length;\n    const invitedFriendRow = document.getElementById('invitedFriendRow');\n    const invitedFriendStatusesDiv = document.getElementById('invitedFriendStatusesDiv');\n    invitedFriendStatusesDiv.innerHTML = '';\n    for (const [idx, invitedFriend] of referralStats.referredUsers.entries()) {\n      const newRow = invitedFriendRow.cloneNode(true);\n      newRow.id = `${newRow.id}_${idx}`;\n      newRow.firstChild.innerText = invitedFriend.name;\n      newRow.childNodes[1].innerText = statusText(invitedFriend.status);\n      invitedFriendStatusesDiv.appendChild(newRow);\n    }\n  }\n}\n\nfunction statusText(status) {\n  return {\n    registered: 'Skapat konto',\n    activated: 'Lagt upp plagg',\n    sold: 'Sålt plagg'\n  }[status];\n}\n\ndocument.getElementById('referralCode').innerText = '';\nuser.whenSet(main);\n"],"names":["$a7b7692d7c6b353d$var$main","user","current","referralData","referralCode","location","href","document","getElementById","innerText","referredUsers","length","style","referralStatsResponse","firebase","app","functions","httpsCallable","referralStats","data","friendsSoldItems","reduce","acc","usr","soldItems","toLocaleString","display","freeSells","usedFreeSells","filter","status","invitedFriendRow","invitedFriendStatusesDiv","idx","invitedFriend","innerHTML","entries","newRow","cloneNode","id","firstChild","name","childNodes","registered","activated","sold","appendChild","whenSet"],"version":3,"file":"referral.js.map"}