{"mappings":"C,A,WCAA,eAAe,IACb,GAAI,CAAC,KAAK,OAAA,CAAQ,YAAA,EAAc,aAC5B,OAAO,SAAS,IAAA,CAAO,WAG3B,GADA,SAAS,cAAA,CAAe,gBAAgB,SAAA,CAAY,KAAK,OAAA,CAAQ,YAAA,CAAa,YAA9E,CACI,KAAK,OAAA,EAAS,cAAc,eAAe,OAAS,EAAG,CACvD,SAAS,cAAA,CAAe,YAAY,SAAA,CAAU,GAAA,CAAI,sBAClD,SAAS,cAAA,CAAe,kBAAkB,SAAA,CAAY,KAAK,OAAA,CAAQ,YAAA,CAAa,aAAA,CAAc,MAA9F,CACA,SAAS,cAAA,CAAe,eAAe,KAAA,CAAM,OAAA,CAAU,OACvD,SAAS,cAAA,CAAe,mBAAmB,KAAA,CAAM,OAAA,CAAU,QAC3D,SAAS,GAAA,GAAM,SAAA,CAAU,gBAAgB,aAAA,CAAc,mBAAmB,IAAA,CAAK,AAAA,IAC7E,IAAM,EAAgB,EAAsB,IAA5C,AACA,CAAA,SAAS,cAAA,CAAe,gBAAgB,KAAA,CAAM,OAAA,CAAU,EAAc,SAAA,CAAY,EAAc,aAAA,CAAgB,QAAU,OAC1H,SAAS,cAAA,CAAe,aAAa,SAAA,CAAY,EAAc,SAA/D,CACA,SAAS,cAAA,CAAe,iBAAiB,SAAA,CAAY,EAAc,aAAnE,CACA,SAAS,cAAA,CAAe,sBAAsB,SAAA,CAAY,CAAC,CAAC,EAAE,EAAc,SAAA,CAAU,CAAC,AACzF,GACA,IAAM,EAA4B,MAAM,SAAS,GAAA,GAAM,SAAA,CAAU,gBAAgB,aAAA,CAAc,uBACzF,EAAoB,EAA0B,IAApD,AACA,CAAA,SAAS,cAAA,CAAe,aAAa,SAAA,CAAY,CAAC,EAAE,EAAkB,SAAA,CAAU,CAAC,CACjF,oGAAoG;AACpG,mHAAmH;AACnH,SAAS,cAAA,CAAe,YAAY,SAAA,CAAa,AAAA,CAAA,AAA8B,GAA9B,EAAkB,SAAA,CAAiB,GAAA,EAAM,cAAA,CAAe,MAEzG,SAAS,cAAA,CAAe,qBAAqB,SAAA,CAAY,EAAkB,KAAA,EAAO,OAClF,SAAS,cAAA,CAAe,qBAAqB,SAAA,CAAY,EAAkB,KAAA,EAAO,OAAO,AAAA,GAAO,AAAe,cAAf,EAAI,MAAA,EAA0B,AAAe,SAAf,EAAI,MAAA,EAAmB,OACrJ,SAAS,cAAA,CAAe,oBAAoB,SAAA,CAAY,EAAkB,KAAA,EAAO,OAAO,AAAA,GAAO,AAAe,SAAf,EAAI,MAAA,EAAmB,OACtH,IAAM,EAAmB,SAAS,cAAA,CAAe,oBAC3C,EAA2B,SAAS,cAAA,CAAe,4BAEzD,IAAK,GAAM,CAAC,EAAK,EAAc,GAD/B,EAAyB,SAAA,CAAY,GACD,EAAkB,KAAA,EAAO,WAAa,EAAE,EAAG,CAC3E,IAAM,EAAS,EAAiB,SAAA,CAAU,CAAA,EAC1C,CAAA,EAAO,EAAA,CAAK,CAAC,EAAE,EAAO,EAAA,CAAG,CAAC,EAAE,EAAI,CAAC,CACjC,EAAO,UAAA,CAAW,SAAA,CAAY,EAAc,IAA5C,CACA,EAAO,UAAU,CAAC,EAAE,CAAC,SAAA,CAOtB,AAAA,CAAA,CACH,WAAY,eACZ,UAAW,iBACX,KAAM,eACV,CAAA,CAAC,CAXmD,EAAc,MAA1D,CAWC,CAVD,EAAyB,WAAA,CAAY,EACzC,CACJ,CACF,CAUA,wBAAwB,gBAAA,CAAiB,QAAS,WAClD,SAAS,cAAA,CAAe,gBAAgB,SAAA,CAAY,GACpD,KAAK,OAAA,CAAQ,E,G,qC","sources":["<anon>","referral.js"],"sourcesContent":["(function () {\nasync function $a7b7692d7c6b353d$var$main() {\n    if (!user.current.referralData?.referralCode) return location.href = \"/private\";\n    document.getElementById(\"referralCode\").innerText = user.current.referralData.referralCode;\n    if (user.current?.referralData?.referredUsers?.length > 0) {\n        document.getElementById(\"topStats\").classList.add(\"animatedBackground\");\n        document.getElementById(\"invitedFriends\").innerText = user.current.referralData.referredUsers.length;\n        document.getElementById(\"topStatsDiv\").style.display = \"flex\";\n        document.getElementById(\"referralDetails\").style.display = \"block\";\n        firebase.app().functions(\"europe-west1\").httpsCallable(\"referralStats\")().then((referralStatsResponse)=>{\n            const referralStats = referralStatsResponse.data;\n            document.getElementById(\"nextFreePill\").style.display = referralStats.freeSells > referralStats.usedFreeSells ? \"block\" : \"none\";\n            document.getElementById(\"freeSells\").innerText = referralStats.freeSells;\n            document.getElementById(\"usedFreeSells\").innerText = referralStats.usedFreeSells;\n            document.getElementById(\"availableFreeSells\").innerText = `/${referralStats.freeSells}`;\n        });\n        const referredUserStatsResponse = await firebase.app().functions(\"europe-west1\").httpsCallable(\"referredUserStats\")();\n        const referredUserStats = referredUserStatsResponse.data;\n        document.getElementById(\"soldItems\").innerText = `${referredUserStats.soldItems}`;\n        // https://supermiljobloggen.se/nyheter/secondhand-200-ganger-mindre-klimatskadligt-an-nyproducerat/\n        // 1 plagg orsakar 10 kg CO2 (2-17), och köpa begagnat orsakar 10/200 kg = 0.02kg så i genomsnitt 10kg sparat/plagg\n        document.getElementById(\"savedCo2\").innerText = (referredUserStats.soldItems * 10 / 1000).toLocaleString(\"sv\");\n        document.getElementById(\"invitesRegistered\").innerText = referredUserStats.users?.length;\n        document.getElementById(\"invitesAddedItems\").innerText = referredUserStats.users?.filter((usr)=>usr.status === \"activated\" || usr.status === \"sold\").length;\n        document.getElementById(\"invitesSoldItems\").innerText = referredUserStats.users?.filter((usr)=>usr.status === \"sold\").length;\n        const invitedFriendRow = document.getElementById(\"invitedFriendRow\");\n        const invitedFriendStatusesDiv = document.getElementById(\"invitedFriendStatusesDiv\");\n        invitedFriendStatusesDiv.innerHTML = \"\";\n        for (const [idx, invitedFriend] of referredUserStats.users?.entries() || []){\n            const newRow = invitedFriendRow.cloneNode(true);\n            newRow.id = `${newRow.id}_${idx}`;\n            newRow.firstChild.innerText = invitedFriend.name;\n            newRow.childNodes[1].innerText = $a7b7692d7c6b353d$var$statusText(invitedFriend.status);\n            invitedFriendStatusesDiv.appendChild(newRow);\n        }\n    }\n}\nfunction $a7b7692d7c6b353d$var$statusText(status) {\n    return ({\n        registered: \"Skapat konto\",\n        activated: \"Lagt upp plagg\",\n        sold: \"S\\xe5lt plagg\"\n    })[status];\n}\nshareReferralLinkButton.addEventListener(\"click\", shareCode);\ndocument.getElementById(\"referralCode\").innerText = \"\";\nuser.whenSet($a7b7692d7c6b353d$var$main);\n\n})();\n//# sourceMappingURL=referral.js.map\n","async function main() {\n  if (!user.current.referralData?.referralCode) {\n      return location.href = '/private';\n  }\n  document.getElementById('referralCode').innerText = user.current.referralData.referralCode;\n  if (user.current?.referralData?.referredUsers?.length > 0) {\n      document.getElementById('topStats').classList.add(\"animatedBackground\");\n      document.getElementById('invitedFriends').innerText = user.current.referralData.referredUsers.length;\n      document.getElementById('topStatsDiv').style.display = 'flex';\n      document.getElementById('referralDetails').style.display = 'block';\n      firebase.app().functions(\"europe-west1\").httpsCallable('referralStats')().then(referralStatsResponse => {\n        const referralStats = referralStatsResponse.data;\n        document.getElementById('nextFreePill').style.display = referralStats.freeSells > referralStats.usedFreeSells ? 'block' : 'none';\n        document.getElementById('freeSells').innerText = referralStats.freeSells;\n        document.getElementById('usedFreeSells').innerText = referralStats.usedFreeSells;\n        document.getElementById('availableFreeSells').innerText = `/${referralStats.freeSells}`;\n      });\n      const referredUserStatsResponse = await firebase.app().functions(\"europe-west1\").httpsCallable('referredUserStats')();\n      const referredUserStats = referredUserStatsResponse.data;\n      document.getElementById('soldItems').innerText = `${referredUserStats.soldItems}`;\n      // https://supermiljobloggen.se/nyheter/secondhand-200-ganger-mindre-klimatskadligt-an-nyproducerat/\n      // 1 plagg orsakar 10 kg CO2 (2-17), och köpa begagnat orsakar 10/200 kg = 0.02kg så i genomsnitt 10kg sparat/plagg\n      document.getElementById('savedCo2').innerText = (referredUserStats.soldItems * 10 / 1000).toLocaleString('sv');\n      \n      document.getElementById('invitesRegistered').innerText = referredUserStats.users?.length\n      document.getElementById('invitesAddedItems').innerText = referredUserStats.users?.filter(usr => usr.status === 'activated' || usr.status === 'sold').length;\n      document.getElementById('invitesSoldItems').innerText = referredUserStats.users?.filter(usr => usr.status === 'sold').length;\n      const invitedFriendRow = document.getElementById('invitedFriendRow');\n      const invitedFriendStatusesDiv = document.getElementById('invitedFriendStatusesDiv');\n      invitedFriendStatusesDiv.innerHTML = '';\n      for (const [idx, invitedFriend] of (referredUserStats.users?.entries() || [])) {\n          const newRow = invitedFriendRow.cloneNode(true);\n          newRow.id = `${newRow.id}_${idx}`;\n          newRow.firstChild.innerText = invitedFriend.name;\n          newRow.childNodes[1].innerText = statusText(invitedFriend.status);\n          invitedFriendStatusesDiv.appendChild(newRow);\n      }\n  }\n}\n\nfunction statusText(status) {\n  return {\n      registered: 'Skapat konto',\n      activated: 'Lagt upp plagg',\n      sold: 'Sålt plagg'\n  }[status];\n}\n\nshareReferralLinkButton.addEventListener('click', shareCode);\ndocument.getElementById('referralCode').innerText = '';\nuser.whenSet(main);\n"],"names":["$a7b7692d7c6b353d$var$main","user","current","referralData","referralCode","location","href","document","getElementById","innerText","referredUsers","length","classList","add","style","display","firebase","app","functions","httpsCallable","then","referralStatsResponse","referralStats","data","freeSells","usedFreeSells","referredUserStatsResponse","referredUserStats","soldItems","toLocaleString","users","filter","usr","status","invitedFriendRow","invitedFriendStatusesDiv","idx","invitedFriend","innerHTML","entries","newRow","cloneNode","id","firstChild","name","childNodes","registered","activated","sold","appendChild","shareReferralLinkButton","addEventListener","shareCode","whenSet"],"version":3,"file":"referral.js.map"}