!function(){async function e(e){itemEventsDiv.innerHTML="";let i=await fetch(`https://europe-west3-second-hand-helper.cloudfunctions.net/itemEvents/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),a=await i.json();if(console.log(a),itemAddedEventExists=!1,a){for(let e=0;e<a.length;e++){let i=a[e];"itemAdded"===i.type&&(itemAddedEventExists=!0);// Build lists...
let n=e===a.length-1?"highlighted":"",d=function(e,i){let a="",n='<div class="div-block-143"></div>';"highlighted"===i&&(a="highlighted-event",n='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/62c53fa9db6d0f383ee430f9_check-mark%202%20(1).svg" loading="lazy" width="auto" alt="">');let d="block",r=new Date(e.timestamp),s=10>r.getMinutes()?"0"+r.getMinutes():r.getMinutes(),l=10>r.getHours()?"0"+r.getHours():r.getHours(),o=["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r","S\xf6n"][r.getDay()]+" "+l+":"+s;if(Math.round((new Date().getTime()-r.getTime())/864e5)>6&&(o=r.getDate()+" "+["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][r.getMonth()]+" "+l+":"+s),"itemAdded"===e.type)return t("none",n,a,"Plagg lades upp p\xe5 Mai",o);if("valuationCompleted"===e.type)return t(d,n,a,`V\xe4rderades till ${e.data.min}-${e.data.max} kr`,o);if("valuationAccepted"===e.type)return t(d,n,a,`Du accepterade v\xe4rderingen`,o);if("valuationFinalOffer"===e.type)return t(d,n,a,`Omv\xe4rderades till ${e.data.min}-${e.data.max} kr`,o);if("itemPublished"===e.type)return t(d,n,a,`F\xf6rs\xe4ljning p\xe5b\xf6rjades`,o);if("priceAdjusted"===e.type){let{platform:i,newPrice:r}=e.data,s=i&&i.charAt(0).toUpperCase()+i.slice(1).split(/(?=[A-Z])/).join(" ");return t(d,n,a,`Pris s\xe4nktes till ${r} kr ${i&&""!==i?" p\xe5 "+s:""}`,o)}if("priceRequestSent"===e.type)return t(d,n,a,`Nytt prisf\xf6rslag p\xe5 ${e.data.min}-${e.data.max} kr`,o);if("priceRequestResponse"===e.type){if("Accepted"===e.data.response)return t(d,n,a,`Du accepterade prisf\xf6rslaget`,o);if("Denied"===e.data.response)return t(d,n,a,`Du avb\xf6jde prisf\xf6rslaget`,o)}return"listingRenewal"===e.type?t(d,n,a,`Annonser f\xf6rnyades`,o):"platformAdded"===e.type?(e.data.platforms||[]).filter(e=>"Google Shopping"!==e&&"Instagram Shop"!==e&&"Facebook Shop"!==e).map(e=>t(d,n,a,`Publicerades p\xe5 ${e}${"Mai Shop"===e?"<br>(Google Shopping, Instagram Shop, Facebook Shop)":""}`,o)).join("\n"):"itemSold"===e.type?t(d,n,a,`S\xe5ld f\xf6r ${e.data.soldPrice} kr till ${e.data.buyerFirstName} i ${e.data.buyerAddressCity}`,o):"bagSentToSeller"===e.type?t(d,n,a,`Fraktp\xe5se skickades till dig`,o):"itemSent"===e.type?t(d,n,a,`Plagget skickades iv\xe4g`,o):"payoutCompleted"===e.type?t(d,n,a,`Du fick ${e.data.amount} kr utbetalt`,o):"valuationUserAdjusted"===e.type&&t(d,n,a,`Du justerade v\xe4rderingen till ${e.data.min}-${e.data.max} kr`,o)}(i,n);if(d){let e=itemEventsDiv.innerHTML;itemEventsDiv.innerHTML=d.concat(e)}}itemEventsDiv.style.display="block",itemEventsLoadingDiv.style.display="none",itemAddedEventExists||(sellingProcessDiv.style.display="none")}}function t(e,t,i,a,n){return`<div class="div-block-135"><div class="div-block-144"><div class="div-block-142">
                        <div class="div-block-139" style="display: ${e};"></div>
                        </div>
                        <div class="div-block-138">${t}</div>
                        </div>
                    <div class="div-block-136">
                        <div class="item-event-text ${i}">${a}</div>
                        <div class="text-block-82">${n}</div>
                    </div></div>`}editItemLink.addEventListener("click",function(){location.href=`/edit-item?id=${params.id}`}),// Load item
function(e){db.collection("items").doc(e).get().then(e=>{if(e.exists){console.log("Item data:",e.data()),data=e.data();let t=e.id,i=data.brand,a=data.infoRequests,n=itemCoverImage(data),d=data.status,r=data.category?data.category:"",s=data.longerPeriodAcceptedDate,l="",o=data.publishedDate,p="";if(data.publishedDate){o=new Date(o);let e=Math.round((s?60:30)-(new Date().getTime()-o.getTime())/864e5);p=e<=0?"0 dagar kvar":`${e} dagar kvar`}let c=data.minPriceEstimate,g=data.maxPriceEstimate,u=c&&g?`${c}-${g} kr`:"";data.soldPrice;let x=data.sellerGets,m=data.payoutStatus,v=data.shippingStatus,f="",y="";"New"===d&&(a?.price?.status==="Active"?(l=`Inv\xe4ntar ditt svar`,f="P\xe5 huvudsidan kan du se plaggets v\xe4rdering och<br>v\xe4lja om du vill s\xe4lja till v\xe4rderingen eller inte."):c&&g?(l=`F\xf6rbereds`,f="F\xf6rbereder det sista inf\xf6r publicering.<br>Du f\xe5r ett SMS n\xe4r f\xf6rs\xe4ljningen p\xe5b\xf6rjas.",y=u):(l=`V\xe4rdering p\xe5g\xe5r`,f="Du f\xe5r ett SMS n\xe4r v\xe4rderingen \xe4r klar.<br>V\xe4rderingen tar normalt 2 vardagar.")),"Published"===d&&c&&g&&(l=`F\xf6rs\xe4ljning p\xe5g\xe5r`,f=p,y=u),"Sold"===d&&(l=`S\xe5ld!`,itemStatusText.style.fontSize="18px",itemStatusText.style.fontWeight="500",f="Payed"===m?"":"Utbetalning kommer via Swish inom en dag","Not sent"===v&&(f="Utbetalning sker n\xe4r du skickat plagget",toShipItemLink.href=window.location.origin+`/ship-item?id=${t}`,toShipItemLink.style.display="flex"),sellerGetsTitle.innerHTML="Payed"===m?"Du fick":"Du f\xe5r",sellerGetsText.innerHTML=`${x} kr`,sellerGetsDiv.style.display="flex"),itemBrandText.innerHTML=i,itemCategoryText.innerHTML=r,pageTitleDiv.style.display="flex",coverImageDiv.style.backgroundImage=`url('${n}')`,itemStatusText.innerHTML=l,itemText1.innerHTML=f,itemText2.innerHTML=y,itemDiv.style.display="block",loadingDiv.style.display="none"}}).catch(e=>{console.log("Error getting item document:",e),errorHandler.report(e)})}(params.id),e(params.id)}();//# sourceMappingURL=itemPage.js.map

//# sourceMappingURL=itemPage.js.map
