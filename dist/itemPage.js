!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(e,t,n,r,i){/* eslint-disable no-undef */var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof a[r]&&a[r],l=s.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function o(t,n){if(!l[t]){if(!e[t]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var i="function"==typeof a[r]&&a[r];if(!n&&i)return i(t,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(s)return s(t,!0);// Try the node require function if it exists.
if(d&&"string"==typeof t)return d(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}m.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},m.cache={};var c=l[t]=new o.Module(t);e[t][0].call(c.exports,m,c,c.exports,this)}return l[t].exports;function m(e){var t=m.resolve(e);return!1===t?{}:o(t)}}o.isParcelRequire=!0,o.Module=function(e){this.id=e,this.bundle=o,this.exports={}},o.modules=e,o.cache=l,o.parent=s,o.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(o,"root",{get:function(){return a[r]}}),a[r]=o;for(var u=0;u<t.length;u++)o(t[u]);if(n){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var c=o(n);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):i&&(this[i]=c)}}({"8ivRG":[function(e,t,n){var r=e("./general");let i=getParamsObject();if(i.app){let e=document.querySelectorAll(".goback");e.forEach(e=>{e.style.visibility="hidden"})}async function a(e){let t=await callBackendApi(`/api/items/${e}`);if(!t.data)return null;let n=t.data;console.log("Item data:",n);let i=n.infoRequests,a=n.category?n.category:"",s="",l=n.publishedDate,d="";if(n.publishedDate){l=new Date(l);let e=new Date,t=e.getTime()-l.getTime(),r=n.longerPeriodAcceptedDate?60:30,i=Math.max(0,Math.round(r-t/864e5));d=`${i} ${1===i?"dag":"dagar"} kvar`}let o=n.minPriceEstimate,u=n.maxPriceEstimate,c=o&&u?`${o}-${u} kr`:"",m="",p="";if("New"===n.status&&(i?.price?.status==="Active"?(s=`Inv\xe4ntar ditt svar`,m="P\xe5 huvudsidan kan du se plaggets v\xe4rdering och<br>v\xe4lja om du vill s\xe4lja till v\xe4rderingen eller inte."):o&&u?(s=`F\xf6rbereds`,m="F\xf6rbereder det sista inf\xf6r publicering.<br>F\xf6rs\xe4ljningen p\xe5b\xf6rjas inom kort.",p=c):(s=`V\xe4rdering p\xe5g\xe5r`,m="Du f\xe5r ett SMS n\xe4r v\xe4rderingen \xe4r klar.<br>V\xe4rderingen tar normalt 2 vardagar."),editItemLink.style.display="block"),"Published"===n.status&&o&&u){s=`F\xf6rs\xe4ljning p\xe5g\xe5r`,m=d,p=c,n.currentPrice&&(document.getElementById("itemCurrentPrice").innerText=Math.min(n.userSetCurrentPrice||n.currentPrice,n.currentPrice),document.getElementById("itemCurrentPriceDiv").style.display="flex"),editItemLink.style.display="block";let e=(n.platformListings?.maiShop?.views||0)+(n.platformListings?.tradera?.views||0),t=(n.platformListings?.maiShop?.likes||0)+(n.platformListings?.tradera?.likes||0);(e>0||t>0)&&(viewsCount.innerHTML=e,likesCount.innerHTML=t,viewsAndLikesDiv.style.display="flex")}if("Sold"===n.status){let t="Trusted"!==user.current.trustedSellerStatus;s=`S\xe5ld!`,t?m="Du f\xe5r betalt 5 dagar efter att k\xf6paren h\xe4mtat ut plagget, och ingen reklamation har skett.":"Payed"!==n.payoutStatus&&(m="Brand Gift Card"===n.payoutType?`Ditt presentkort p\xe5 ${n.cleanedBrand} skapas inom en dag`:"Mai Resale Gift Card"===n.payoutType?"Dina Mai Shop Credits betalas ut inom en dag":"Utbetalning kommer via Swish inom en dag"),"Not sent"===n.shippingStatus?(toShipItemLink.href=window.location.origin+`/ship-item?id=${e}`,toShipItemLink.style.display="flex"):(console.log("data.saleApprovalStatus",n.saleApprovalStatus),t&&(n.saleApprovalStatus&&"Pending"!==n.saleApprovalStatus?n?.reclaim?.status==="Approved"&&"Seller"===n.refundResponsible&&("Collected"===n.returnShippingStatus?(s="Returnerat",m="Plagget har returnerats till dig."):n.returnPostnordShipmentId&&(s="P\xe5 v\xe4g tillbaka till dig",m="Plagget reklamerades och \xe4r nu p\xe5 v\xe4g tillbaka till dig",toTrackReturnLink.href=`https://tracking.postnord.com/se/tracking?id=${n.returnPostnordShipmentId}`,toTrackReturnLink.style.display="flex")):(s="Inv\xe4ntar godk\xe4nnande",toTrustedSellerArticleLink.style.display="flex"))),s.includes("S\xe5ld")&&(sellerGetsTitle.innerHTML="Payed"===n.payoutStatus?"Du fick":"Du f\xe5r",sellerGetsText.innerHTML=`${"Brand Gift Card"===n.payoutType?n.soldPrice:n.sellerGets} kr`,sellerGetsDiv.style.display="flex",itemStatusText.style.fontSize="18px",itemStatusText.style.fontWeight="500")}return itemBrandText.innerHTML=n.brand,itemCategoryText.innerHTML=a,pageTitleDiv.style.display="flex",coverImageDiv.style.backgroundImage=`url('${(0,r.itemCoverImage)(n)}')`,itemStatusText.innerHTML=s,itemText1.innerHTML=m,itemText2.innerHTML=p,itemDiv.style.display="block",loadingDiv.style.display="none",n}async function s(e,t){itemEventsDiv.innerHTML="";let n=await fetch(`https://europe-west3-second-hand-helper.cloudfunctions.net/itemEvents/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await n.json();console.log(r);let i=!1;if(r){for(let e=0;e<r.length;e++){let n=r[e];"itemAdded"===n.type&&(i=!0);// Build lists...
let a=e===r.length-1?"highlighted":"",s=function(e,t,n){console.log("event",e);let r="",i='<div class="div-block-143"></div>';"highlighted"===t&&(r="highlighted-event",i='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/62c53fa9db6d0f383ee430f9_check-mark%202%20(1).svg" loading="lazy" width="auto" alt="">'),"buyerFeedback"===e.type&&(i='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/67e417040dc69683fcf4b4c5_star-solid-yellow.svg" loading="lazy" width="auto" alt="">');let a="block",s=new Date(e.timestamp),d=10>s.getMinutes()?"0"+s.getMinutes():s.getMinutes(),o=10>s.getHours()?"0"+s.getHours():s.getHours(),u=["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r","S\xf6n"][s.getDay()]+" "+o+":"+d;if(Math.round((new Date().getTime()-s.getTime())/864e5)>6&&(u=s.getDate()+" "+["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][s.getMonth()]+" "+o+":"+d),"itemAdded"===e.type)return l("none",i,r,"Plagg lades upp p\xe5 Mai",u);if("valuationCompleted"===e.type)return l(a,i,r,`V\xe4rderades till ${e.data.min}-${e.data.max} kr`,u);if("valuationAccepted"===e.type)return l(a,i,r,`Du accepterade v\xe4rderingen`,u);if("valuationFinalOffer"===e.type)return l(a,i,r,`Omv\xe4rderades till ${e.data.min}-${e.data.max} kr`,u);if("itemPublished"===e.type)return l(a,i,r,`F\xf6rs\xe4ljning p\xe5b\xf6rjades`,u);if("priceAdjusted"===e.type){let{platform:t,newPrice:s}=e.data,d=t&&t.charAt(0).toUpperCase()+t.slice(1).split(/(?=[A-Z])/).join(" ");return n?.status==="Published"&&"Mai Shop"===d&&n?.platformListings?.maiShop?.url&&(console.log("item price",n.platformListings.maiShop,s),d=`<a href="${n?.platformListings?.maiShop?.url}" style="text-decoration: underline;" id="maiShopItemEventLink" target="_blank">${d}</a>`),l(a,i,r,`S\xe4nktes till ${s} kr${"tradera"===t?" i utropspris":""} ${t&&""!==t?" p\xe5 "+d:""}`,u)}if("priceStrategyApplied"===e.type){i='<img src="https://cdn.prod.website-files.com/6297d3d527db5dd4cf02e924/67e3dc5e1a697a2d9bd399f2_flash.svg" loading="lazy" width="17px" height="17px" style="margin-top: 3px; opacity: 0.86;" alt="">';let{priceStrategy:t}=e.data||{},n="";n="faster"===t?"Tidig prisjustering":"fastest"===t?"Snabbare prisjustering aktiverad":"Prisstrategi till\xe4mpades";let s=l(a,i,r,n,u);// Add clickable class and unique ID to the component
return s.replace('<div class="div-block-135">',`<div class="div-block-135 price-strategy-event" data-event-id="${e.timestamp}">`)}if("priceRequestSent"===e.type)return l(a,i,r,`Nytt prisf\xf6rslag p\xe5 ${e.data.min}-${e.data.max} kr`,u);if("priceRequestResponse"===e.type){if("Accepted"===e.data.response)return l(a,i,r,`Du accepterade prisf\xf6rslaget`,u);if("Denied"===e.data.response)return l(a,i,r,`Du avb\xf6jde prisf\xf6rslaget`,u)}return"listingRenewal"===e.type?l(a,i,r,`Annonser f\xf6rnyades`,u):"platformAdded"===e.type?(e.data.platforms||[]).filter(e=>"Google Shopping"!==e&&"Instagram Shop"!==e&&"Facebook Shop"!==e).map(e=>{let t=e;return"Mai Shop"===t&&(n?.status==="Published"&&n?.platformListings?.maiShop?.url&&(t=`<a href="${n?.platformListings?.maiShop?.url}" style="text-decoration: underline;" id="maiShopItemEventLink" target="_blank">${t}</a>`),t+="<br>(Google Shopping, Instagram Shop, Facebook Shop)"),l(a,i,r,`Publicerades p\xe5 ${t}`,u)}).join("\n"):"itemSold"===e.type?l(a,i,r,`S\xe5ld f\xf6r ${e.data.soldPrice} kr till ${e.data.buyerFirstName} i ${e.data.buyerAddressCity}`,u):"bagSentToSeller"===e.type?l(a,i,r,"Fraktetikett skickades till dig",u):"itemSent"===e.type?l(a,i,r,"Du skickade plagget",u):"payoutCompleted"===e.type?l(a,i,r,`Du fick ${e.data.amount} kr utbetalt`,u):"valuationUserAdjusted"===e.type?l(a,i,r,`Du justerade v\xe4rderingen till ${e.data.min}-${e.data.max} kr`,u):"itemDelivered"===e.type?l(a,i,r,`Levererad till k\xf6parens ombud`,u):"itemCollected"===e.type?l(a,i,r,`Upph\xe4mtat av k\xf6paren`,u):"saleApproved"===e.type?l(a,i,r,`F\xf6rs\xe4ljning godk\xe4nd`,u):"saleDeclined"===e.type?l(a,i,r,`F\xf6rs\xe4ljningen godk\xe4ndes inte`,u):"buyerFeedback"===e.type&&l(a,i,r,`Kommentar fr\xe5n k\xf6paren:
"${e.data.comment}"`,u)}(n,a,t);if(s){let e=itemEventsDiv.innerHTML;itemEventsDiv.innerHTML=s.concat(e)}}itemEventsDiv.style.display="block",itemEventsLoadingDiv.style.display="none";// Add event listeners for info icons
let e=itemEventsDiv.querySelectorAll(".event-info-icon");e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),o()})});// Add event listeners for price strategy events
let n=itemEventsDiv.querySelectorAll(".price-strategy-event");n.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),o()})}),i||(sellingProcessDiv.style.display="none")}}function l(e,t,n,r,i,a=!1){return`<div class="div-block-135"><div class="div-block-144"><div class="div-block-142">
                        <div class="div-block-139" style="display: ${e};"></div>
                        </div>
                        <div class="div-block-138">${t}</div>
                        </div>
                    <div class="div-block-136">
                        <div class="item-event-text ${n}">${r}${a&&a?'<img class="event-info-icon" src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/64a5c2b2484c893d82cdd2d4_info-icon-grey.svg" loading="lazy" alt="">':""}</div>
                        <div class="text-block-82">${i}</div>
                    </div></div>`}function d(){let e=getParamsObject();location.href=`/edit-item?id=${e.id}`}function o(){let e=document.querySelector(".event-info-modal");if(e){e.style.display="flex",// Close on backdrop click
e.addEventListener("click",t=>{t.target===e&&u()});// Close on close button click
let t=e.querySelector(".close-modal-btn");t&&t.addEventListener("click",u)}}function u(){let e=document.querySelector(".event-info-modal");e&&(e.style.display="none")}editItemLink.addEventListener("click",d),coverImageDiv.addEventListener("click",d),itemText2.addEventListener("click",d),itemCurrentPrice.addEventListener("click",d),authUser.whenSet(async()=>{let e=await a(i.id);s(i.id,e)})},{"./general":"1tOWF"}],"1tOWF":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),callBackendApi("/api/users/session",{method:"DELETE",requiresAuth:!1,fetchInit:{credentials:"include"}}).catch(e=>{errorHandler.report(e),console.warn("[SSO] Error clearing session cookie:",e)}),location.href="/"}).catch(e=>{errorHandler.report(e),console.log(e)})}function a(e){document.getElementById("addressFirstName").value=e.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=e.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=e.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=e.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=e.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=e.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=e.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function s(){let e=document.getElementById("addressFirstName").value,t=document.getElementById("addressLastName").value,n=document.getElementById("addressStreetAddress").value,r=document.getElementById("addressCO").value,i=document.getElementById("addressPostalCode").value,a=document.getElementById("addressCity").value,s=document.getElementById("addressDoorCode").value;return e=e?e.trim().charAt(0).toUpperCase()+e.trim().slice(1):"",t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",n=n?n.trim().charAt(0).toUpperCase()+n.trim().slice(1):"",r=r?r.trim():"",{addressFirstName:e,addressLastName:t,addressStreetAddress:n,addressCO:r,addressPostalCode:i=i?i.trim().replace(/\D/g,""):"",addressCity:a=a?a.trim().charAt(0).toUpperCase()+a.trim().slice(1):"",addressDoorCode:s=s?s.trim():""}}function l(e){// verify we got 10 digits, otherwise it is invalid
if(10!==(e=e.replace(/\D/g,"")// strip out all but digits
.split("")// convert string to array
.reverse()// reverse order for Luhn
.slice(0,10)).length)return!1;let t=e.map(e=>Number(e)).reduce((e,t,n)=>(n%2&&(t*=2),t>9&&(t-=9),e+t));return 0==t%10}function d(e){let t=e.replace("-","");return(12!==t.length&&("19"!==t.substring(0,2)||"20"!==t.substring(0,2))&&(t=99>=Number(t.substring(0,2))&&Number(t.substring(0,2))>25?"19"+t:"20"+t),12===t.length)?t:null}function o(e){if(e.images){let t=e.images;return t.modelImageSmall||t.modelImage||t.coverImageSmall||t.coverImage||t.enhancedFrontImageSmall||t.enhancedFrontImage||t.frontImageSmall||t.frontImage}if(e.imagesv2)for(let t of["modelImage","enhancedFrontImage","frontImage"]){let n=e.imagesv2.find(e=>e.name===t);if(n){if(n?.versions?.small)return n.versions.small;if(n?.versions?.medium)return n.versions.medium;if(n?.versions?.large)return n.versions.large;if(n.url)return n.url}}return null}function u(){let e;let t=user.current.referralData.referralCode;if(e=user.current?.maiCircle?"H\xe4r f\xe5r du en exklusiv inbjudan till Mai, som ger en extra fin start med tre kommissionsfria f\xf6rs\xe4ljningar.":"Jag bjuder in dig till Mai f\xf6r att s\xe4lja dina kl\xe4der! G\xe5 genom min l\xe4nk f\xf6r att f\xe5 en extra kommissionsfri f\xf6rs\xe4ljning.",navigator.share)navigator.share({text:e,url:`https://invite.maiapp.se/refer?invite=${t}`}).then(()=>{console.log("Thanks for sharing!")}).catch(e=>{console.error(e),errorHandler.report(e)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let n=e+"\n"+`https://invite.maiapp.se/refer?invite=${t}`;navigator.clipboard.writeText(n),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}function c(e){let t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;t?(document.getElementById("continueOnWebBottomSheet").href=window.location.origin+e,document.getElementById("darkOverlay").classList.add("active"),document.getElementById("channelBottomSheet").classList.add("active")):window.location.href=e}function m(){document.getElementById("darkOverlay").classList.remove("active"),document.getElementById("channelBottomSheet").classList.remove("active")}function p(e){let t=document.getElementById(e);t&&(// Set initial position below screen
t.style.transform="translateY(100%)",t.style.transition="transform 0.3s ease-out",t.style.display="block",// Animate to visible position
setTimeout(()=>{t.style.transform="translateY(0%)"},10),document.getElementById("darkOverlay").classList.add("active"))}function f(e){let t=document.getElementById(e);// Add the visibility check here
t&&"none"!==t.style.display&&(// Animate down and hide
t.style.transform="translateY(100%)",t.style.transition="transform 0.3s ease-in",// Hide after animation completes
setTimeout(()=>{t.style.display="none"},300),document.getElementById("darkOverlay").classList.remove("active"))}function g(e){let t=document.getElementById(e);if(t){t.style.display="none";// Check if there are any remaining visible cards
let e=document.getElementById("infoRequestsList");if(e){let t=e.querySelectorAll('[id^="infoRequest"]:not([style*="display: none"])');if(0===t.length){let e=document.getElementById("infoRequestsDiv");e&&(e.style.display="none")}}}}r.defineInteropFlag(n),r.export(n,"signOut",()=>i),r.export(n,"setFormAddressFields",()=>a),r.export(n,"getFormAddressFields",()=>s),// Validate Swedish Social Security Number (personnummer) using checksum
//   Note: this is somewhat simplified because it does not take into account
//   that the date of the number is valid (e.g. "000000-0000" does return as true)
r.export(n,"isValidSwedishSsn",()=>l),r.export(n,"formatPersonalId",()=>d),r.export(n,"itemCoverImage",()=>o),r.export(n,"shareCode",()=>u),// Channel bottom sheet
r.export(n,"channelRouter",()=>c),r.export(n,"hideChannelBottomSheet",()=>m),// End of channel bottom sheet
// Toast animation functions
r.export(n,"animateOpenToast",()=>p),r.export(n,"animateCloseToast",()=>f),r.export(n,"hideInfoRequestCard",()=>g)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}]},["8ivRG"],"8ivRG","parcelRequire81ca")//# sourceMappingURL=itemPage.js.map
;
//# sourceMappingURL=itemPage.js.map
