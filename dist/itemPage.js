!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(t,n,r,i,a){/* eslint-disable no-undef */var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof s[i]&&s[i],d=l.cache||{},o="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(n,r){if(!d[n]){if(!t[n]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var a="function"==typeof s[i]&&s[i];if(!r&&a)return a(n,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(l)return l(n,!0);// Try the node require function if it exists.
if(o&&"string"==typeof n)return o(n);var c=Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){var i=t[n][1][r];return null!=i?i:r},p.cache={};var m=d[n]=new u.Module(n);t[n][0].call(m.exports,p,m,m.exports,this)}return d[n].exports;function p(t){var n=p.resolve(t);return!1===n?{}:u(n)}}u.isParcelRequire=!0,u.Module=function(t){this.id=t,this.bundle=u,this.exports={}},u.modules=t,u.cache=d,u.parent=l,u.register=function(n,r){t[n]=[function(t,n){n.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return s[i]}}),s[i]=u;for(var c=0;c<n.length;c++)u(n[c]);if(r){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var m=u(r);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=m:"function"==typeof define&&define.amd?define(function(){return m}):a&&(this[a]=m)}}({"8ivRG":[function(t,n,r){var i=t("./general");let a=getParamsObject();if(a.app){let t=document.querySelectorAll(".goback");t.forEach(t=>{t.style.visibility="hidden"})}async function s(t){let n=await callBackendApi(`/api/items/${t}`);if(!n.data)return null;let r=n.data;console.log("Item data:",r);let a=r.infoRequests,s=r.category?r.category:"",l="",d=r.publishedDate,o="";if(r.publishedDate){d=new Date(d);let t=new Date,n=t.getTime()-d.getTime(),i=r.longerPeriodAcceptedDate?60:30,a=Math.max(0,Math.round(i-n/864e5));o=`${a} ${1===a?"dag":"dagar"} kvar`}let u=r.minPriceEstimate,c=r.maxPriceEstimate,m=u&&c?`${u}-${c} kr`:"",p="",f="";if("New"===r.status&&(a?.price?.status==="Active"?(l=`Inv\xe4ntar ditt svar`,p="P\xe5 huvudsidan kan du se plaggets v\xe4rdering och<br>v\xe4lja om du vill s\xe4lja till v\xe4rderingen eller inte."):u&&c?(l=`F\xf6rbereds`,p="F\xf6rbereder det sista inf\xf6r publicering.<br>F\xf6rs\xe4ljningen p\xe5b\xf6rjas inom kort.",f=m):(l=`V\xe4rdering p\xe5g\xe5r`,p="Du f\xe5r ett SMS n\xe4r v\xe4rderingen \xe4r klar.<br>V\xe4rderingen tar normalt 2 vardagar."),editItemLink.style.display="block"),"Published"===r.status&&u&&c){l=`F\xf6rs\xe4ljning p\xe5g\xe5r`,p=o,f=m,r.currentPrice&&(document.getElementById("itemCurrentPrice").innerText=Math.min(r.userSetCurrentPrice||r.currentPrice,r.currentPrice),document.getElementById("itemCurrentPriceDiv").style.display="flex"),editItemLink.style.display="block";let t=(r.platformListings?.maiShop?.views||0)+(r.platformListings?.tradera?.views||0),n=(r.platformListings?.maiShop?.likes||0)+(r.platformListings?.tradera?.likes||0);(t>0||n>0)&&(viewsCount.innerHTML=t,likesCount.innerHTML=n,viewsAndLikesDiv.style.display="flex")}if("Sold"===r.status){let n="Trusted"!==user.current.trustedSellerStatus;l=`S\xe5ld!`,n?p="Du f\xe5r betalt 5 dagar efter att k\xf6paren h\xe4mtat ut plagget, och ingen reklamation har skett.":"Payed"!==r.payoutStatus&&(p="Brand Gift Card"===r.payoutType?`Ditt presentkort p\xe5 ${r.cleanedBrand} skapas inom en dag`:"Mai Resale Gift Card"===r.payoutType?"Dina Mai Shop Credits betalas ut inom en dag":"Utbetalning kommer via Swish inom en dag"),"Not sent"===r.shippingStatus?(toShipItemLink.href=window.location.origin+`/ship-item?id=${t}`,toShipItemLink.style.display="flex"):(console.log("data.saleApprovalStatus",r.saleApprovalStatus),n&&(r.saleApprovalStatus&&"Pending"!==r.saleApprovalStatus?r?.reclaim?.status==="Approved"&&"Seller"===r.refundResponsible&&("Collected"===r.returnShippingStatus?(l="Returnerat",p="Plagget har returnerats till dig."):r.returnPostnordShipmentId&&(l="P\xe5 v\xe4g tillbaka till dig",p="Plagget reklamerades och \xe4r nu p\xe5 v\xe4g tillbaka till dig",toTrackReturnLink.href=`https://tracking.postnord.com/se/tracking?id=${r.returnPostnordShipmentId}`,toTrackReturnLink.style.display="flex")):(l="Inv\xe4ntar godk\xe4nnande",toTrustedSellerArticleLink.style.display="flex"))),l.includes("S\xe5ld")&&(sellerGetsTitle.innerHTML="Payed"===r.payoutStatus?"Du fick":"Du f\xe5r",sellerGetsText.innerHTML=`${"Brand Gift Card"===r.payoutType?r.soldPrice:r.sellerGets} kr`,sellerGetsDiv.style.display="flex",itemStatusText.style.fontSize="18px",itemStatusText.style.fontWeight="500")}return itemBrandText.innerHTML=r.brand,itemCategoryText.innerHTML=s,pageTitleDiv.style.display="flex",coverImageDiv.style.backgroundImage=`url('${(0,i.itemCoverImage)(r)}')`,itemStatusText.innerHTML=l,itemText1.innerHTML=p,itemText2.innerHTML=f,itemDiv.style.display="block",loadingDiv.style.display="none",r}async function l(t,n){itemEventsDiv.innerHTML="";let r=await fetch(`https://europe-west3-second-hand-helper.cloudfunctions.net/itemEvents/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await r.json();console.log(i);let a=!1;if(i){for(let t=0;t<i.length;t++){let r=i[t];"itemAdded"===r.type&&(a=!0);// Build lists...
let s=t===i.length-1?"highlighted":"",l=function(t,n,r){console.log("event",t);let i="",a='<div class="div-block-143"></div>';"highlighted"===n&&(i="highlighted-event",a='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/62c53fa9db6d0f383ee430f9_check-mark%202%20(1).svg" loading="lazy" width="auto" alt="">'),"buyerFeedback"===t.type&&(a='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/67e417040dc69683fcf4b4c5_star-solid-yellow.svg" loading="lazy" width="auto" alt="">');let s="block",l=new Date(t.timestamp),o=10>l.getMinutes()?"0"+l.getMinutes():l.getMinutes(),u=10>l.getHours()?"0"+l.getHours():l.getHours(),c=["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r","S\xf6n"][l.getDay()]+" "+u+":"+o;if(Math.round((new Date().getTime()-l.getTime())/864e5)>6&&(c=l.getDate()+" "+["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][l.getMonth()]+" "+u+":"+o),"itemAdded"===t.type)return d("none",a,i,"Plagg lades upp p\xe5 Mai",c);if("valuationCompleted"===t.type)return d(s,a,i,`V\xe4rderades till ${t.data.min}-${t.data.max} kr`,c);if("valuationAccepted"===t.type)return d(s,a,i,`Du accepterade v\xe4rderingen`,c);if("valuationFinalOffer"===t.type)return d(s,a,i,`Omv\xe4rderades till ${t.data.min}-${t.data.max} kr`,c);if("itemPublished"===t.type)return d(s,a,i,`F\xf6rs\xe4ljning p\xe5b\xf6rjades`,c);if("priceAdjusted"===t.type){let{platform:n,newPrice:l}=t.data,o=n&&n.charAt(0).toUpperCase()+n.slice(1).split(/(?=[A-Z])/).join(" ");return r?.status==="Published"&&"Mai Shop"===o&&r?.platformListings?.maiShop?.url&&(console.log("item price",r.platformListings.maiShop,l),o=`<a href="${r?.platformListings?.maiShop?.url}" style="text-decoration: underline;" id="maiShopItemEventLink" target="_blank">${o}</a>`),d(s,a,i,`S\xe4nktes till ${l} kr${"tradera"===n?" i utropspris":""} ${n&&""!==n?" p\xe5 "+o:""}`,c)}if("priceStrategyApplied"===t.type){a='<img src="https://cdn.prod.website-files.com/6297d3d527db5dd4cf02e924/67e3dc5e1a697a2d9bd399f2_flash.svg" loading="lazy" width="17px" height="17px" style="margin-top: 3px; opacity: 0.86;" alt="">';let{priceStrategy:n}=t.data||{},r="";r="faster"===n?"Tidig prisjustering":"fastest"===n?"Snabbare prisjustering aktiverad":"Prisstrategi till\xe4mpades";let l=d(s,a,i,r,c);// Add clickable class and unique ID to the component
return l.replace('<div class="div-block-135">',`<div class="div-block-135 price-strategy-event" data-event-id="${t.timestamp}">`)}if("priceRequestSent"===t.type)return d(s,a,i,`Nytt prisf\xf6rslag p\xe5 ${t.data.min}-${t.data.max} kr`,c);if("priceRequestResponse"===t.type){if("Accepted"===t.data.response)return d(s,a,i,`Du accepterade prisf\xf6rslaget`,c);if("Denied"===t.data.response)return d(s,a,i,`Du avb\xf6jde prisf\xf6rslaget`,c)}return"listingRenewal"===t.type?d(s,a,i,`Annonser f\xf6rnyades`,c):"platformAdded"===t.type?(t.data.platforms||[]).filter(t=>"Google Shopping"!==t&&"Instagram Shop"!==t&&"Facebook Shop"!==t).map(t=>{let n=t;return"Mai Shop"===n&&(r?.status==="Published"&&r?.platformListings?.maiShop?.url&&(n=`<a href="${r?.platformListings?.maiShop?.url}" style="text-decoration: underline;" id="maiShopItemEventLink" target="_blank">${n}</a>`),n+="<br>(Google Shopping, Instagram Shop, Facebook Shop)"),d(s,a,i,`Publicerades p\xe5 ${n}`,c)}).join("\n"):"itemSold"===t.type?d(s,a,i,`S\xe5ld f\xf6r ${t.data.soldPrice} kr till ${t.data.buyerFirstName} i ${t.data.buyerAddressCity}`,c):"bagSentToSeller"===t.type?d(s,a,i,"Fraktetikett skickades till dig",c):"itemSent"===t.type?d(s,a,i,"Du skickade plagget",c):"payoutCompleted"===t.type?d(s,a,i,`Du fick ${t.data.amount} kr utbetalt`,c):"valuationUserAdjusted"===t.type?d(s,a,i,`Du justerade v\xe4rderingen till ${t.data.min}-${t.data.max} kr`,c):"itemDelivered"===t.type?d(s,a,i,`Levererad till k\xf6parens ombud`,c):"itemCollected"===t.type?d(s,a,i,`Upph\xe4mtat av k\xf6paren`,c):"saleApproved"===t.type?d(s,a,i,`F\xf6rs\xe4ljning godk\xe4nd`,c):"saleDeclined"===t.type?d(s,a,i,`F\xf6rs\xe4ljningen godk\xe4ndes inte`,c):"buyerFeedback"===t.type&&d(s,a,i,`Kommentar fr\xe5n k\xf6paren:
"${t.data.comment}"`,c)}(r,s,n);if(l){let t=itemEventsDiv.innerHTML;itemEventsDiv.innerHTML=l.concat(t)}}itemEventsDiv.style.display="block",itemEventsLoadingDiv.style.display="none";// Add event listeners for info icons
let t=itemEventsDiv.querySelectorAll(".event-info-icon");t.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),u()})});// Add event listeners for price strategy events
let r=itemEventsDiv.querySelectorAll(".price-strategy-event");r.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),u()})}),a||(sellingProcessDiv.style.display="none")}}function d(t,n,r,i,a,s=!1){return`<div class="div-block-135"><div class="div-block-144"><div class="div-block-142">
                        <div class="div-block-139" style="display: ${t};"></div>
                        </div>
                        <div class="div-block-138">${n}</div>
                        </div>
                    <div class="div-block-136">
                        <div class="item-event-text ${r}">${i}${s&&s?'<img class="event-info-icon" src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/64a5c2b2484c893d82cdd2d4_info-icon-grey.svg" loading="lazy" alt="">':""}</div>
                        <div class="text-block-82">${a}</div>
                    </div></div>`}function o(){let t=getParamsObject();location.href=`/edit-item?id=${t.id}`}function u(){let t=document.querySelector(".event-info-modal");if(t){t.style.display="flex",// Close on backdrop click
t.addEventListener("click",n=>{n.target===t&&c()});// Close on close button click
let n=t.querySelector(".close-modal-btn");n&&n.addEventListener("click",c)}}function c(){let t=document.querySelector(".event-info-modal");t&&(t.style.display="none")}editItemLink.addEventListener("click",o),coverImageDiv.addEventListener("click",o),itemText2.addEventListener("click",o),itemCurrentPrice.addEventListener("click",o),authUser.whenSet(async()=>{let t=await s(a.id);l(a.id,t)})},{"./general":"1tOWF"}],"1tOWF":[function(t,n,r){var i=t("@parcel/transformer-js/src/esmodule-helpers.js");function a(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),callBackendApi("/api/users/session",{method:"DELETE",extraHeaders:{credentials:"include"}}).catch(t=>{errorHandler.report(t),console.warn("[SSO] Error clearing session cookie:",e)}),location.href="/"}).catch(t=>{errorHandler.report(t),console.log(t)})}function s(t){document.getElementById("addressFirstName").value=t.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=t.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=t.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=t.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=t.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=t.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=t.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function l(){let t=document.getElementById("addressFirstName").value,n=document.getElementById("addressLastName").value,r=document.getElementById("addressStreetAddress").value,i=document.getElementById("addressCO").value,a=document.getElementById("addressPostalCode").value,s=document.getElementById("addressCity").value,l=document.getElementById("addressDoorCode").value;return t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",n=n?n.trim().charAt(0).toUpperCase()+n.trim().slice(1):"",r=r?r.trim().charAt(0).toUpperCase()+r.trim().slice(1):"",i=i?i.trim():"",{addressFirstName:t,addressLastName:n,addressStreetAddress:r,addressCO:i,addressPostalCode:a=a?a.trim().replace(/\D/g,""):"",addressCity:s=s?s.trim().charAt(0).toUpperCase()+s.trim().slice(1):"",addressDoorCode:l=l?l.trim():""}}function d(t){// verify we got 10 digits, otherwise it is invalid
if(10!==(t=t.replace(/\D/g,"")// strip out all but digits
.split("")// convert string to array
.reverse()// reverse order for Luhn
.slice(0,10)).length)return!1;let n=t.map(t=>Number(t)).reduce((t,n,r)=>(r%2&&(n*=2),n>9&&(n-=9),t+n));return 0==n%10}function o(t){let n=t.replace("-","");return(12!==n.length&&("19"!==n.substring(0,2)||"20"!==n.substring(0,2))&&(n=99>=Number(n.substring(0,2))&&Number(n.substring(0,2))>25?"19"+n:"20"+n),12===n.length)?n:null}function u(t){if(t.images){let n=t.images;return n.modelImageSmall||n.modelImage||n.coverImageSmall||n.coverImage||n.enhancedFrontImageSmall||n.enhancedFrontImage||n.frontImageSmall||n.frontImage}if(t.imagesv2)for(let n of["modelImage","enhancedFrontImage","frontImage"]){let r=t.imagesv2.find(t=>t.name===n);if(r){if(r?.versions?.small)return r.versions.small;if(r?.versions?.medium)return r.versions.medium;if(r?.versions?.large)return r.versions.large;if(r.url)return r.url}}return null}function c(){let t;let n=user.current.referralData.referralCode;if(t=user.current?.maiCircle?"H\xe4r f\xe5r du en exklusiv inbjudan till Mai, som ger en extra fin start med tre kommissionsfria f\xf6rs\xe4ljningar.":"Jag bjuder in dig till Mai f\xf6r att s\xe4lja dina kl\xe4der! G\xe5 genom min l\xe4nk f\xf6r att f\xe5 en extra kommissionsfri f\xf6rs\xe4ljning.",navigator.share)navigator.share({text:t,url:`https://invite.maiapp.se/refer?invite=${n}`}).then(()=>{console.log("Thanks for sharing!")}).catch(t=>{console.error(t),errorHandler.report(t)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let r=t+"\n"+`https://invite.maiapp.se/refer?invite=${n}`;navigator.clipboard.writeText(r),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}function m(t){let n=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;n?(document.getElementById("continueOnWebBottomSheet").href=window.location.origin+t,document.getElementById("darkOverlay").classList.add("active"),document.getElementById("channelBottomSheet").classList.add("active")):window.location.href=t}function p(){document.getElementById("darkOverlay").classList.remove("active"),document.getElementById("channelBottomSheet").classList.remove("active")}function f(t){let n=document.getElementById(t);n&&(// Set initial position below screen
n.style.transform="translateY(100%)",n.style.transition="transform 0.3s ease-out",n.style.display="block",// Animate to visible position
setTimeout(()=>{n.style.transform="translateY(0%)"},10),document.getElementById("darkOverlay").classList.add("active"))}function g(t){let n=document.getElementById(t);// Add the visibility check here
n&&"none"!==n.style.display&&(// Animate down and hide
n.style.transform="translateY(100%)",n.style.transition="transform 0.3s ease-in",// Hide after animation completes
setTimeout(()=>{n.style.display="none"},300),document.getElementById("darkOverlay").classList.remove("active"))}function v(t){let n=document.getElementById(t);if(n){n.style.display="none";// Check if there are any remaining visible cards
let t=document.getElementById("infoRequestsList");if(t){let n=t.querySelectorAll('[id^="infoRequest"]:not([style*="display: none"])');if(0===n.length){let t=document.getElementById("infoRequestsDiv");t&&(t.style.display="none")}}}}i.defineInteropFlag(r),i.export(r,"signOut",()=>a),i.export(r,"setFormAddressFields",()=>s),i.export(r,"getFormAddressFields",()=>l),// Validate Swedish Social Security Number (personnummer) using checksum
//   Note: this is somewhat simplified because it does not take into account
//   that the date of the number is valid (e.g. "000000-0000" does return as true)
i.export(r,"isValidSwedishSsn",()=>d),i.export(r,"formatPersonalId",()=>o),i.export(r,"itemCoverImage",()=>u),i.export(r,"shareCode",()=>c),// Channel bottom sheet
i.export(r,"channelRouter",()=>m),i.export(r,"hideChannelBottomSheet",()=>p),// End of channel bottom sheet
// Toast animation functions
i.export(r,"animateOpenToast",()=>f),i.export(r,"animateCloseToast",()=>g),i.export(r,"hideInfoRequestCard",()=>v)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(t,n,r){r.interopDefault=function(t){return t&&t.__esModule?t:{default:t}},r.defineInteropFlag=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.exportAll=function(t,n){return Object.keys(t).forEach(function(r){"default"===r||"__esModule"===r||n.hasOwnProperty(r)||Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[r]}})}),n},r.export=function(t,n,r){Object.defineProperty(t,n,{enumerable:!0,get:r})}},{}]},["8ivRG"],"8ivRG","parcelRequire81ca")//# sourceMappingURL=itemPage.js.map
;
//# sourceMappingURL=itemPage.js.map
