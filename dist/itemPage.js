!function(){async function e(e){itemEventsDiv.innerHTML="";let a=await fetch(`https://europe-west3-second-hand-helper.cloudfunctions.net/itemEvents/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await a.json();if(console.log(i),itemAddedEventExists=!1,i){for(let e=0;e<i.length;e++){let a=i[e];"itemAdded"===a.type&&(itemAddedEventExists=!0);// Build lists...
let n=e===i.length-1?"highlighted":"",r=function(e,a){let i="",n='<div class="div-block-143"></div>';"highlighted"===a&&(i="highlighted-event",n='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/62c53fa9db6d0f383ee430f9_check-mark%202%20(1).svg" loading="lazy" width="auto" alt="">');let r="block",d=new Date(e.timestamp),l=10>d.getMinutes()?"0"+d.getMinutes():d.getMinutes(),s=10>d.getHours()?"0"+d.getHours():d.getHours(),o=["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r","S\xf6n"][d.getDay()]+" "+s+":"+l;if(Math.round((new Date().getTime()-d.getTime())/864e5)>6&&(o=d.getDate()+" "+["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][d.getMonth()]+" "+s+":"+l),"itemAdded"===e.type)return t("none",n,i,"Plagg lades upp p\xe5 Mai",o);if("valuationCompleted"===e.type)return t(r,n,i,`V\xe4rderades till ${e.data.min}-${e.data.max} kr`,o);if("valuationAccepted"===e.type)return t(r,n,i,`Du accepterade v\xe4rderingen`,o);if("valuationFinalOffer"===e.type)return t(r,n,i,`Omv\xe4rderades till ${e.data.min}-${e.data.max} kr`,o);if("itemPublished"===e.type)return t(r,n,i,`F\xf6rs\xe4ljning p\xe5b\xf6rjades`,o);if("priceAdjusted"===e.type){let{platform:a,newPrice:d}=e.data,l=a&&a.charAt(0).toUpperCase()+a.slice(1).split(/(?=[A-Z])/).join(" ");return t(r,n,i,`Pris s\xe4nktes till ${d} kr ${a&&""!==a?" p\xe5 "+l:""}`,o)}if("priceRequestSent"===e.type)return t(r,n,i,`Nytt prisf\xf6rslag p\xe5 ${e.data.min}-${e.data.max} kr`,o);if("priceRequestResponse"===e.type){if("Accepted"===e.data.response)return t(r,n,i,`Du accepterade prisf\xf6rslaget`,o);if("Denied"===e.data.response)return t(r,n,i,`Du avb\xf6jde prisf\xf6rslaget`,o)}return"listingRenewal"===e.type?t(r,n,i,`Annonser f\xf6rnyades`,o):"platformAdded"===e.type?(e.data.platforms||[]).filter(e=>"Google Shopping"!==e&&"Instagram Shop"!==e&&"Facebook Shop"!==e).map(e=>t(r,n,i,`Publicerades p\xe5 ${e}${"Mai Shop"===e?"<br>(Google Shopping, Instagram Shop, Facebook Shop)":""}`,o)).join("\n"):"itemSold"===e.type?t(r,n,i,`S\xe5ld f\xf6r ${e.data.soldPrice} kr till ${e.data.buyerFirstName} i ${e.data.buyerAddressCity}`,o):"bagSentToSeller"===e.type?t(r,n,i,`Fraktp\xe5se skickades till dig`,o):"itemSent"===e.type?t(r,n,i,`Plagget skickades iv\xe4g`,o):"payoutCompleted"===e.type?t(r,n,i,`Du fick ${e.data.amount} kr utbetalt`,o):"valuationUserAdjusted"===e.type&&t(r,n,i,`Du justerade v\xe4rderingen till ${e.data.min}-${e.data.max} kr`,o)}(a,n);if(r){let e=itemEventsDiv.innerHTML;itemEventsDiv.innerHTML=r.concat(e)}}itemEventsDiv.style.display="block",itemEventsLoadingDiv.style.display="none",itemAddedEventExists||(sellingProcessDiv.style.display="none")}}function t(e,t,a,i,n){return`<div class="div-block-135"><div class="div-block-144"><div class="div-block-142">
                        <div class="div-block-139" style="display: ${e};"></div>
                        </div>
                        <div class="div-block-138">${t}</div>
                        </div>
                    <div class="div-block-136">
                        <div class="item-event-text ${a}">${i}</div>
                        <div class="text-block-82">${n}</div>
                    </div></div>`}editItemLink.addEventListener("click",function(){let e=getParamsObject();location.href=`/edit-item?id=${e.id}`});// Load item
let a=getParamsObject();!function(e){db.collection("items").doc(e).get().then(e=>{if(e.exists){console.log("Item data:",e.data()),data=e.data();let t=e.id,a=data.brand,i=data.infoRequests,n=function(e){let t=e.images;return t.modelImage?t.modelImageSmall||t.modelImage:t.coverImage?t.coverImageSmall||t.coverImage:t.enhancedFrontImage?t.enhancedFrontImageSmall||t.enhancedFrontImage:t.frontImageSmall||t.frontImage}(data),r=data.status,d=data.category?data.category:"",l=data.longerPeriodAcceptedDate,s="",o=data.publishedDate,c="";if(data.publishedDate){o=new Date(o);let e=Math.round((l?60:30)-(new Date().getTime()-o.getTime())/864e5);c=e<=0?"0 dagar kvar":`${e} dagar kvar`}let g=data.minPriceEstimate,p=data.maxPriceEstimate,m=g&&p?`${g}-${p} kr`:"";data.soldPrice;let u=data.sellerGets,x=data.payoutStatus,v=data.shippingStatus,f="",y="";"New"===r&&(i?.price?.status==="Active"?(s=`Inv\xe4ntar ditt svar`,f="P\xe5 huvudsidan kan du se plaggets v\xe4rdering och<br>v\xe4lja om du vill s\xe4lja till v\xe4rderingen eller inte."):g&&p?(s=`F\xf6rbereds`,f="F\xf6rbereder det sista inf\xf6r publicering.<br>Du f\xe5r ett SMS n\xe4r f\xf6rs\xe4ljningen p\xe5b\xf6rjas.",y=m):(s=`V\xe4rdering p\xe5g\xe5r`,f="Du f\xe5r ett SMS n\xe4r v\xe4rderingen \xe4r klar.<br>V\xe4rderingen tar normalt 2 vardagar.")),"Published"===r&&g&&p&&(s=`F\xf6rs\xe4ljning p\xe5g\xe5r`,f=c,y=m),"Sold"===r&&(s=`S\xe5ld!`,itemStatusText.style.fontSize="18px",itemStatusText.style.fontWeight="500",f="Payed"===x?"":"Utbetalning kommer via Swish inom en dag","Not sent"===v&&(f="Utbetalning sker n\xe4r du skickat plagget",toShipItemLink.href=window.location.origin+`/ship-item?id=${t}`,toShipItemLink.style.display="flex"),sellerGetsTitle.innerHTML="Payed"===x?"Du fick":"Du f\xe5r",sellerGetsText.innerHTML=`${u} kr`,sellerGetsDiv.style.display="flex"),itemBrandText.innerHTML=a,itemCategoryText.innerHTML=d,pageTitleDiv.style.display="flex",coverImageDiv.style.backgroundImage=`url('${n}')`,itemStatusText.innerHTML=s,itemText1.innerHTML=f,itemText2.innerHTML=y,itemDiv.style.display="block",loadingDiv.style.display="none"}}).catch(e=>{console.log("Error getting item document:",e),errorHandler.report(e)})}(a.id),e(a.id)}();//# sourceMappingURL=itemPage.js.map

//# sourceMappingURL=itemPage.js.map
