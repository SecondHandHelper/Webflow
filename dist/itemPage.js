!function(e,t,r,n,i,a,s,l){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},d="function"==typeof o[n]&&o[n],u=d.i||{},c=d.cache||{},m="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function p(t,r){if(!c[t]){if(!e[t]){if(i[t])return i[t];var a="function"==typeof o[n]&&o[n];if(!r&&a)return a(t,!0);if(d)return d(t,!0);if(m&&"string"==typeof t)return m(t);var s=Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}u.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},u.cache={};var l=c[t]=new p.Module(t);e[t][0].call(l.exports,u,l,l.exports,o)}return c[t].exports;function u(e){var t=u.resolve(e);if(!1===t)return{};if(Array.isArray(t)){var r={__esModule:!0};return t.forEach(function(e){var t=e[0],n=e[1],i=e[2]||e[0],a=p(n);"*"===t?Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}):"*"===i?Object.defineProperty(r,t,{enumerable:!0,value:a}):Object.defineProperty(r,t,{enumerable:!0,get:function(){return"default"===i?a.__esModule?a.default:a:a[i]}})}),r}return p(t)}}p.isParcelRequire=!0,p.Module=function(e){this.id=e,this.bundle=p,this.require=m,this.exports={}},p.modules=e,p.cache=c,p.parent=d,p.distDir=void 0,p.publicUrl=void 0,p.devServer=void 0,p.i=u,p.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(p,"root",{get:function(){return o[n]}}),o[n]=p;for(var f=0;f<t.length;f++)p(t[f]);if(r){var g=p(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=g:"function"==typeof define&&define.amd&&define(function(){return g})}}({"8ivRG":[function(e,t,r,n){var i=e("./general");let a=getParamsObject();async function s(e){let t=await callBackendApi(`/api/items/${e}`);if(!t.data)return null;let r=t.data;console.log("Item data:",r);let n=r.infoRequests,a=r.category?r.category:"",s="",l=r.publishedDate,o="";if(r.publishedDate){l=new Date(l);let e=new Date().getTime()-l.getTime(),t=Math.max(0,Math.round((r.longerPeriodAcceptedDate?60:30)-e/864e5));o=`${t} ${1===t?"dag":"dagar"} kvar`}let d=r.minPriceEstimate,u=r.maxPriceEstimate,c=d&&u?`${d}-${u} kr`:"",m="",p="";if("New"===r.status&&(n?.price?.status==="Active"?(s=`Inv\xe4ntar ditt svar`,m="På huvudsidan kan du se plaggets värdering och<br>välja om du vill sälja till värderingen eller inte."):d&&u?(s=`F\xf6rbereds`,m="Förbereder det sista inför publicering.<br>Försäljningen påbörjas inom kort.",p=c):(s=`V\xe4rdering p\xe5g\xe5r`,m="Du får ett SMS när värderingen är klar.<br>Värderingen tar normalt 2 vardagar."),editItemLink.style.display="block"),"Published"===r.status&&d&&u){s=`F\xf6rs\xe4ljning p\xe5g\xe5r`,m=o,p=c,r.currentPrice&&(document.getElementById("itemCurrentPrice").innerText=Math.min(r.userSetCurrentPrice||r.currentPrice,r.currentPrice),document.getElementById("itemCurrentPriceDiv").style.display="flex"),editItemLink.style.display="block";let e=(r.platformListings?.maiShop?.views||0)+(r.platformListings?.tradera?.views||0),t=(r.platformListings?.maiShop?.likes||0)+(r.platformListings?.tradera?.likes||0);(e>0||t>0)&&(viewsCount.innerHTML=e,likesCount.innerHTML=t,viewsAndLikesDiv.style.display="flex")}if("Sold"===r.status){let t="Trusted"!==user.current.trustedSellerStatus;s=`S\xe5ld!`,t?m="Du får betalt 5 dagar efter att köparen hämtat ut plagget, och ingen reklamation har skett.":"Payed"!==r.payoutStatus&&(m="Brand Gift Card"===r.payoutType?`Ditt presentkort p\xe5 ${r.cleanedBrand} skapas inom en dag`:"Mai Resale Gift Card"===r.payoutType?"Dina Mai Shop Credits betalas ut inom en dag":"Utbetalning kommer via Swish inom en dag"),"Not sent"===r.shippingStatus?(toShipItemLink.href=window.location.origin+`/ship-item?id=${e}`,toShipItemLink.style.display="flex"):(console.log("data.saleApprovalStatus",r.saleApprovalStatus),t&&(r.saleApprovalStatus&&"Pending"!==r.saleApprovalStatus?r?.reclaim?.status==="Approved"&&"Seller"===r.refundResponsible&&("Collected"===r.returnShippingStatus?(s="Returnerat",m="Plagget har returnerats till dig."):r.returnPostnordShipmentId&&(s="På väg tillbaka till dig",m="Plagget reklamerades och är nu på väg tillbaka till dig",toTrackReturnLink.href=`https://tracking.postnord.com/se/tracking?id=${r.returnPostnordShipmentId}`,toTrackReturnLink.style.display="flex")):(s="Inväntar godkännande",toTrustedSellerArticleLink.style.display="flex"))),s.includes("Såld")&&(sellerGetsTitle.innerHTML="Payed"===r.payoutStatus?"Du fick":"Du får",sellerGetsText.innerHTML=`${"Brand Gift Card"===r.payoutType?r.soldPrice:r.sellerGets} kr`,sellerGetsDiv.style.display="flex",itemStatusText.style.fontSize="18px",itemStatusText.style.fontWeight="500")}return itemBrandText.innerHTML=r.brand,itemCategoryText.innerHTML=a,pageTitleDiv.style.display="flex",coverImageDiv.style.backgroundImage=`url('${(0,i.itemCoverImage)(r)}')`,itemStatusText.innerHTML=s,itemText1.innerHTML=m,itemText2.innerHTML=p,itemDiv.style.display="block",loadingDiv.style.display="none",r}async function l(e,t){itemEventsDiv.innerHTML="";let r=await fetch(`https://europe-west3-second-hand-helper.cloudfunctions.net/itemEvents/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await r.json();console.log(n);let i=!1;if(n){for(let e=0;e<n.length;e++){let r=n[e];"itemAdded"===r.type&&(i=!0);let a=function(e,t,r){console.log("event",e);let n="",i='<div class="div-block-143"></div>';"highlighted"===t&&(n="highlighted-event",i='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/62c53fa9db6d0f383ee430f9_check-mark%202%20(1).svg" loading="lazy" width="auto" alt="">'),"buyerFeedback"===e.type&&(i='<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/67e417040dc69683fcf4b4c5_star-solid-yellow.svg" loading="lazy" width="auto" alt="">');let a="block",s=new Date(e.timestamp),l=10>s.getMinutes()?"0"+s.getMinutes():s.getMinutes(),d=10>s.getHours()?"0"+s.getHours():s.getHours(),u=["Sön","Mån","Tis","Ons","Tor","Fre","Lör","Sön"][s.getDay()]+" "+d+":"+l;if(Math.round((new Date().getTime()-s.getTime())/864e5)>6&&(u=s.getDate()+" "+["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][s.getMonth()]+" "+d+":"+l),"itemAdded"===e.type)return o("none",i,n,"Plagg lades upp på Mai",u);if("valuationCompleted"===e.type)return o(a,i,n,`V\xe4rderades till ${e.data.min}-${e.data.max} kr`,u);if("valuationAccepted"===e.type)return o(a,i,n,`Du accepterade v\xe4rderingen`,u);if("valuationFinalOffer"===e.type)return o(a,i,n,`Omv\xe4rderades till ${e.data.min}-${e.data.max} kr`,u);if("itemPublished"===e.type)return o(a,i,n,`F\xf6rs\xe4ljning p\xe5b\xf6rjades`,u);if("priceAdjusted"===e.type){let{platform:t,newPrice:s}=e.data,l=t&&t.charAt(0).toUpperCase()+t.slice(1).split(/(?=[A-Z])/).join(" ");return r?.status==="Published"&&"Mai Shop"===l&&r?.platformListings?.maiShop?.url&&(console.log("item price",r.platformListings.maiShop,s),l=`<a href="${r?.platformListings?.maiShop?.url}" style="text-decoration: underline;" id="maiShopItemEventLink" target="_blank">${l}</a>`),o(a,i,n,`S\xe4nktes till ${s} kr${"tradera"===t?" i utropspris":""} ${t&&""!==t?" på "+l:""}`,u)}if("priceStrategyApplied"===e.type){i='<img src="https://cdn.prod.website-files.com/6297d3d527db5dd4cf02e924/67e3dc5e1a697a2d9bd399f2_flash.svg" loading="lazy" width="17px" height="17px" style="margin-top: 3px; opacity: 0.86;" alt="">';let{priceStrategy:t}=e.data||{};return o(a,i,n,"faster"===t?"Tidig prisjustering":"fastest"===t?"Snabbare prisjustering aktiverad":"Prisstrategi tillämpades",u).replace('<div class="div-block-135">',`<div class="div-block-135 price-strategy-event" data-event-id="${e.timestamp}">`)}if("priceRequestSent"===e.type)return o(a,i,n,`Nytt prisf\xf6rslag p\xe5 ${e.data.min}-${e.data.max} kr`,u);if("priceRequestResponse"===e.type){if("Accepted"===e.data.response)return o(a,i,n,`Du accepterade prisf\xf6rslaget`,u);else if("Denied"===e.data.response)return o(a,i,n,`Du avb\xf6jde prisf\xf6rslaget`,u)}return"listingRenewal"===e.type?o(a,i,n,`Annonser f\xf6rnyades`,u):"platformAdded"===e.type?(e.data.platforms||[]).filter(e=>"Google Shopping"!==e&&"Instagram Shop"!==e&&"Facebook Shop"!==e).map(e=>{let t=e;return"Mai Shop"===t&&(r?.status==="Published"&&r?.platformListings?.maiShop?.url&&(t=`<a href="${r?.platformListings?.maiShop?.url}" style="text-decoration: underline;" id="maiShopItemEventLink" target="_blank">${t}</a>`),t+="<br>(Google Shopping, Instagram Shop, Facebook Shop)"),o(a,i,n,`Publicerades p\xe5 ${t}`,u)}).join("\n"):"itemSold"===e.type?o(a,i,n,`S\xe5ld f\xf6r ${e.data.soldPrice} kr till ${e.data.buyerFirstName} i ${e.data.buyerAddressCity}`,u):"bagSentToSeller"===e.type?o(a,i,n,"Fraktetikett skickades till dig",u):"itemSent"===e.type?o(a,i,n,"Du skickade plagget",u):"payoutCompleted"===e.type?o(a,i,n,`Du fick ${e.data.amount} kr utbetalt`,u):"valuationUserAdjusted"===e.type?o(a,i,n,`Du justerade v\xe4rderingen till ${e.data.min}-${e.data.max} kr`,u):"itemDelivered"===e.type?o(a,i,n,`Levererad till k\xf6parens ombud`,u):"itemCollected"===e.type?o(a,i,n,`Upph\xe4mtat av k\xf6paren`,u):"saleApproved"===e.type?o(a,i,n,`F\xf6rs\xe4ljning godk\xe4nd`,u):"saleDeclined"===e.type?o(a,i,n,`F\xf6rs\xe4ljningen godk\xe4ndes inte`,u):"buyerFeedback"===e.type&&o(a,i,n,`Kommentar fr\xe5n k\xf6paren:
"${e.data.comment}"`,u)}(r,e===n.length-1?"highlighted":"",t);if(a){let e=itemEventsDiv.innerHTML;itemEventsDiv.innerHTML=a.concat(e)}}itemEventsDiv.style.display="block",itemEventsLoadingDiv.style.display="none",itemEventsDiv.querySelectorAll(".event-info-icon").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),u()})}),itemEventsDiv.querySelectorAll(".price-strategy-event").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),u()})}),i||(sellingProcessDiv.style.display="none")}}function o(e,t,r,n,i,a=!1){return`<div class="div-block-135"><div class="div-block-144"><div class="div-block-142">
                        <div class="div-block-139" style="display: ${e};"></div>
                        </div>
                        <div class="div-block-138">${t}</div>
                        </div>
                    <div class="div-block-136">
                        <div class="item-event-text ${r}">${n}${a&&a?'<img class="event-info-icon" src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/64a5c2b2484c893d82cdd2d4_info-icon-grey.svg" loading="lazy" alt="">':""}</div>
                        <div class="text-block-82">${i}</div>
                    </div></div>`}function d(){let e=getParamsObject();location.href=`/edit-item?id=${e.id}`}function u(){let e=document.querySelector(".event-info-modal");if(e){e.style.display="flex",e.addEventListener("click",t=>{t.target===e&&c()});let t=e.querySelector(".close-modal-btn");t&&t.addEventListener("click",c)}}function c(){let e=document.querySelector(".event-info-modal");e&&(e.style.display="none")}a.app&&document.querySelectorAll(".goback").forEach(e=>{e.style.visibility="hidden"}),editItemLink.addEventListener("click",d),coverImageDiv.addEventListener("click",d),itemText2.addEventListener("click",d),itemCurrentPrice.addEventListener("click",d),authUser.whenSet(async()=>{let e=await s(a.id);l(a.id,e)})},{"./general":"1tOWF"}],"1tOWF":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),location.href="/"}).catch(e=>{errorHandler.report(e),console.log(e)})}function s(e){document.getElementById("addressFirstName").value=e.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=e.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=e.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=e.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=e.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=e.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=e.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function l(){let e=document.getElementById("addressFirstName").value,t=document.getElementById("addressLastName").value,r=document.getElementById("addressStreetAddress").value,n=document.getElementById("addressCO").value,i=document.getElementById("addressPostalCode").value,a=document.getElementById("addressCity").value,s=document.getElementById("addressDoorCode").value;return e=e?e.trim().charAt(0).toUpperCase()+e.trim().slice(1):"",t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",r=r?r.trim().charAt(0).toUpperCase()+r.trim().slice(1):"",n=n?n.trim():"",i=i?i.trim().replace(/\D/g,""):"",{addressFirstName:e,addressLastName:t,addressStreetAddress:r,addressCO:n,addressPostalCode:i,addressCity:a=a?a.trim().charAt(0).toUpperCase()+a.trim().slice(1):"",addressDoorCode:s=s?s.trim():""}}function o(e){return 10===(e=e.replace(/\D/g,"").split("").reverse().slice(0,10)).length&&0==e.map(e=>Number(e)).reduce((e,t,r)=>(r%2&&(t*=2),t>9&&(t-=9),e+t))%10}function d(e){let t=e.replace("-","");return(12!==t.length&&("19"!==t.substring(0,2)||"20"!==t.substring(0,2))&&(t=99>=Number(t.substring(0,2))&&Number(t.substring(0,2))>25?"19"+t:"20"+t),12===t.length)?t:null}function u(e){if(e.images){let t=e.images;return t.modelImageSmall||t.modelImage||t.coverImageSmall||t.coverImage||t.enhancedFrontImageSmall||t.enhancedFrontImage||t.frontImageSmall||t.frontImage}if(e.imagesv2)for(let t of["modelImage","enhancedFrontImage","frontImage"]){let r=e.imagesv2.find(e=>e.name===t);if(r){if(r?.versions?.small)return r.versions.small;if(r?.versions?.medium)return r.versions.medium;if(r?.versions?.large)return r.versions.large;if(r.url)return r.url}}return null}function c(){let e,t=user.current.referralData.referralCode;if(e=user.current?.maiCircle?"Här får du en exklusiv inbjudan till Mai, som ger en extra fin start med tre kommissionsfria försäljningar.":"Jag bjuder in dig till Mai för att sälja dina kläder! Gå genom min länk för att få en extra kommissionsfri försäljning.",navigator.share)navigator.share({text:e,url:`https://invite.maiapp.se/refer?invite=${t}`}).then(()=>{console.log("Thanks for sharing!")}).catch(e=>{console.error(e),errorHandler.report(e)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let r=e+"\n"+`https://invite.maiapp.se/refer?invite=${t}`;navigator.clipboard.writeText(r),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}function m(e){var t;/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?(t=e,document.getElementById("continueOnWebBottomSheet").href=window.location.origin+t,document.getElementById("darkOverlay").classList.add("active"),document.getElementById("channelBottomSheet").classList.add("active")):window.location.href=e}function p(){document.getElementById("darkOverlay").classList.remove("active"),document.getElementById("channelBottomSheet").classList.remove("active")}function f(e){let t=document.getElementById(e);t&&(t.style.transform="translateY(100%)",t.style.transition="transform 0.3s ease-out",t.style.display="block",setTimeout(()=>{t.style.transform="translateY(0%)"},10),document.getElementById("darkOverlay").classList.add("active"))}function g(e){let t=document.getElementById(e);t&&"none"!==t.style.display&&(t.style.transform="translateY(100%)",t.style.transition="transform 0.3s ease-in",setTimeout(()=>{t.style.display="none"},300),document.getElementById("darkOverlay").classList.remove("active"))}function v(e){let t=document.getElementById(e);if(t){t.style.display="none";let e=document.getElementById("infoRequestsList");if(e&&0===e.querySelectorAll('[id^="infoRequest"]:not([style*="display: none"])').length){let e=document.getElementById("infoRequestsDiv");e&&(e.style.display="none")}}}i.defineInteropFlag(r),i.export(r,"signOut",()=>a),i.export(r,"setFormAddressFields",()=>s),i.export(r,"getFormAddressFields",()=>l),i.export(r,"isValidSwedishSsn",()=>o),i.export(r,"formatPersonalId",()=>d),i.export(r,"itemCoverImage",()=>u),i.export(r,"shareCode",()=>c),i.export(r,"channelRouter",()=>m),i.export(r,"hideChannelBottomSheet",()=>p),i.export(r,"animateOpenToast",()=>f),i.export(r,"animateCloseToast",()=>g),i.export(r,"hideInfoRequestCard",()=>v)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(e,t,r,n){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}]},["8ivRG"],"8ivRG","parcelRequire81ca",{});
//# sourceMappingURL=itemPage.js.map
