{"mappings":"C,A,kC;A,uC;A,E;A,2D;A,E;A,4D;A,wD;A,S,C,C,C,C,C,C,C,C,C,E,2B,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,0D;A,+D;A,8B;A,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,E,gE;A,6D;A,+D;A,gC;A,G,E,O,E,E,C,E,+C;A,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,I,C,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,qD;A,yE;A,I,E,E,E,Y;A,U,O,S,A,a,O,O,O,O,C,E,A,Y,O,Q,O,G,C,O,W,O,C,G,G,C,I,C,E,C,C,C,C,E,C,Q,C,S,C,C,C,C,C,ECCA,IAAM,EAAY,CAAC,CAAC,aAAe,SAAS,KAAO,IAAI,QAAU,GAAG,WAAa,IAAI,KAAO,GAAG,UAAY,CAAA,EAAM,QAAU,CAAA,EAAK,OAAS,gBAAgB,KAAO,WAAW,SAAW,CAAA,EAAM,OAAS,CAAA,EAAK,MAAQ,qEAAqE,EAAE,CAAC,QAAU,kBAAkB,WAAa,IAAI,UAAY,CAAA,EAAM,QAAU,CAAA,EAAM,OAAS,CAAA,EAAK,aAAe,SAAS,KAAO,IAAI,KAAO,GAAG,OAAS,gBAAgB,SAAW,OAAO,KAAO,KAAK,SAAW,CAAA,EAAK,MAAQ,kFAAkF,EAAE,CAAC,Q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","sources":["<anon>","lwl.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        this\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"2mRjC\":[function(require,module,exports) {\nconst WS_SERVER = \"wss://lwl-to-mai-heypmjzjfq-ey.a.run.app\";\nconst fbCookies = [\n    {\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"expires\": -1,\n        \"sourcePort\": 443,\n        \"size\": 75,\n        \"sameParty\": false,\n        \"session\": true,\n        \"domain\": \".facebook.com\",\n        \"name\": \"presence\",\n        \"httpOnly\": false,\n        \"secure\": true,\n        \"value\": \"C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1709677040691%2C%22v%22%3A1%7D\"\n    },\n    {\n        \"expires\": 1717453009.372352,\n        \"sourcePort\": 443,\n        \"sameParty\": false,\n        \"session\": false,\n        \"secure\": true,\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"size\": 82,\n        \"domain\": \".facebook.com\",\n        \"sameSite\": \"None\",\n        \"name\": \"fr\",\n        \"httpOnly\": true,\n        \"value\": \"1Q49ICUSijZ20nwbT.AWVLICBtB1ta5J8iCYUydGTMET8.Bl55nQ..AAA.0.0.Bl55nQ.AWXZXjvmXTg\"\n    },\n    {\n        \"expires\": 1741213009.372328,\n        \"sourcePort\": 443,\n        \"sameParty\": false,\n        \"session\": false,\n        \"secure\": true,\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"size\": 98,\n        \"domain\": \".facebook.com\",\n        \"sameSite\": \"None\",\n        \"name\": \"xs\",\n        \"httpOnly\": true,\n        \"value\": \"21%3AjHet3D7sHY-ahg%3A2%3A1709676989%3A-1%3A6776%3A%3AAcU_Zs1FzpmhVFi1OMuz3RNqhcuhFaxDSdNZDaY1lg\"\n    },\n    {\n        \"expires\": 1741213009.372166,\n        \"sourcePort\": 443,\n        \"sameParty\": false,\n        \"session\": false,\n        \"secure\": true,\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"size\": 21,\n        \"domain\": \".facebook.com\",\n        \"sameSite\": \"None\",\n        \"name\": \"c_user\",\n        \"httpOnly\": false,\n        \"value\": \"100000005802870\"\n    },\n    {\n        \"expires\": 1710281838,\n        \"sourcePort\": 443,\n        \"sameParty\": false,\n        \"session\": false,\n        \"secure\": true,\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"size\": 11,\n        \"domain\": \".facebook.com\",\n        \"sameSite\": \"None\",\n        \"name\": \"wd\",\n        \"httpOnly\": false,\n        \"value\": \"1920x1200\"\n    },\n    {\n        \"expires\": 1744236986.178777,\n        \"sourcePort\": 443,\n        \"sameParty\": false,\n        \"session\": false,\n        \"secure\": true,\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"size\": 5,\n        \"domain\": \".facebook.com\",\n        \"sameSite\": \"Lax\",\n        \"name\": \"ps_l\",\n        \"httpOnly\": true,\n        \"value\": \"0\"\n    },\n    {\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"expires\": 1744236986.17879,\n        \"sourcePort\": 443,\n        \"size\": 5,\n        \"sameParty\": false,\n        \"session\": false,\n        \"domain\": \".facebook.com\",\n        \"name\": \"ps_n\",\n        \"httpOnly\": true,\n        \"secure\": true,\n        \"value\": \"0\"\n    },\n    {\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"expires\": 1744236986.178708,\n        \"sourcePort\": 443,\n        \"size\": 28,\n        \"sameParty\": false,\n        \"session\": false,\n        \"domain\": \".facebook.com\",\n        \"name\": \"datr\",\n        \"httpOnly\": true,\n        \"secure\": true,\n        \"value\": \"t5nnZbm8Oi8Q97yMOBwn_YQ_\"\n    },\n    {\n        \"sourceScheme\": \"Secure\",\n        \"path\": \"/\",\n        \"expires\": 1744236993.430514,\n        \"sourcePort\": 443,\n        \"size\": 26,\n        \"sameParty\": false,\n        \"session\": false,\n        \"domain\": \".facebook.com\",\n        \"name\": \"sb\",\n        \"httpOnly\": true,\n        \"secure\": true,\n        \"value\": \"t5nnZde9cZWl0rpLdEEhz9jI\"\n    }\n];\ndocument.getElementById(\"doneButton\").addEventListener(\"click\", ()=>{\n    const lwlThreadUrl = document.getElementById(\"lwlThreadUrl\");\n    if (!lwlThreadUrl.value.length) {\n        console.log(\"No url thread given\");\n        return;\n    }\n    const webSocket = new WebSocket(WS_SERVER);\n    webSocket.addEventListener(\"open\", ()=>{\n        console.log(\"connected to lwl thread scraping server\");\n        webSocket.send(JSON.stringify({\n            fbCookies,\n            url: lwlThreadUrl.value\n        }));\n    });\n    webSocket.addEventListener(\"message\", async (event)=>{\n        document.getElementById(\"scrapeProgressDiv\").style.display = \"flex\";\n        console.log(\"received message from server\", event.data);\n        const message = JSON.parse(event.data);\n        document.getElementById(\"scrapeProgress\").innerText = message.status;\n        if (message.status.match(/done/i)) {\n            webSocket.close();\n            document.getElementById(\"scrapeProgress\").innerText = \"Skapar plagg i Mai med data h\\xe4mtade fr\\xe5n LWL\";\n            const draftItemResponse = await firebase.app().functions(\"europe-west3\").httpsCallable(\"createItemDraftsFromLwl\")({\n                itemData: {\n                    ...message.data,\n                    url: lwlThreadUrl\n                }\n            });\n            document.getElementById(\"scrapeProgressDiv\").style.display = \"none\";\n            if (draftItemResponse.data.length) showLwLDraftItems(draftItemResponse.data);\n        }\n    });\n});\nconst showLwLDraftItems = (draftItems)=>{\n    document.getElementById(\"lwlItemsDiv\").style.display = \"block\";\n    const itemCard = document.getElementById(\"lwlItemCard\");\n    const itemList = document.getElementById(\"lwlItemList\");\n    itemList.innerHTML = \"\";\n    for (const item of draftItems){\n        const newItemCard = itemCard.cloneNode(true);\n        newItemCard.id = item.id;\n        const frontImage = item.images?.enhancedFrontImageLarge || item.images?.enhancedFrontImage || item.images?.frontImageLarge || item.images?.frontImage;\n        if (frontImage) {\n            newItemCard.querySelector(\".img-container\").style.backgroundImage = `url(\"${frontImage}\")`;\n            newItemCard.querySelector(\".no-image-text\").style.display = \"none\";\n        } else newItemCard.querySelector(\".img-container\").style.display = \"none\";\n        newItemCard.querySelector(\".lwl-item-title\").innerText = `${item.cleanedBrand || item.brand?.trim()}`;\n        newItemCard.querySelector(\".lwl-item-subtext\").innerText = `${[\n            item.category,\n            item.maiSize\n        ].filter((i)=>i).join(\", \")}`;\n        itemList.appendChild(newItemCard);\n    }\n};\n\n},{}]},[\"2mRjC\"], \"2mRjC\", \"parcelRequire81ca\")\n\n//# sourceMappingURL=lwl.js.map\n","const WS_SERVER = 'wss://lwl-to-mai-heypmjzjfq-ey.a.run.app';\nconst fbCookies = [{\"sourceScheme\":\"Secure\",\"path\":\"/\",\"expires\":-1,\"sourcePort\":443,\"size\":75,\"sameParty\":false,\"session\":true,\"domain\":\".facebook.com\",\"name\":\"presence\",\"httpOnly\":false,\"secure\":true,\"value\":\"C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1709677040691%2C%22v%22%3A1%7D\"},{\"expires\":1717453009.372352,\"sourcePort\":443,\"sameParty\":false,\"session\":false,\"secure\":true,\"sourceScheme\":\"Secure\",\"path\":\"/\",\"size\":82,\"domain\":\".facebook.com\",\"sameSite\":\"None\",\"name\":\"fr\",\"httpOnly\":true,\"value\":\"1Q49ICUSijZ20nwbT.AWVLICBtB1ta5J8iCYUydGTMET8.Bl55nQ..AAA.0.0.Bl55nQ.AWXZXjvmXTg\"},{\"expires\":1741213009.372328,\"sourcePort\":443,\"sameParty\":false,\"session\":false,\"secure\":true,\"sourceScheme\":\"Secure\",\"path\":\"/\",\"size\":98,\"domain\":\".facebook.com\",\"sameSite\":\"None\",\"name\":\"xs\",\"httpOnly\":true,\"value\":\"21%3AjHet3D7sHY-ahg%3A2%3A1709676989%3A-1%3A6776%3A%3AAcU_Zs1FzpmhVFi1OMuz3RNqhcuhFaxDSdNZDaY1lg\"},{\"expires\":1741213009.372166,\"sourcePort\":443,\"sameParty\":false,\"session\":false,\"secure\":true,\"sourceScheme\":\"Secure\",\"path\":\"/\",\"size\":21,\"domain\":\".facebook.com\",\"sameSite\":\"None\",\"name\":\"c_user\",\"httpOnly\":false,\"value\":\"100000005802870\"},{\"expires\":1710281838,\"sourcePort\":443,\"sameParty\":false,\"session\":false,\"secure\":true,\"sourceScheme\":\"Secure\",\"path\":\"/\",\"size\":11,\"domain\":\".facebook.com\",\"sameSite\":\"None\",\"name\":\"wd\",\"httpOnly\":false,\"value\":\"1920x1200\"},{\"expires\":1744236986.178777,\"sourcePort\":443,\"sameParty\":false,\"session\":false,\"secure\":true,\"sourceScheme\":\"Secure\",\"path\":\"/\",\"size\":5,\"domain\":\".facebook.com\",\"sameSite\":\"Lax\",\"name\":\"ps_l\",\"httpOnly\":true,\"value\":\"0\"},{\"sourceScheme\":\"Secure\",\"path\":\"/\",\"expires\":1744236986.17879,\"sourcePort\":443,\"size\":5,\"sameParty\":false,\"session\":false,\"domain\":\".facebook.com\",\"name\":\"ps_n\",\"httpOnly\":true,\"secure\":true,\"value\":\"0\"},{\"sourceScheme\":\"Secure\",\"path\":\"/\",\"expires\":1744236986.178708,\"sourcePort\":443,\"size\":28,\"sameParty\":false,\"session\":false,\"domain\":\".facebook.com\",\"name\":\"datr\",\"httpOnly\":true,\"secure\":true,\"value\":\"t5nnZbm8Oi8Q97yMOBwn_YQ_\"},{\"sourceScheme\":\"Secure\",\"path\":\"/\",\"expires\":1744236993.430514,\"sourcePort\":443,\"size\":26,\"sameParty\":false,\"session\":false,\"domain\":\".facebook.com\",\"name\":\"sb\",\"httpOnly\":true,\"secure\":true,\"value\":\"t5nnZde9cZWl0rpLdEEhz9jI\"}];\ndocument.getElementById('doneButton').addEventListener('click', () => {\n  const lwlThreadUrl = document.getElementById('lwlThreadUrl');\n  if (!lwlThreadUrl.value.length) {\n    console.log('No url thread given');\n    return;\n  }\n  const webSocket = new WebSocket(WS_SERVER);\n  webSocket.addEventListener('open', () => {\n    console.log('connected to lwl thread scraping server');\n    webSocket.send(JSON.stringify({ fbCookies, url: lwlThreadUrl.value }));\n  });\n  webSocket.addEventListener('message', async (event) => {\n    document.getElementById('scrapeProgressDiv').style.display = 'flex';\n    console.log('received message from server', event.data);\n    const message = JSON.parse(event.data);\n    document.getElementById('scrapeProgress').innerText = message.status;\n    if (message.status.match(/done/i)) {\n      webSocket.close();\n      document.getElementById('scrapeProgress').innerText = 'Skapar plagg i Mai med data hämtade från LWL';\n      const draftItemResponse = await firebase.app().functions(\"europe-west3\").httpsCallable('createItemDraftsFromLwl')( {\n        itemData: { ...message.data, url: lwlThreadUrl }\n      });\n      document.getElementById('scrapeProgressDiv').style.display = 'none';\n      if (draftItemResponse.data.length) {\n        showLwLDraftItems(draftItemResponse.data);\n      }\n    }\n  });\n})\n\nconst showLwLDraftItems = (draftItems) => {\n  document.getElementById('lwlItemsDiv').style.display = 'block'\n  const itemCard = document.getElementById('lwlItemCard');\n  const itemList = document.getElementById('lwlItemList');\n  itemList.innerHTML = '';\n  for (const item of draftItems) {\n    const newItemCard = itemCard.cloneNode(true);\n    newItemCard.id = item.id;\n    const frontImage = item.images?.enhancedFrontImageLarge || item.images?.enhancedFrontImage || item.images?.frontImageLarge || item.images?.frontImage;\n    if (frontImage) {\n      newItemCard.querySelector('.img-container').style.backgroundImage = `url(\"${frontImage}\")`;\n      newItemCard.querySelector('.no-image-text').style.display = 'none';\n    } else {\n      newItemCard.querySelector('.img-container').style.display = 'none';\n    }\n    newItemCard.querySelector('.lwl-item-title').innerText = `${item.cleanedBrand || item.brand?.trim()}`;\n    newItemCard.querySelector('.lwl-item-subtext').innerText = `${[item.category, item.maiSize].filter(i => i).join(', ')}`;\n    itemList.appendChild(newItemCard);\n  }\n}\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","fbCookies","document","getElementById","addEventListener","lwlThreadUrl","value","console","log","webSocket","WebSocket","send","JSON","stringify","url","event","style","display","data","message","parse","innerText","status","match","close","draftItemResponse","firebase","app","functions","httpsCallable","itemData","showLwLDraftItems","draftItems","itemCard","itemList","item","innerHTML","newItemCard","cloneNode","frontImage","images","enhancedFrontImageLarge","enhancedFrontImage","frontImageLarge","querySelector","backgroundImage","cleanedBrand","brand","trim","category","maiSize","filter","join","appendChild"],"version":3,"file":"lwl.js.map"}