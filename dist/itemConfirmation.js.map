{"mappings":"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","sources":["<anon>","itemConfirmation.js"],"sourcesContent":["(function () {\nfunction $79f0a9680875480b$var$colorName(color) {\n    const mapping = {\n        Beige: \"Beige\",\n        Blue: \"Bl\\xe5\",\n        Brown: \"Brun\",\n        Green: \"Gr\\xf6n\",\n        Grey: \"Gr\\xe5\",\n        Yellow: \"Gul\",\n        Gold: \"Guld\",\n        Purple: \"Lila\",\n        Navy: \"Navy\",\n        Orange: \"Orange\",\n        Pink: \"Rosa\",\n        Red: \"R\\xf6d\",\n        Silver: \"Silver\",\n        Black: \"Svart\",\n        Turquoise: \"Turkos\",\n        Burgundy: \"Vinr\\xf6d\",\n        White: \"Vit\",\n        Multicolour: \"Flerf\\xe4rgad\"\n    };\n    return mapping[color] || color;\n}\nfunction $79f0a9680875480b$var$initializeFields(item) {\n    const { humanCheckNeeded: humanCheckNeeded, maxPriceEstimate: mlMaxPriceEstimate, newMinMaxLog: newMinMaxLog } = item.mlValuation || {};\n    if (item.infoRequests?.price?.response === \"User proposal\") {\n        document.getElementById(\"nextStepTitle\").style.display = \"block\";\n        document.getElementById(\"nextStepTitle\").innerText = \"Granskar pris\\xe4ndringar\";\n        document.getElementById(\"nextStepText\").innerText = \"Vi kikar p\\xe5 dina pris\\xe4ndringar, och om det ser bra ut s\\xe5 p\\xe5b\\xf6rjar vi f\\xf6rs\\xe4ljningen. Vi tar sedan hand om s\\xe4ljprocessen och h\\xf6r av oss p\\xe5 SMS n\\xe4r plagget \\xe4r s\\xe5lt.\";\n    } else if (humanCheckNeeded || !mlMaxPriceEstimate || newMinMaxLog) {\n        document.getElementById(\"nextStepTitle\").style.display = \"block\";\n        document.getElementById(\"nextStepText\").innerText = \"Du kommer f\\xe5 ett SMS n\\xe4r vi v\\xe4rderat plagget som du kan ta st\\xe4llning till\";\n    }\n    document.getElementById(\"itemTitle\").innerText = (item.cleanedBrand || item.brand).trim() + \"-\" + item.category.toLowerCase();\n    document.getElementById(\"itemPrice\").innerText = mlMaxPriceEstimate && !humanCheckNeeded && !newMinMaxLog ? `${item.maxPriceEstimate || mlMaxPriceEstimate} SEK` : \"\";\n    document.getElementById(\"itemPrice\").style.display = \"block\";\n    document.getElementById(\"itemSubtitle\").innerText = item.model ? `${item.model}, ${$79f0a9680875480b$var$colorName(item.color)}` : $79f0a9680875480b$var$colorName(item.color);\n    document.getElementById(\"itemSize\").innerText = item.size;\n    document.getElementById(\"itemMaterial\").innerText = item.material;\n    document.getElementById(\"itemCondition\").innerText = item.condition = $79f0a9680875480b$var$itemConditionText(item);\n    if (item.originalPrice) {\n        itemOriginalPrice.innerText = item.originalPrice + \" SEK\";\n        originalPriceDiv.style.display = \"flex\";\n    }\n    if (item.userComment) {\n        document.getElementById(\"itemComment\").innerText = item.userComment;\n        document.getElementById(\"itemCommentDiv\").style.display = \"block\";\n    }\n}\nfunction $79f0a9680875480b$var$initializePlatforms(item) {\n    if (item?.platformsToBePublishedOn?.length < 2) {\n        document.getElementById(\"platformsSection\").style.display = \"none\";\n        return;\n    }\n    const platformNode = document.getElementById(\"platformTradera\");\n    item.platformsToBePublishedOn.forEach((platform)=>{\n        if (platform.match(/Tradera/)) return; // Tradera is set statically in Webflow and always displayed\n        const newNode = platformNode.cloneNode(true);\n        newNode.id = platform;\n        newNode.innerText = platform;\n        platformNode.parentNode.appendChild(newNode);\n    });\n    document.getElementById(\"platformsLoadingDiv\").style.display = \"none\";\n    document.getElementById(\"platformsDiv\").style.display = \"block\";\n}\nfunction $79f0a9680875480b$var$itemConditionText(item) {\n    let conditionText = \"\";\n    if (item.condition === \"Anv\\xe4nd, tecken p\\xe5 slitage\" && (item.defects.length || item.defectDescription)) {\n        let defects = [];\n        if (item.defectDescription) conditionText = item.defectDescription;\n        else if (item.defects && item.defects.length > 0) {\n            defects = item.defects.filter((defect)=>{\n                return defect !== \"Annat\";\n            });\n            conditionText = \"Anm\\xe4rkning: \" + defects.join(\", \");\n        } else conditionText = item.condition;\n    } else conditionText = item.condition;\n    conditionText = (conditionText + \".\").replace(\"..\", \".\");\n    return conditionText;\n}\nconst $79f0a9680875480b$var$getItem = async (itemId)=>{\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable(\"getItem\")({\n        itemId: itemId\n    });\n    return {\n        ...res?.data || {},\n        id: itemId\n    };\n};\nconst $79f0a9680875480b$var$main = async ()=>{\n    const item = params.id ? await $79f0a9680875480b$var$getItem(params.id) : JSON.parse(localStorage.getItem(\"latestItemCreated\"));\n    if (!item) {\n        console.error(\"Invalid item id param or no recently created item\");\n        location.href = \"/private\";\n    }\n    $79f0a9680875480b$var$initializeFields(item);\n    triggerShowContent.click();\n    // Show all fields except platformsToBePublishedOn, that is set in the backend so fetch the item before showing it\n    if (item.platformsToBePublishedOn?.length) $79f0a9680875480b$var$initializePlatforms(item);\n    else firebase.app().functions(\"europe-west1\").httpsCallable(\"getPlatformsToBePublishedOn\")({\n        itemId: item?.id\n    }).then((response)=>{\n        $79f0a9680875480b$var$initializePlatforms(response.data);\n    }).catch((e)=>console.error(e));\n};\n$79f0a9680875480b$var$main();\n\n})();\n//# sourceMappingURL=itemConfirmation.js.map\n","function colorName(color) {\n    const mapping = {\n        Beige: 'Beige', Blue: 'Blå', Brown: 'Brun', Green: 'Grön', Grey: 'Grå', Yellow: 'Gul', Gold: 'Guld',\n        Purple: 'Lila', Navy: 'Navy', Orange: 'Orange', Pink: 'Rosa', Red: 'Röd', Silver: 'Silver', Black: 'Svart',\n        Turquoise: 'Turkos', Burgundy: 'Vinröd', White: 'Vit', Multicolour: 'Flerfärgad'\n    };\n    return mapping[color] || color;\n}\n\nfunction initializeFields(item) {\n    const { humanCheckNeeded, maxPriceEstimate: mlMaxPriceEstimate, newMinMaxLog } = item.mlValuation || {};\n    if (item.infoRequests?.price?.response === 'User proposal') {\n        document.getElementById('nextStepTitle').style.display = 'block';\n        document.getElementById('nextStepTitle').innerText = 'Granskar prisändringar';\n        document.getElementById('nextStepText').innerText = 'Vi kikar på dina prisändringar, och om det ser bra ut så påbörjar vi försäljningen. Vi tar sedan hand om säljprocessen och hör av oss på SMS när plagget är sålt.';\n    } else if (humanCheckNeeded || !mlMaxPriceEstimate || newMinMaxLog) {\n        document.getElementById('nextStepTitle').style.display = 'block';\n        document.getElementById('nextStepText').innerText = 'Du kommer få ett SMS när vi värderat plagget som du kan ta ställning till';\n    }\n    document.getElementById('itemTitle').innerText = (item.cleanedBrand || item.brand).trim() + \"-\" + item.category.toLowerCase();\n    document.getElementById('itemPrice').innerText = mlMaxPriceEstimate && !humanCheckNeeded && !newMinMaxLog ? `${item.maxPriceEstimate || mlMaxPriceEstimate} SEK` : '';\n    document.getElementById('itemPrice').style.display = 'block';\n    document.getElementById('itemSubtitle').innerText = item.model ? `${item.model}, ${colorName(item.color)}` : colorName(item.color);\n    document.getElementById('itemSize').innerText = item.size;\n    document.getElementById('itemMaterial').innerText = item.material;\n    document.getElementById('itemCondition').innerText = item.condition = itemConditionText(item);\n    if (item.originalPrice) {\n        itemOriginalPrice.innerText = item.originalPrice + ' SEK';\n        originalPriceDiv.style.display = 'flex';\n    }\n    if (item.userComment) {\n        document.getElementById('itemComment').innerText = item.userComment;\n        document.getElementById('itemCommentDiv').style.display = 'block';\n    }\n}\n\nfunction initializePlatforms(item) {\n    if (item?.platformsToBePublishedOn?.length < 2) {\n        document.getElementById('platformsSection').style.display = 'none';\n        return;\n    }\n    const platformNode = document.getElementById('platformTradera');\n    item.platformsToBePublishedOn.forEach(platform => {\n        if (platform.match(/Tradera/)) {\n            return; // Tradera is set statically in Webflow and always displayed\n        }\n        const newNode = platformNode.cloneNode(true);\n        newNode.id = platform;\n        newNode.innerText = platform;\n        platformNode.parentNode.appendChild(newNode);\n    });\n    document.getElementById('platformsLoadingDiv').style.display = 'none';\n    document.getElementById('platformsDiv').style.display = 'block';\n}\n\nfunction itemConditionText(item) {\n    let conditionText = '';\n    if (item.condition === 'Använd, tecken på slitage' && (item.defects.length || item.defectDescription)) {\n        let defects = [];\n        if (item.defectDescription){\n            conditionText = item.defectDescription;\n        }\n        else if (item.defects && item.defects.length > 0) {\n            defects = item.defects.filter((defect) => { return defect !== 'Annat'; });\n            conditionText = 'Anmärkning: ' + defects.join(', ');\n        } else {\n            conditionText = item.condition;\n        }\n    } else {\n        conditionText = item.condition;\n    }\n    conditionText = (conditionText + '.').replace('..', '.');\n\n    return conditionText;\n}\n\n\nconst getItem = async (itemId) => {\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable('getItem')({ itemId: itemId });\n    return { ...(res?.data || {}), id: itemId };\n}\n\nconst main = async () => {\n    const item = params.id ? await getItem(params.id) : JSON.parse(localStorage.getItem('latestItemCreated'));\n    if (!item) {\n        console.error(\"Invalid item id param or no recently created item\");\n        location.href = '/private';\n    }\n    initializeFields(item);\n    triggerShowContent.click();\n    // Show all fields except platformsToBePublishedOn, that is set in the backend so fetch the item before showing it\n    if (item.platformsToBePublishedOn?.length) {\n        initializePlatforms(item);\n    } else {\n        firebase.app().functions(\"europe-west1\").httpsCallable('getPlatformsToBePublishedOn')({ itemId: item?.id })\n            .then(response => {\n                initializePlatforms(response.data);\n            })\n            .catch(e => console.error(e));\n    }\n}\n\nmain();\n"],"names":["$79f0a9680875480b$var$colorName","color","mapping","Beige","Blue","Brown","Green","Grey","Yellow","Gold","Purple","Navy","Orange","Pink","Red","Silver","Black","Turquoise","Burgundy","White","Multicolour","$79f0a9680875480b$var$initializePlatforms","item","platformsToBePublishedOn","length","document","getElementById","style","display","platformNode","forEach","platform","match","newNode","cloneNode","id","innerText","parentNode","appendChild","$79f0a9680875480b$var$getItem","itemId","res","firebase","app","functions","httpsCallable","data","$79f0a9680875480b$var$main","params","JSON","parse","localStorage","getItem","console","error","location","href","$79f0a9680875480b$var$initializeFields","conditionText","humanCheckNeeded","maxPriceEstimate","mlMaxPriceEstimate","newMinMaxLog","mlValuation","infoRequests","price","response","cleanedBrand","brand","trim","category","toLowerCase","model","size","material","condition","defects","defectDescription","filter","defect","join","replace","originalPrice","itemOriginalPrice","originalPriceDiv","userComment","triggerShowContent","click","then","catch","e"],"version":3,"file":"itemConfirmation.js.map"}