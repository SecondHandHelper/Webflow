{"mappings":"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","sources":["<anon>","itemConfirmation.js"],"sourcesContent":["(function () {\nfunction $79f0a9680875480b$var$colorName(color) {\n    const mapping = {\n        Beige: \"Beige\",\n        Blue: \"Bl\\xe5\",\n        Brown: \"Brun\",\n        Green: \"Gr\\xf6n\",\n        Grey: \"Gr\\xe5\",\n        Yellow: \"Gul\",\n        Gold: \"Guld\",\n        Purple: \"Lila\",\n        Navy: \"Navy\",\n        Orange: \"Orange\",\n        Pink: \"Rosa\",\n        Red: \"R\\xf6d\",\n        Silver: \"Silver\",\n        Black: \"Svart\",\n        Turquoise: \"Turkos\",\n        Burgundy: \"Vinr\\xf6d\",\n        White: \"Vit\",\n        Multicolour: \"Flerf\\xe4rgad\"\n    };\n    return mapping[color] || color;\n}\nfunction $79f0a9680875480b$var$initializeFields(item) {\n    const { humanCheckNeeded: humanCheckNeeded, maxPriceEstimate: mlMaxPriceEstimate, newMinMaxLog: newMinMaxLog } = item.mlValuation || {};\n    if (item.infoRequests?.price?.response === \"User proposal\") {\n        document.getElementById(\"nextStepTitle\").style.display = \"block\";\n        document.getElementById(\"nextStepTitle\").innerText = \"Granskar pris\\xe4ndringar\";\n        document.getElementById(\"nextStepText\").innerText = \"Vi kikar p\\xe5 dina pris\\xe4ndringar, och om det ser bra ut s\\xe5 p\\xe5b\\xf6rjar vi f\\xf6rs\\xe4ljningen. Vi tar sedan hand om s\\xe4ljprocessen och h\\xf6r av oss p\\xe5 SMS n\\xe4r plagget \\xe4r s\\xe5lt.\";\n    } else if (humanCheckNeeded || !mlMaxPriceEstimate && !item.infoRequests?.price?.maxPrice || newMinMaxLog) {\n        document.getElementById(\"nextStepTitle\").style.display = \"block\";\n        document.getElementById(\"nextStepText\").innerText = \"Du kommer f\\xe5 ett SMS n\\xe4r vi v\\xe4rderat plagget som du kan ta st\\xe4llning till\";\n    }\n    document.getElementById(\"itemTitle\").innerText = (item.cleanedBrand || item.brand).trim() + \"-\" + item.category.toLowerCase();\n    document.getElementById(\"itemPrice\").innerText = item.maxPriceEstimate && !humanCheckNeeded && !newMinMaxLog ? `${item.maxPriceEstimate || mlMaxPriceEstimate} SEK` : \"\";\n    document.getElementById(\"itemPrice\").style.display = \"block\";\n    document.getElementById(\"itemSubtitle\").innerText = item.model ? `${item.model}, ${$79f0a9680875480b$var$colorName(item.color)}` : $79f0a9680875480b$var$colorName(item.color);\n    document.getElementById(\"itemSize\").innerText = item.size;\n    document.getElementById(\"itemMaterial\").innerText = item.material;\n    document.getElementById(\"itemCondition\").innerText = item.condition = $79f0a9680875480b$var$itemConditionText(item);\n    if (item.originalPrice) {\n        itemOriginalPrice.innerText = item.originalPrice + \" SEK\";\n        originalPriceDiv.style.display = \"flex\";\n    }\n    if (item.userComment) {\n        document.getElementById(\"itemComment\").innerText = item.userComment;\n        document.getElementById(\"itemCommentDiv\").style.display = \"block\";\n    }\n}\nfunction $79f0a9680875480b$var$initializePlatforms(item) {\n    if (item?.platformsToBePublishedOn?.length < 2) {\n        document.getElementById(\"platformsSection\").style.display = \"none\";\n        return;\n    }\n    const platformNode = document.getElementById(\"platformTradera\");\n    item.platformsToBePublishedOn.forEach((platform)=>{\n        if (platform.match(/Tradera/)) return; // Tradera is set statically in Webflow and always displayed\n        const newNode = platformNode.cloneNode(true);\n        newNode.id = platform;\n        newNode.innerText = platform;\n        platformNode.parentNode.appendChild(newNode);\n    });\n    document.getElementById(\"platformsLoadingDiv\").style.display = \"none\";\n    document.getElementById(\"platformsDiv\").style.display = \"block\";\n}\nfunction $79f0a9680875480b$var$itemConditionText(item) {\n    let conditionText = \"\";\n    if (item.condition === \"Anv\\xe4nd, tecken p\\xe5 slitage\" && (item.defects.length || item.defectDescription)) {\n        let defects = [];\n        if (item.defectDescription) conditionText = item.defectDescription;\n        else if (item.defects && item.defects.length > 0) {\n            defects = item.defects.filter((defect)=>{\n                return defect !== \"Annat\";\n            });\n            conditionText = \"Anm\\xe4rkning: \" + defects.join(\", \");\n        } else conditionText = item.condition;\n    } else conditionText = item.condition;\n    conditionText = (conditionText + \".\").replace(\"..\", \".\");\n    return conditionText;\n}\nconst $79f0a9680875480b$var$getItem = async (itemId)=>{\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable(\"getItem\")({\n        itemId: itemId\n    });\n    return {\n        ...res?.data || {},\n        id: itemId\n    };\n};\nconst $79f0a9680875480b$var$main = async ()=>{\n    const item = params.id ? await $79f0a9680875480b$var$getItem(params.id) : JSON.parse(localStorage.getItem(\"latestItemCreated\"));\n    if (!item) {\n        console.error(\"Invalid item id param or no recently created item\");\n        location.href = \"/private\";\n    }\n    $79f0a9680875480b$var$initializeFields(item);\n    triggerShowContent.click();\n    // Show all fields except platformsToBePublishedOn, that is set in the backend so fetch the item before showing it\n    if (item.platformsToBePublishedOn?.length) $79f0a9680875480b$var$initializePlatforms(item);\n    else firebase.app().functions(\"europe-west1\").httpsCallable(\"getPlatformsToBePublishedOn\")({\n        itemId: item?.id\n    }).then((response)=>{\n        $79f0a9680875480b$var$initializePlatforms(response.data);\n    }).catch((e)=>console.error(e));\n};\n$79f0a9680875480b$var$main();\n\n})();\n//# sourceMappingURL=itemConfirmation.js.map\n","function colorName(color) {\n    const mapping = {\n        Beige: 'Beige', Blue: 'Blå', Brown: 'Brun', Green: 'Grön', Grey: 'Grå', Yellow: 'Gul', Gold: 'Guld',\n        Purple: 'Lila', Navy: 'Navy', Orange: 'Orange', Pink: 'Rosa', Red: 'Röd', Silver: 'Silver', Black: 'Svart',\n        Turquoise: 'Turkos', Burgundy: 'Vinröd', White: 'Vit', Multicolour: 'Flerfärgad'\n    };\n    return mapping[color] || color;\n}\n\nfunction initializeFields(item) {\n    const { humanCheckNeeded, maxPriceEstimate: mlMaxPriceEstimate, newMinMaxLog } = item.mlValuation || {};\n    if (item.infoRequests?.price?.response === 'User proposal') {\n        document.getElementById('nextStepTitle').style.display = 'block';\n        document.getElementById('nextStepTitle').innerText = 'Granskar prisändringar';\n        document.getElementById('nextStepText').innerText = 'Vi kikar på dina prisändringar, och om det ser bra ut så påbörjar vi försäljningen. Vi tar sedan hand om säljprocessen och hör av oss på SMS när plagget är sålt.';\n    } else if (humanCheckNeeded || (!mlMaxPriceEstimate && !item.infoRequests?.price?.maxPrice) || newMinMaxLog) {\n        document.getElementById('nextStepTitle').style.display = 'block';\n        document.getElementById('nextStepText').innerText = 'Du kommer få ett SMS när vi värderat plagget som du kan ta ställning till';\n    }\n    document.getElementById('itemTitle').innerText = (item.cleanedBrand || item.brand).trim() + \"-\" + item.category.toLowerCase();\n    document.getElementById('itemPrice').innerText = item.maxPriceEstimate && !humanCheckNeeded && !newMinMaxLog ? `${item.maxPriceEstimate || mlMaxPriceEstimate} SEK` : '';\n    document.getElementById('itemPrice').style.display = 'block';\n    document.getElementById('itemSubtitle').innerText = item.model ? `${item.model}, ${colorName(item.color)}` : colorName(item.color);\n    document.getElementById('itemSize').innerText = item.size;\n    document.getElementById('itemMaterial').innerText = item.material;\n    document.getElementById('itemCondition').innerText = item.condition = itemConditionText(item);\n    if (item.originalPrice) {\n        itemOriginalPrice.innerText = item.originalPrice + ' SEK';\n        originalPriceDiv.style.display = 'flex';\n    }\n    if (item.userComment) {\n        document.getElementById('itemComment').innerText = item.userComment;\n        document.getElementById('itemCommentDiv').style.display = 'block';\n    }\n}\n\nfunction initializePlatforms(item) {\n    if (item?.platformsToBePublishedOn?.length < 2) {\n        document.getElementById('platformsSection').style.display = 'none';\n        return;\n    }\n    const platformNode = document.getElementById('platformTradera');\n    item.platformsToBePublishedOn.forEach(platform => {\n        if (platform.match(/Tradera/)) {\n            return; // Tradera is set statically in Webflow and always displayed\n        }\n        const newNode = platformNode.cloneNode(true);\n        newNode.id = platform;\n        newNode.innerText = platform;\n        platformNode.parentNode.appendChild(newNode);\n    });\n    document.getElementById('platformsLoadingDiv').style.display = 'none';\n    document.getElementById('platformsDiv').style.display = 'block';\n}\n\nfunction itemConditionText(item) {\n    let conditionText = '';\n    if (item.condition === 'Använd, tecken på slitage' && (item.defects.length || item.defectDescription)) {\n        let defects = [];\n        if (item.defectDescription){\n            conditionText = item.defectDescription;\n        }\n        else if (item.defects && item.defects.length > 0) {\n            defects = item.defects.filter((defect) => { return defect !== 'Annat'; });\n            conditionText = 'Anmärkning: ' + defects.join(', ');\n        } else {\n            conditionText = item.condition;\n        }\n    } else {\n        conditionText = item.condition;\n    }\n    conditionText = (conditionText + '.').replace('..', '.');\n\n    return conditionText;\n}\n\n\nconst getItem = async (itemId) => {\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable('getItem')({ itemId: itemId });\n    return { ...(res?.data || {}), id: itemId };\n}\n\nconst main = async () => {\n    const item = params.id ? await getItem(params.id) : JSON.parse(localStorage.getItem('latestItemCreated'));\n    if (!item) {\n        console.error(\"Invalid item id param or no recently created item\");\n        location.href = '/private';\n    }\n    initializeFields(item);\n    triggerShowContent.click();\n    // Show all fields except platformsToBePublishedOn, that is set in the backend so fetch the item before showing it\n    if (item.platformsToBePublishedOn?.length) {\n        initializePlatforms(item);\n    } else {\n        firebase.app().functions(\"europe-west1\").httpsCallable('getPlatformsToBePublishedOn')({ itemId: item?.id })\n            .then(response => {\n                initializePlatforms(response.data);\n            })\n            .catch(e => console.error(e));\n    }\n}\n\nmain();\n"],"names":["$79f0a9680875480b$var$colorName","color","mapping","Beige","Blue","Brown","Green","Grey","Yellow","Gold","Purple","Navy","Orange","Pink","Red","Silver","Black","Turquoise","Burgundy","White","Multicolour","$79f0a9680875480b$var$initializePlatforms","item","platformsToBePublishedOn","length","document","getElementById","style","display","platformNode","forEach","platform","match","newNode","cloneNode","id","innerText","parentNode","appendChild","$79f0a9680875480b$var$getItem","itemId","res","firebase","app","functions","httpsCallable","data","$79f0a9680875480b$var$main","params","JSON","parse","localStorage","getItem","console","error","location","href","$79f0a9680875480b$var$initializeFields","conditionText","humanCheckNeeded","maxPriceEstimate","mlMaxPriceEstimate","newMinMaxLog","mlValuation","infoRequests","price","response","maxPrice","cleanedBrand","brand","trim","category","toLowerCase","model","size","material","condition","defects","defectDescription","filter","defect","join","replace","originalPrice","itemOriginalPrice","originalPriceDiv","userComment","triggerShowContent","click","then","catch","e"],"version":3,"file":"itemConfirmation.js.map"}