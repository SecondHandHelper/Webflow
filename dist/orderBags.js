!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(t,n,r,d,o){/* eslint-disable no-undef */var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof a[d]&&a[d],s=l.cache||{},i="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(n,r){if(!s[n]){if(!t[n]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var o="function"==typeof a[d]&&a[d];if(!r&&o)return o(n,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(l)return l(n,!0);// Try the node require function if it exists.
if(i&&"string"==typeof n)return i(n);var m=Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}g.resolve=function(r){var d=t[n][1][r];return null!=d?d:r},g.cache={};var c=s[n]=new u.Module(n);t[n][0].call(c.exports,g,c,c.exports,this)}return s[n].exports;function g(t){var n=g.resolve(t);return!1===n?{}:u(n)}}u.isParcelRequire=!0,u.Module=function(t){this.id=t,this.bundle=u,this.exports={}},u.modules=t,u.cache=s,u.parent=l,u.register=function(n,r){t[n]=[function(t,n){n.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return a[d]}}),a[d]=u;for(var m=0;m<n.length;m++)u(n[m]);if(r){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var c=u(r);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):o&&(this[o]=c)}}({aCqKZ:[function(t,n,r){var d=t("./general");let o=getParamsObject();if(o.app){let t=document.querySelectorAll(".goback");t.forEach(t=>{t.style.visibility="hidden"})}var a=10;async function l(){let t=await callBackendApi("/api/bags/orders/allowed",{requiresAuth:!0});if(t?.data)return t.data?.errorCode==="unfulfilled-order"?(document.getElementById("orderBagsError").style.display="block",document.getElementById("orderBagsError").innerText="Du har nyligen lagt en best\xe4llning som \xe4r p\xe5 v\xe4g till dig.\nV\xe4nta in p\xe5sarna innan du l\xe4gger fler best\xe4llningar.",0):t.data?.maxOrderBags===0?(document.getElementById("orderBagsError").style.display="block",document.getElementById("orderBagsError").innerText="Du kan bara best\xe4lla p\xe5sar om\ndu har p\xe5g\xe5ende f\xf6rs\xe4ljningar.",0):a=Math.min(t.data.maxOrderBags,a)}function s(){return+document.getElementById("numSmall").value+ +document.getElementById("numMedium").value+ +document.getElementById("numLarge").value+ +document.getElementById("numXLarge").value}function i(){document.getElementById("orderBags").innerText=`Best\xe4ll ${s()} ${u()} gratis`,document.getElementById("orderBagsError").style.display="none"}function u(){return 1===s()?"p\xe5se":"p\xe5sar"}function m(t){return t?.replace(/\s/g,"")?.length>0}async function c(){let t=await db.collection("users").doc(authUser.current.uid).get(),{addressFirstName:n,addressLastName:r,addressStreetAddress:d,addressPostalCode:o,addressCity:a}=t.data();return[n,r,d,o,a].every(m)}function g(t,n,r){document.getElementById(t).addEventListener("click",function(){var t;(t=document.getElementById(r)).value=Math.max(+t.value-1,0),t.style.color=0==+t.value?"#c3c2c2":"#000",i()}),document.getElementById(n).addEventListener("click",function(){var t;t=document.getElementById(r),s()>=10||(t.value=Math.min(+t.value+1,10),i(),1!=+t.value||(t.style.color="black"))})}g("minusSmall","plusSmall","numSmall"),g("minusMedium","plusMedium","numMedium"),g("minusLarge","plusLarge","numLarge"),g("minusXLarge","plusXLarge","numXLarge"),document.getElementById("userAddressForm").addEventListener("submit",async()=>{let t=(0,d.getFormAddressFields)(),n=db.collection("users").doc(authUser.current.uid);await n.update(t),document.getElementById("orderBagsConfirmation").style.display="block",analytics.track("Element Viewed",{elementID:"orderBagsConfirmation"}),document.getElementById("addressFormDiv").style.display="none"}),document.getElementById("orderBags").addEventListener("click",async function(){if(0===s()){document.getElementById("orderBagsError").style.display="block",document.getElementById("orderBagsError").innerText="V\xe4lj minst 1 p\xe5se";return}if(s()>10){document.getElementById("orderBagsError").style.display="block",document.getElementById("orderBagsError").innerText="Max 10 p\xe5sar per best\xe4llning";return}document.getElementById("orderBagsError").style.display="none",document.getElementById("orderBags").style.display="none",document.getElementById("orderBagsSpinner").style.display="flex";//Tobias added
let t=await l();if(0===t){document.getElementById("orderBags").style.display="flex",document.getElementById("orderBagsSpinner").style.display="none";return}if(s()>t){document.getElementById("orderBagsError").style.display="block",document.getElementById("orderBagsError").innerText=`Inte fler \xe4n antalet p\xe5g\xe5ende f\xf6rs\xe4ljningar, dvs ${t}`,document.getElementById("orderBags").style.display="flex",document.getElementById("orderBagsSpinner").style.display="none";return}let n=+document.getElementById("numSmall").value,r=+document.getElementById("numMedium").value,o=+document.getElementById("numLarge").value,a=+document.getElementById("numXLarge").value;try{await callBackendApi("/api/bags/order",{data:{numXLargeBags:a,numLargeBags:o,numSmallBags:n,numMediumBags:r}}),document.getElementById("bagsOrdered").innerText=`${s()} ${u()} p\xe5 v\xe4g!`}catch(t){errorHandler.report(t),document.getElementById("orderBagsError").style.display="block",document.getElementById("orderBagsError").innerText="N\xe5got gick fel vid best\xe4llningen. F\xf6rs\xf6k igen och kontakta oss om det fortfarande inte fungerar.",document.getElementById("orderBags").style.display="flex",document.getElementById("orderBagsSpinner").style.display="none";return}if(document.getElementById("orderBagsForm").style.display="none",await c())document.getElementById("orderBagsConfirmation").style.display="block";else{let t=await db.collection("users").doc(authUser.current.uid).get(),n=t.data();document.getElementById("addressFormDiv").style.display="block",analytics.track("Element Viewed",{elementID:"addressFormDiv"}),(0,d.setFormAddressFields)(n)}}),document.getElementById("closeOrderBagsConfirmationButton").addEventListener("click",function(){document.getElementById("closeOrderBagsConfirmationButton").style.display="none",document.getElementById("closeOrderBagsSpinner").style.display="flex"})},{"./general":"1tOWF"}],"1tOWF":[function(t,n,r){var d=t("@parcel/transformer-js/src/esmodule-helpers.js");function o(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),callBackendApi("/api/users/session",{method:"DELETE",extraHeaders:{credentials:"include"}}).catch(t=>{errorHandler.report(t),console.warn("[SSO] Error clearing session cookie:",e)}),location.href="/"}).catch(t=>{errorHandler.report(t),console.log(t)})}function a(t){document.getElementById("addressFirstName").value=t.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=t.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=t.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=t.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=t.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=t.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=t.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function l(){let t=document.getElementById("addressFirstName").value,n=document.getElementById("addressLastName").value,r=document.getElementById("addressStreetAddress").value,d=document.getElementById("addressCO").value,o=document.getElementById("addressPostalCode").value,a=document.getElementById("addressCity").value,l=document.getElementById("addressDoorCode").value;return t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",n=n?n.trim().charAt(0).toUpperCase()+n.trim().slice(1):"",r=r?r.trim().charAt(0).toUpperCase()+r.trim().slice(1):"",d=d?d.trim():"",{addressFirstName:t,addressLastName:n,addressStreetAddress:r,addressCO:d,addressPostalCode:o=o?o.trim().replace(/\D/g,""):"",addressCity:a=a?a.trim().charAt(0).toUpperCase()+a.trim().slice(1):"",addressDoorCode:l=l?l.trim():""}}function s(t){// verify we got 10 digits, otherwise it is invalid
if(10!==(t=t.replace(/\D/g,"")// strip out all but digits
.split("")// convert string to array
.reverse()// reverse order for Luhn
.slice(0,10)).length)return!1;let n=t.map(t=>Number(t)).reduce((t,n,r)=>(r%2&&(n*=2),n>9&&(n-=9),t+n));return 0==n%10}function i(t){let n=t.replace("-","");return(12!==n.length&&("19"!==n.substring(0,2)||"20"!==n.substring(0,2))&&(n=99>=Number(n.substring(0,2))&&Number(n.substring(0,2))>25?"19"+n:"20"+n),12===n.length)?n:null}function u(t){if(t.images){let n=t.images;return n.modelImageSmall||n.modelImage||n.coverImageSmall||n.coverImage||n.enhancedFrontImageSmall||n.enhancedFrontImage||n.frontImageSmall||n.frontImage}if(t.imagesv2)for(let n of["modelImage","enhancedFrontImage","frontImage"]){let r=t.imagesv2.find(t=>t.name===n);if(r){if(r?.versions?.small)return r.versions.small;if(r?.versions?.medium)return r.versions.medium;if(r?.versions?.large)return r.versions.large;if(r.url)return r.url}}return null}function m(){let t;let n=user.current.referralData.referralCode;if(t=user.current?.maiCircle?"H\xe4r f\xe5r du en exklusiv inbjudan till Mai, som ger en extra fin start med tre kommissionsfria f\xf6rs\xe4ljningar.":"Jag bjuder in dig till Mai f\xf6r att s\xe4lja dina kl\xe4der! G\xe5 genom min l\xe4nk f\xf6r att f\xe5 en extra kommissionsfri f\xf6rs\xe4ljning.",navigator.share)navigator.share({text:t,url:`https://invite.maiapp.se/refer?invite=${n}`}).then(()=>{console.log("Thanks for sharing!")}).catch(t=>{console.error(t),errorHandler.report(t)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let r=t+"\n"+`https://invite.maiapp.se/refer?invite=${n}`;navigator.clipboard.writeText(r),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}function c(t){let n=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;n?(document.getElementById("continueOnWebBottomSheet").href=window.location.origin+t,document.getElementById("darkOverlay").classList.add("active"),document.getElementById("channelBottomSheet").classList.add("active")):window.location.href=t}function g(){document.getElementById("darkOverlay").classList.remove("active"),document.getElementById("channelBottomSheet").classList.remove("active")}function y(t){let n=document.getElementById(t);n&&(// Set initial position below screen
n.style.transform="translateY(100%)",n.style.transition="transform 0.3s ease-out",n.style.display="block",// Animate to visible position
setTimeout(()=>{n.style.transform="translateY(0%)"},10),document.getElementById("darkOverlay").classList.add("active"))}function f(t){let n=document.getElementById(t);// Add the visibility check here
n&&"none"!==n.style.display&&(// Animate down and hide
n.style.transform="translateY(100%)",n.style.transition="transform 0.3s ease-in",// Hide after animation completes
setTimeout(()=>{n.style.display="none"},300),document.getElementById("darkOverlay").classList.remove("active"))}function p(t){let n=document.getElementById(t);if(n){n.style.display="none";// Check if there are any remaining visible cards
let t=document.getElementById("infoRequestsList");if(t){let n=t.querySelectorAll('[id^="infoRequest"]:not([style*="display: none"])');if(0===n.length){let t=document.getElementById("infoRequestsDiv");t&&(t.style.display="none")}}}}d.defineInteropFlag(r),d.export(r,"signOut",()=>o),d.export(r,"setFormAddressFields",()=>a),d.export(r,"getFormAddressFields",()=>l),// Validate Swedish Social Security Number (personnummer) using checksum
//   Note: this is somewhat simplified because it does not take into account
//   that the date of the number is valid (e.g. "000000-0000" does return as true)
d.export(r,"isValidSwedishSsn",()=>s),d.export(r,"formatPersonalId",()=>i),d.export(r,"itemCoverImage",()=>u),d.export(r,"shareCode",()=>m),// Channel bottom sheet
d.export(r,"channelRouter",()=>c),d.export(r,"hideChannelBottomSheet",()=>g),// End of channel bottom sheet
// Toast animation functions
d.export(r,"animateOpenToast",()=>y),d.export(r,"animateCloseToast",()=>f),d.export(r,"hideInfoRequestCard",()=>p)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(t,n,r){r.interopDefault=function(t){return t&&t.__esModule?t:{default:t}},r.defineInteropFlag=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.exportAll=function(t,n){return Object.keys(t).forEach(function(r){"default"===r||"__esModule"===r||n.hasOwnProperty(r)||Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[r]}})}),n},r.export=function(t,n,r){Object.defineProperty(t,n,{enumerable:!0,get:r})}},{}]},["aCqKZ"],"aCqKZ","parcelRequire81ca")//# sourceMappingURL=orderBags.js.map
;
//# sourceMappingURL=orderBags.js.map
