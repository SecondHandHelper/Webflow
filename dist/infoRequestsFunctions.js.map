{"mappings":"C,A,S,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,C,E,C,E,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,G,C,C,E,C,O,C,C,E,C,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,G,G,E,O,E,E,C,G,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,E,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,G,A,C,I,E,M,C,E,G,M,O,C,G,C,I,E,C,W,C,C,E,O,E,O,C,S,C,E,I,E,C,C,E,C,E,C,C,E,C,E,C,C,E,E,C,C,E,C,E,E,E,A,C,M,E,O,I,C,G,O,C,S,C,E,Y,G,A,e,G,O,S,C,c,C,I,C,E,I,O,c,C,E,E,C,W,C,E,I,W,O,C,C,E,A,C,E,G,A,M,E,O,c,C,E,E,C,W,C,E,M,C,G,O,c,C,E,E,C,W,C,E,I,iB,A,A,Y,E,E,U,C,E,O,C,E,C,C,E,A,C,E,G,C,C,O,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,O,C,K,E,E,S,C,K,E,E,S,C,K,E,E,C,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,I,E,E,E,A,C,U,O,S,A,a,O,O,O,O,C,E,A,Y,O,Q,O,G,E,O,W,O,C,E,C,E,C,Q,C,S,C,C,C,C,C,C,C,MC0MI,EACA,EACA,EACA,E,I,E,E,kD,E,iB,C,GA0DJ,EAAA,MAAA,CAAA,EAAA,mBAAA,IAAgB,GAvQ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","sources":["<anon>","infoRequestsFunctions.js","general.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (\n  modules,\n  entry,\n  mainEntry,\n  parcelRequireName,\n  externals,\n  distDir,\n  publicUrl,\n  devServer\n) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var importMap = previousRequire.i || {};\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        if (externals[name]) {\n          return externals[name];\n        }\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        globalObject\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      if (res === false) {\n        return {};\n      }\n      // Synthesize a module to follow re-exports.\n      if (Array.isArray(res)) {\n        var m = {__esModule: true};\n        res.forEach(function (v) {\n          var key = v[0];\n          var id = v[1];\n          var exp = v[2] || v[0];\n          var x = newRequire(id);\n          if (key === '*') {\n            Object.keys(x).forEach(function (key) {\n              if (\n                key === 'default' ||\n                key === '__esModule' ||\n                Object.prototype.hasOwnProperty.call(m, key)\n              ) {\n                return;\n              }\n\n              Object.defineProperty(m, key, {\n                enumerable: true,\n                get: function () {\n                  return x[key];\n                },\n              });\n            });\n          } else if (exp === '*') {\n            Object.defineProperty(m, key, {\n              enumerable: true,\n              value: x,\n            });\n          } else {\n            Object.defineProperty(m, key, {\n              enumerable: true,\n              get: function () {\n                if (exp === 'default') {\n                  return x.__esModule ? x.default : x;\n                }\n                return x[exp];\n              },\n            });\n          }\n        });\n        return m;\n      }\n      return newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.require = nodeRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.distDir = distDir;\n  newRequire.publicUrl = publicUrl;\n  newRequire.devServer = devServer;\n  newRequire.i = importMap;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  // Only insert newRequire.load when it is actually used.\n  // The code in this file is linted against ES5, so dynamic import is not allowed.\n  // INSERT_LOAD_HERE\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n    }\n  }\n})({\"21npA\":[function(require,module,exports,__globalThis) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"loadInfoRequests\", ()=>loadInfoRequests);\nvar _general = require(\"./general\");\n/**\n * Converts expires value to a Date object, handling both Firestore timestamp format\n * ({ _seconds, _nanoseconds }) and standard Date formats (string, number, Date)\n */ function convertExpiresToDate(expires) {\n    // Handle Firestore timestamp format\n    if (expires && typeof expires === 'object' && expires._seconds !== undefined) return new Date(expires._seconds * 1000 + (expires._nanoseconds || 0) / 1000000);\n    // Handle standard Date formats\n    return new Date(expires);\n}\nasync function openMeasurementsToast(itemId, description) {\n    measurementDescriptionText.innerHTML = description;\n    measurementsSubmitButton.addEventListener('click', async function() {\n        const input = measurementsInput.value;\n        if (input.length > 0 && input !== \" \") await db.collection('items').doc(itemId).update({\n            measurements: input,\n            \"infoRequests.measurements.status\": \"Resolved\"\n        });\n        triggerMeasurementsToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 400);\n    });\n    triggerMeasurementsToastOpen.click();\n}\nasync function openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore) {\n    if (!itemId) return;\n    console.log('is this happening?');\n    // If user is qualified to get the discount question -> Show it to the user\n    const price = currentMinPrice;\n    const priceWithDiscount30 = Math.ceil(price * 0.7 / 10) * 10;\n    const priceWithDiscount20 = Math.ceil(price * 0.8 / 10) * 10;\n    priceAfterDiscount30.innerHTML = `(Priset blir ${priceWithDiscount30} kr)`;\n    priceAfterDiscount20.innerHTML = `(Priset blir ${priceWithDiscount20} kr)`;\n    priceNoDiscount.innerHTML = `(${price} kr)`;\n    if (price >= 140 && !deniedBefore) {\n        longerPeriodDescriptionText.innerHTML = `S\\xe4ljperioden f\\xf6r ditt ${brand}-plagg har n\\xe5tt sitt slut. V\\xe4lj om du vill f\\xf6rl\\xe4nga s\\xe4ljperioden med ytterligare 30 dagar och om du vill s\\xe4nka priset f\\xf6r att \\xf6ka chansen att f\\xe5 det s\\xe5lt.`;\n        discountFormDiv.style.display = 'block';\n    } else {\n        longerPeriodDescriptionText.innerHTML = `S\\xe4ljperioden f\\xf6r ditt ${brand}-plagg har n\\xe5tt sitt slut. Vill du f\\xf6rl\\xe4nga s\\xe4ljperioden med ytterligare 30 dagar eller avsluta f\\xf6rs\\xe4ljningen?`;\n        discountFormDiv.style.display = 'none';\n    }\n    // Accept longer selling window and store chosen discount\n    longerPeriodAcceptButton.addEventListener('click', async function() {\n        const today = new Date();\n        const todayDate = today.toISOString().split('T')[0];\n        let newPrice = price;\n        let discount = 0;\n        var discountRadioButtons = document.getElementsByName(\"Discount\");\n        for(var x = 0; x < discountRadioButtons.length; x++)if (discountRadioButtons[x].checked) {\n            const input = discountRadioButtons[x].value;\n            if (input === '30') {\n                newPrice = priceWithDiscount30;\n                discount = 30;\n            }\n            if (input === '20') {\n                newPrice = priceWithDiscount20;\n                discount = 20;\n            }\n        }\n        await db.collection('items').doc(itemId).update({\n            longerPeriodAcceptedDate: todayDate,\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Accepted\",\n            longerPeriodAcceptedDiscount: discount,\n            minPriceEstimate: newPrice\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 300);\n    });\n    // Decline longer selling period and quit sales\n    longerPeriodDenyButton.addEventListener('click', async function() {\n        await db.collection('items').doc(itemId).update({\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Denied\",\n            \"status\": \"Unsold\" // This field is normally mastered by AT - I do this for the user to see the effect immediately (the card is removed)\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 300);\n    });\n    triggerLongerPeriodToastOpen.click();\n}\nasync function openBidToast(itemId, minPrice1, bidPrice, expires) {\n    if (!itemId) return;\n    bidButtonsContainer.style.visibility = 'visible';\n    bidButtonsContainer.style.visibility = 'visible';\n    bidPriceText.innerHTML = `${bidPrice} kr`;\n    // Calculate hours and minutes remaining\n    const now = new Date();\n    const expirationDate = convertExpiresToDate(expires);\n    const timeDiffMs = expirationDate.getTime() - now.getTime();\n    const timeDiffMinutes = Math.floor(timeDiffMs / 60000);\n    const hours = Math.floor(timeDiffMinutes / 60);\n    const minutes = Math.floor(timeDiffMinutes % 60);\n    bidDescription.innerHTML = `Budet ligger under ditt l\\xe4gsta pris p\\xe5 ${minPrice1} kr. Giltigt i ${hours} tim och ${minutes} min.`;\n    // Accept bid and show confirmation\n    bidAcceptButton.removeEventListener(\"click\", bidAcceptHandler);\n    const acceptBid = async function() {\n        try {\n            acceptBidLoading.style.display = 'block';\n            acceptBidButtonText.style.display = 'none';\n            // Call the API endpoint to accept the bid\n            await callBackendApi(`/api/items/${itemId}/infoRequests`, {\n                method: 'PUT',\n                data: {\n                    type: 'bid',\n                    response: 'Accepted'\n                }\n            });\n            acceptBidLoading.style.display = 'none';\n            acceptBidButtonText.style.display = 'block';\n            bidTitle.style.visibility = 'hidden';\n            bidButtonsContainer.style.visibility = 'hidden';\n            // Fade out animation\n            bidPriceText.style.transition = 'opacity 0.3s ease';\n            bidDescription.style.transition = 'opacity 0.3s ease';\n            bidPriceText.style.opacity = '0';\n            bidDescription.style.opacity = '0';\n            // Wait for fade out to complete, then change text and fade in\n            setTimeout(()=>{\n                bidPriceText.innerHTML = 'Toppen!';\n                bidDescription.innerHTML = \"N\\xe4r k\\xf6paren betalat f\\xe5r du ett SMS om att det \\xe4r s\\xe5lt och redo att skickas.\";\n                // Fade in animation\n                bidPriceText.style.opacity = '1';\n                bidDescription.style.opacity = '1';\n            }, 300);\n            // Hide the specific info request element instead of reloading the page\n            (0, _general.hideInfoRequestCard)(`infoRequestBid-${itemId}`);\n        } catch (error) {\n            console.error('Failed to accept bid:', error);\n        // You might want to show an error message to the user here\n        }\n    };\n    bidAcceptButton.addEventListener('click', acceptBid);\n    bidAcceptHandler = acceptBid;\n    // Decline bid\n    bidDenyButton.removeEventListener(\"click\", bidDenyHandler);\n    // TODO: Use web-api endpoint instead to trigger backend logic\n    const denyBid = async function() {\n        await db.collection('items').doc(itemId).update({\n            \"infoRequests.bid.status\": \"Resolved\",\n            \"infoRequests.bid.response\": \"Denied\"\n        });\n        (0, _general.animateCloseToast)('bidToast');\n        // Hide the specific info request element instead of reloading the page\n        (0, _general.hideInfoRequestCard)(`infoRequestBid-${itemId}`);\n    };\n    bidDenyButton.addEventListener('click', denyBid);\n    bidDenyHandler = denyBid;\n    (0, _general.animateOpenToast)('bidToast');\n}\nasync function storePriceResponse(itemId, max, min, response, status) {\n    console.log(\"storePriceResponse\", itemId, max, min, response);\n    // Accept price\n    if (response === \"Accepted\") await db.collection('items').doc(itemId).update({\n        \"infoRequests.price.status\": \"Resolved\",\n        \"infoRequests.price.response\": \"Accepted\",\n        \"maxPriceEstimate\": max,\n        \"minPriceEstimate\": min\n    }).then(function() {\n        triggerNewPriceToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 300);\n    });\n    // Deny price\n    if (response === \"Denied\") {\n        let fields = {\n            \"infoRequests.price.status\": \"Resolved\",\n            \"infoRequests.price.response\": \"Denied\"\n        };\n        if (status === \"New\") {\n            fields[\"archived\"] = true;\n            fields[\"willNotSell\"] = true;\n        }\n        await db.collection('items').doc(itemId).update(fields).then(function() {\n            triggerNewPriceToastClose.click();\n            setTimeout(function() {\n                location.reload();\n            }, 300);\n        });\n    }\n}\nlet acceptNewPriceHandler;\nlet denyNewPriceHandler;\nlet bidAcceptHandler;\nlet bidDenyHandler;\nasync function openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMax, currentMin) {\n    console.log(\"openNewPriceToast\", itemId, status, max, min, brand, description, category, type, currentMax, currentMin);\n    previousMinPrice.style.display = 'none';\n    previousMaxPrice.style.display = 'none';\n    maxPriceDiv.style.display = 'block';\n    minPriceDiv.style.display = 'block';\n    // Set content of toast\n    newPriceToastTitle.innerHTML = \"Nytt l\\xe4gsta pris\";\n    newPriceHeading.innerHTML = `${brand}-plagg`;\n    const c = category.toLowerCase();\n    if (c && c !== \"null\") newPriceHeading.innerHTML = `${brand}-${c}`;\n    maxPrice.innerHTML = max;\n    minPrice.innerHTML = min;\n    if (currentMax && currentMax !== 'null' && currentMax !== '' && currentMax !== 'undefined' && max !== currentMax) {\n        previousMaxPrice.innerHTML = currentMax;\n        previousMaxPrice.style.display = 'block';\n    }\n    if (currentMin && currentMin !== 'null' && currentMin !== '' && currentMin !== 'undefined' && min !== currentMin) {\n        previousMinPrice.innerHTML = currentMin;\n        previousMinPrice.style.display = 'block';\n    }\n    acceptNewPriceButton.innerHTML = \"S\\xe4lj med nytt pris\";\n    denyNewPriceButton.innerHTML = \"S\\xe4nk ej\";\n    if (status === \"New\" && type === 'Valuation') {\n        newPriceToastTitle.innerHTML = \"V\\xe4rdering\";\n        acceptNewPriceButton.innerHTML = \"S\\xe4lj till v\\xe4rdering\";\n        denyNewPriceButton.innerHTML = \"Avb\\xf6j och avsluta\";\n    }\n    if (type === 'Adjusted ML Valuation') newPriceToastTitle.innerHTML = \"Nytt prisintervall\";\n    if (type !== 'Valuation' && type !== 'Adjusted ML Valuation') {\n        minPrice.innerHTML = `${min} kr`;\n        maxPriceDiv.style.display = 'none';\n    }\n    if (description && description !== 'undefined' && description !== '' && description !== 'null') {\n        newPriceText.innerHTML = description;\n        descriptionDiv.style.display = 'block';\n    }\n    acceptNewPriceButton.removeEventListener(\"click\", acceptNewPriceHandler);\n    const acceptNewPrice = ()=>{\n        storePriceResponse(itemId, max, min, 'Accepted', status);\n    };\n    acceptNewPriceButton.addEventListener('click', acceptNewPrice);\n    acceptNewPriceHandler = acceptNewPrice;\n    denyNewPriceButton.removeEventListener(\"click\", denyNewPriceHandler);\n    const denyNewPrice = ()=>{\n        storePriceResponse(itemId, max, min, 'Denied', status);\n    };\n    denyNewPriceButton.addEventListener('click', denyNewPrice);\n    denyNewPriceHandler = denyNewPrice;\n    // Open toast\n    triggerNewPriceToastOpen.click();\n}\nfunction loadInfoRequests(items) {\n    console.log(\"loadInfoRequests\");\n    const bidClone = document.getElementById('infoRequestBidTemplate').cloneNode(true);\n    const measurementsClone = document.getElementById('infoRequestMeasurementsTemplate').cloneNode(true);\n    const longerPeriodClone = document.getElementById('infoRequestLongerPeriodTemplate').cloneNode(true);\n    const updateImagesClone = document.getElementById('infoRequestImagesTemplate').cloneNode(true);\n    const valuationClone = document.getElementById('infoRequestValuationTemplate').cloneNode(true);\n    const infoRequestsList = document.getElementById('infoRequestsList');\n    infoRequestsList.replaceChildren();\n    (items || []).forEach((item)=>{\n        const itemId = item.id;\n        const infoRequests = item.infoRequests;\n        const status = item.status;\n        const brand = item.brand.replace(/'/g, '');\n        const currentMinPrice = item.minPriceEstimate;\n        const currentMaxPrice = item.maxPriceEstimate;\n        const deniedBefore = item?.infoRequests?.price?.response === \"Denied\" ? true : false;\n        const archived = item.archived;\n        const category = item.category;\n        const frontImageUrl = (0, _general.itemCoverImage)(item);\n        if (archived == undefined && status !== \"Unsold\" && status !== \"Sold\" && infoRequests) displayRequests();\n        function displayRequests() {\n            for(const req in infoRequests)if (infoRequests[req]?.status === \"Active\") {\n                let description = infoRequests[req].description;\n                if (description) description = description.replace(/'/g, '');\n                // PRICE REQUEST\n                if (req === \"price\") {\n                    const type = infoRequests[req].type;\n                    const newRequest = valuationClone.cloneNode(true);\n                    newRequest.id = `infoRequestPrice-${itemId}`;\n                    newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                    newRequest.querySelector('a .pricebuttontext').innerText = \"Se prisf\\xf6rslag\";\n                    newRequest.querySelector('.text-block-72').innerText = \"Vill du s\\xe4nka priset och f\\xe5 det s\\xe5lt?\";\n                    infoRequestsList.appendChild(newRequest);\n                    if (status === \"New\" && type !== 'Adjusted ML Valuation') {\n                        newRequest.querySelector('a .pricebuttontext').innerText = \"Se v\\xe4rdering\";\n                        newRequest.querySelector('.text-block-72').innerText = \"Vill du s\\xe4lja till v\\xe5r v\\xe4rdering?\";\n                        newRequest.querySelector('a').href = `/item-valuation?id=${itemId}`;\n                    } else setTimeout(()=>{\n                        const max = infoRequests[req].maxPrice;\n                        const min = infoRequests[req].minPrice;\n                        document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener('click', async ()=>{\n                            await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);\n                        });\n                    }, 0);\n                }\n                // MEASUREMENTS REQUEST\n                if (req === \"measurements\") {\n                    const newRequest = measurementsClone.cloneNode(true);\n                    newRequest.id = `infoRequestMeasurements-${itemId}`;\n                    newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                    infoRequestsList.appendChild(newRequest);\n                    setTimeout(()=>{\n                        document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener('click', async ()=>{\n                            await openMeasurementsToast(itemId, description);\n                        });\n                    }, 0);\n                }\n                // IMAGES REQUEST\n                if (req === \"images\") {\n                    const newRequest = updateImagesClone.cloneNode(true);\n                    newRequest.id = `infoRequestImages-${itemId}`;\n                    newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                    newRequest.querySelector('a').href = `/edit-item?id=${itemId}`;\n                    infoRequestsList.appendChild(newRequest);\n                }\n                // LONGER PERIOD REQUEST\n                if (req === \"longerPeriod\") {\n                    const newRequest = longerPeriodClone.cloneNode(true);\n                    newRequest.id = `infoRequestLongerPeriod-${itemId}`;\n                    newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                    infoRequestsList.appendChild(newRequest);\n                    setTimeout(()=>{\n                        document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener('click', async ()=>{\n                            await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);\n                        });\n                    }, 0);\n                }\n                // BID REQUEST\n                if (req === \"bid\") {\n                    const expires = infoRequests[req].expires;\n                    const now = new Date();\n                    const expirationDate = convertExpiresToDate(expires);\n                    // Only show bid request if it hasn't expired\n                    console.log(\"Expired?: \", expirationDate > now);\n                    if (expirationDate > now) {\n                        console.log(\"We try to show it!\");\n                        const newRequest = bidClone.cloneNode(true);\n                        newRequest.id = `infoRequestBid-${itemId}`;\n                        newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                        infoRequestsList.appendChild(newRequest);\n                        setTimeout(()=>{\n                            document.querySelector(`#infoRequestBid-${itemId} a`).addEventListener('click', async ()=>{\n                                const bidPrice = infoRequests[req].price;\n                                await openBidToast(itemId, currentMinPrice, bidPrice, expires);\n                            });\n                        }, 0);\n                    }\n                }\n                if (infoRequestsList.children.length > 0) infoRequestsDiv.style.display = \"block\";\n            }\n        }\n    });\n/*\n    db.collection(\"items\").where(\"user\", \"==\", userId).get().then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n            const itemId = doc.id;\n            const item = doc.data();\n            const infoRequests = item.infoRequests;\n            const status = item.status;\n            const brand = item.brand.replace(/'/g, '');\n            const currentMinPrice = item.minPriceEstimate;\n            const currentMaxPrice = item.maxPriceEstimate;\n            const deniedBefore = item?.infoRequests?.price?.response === \"Denied\" ? true : false;\n            const archived = item.archived;\n            const category = item.category;\n            const frontImageUrl = itemCoverImage(item);\n            if (archived == undefined && status !== \"Unsold\" && status !== \"Sold\" && infoRequests) {\n                displayRequests();\n            }\n\n            function displayRequests() {\n                for (const req in infoRequests) {\n                    if (infoRequests[req]?.status === \"Active\") {\n                        let description = infoRequests[req].description;\n\n                        if (description) { description = description.replace(/'/g, ''); }\n                        // PRICE REQUEST\n                        if (req === \"price\") {\n                            const type = infoRequests[req].type;\n                            const newRequest = valuationClone.cloneNode(true);\n                            newRequest.id = `infoRequestPrice-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a .pricebuttontext').innerText = 'Se prisförslag';\n                            newRequest.querySelector('.text-block-72').innerText = \"Vill du sänka priset och få det sålt?\";\n                            infoRequestsList.appendChild(newRequest);\n                            if (status === \"New\" && type !== 'Adjusted ML Valuation') {\n                                newRequest.querySelector('a .pricebuttontext').innerText = 'Se värdering';\n                                newRequest.querySelector('.text-block-72').innerText = 'Vill du sälja till vår värdering?'\n                                newRequest.querySelector('a').href = `/item-valuation?id=${itemId}`;\n                            } else {\n                                setTimeout(() => {\n                                    const max = infoRequests[req].maxPrice;\n                                    const min = infoRequests[req].minPrice;\n                                    document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener('click', async () => {\n                                        await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);\n                                    })\n                                }, 0);\n                            }\n                        }\n                        // MEASUREMENTS REQUEST\n                        if (req === \"measurements\") {\n                            const newRequest = measurementsClone.cloneNode(true);\n                            newRequest.id = `infoRequestMeasurements-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener('click', async () => {\n                                await openMeasurementsToast(itemId, description);\n                              })\n                            }, 0);\n                        }\n                        // IMAGES REQUEST\n                        if (req === \"images\") {\n                            const newRequest = updateImagesClone.cloneNode(true);\n                            newRequest.id = `infoRequestImages-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a').href = `/edit-item?id=${itemId}`;\n                            infoRequestsList.appendChild(newRequest);\n                        }\n                        // LONGER PERIOD REQUEST\n                        if (req === \"longerPeriod\") {\n                            const newRequest = longerPeriodClone.cloneNode(true);\n                            newRequest.id = `infoRequestLongerPeriod-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener('click', async () => {\n                                await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);\n                              })\n                            }, 0);\n                        }\n                        infoRequestsDiv.style.display = \"block\";\n                    }\n                }\n            }\n        });\n    });\n*/ }\n\n},{\"./general\":\"1tOWF\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"bNgzC\"}],\"1tOWF\":[function(require,module,exports,__globalThis) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"signOut\", ()=>signOut);\nparcelHelpers.export(exports, \"setFormAddressFields\", ()=>setFormAddressFields);\nparcelHelpers.export(exports, \"getFormAddressFields\", ()=>getFormAddressFields);\n// Validate Swedish Social Security Number (personnummer) using checksum\n//   Note: this is somewhat simplified because it does not take into account\n//   that the date of the number is valid (e.g. \"000000-0000\" does return as true)\nparcelHelpers.export(exports, \"isValidSwedishSsn\", ()=>isValidSwedishSsn);\nparcelHelpers.export(exports, \"formatPersonalId\", ()=>formatPersonalId);\nparcelHelpers.export(exports, \"itemCoverImage\", ()=>itemCoverImage);\nparcelHelpers.export(exports, \"shareCode\", ()=>shareCode);\n// Channel bottom sheet\nparcelHelpers.export(exports, \"channelRouter\", ()=>channelRouter);\nparcelHelpers.export(exports, \"hideChannelBottomSheet\", ()=>hideChannelBottomSheet);\n// End of channel bottom sheet\n// Toast animation functions\nparcelHelpers.export(exports, \"animateOpenToast\", ()=>animateOpenToast);\nparcelHelpers.export(exports, \"animateCloseToast\", ()=>animateCloseToast);\nparcelHelpers.export(exports, \"hideInfoRequestCard\", ()=>hideInfoRequestCard);\nasync function signOut() {\n    try {\n        try {\n            // Delete session cookie\n            await callBackendApi('/api/users/session', {\n                method: \"DELETE\",\n                fetchInit: {\n                    credentials: \"include\"\n                }\n            });\n        } catch (error) {\n            console.warn(\"[SSO] Error clearing session cookie:\", error);\n            errorHandler.report(error);\n        }\n        await firebase.auth().signOut();\n        console.log('User signed out');\n        authUser.current = null;\n        user.current = null;\n        userId = null;\n        localStorage.removeItem('sessionUser');\n        localStorage.removeItem('idToken');\n        localStorage.removeItem('authUserId');\n        localStorage.removeItem('authUser');\n        deleteCookie('maiAuth');\n        location.href = '/';\n    } catch (error) {\n        errorHandler.report(error);\n        console.log(error);\n    }\n}\nfunction setFormAddressFields(user1) {\n    document.getElementById(\"addressFirstName\").value = user1.addressFirstName || '';\n    document.getElementById(\"addressFirstName\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressLastName\").value = user1.addressLastName || '';\n    document.getElementById(\"addressLastName\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressStreetAddress\").value = user1.addressStreetAddress || '';\n    document.getElementById(\"addressStreetAddress\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressCO\").value = user1.addressCO || '';\n    document.getElementById(\"addressCO\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressPostalCode\").value = user1.addressPostalCode || '';\n    document.getElementById(\"addressPostalCode\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressCity\").value = user1.addressCity || '';\n    document.getElementById(\"addressCity\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressDoorCode\").value = user1.addressDoorCode || '';\n    document.getElementById(\"addressDoorCode\").dispatchEvent(new Event('input'));\n}\nfunction getFormAddressFields() {\n    let addressFirstName = document.getElementById(\"addressFirstName\").value;\n    let addressLastName = document.getElementById(\"addressLastName\").value;\n    let addressStreetAddress = document.getElementById(\"addressStreetAddress\").value;\n    let addressCO = document.getElementById(\"addressCO\").value;\n    let addressPostalCode = document.getElementById(\"addressPostalCode\").value;\n    let addressCity = document.getElementById(\"addressCity\").value;\n    let addressDoorCode = document.getElementById(\"addressDoorCode\").value;\n    addressFirstName = addressFirstName ? addressFirstName.trim().charAt(0).toUpperCase() + addressFirstName.trim().slice(1) : \"\";\n    addressLastName = addressLastName ? addressLastName.trim().charAt(0).toUpperCase() + addressLastName.trim().slice(1) : \"\";\n    addressStreetAddress = addressStreetAddress ? addressStreetAddress.trim().charAt(0).toUpperCase() + addressStreetAddress.trim().slice(1) : \"\";\n    addressCO = addressCO ? addressCO.trim() : \"\";\n    addressPostalCode = addressPostalCode ? addressPostalCode.trim().replace(/\\D/g, '') : \"\";\n    addressCity = addressCity ? addressCity.trim().charAt(0).toUpperCase() + addressCity.trim().slice(1) : \"\";\n    addressDoorCode = addressDoorCode ? addressDoorCode.trim() : \"\";\n    return {\n        addressFirstName,\n        addressLastName,\n        addressStreetAddress,\n        addressCO,\n        addressPostalCode,\n        addressCity,\n        addressDoorCode\n    };\n}\nfunction isValidSwedishSsn(ssn) {\n    ssn = ssn.replace(/\\D/g, \"\") // strip out all but digits\n    .split(\"\") // convert string to array\n    .reverse() // reverse order for Luhn\n    .slice(0, 10); // keep only 10 digits (i.e. 1977 becomes 77)\n    // verify we got 10 digits, otherwise it is invalid\n    if (ssn.length !== 10) return false;\n    const sum = ssn.map((n)=>Number(n)).reduce((previous, current, index)=>{\n        if (index % 2) current *= 2;\n        if (current > 9) current -= 9;\n        return previous + current;\n    });\n    return 0 === sum % 10;\n}\nfunction formatPersonalId(personalIdInput) {\n    let personalId = personalIdInput.replace('-', '');\n    if (personalId.length !== 12 && (personalId.substring(0, 2) !== '19' || personalId.substring(0, 2) !== '20')) {\n        if (Number(personalId.substring(0, 2)) <= 99 && Number(personalId.substring(0, 2)) > 25) personalId = \"19\" + personalId;\n        else personalId = \"20\" + personalId;\n    }\n    if (personalId.length === 12) return personalId;\n    return null;\n}\nfunction itemCoverImage(item) {\n    if (item.images) {\n        const images = item.images;\n        return images.modelImageSmall || images.modelImage || images.coverImageSmall || images.coverImage || images.enhancedFrontImageSmall || images.enhancedFrontImage || images.frontImageSmall || images.frontImage;\n    } else if (item.imagesv2) {\n        const priorityOrder = [\n            'modelImage',\n            'enhancedFrontImage',\n            'frontImage'\n        ];\n        for (const name of priorityOrder){\n            const image = item.imagesv2.find((img)=>img.name === name);\n            if (image) {\n                if (image?.versions?.small) return image.versions.small;\n                if (image?.versions?.medium) return image.versions.medium;\n                if (image?.versions?.large) return image.versions.large;\n                if (image.url) return image.url;\n            }\n        }\n    }\n    return null;\n}\nfunction shareCode() {\n    const code = user.current.referralData.referralCode;\n    let text;\n    if (user.current?.maiCircle) text = \"H\\xe4r f\\xe5r du en exklusiv inbjudan till Mai, som ger en extra fin start med tre kommissionsfria f\\xf6rs\\xe4ljningar.\";\n    else text = \"Jag bjuder in dig till Mai f\\xf6r att s\\xe4lja dina kl\\xe4der! G\\xe5 genom min l\\xe4nk f\\xf6r att f\\xe5 en extra kommissionsfri f\\xf6rs\\xe4ljning.\";\n    if (navigator.share) navigator.share({\n        text: text,\n        url: `https://invite.maiapp.se/refer?invite=${code}`\n    }).then(()=>{\n        console.log('Thanks for sharing!');\n    }).catch((e)=>{\n        console.error(e);\n        errorHandler.report(e);\n    });\n    else {\n        console.log(\"Browser doesn't support navigator.share => Copy to clipboard!\");\n        const shareText = text + \"\\n\" + `https://invite.maiapp.se/refer?invite=${code}`;\n        navigator.clipboard.writeText(shareText);\n        linkCopiedBanner.style.display = 'flex';\n        setTimeout(function() {\n            linkCopiedBanner.style.display = 'none';\n        }, 1500);\n    }\n}\nfunction channelRouter(webpath) {\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    if (isIOS) showChannelBottomSheet(webpath);\n    else window.location.href = webpath;\n}\nfunction showChannelBottomSheet(webpath) {\n    document.getElementById('continueOnWebBottomSheet').href = window.location.origin + webpath;\n    document.getElementById('darkOverlay').classList.add('active');\n    document.getElementById('channelBottomSheet').classList.add('active');\n}\nfunction hideChannelBottomSheet() {\n    document.getElementById('darkOverlay').classList.remove('active');\n    document.getElementById('channelBottomSheet').classList.remove('active');\n}\nfunction animateOpenToast(elementId) {\n    const element = document.getElementById(elementId);\n    if (element) {\n        // Set initial position below screen\n        element.style.transform = 'translateY(100%)';\n        element.style.transition = 'transform 0.3s ease-out';\n        element.style.display = 'block';\n        // Animate to visible position\n        setTimeout(()=>{\n            element.style.transform = 'translateY(0%)';\n        }, 10);\n        document.getElementById(\"darkOverlay\").classList.add(\"active\");\n    }\n}\nfunction animateCloseToast(elementId) {\n    const element = document.getElementById(elementId);\n    // Add the visibility check here\n    if (!element || element.style.display === 'none') return;\n    // Animate down and hide\n    element.style.transform = 'translateY(100%)';\n    element.style.transition = 'transform 0.3s ease-in';\n    // Hide after animation completes\n    setTimeout(()=>{\n        element.style.display = 'none';\n    }, 300);\n    document.getElementById(\"darkOverlay\").classList.remove(\"active\");\n}\nfunction hideInfoRequestCard(elementId) {\n    const bidRequestElement = document.getElementById(elementId);\n    if (bidRequestElement) {\n        bidRequestElement.style.display = 'none';\n        // Check if there are any remaining visible cards\n        const infoRequestsList = document.getElementById('infoRequestsList');\n        if (infoRequestsList) {\n            const visibleCards = infoRequestsList.querySelectorAll('[id^=\"infoRequest\"]:not([style*=\"display: none\"])');\n            if (visibleCards.length === 0) {\n                const infoRequestsDiv = document.getElementById('infoRequestsDiv');\n                if (infoRequestsDiv) infoRequestsDiv.style.display = 'none';\n            }\n        }\n    }\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"bNgzC\"}],\"bNgzC\":[function(require,module,exports,__globalThis) {\nexports.interopDefault = function(a) {\n    return a && a.__esModule ? a : {\n        default: a\n    };\n};\nexports.defineInteropFlag = function(a) {\n    Object.defineProperty(a, '__esModule', {\n        value: true\n    });\n};\nexports.exportAll = function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n        if (key === 'default' || key === '__esModule' || Object.prototype.hasOwnProperty.call(dest, key)) return;\n        Object.defineProperty(dest, key, {\n            enumerable: true,\n            get: function() {\n                return source[key];\n            }\n        });\n    });\n    return dest;\n};\nexports.export = function(dest, destName, get) {\n    Object.defineProperty(dest, destName, {\n        enumerable: true,\n        get: get\n    });\n};\n\n},{}]},[\"21npA\"], \"21npA\", \"parcelRequire81ca\", {})\n\n//# sourceMappingURL=infoRequestsFunctions.js.map\n","import {itemCoverImage, animateOpenToast, animateCloseToast, hideInfoRequestCard} from \"./general\";\n\n/**\n * Converts expires value to a Date object, handling both Firestore timestamp format\n * ({ _seconds, _nanoseconds }) and standard Date formats (string, number, Date)\n */\nfunction convertExpiresToDate(expires) {\n    // Handle Firestore timestamp format\n    if (expires && typeof expires === 'object' && expires._seconds !== undefined) {\n        return new Date(expires._seconds * 1000 + (expires._nanoseconds || 0) / 1000000);\n    }\n    // Handle standard Date formats\n    return new Date(expires);\n}\n\nasync function openMeasurementsToast(itemId, description) {\n    measurementDescriptionText.innerHTML = description;\n    measurementsSubmitButton.addEventListener('click', async function () {\n        const input = measurementsInput.value;\n        if (input.length > 0 && input !== \" \") {\n            await db.collection('items').doc(itemId).update({\n                measurements: input,\n                \"infoRequests.measurements.status\": \"Resolved\"\n            });\n        }\n        triggerMeasurementsToastClose.click();\n        setTimeout(function () { location.reload(); }, 400);\n    });\n    triggerMeasurementsToastOpen.click();\n}\n\nasync function openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore) {\n    if(!itemId){return}\n    console.log('is this happening?');\n    // If user is qualified to get the discount question -> Show it to the user\n    const price = currentMinPrice;\n    const priceWithDiscount30 = Math.ceil((price * 0.7) / 10) * 10;\n    const priceWithDiscount20 = Math.ceil((price * 0.8) / 10) * 10;\n    priceAfterDiscount30.innerHTML = `(Priset blir ${priceWithDiscount30} kr)`;\n    priceAfterDiscount20.innerHTML = `(Priset blir ${priceWithDiscount20} kr)`;\n    priceNoDiscount.innerHTML = `(${price} kr)`;\n    if (price >= 140 && !deniedBefore) {\n        longerPeriodDescriptionText.innerHTML = `Säljperioden för ditt ${brand}-plagg har nått sitt slut. Välj om du vill förlänga säljperioden med ytterligare 30 dagar och om du vill sänka priset för att öka chansen att få det sålt.`;\n        discountFormDiv.style.display = 'block';\n    } else {\n        longerPeriodDescriptionText.innerHTML = `Säljperioden för ditt ${brand}-plagg har nått sitt slut. Vill du förlänga säljperioden med ytterligare 30 dagar eller avsluta försäljningen?`;\n        discountFormDiv.style.display = 'none';\n    }\n\n    // Accept longer selling window and store chosen discount\n    longerPeriodAcceptButton.addEventListener('click', async function () {\n        const today = new Date();\n        const todayDate = today.toISOString().split('T')[0];\n        let newPrice = price;\n        let discount = 0\n        var discountRadioButtons = document.getElementsByName(\"Discount\");\n        for (var x = 0; x < discountRadioButtons.length; x++) {\n            if (discountRadioButtons[x].checked) {\n                const input = discountRadioButtons[x].value;\n                if (input === '30') {\n                    newPrice = priceWithDiscount30;\n                    discount = 30;\n                }\n                if (input === '20') {\n                    newPrice = priceWithDiscount20;\n                    discount = 20;\n                }\n            }\n        }\n        await db.collection('items').doc(itemId).update({\n            longerPeriodAcceptedDate: todayDate,\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Accepted\",\n            longerPeriodAcceptedDiscount: discount,\n            minPriceEstimate: newPrice\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function () { location.reload(); }, 300);\n    });\n    // Decline longer selling period and quit sales\n    longerPeriodDenyButton.addEventListener('click', async function () {\n        await db.collection('items').doc(itemId).update({\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Denied\",\n            \"status\": \"Unsold\" // This field is normally mastered by AT - I do this for the user to see the effect immediately (the card is removed)\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function () { location.reload(); }, 300);\n    });\n    triggerLongerPeriodToastOpen.click();\n}\n\nasync function openBidToast(itemId, minPrice, bidPrice, expires) {\n  if(!itemId){return}\n  bidButtonsContainer.style.visibility = 'visible';\n  bidButtonsContainer.style.visibility = 'visible';\n  bidPriceText.innerHTML = `${bidPrice} kr`;\n\n  // Calculate hours and minutes remaining\n  const now = new Date();\n  const expirationDate = convertExpiresToDate(expires);\n  const timeDiffMs = expirationDate.getTime() - now.getTime();\n  const timeDiffMinutes = Math.floor(timeDiffMs / (1000 * 60));\n  const hours = Math.floor(timeDiffMinutes / 60);\n  const minutes = Math.floor(timeDiffMinutes % 60);\n\n  bidDescription.innerHTML = `Budet ligger under ditt lägsta pris på ${minPrice} kr. Giltigt i ${hours} tim och ${minutes} min.`;\n\n  // Accept bid and show confirmation\n  bidAcceptButton.removeEventListener(\"click\", bidAcceptHandler);\n  const acceptBid = async function () {\n      try {\n          acceptBidLoading.style.display = 'block';\n          acceptBidButtonText.style.display = 'none';\n\n          // Call the API endpoint to accept the bid\n          await callBackendApi(`/api/items/${itemId}/infoRequests`, {\n              method: 'PUT',\n              data: {\n                  type: 'bid',\n                  response: 'Accepted'\n              }\n          });\n\n          acceptBidLoading.style.display = 'none';\n          acceptBidButtonText.style.display = 'block';\n          bidTitle.style.visibility = 'hidden';\n          bidButtonsContainer.style.visibility = 'hidden';\n\n          // Fade out animation\n          bidPriceText.style.transition = 'opacity 0.3s ease';\n          bidDescription.style.transition = 'opacity 0.3s ease';\n          bidPriceText.style.opacity = '0';\n          bidDescription.style.opacity = '0';\n\n          // Wait for fade out to complete, then change text and fade in\n          setTimeout(() => {\n              bidPriceText.innerHTML = 'Toppen!';\n              bidDescription.innerHTML = 'När köparen betalat får du ett SMS om att det är sålt och redo att skickas.';\n\n              // Fade in animation\n              bidPriceText.style.opacity = '1';\n              bidDescription.style.opacity = '1';\n          }, 300);\n\n          // Hide the specific info request element instead of reloading the page\n          hideInfoRequestCard(`infoRequestBid-${itemId}`);\n      } catch (error) {\n          console.error('Failed to accept bid:', error);\n          // You might want to show an error message to the user here\n      }\n  };\n  bidAcceptButton.addEventListener('click', acceptBid);\n  bidAcceptHandler = acceptBid;\n\n  // Decline bid\n  bidDenyButton.removeEventListener(\"click\", bidDenyHandler);\n  // TODO: Use web-api endpoint instead to trigger backend logic\n  const denyBid = async function () {\n      await db.collection('items').doc(itemId).update({\n          \"infoRequests.bid.status\": \"Resolved\",\n          \"infoRequests.bid.response\": \"Denied\",\n      });\n      animateCloseToast('bidToast');\n      // Hide the specific info request element instead of reloading the page\n      hideInfoRequestCard(`infoRequestBid-${itemId}`);\n  };\n  bidDenyButton.addEventListener('click', denyBid);\n  bidDenyHandler = denyBid;\n  animateOpenToast('bidToast');\n}\n\nasync function storePriceResponse(itemId, max, min, response, status) {\n    console.log(\"storePriceResponse\", itemId, max, min, response);\n    // Accept price\n    if (response === \"Accepted\") {\n        await db.collection('items').doc(itemId).update({\n            \"infoRequests.price.status\": \"Resolved\",\n            \"infoRequests.price.response\": \"Accepted\",\n            \"maxPriceEstimate\": max,\n            \"minPriceEstimate\": min\n        }).then(function () {\n            triggerNewPriceToastClose.click();\n            setTimeout(function () { location.reload(); }, 300);\n        });\n    }\n    // Deny price\n    if (response === \"Denied\") {\n        let fields = {\n            \"infoRequests.price.status\": \"Resolved\",\n            \"infoRequests.price.response\": \"Denied\"\n        };\n        if (status === \"New\") {\n            fields[\"archived\"] = true;\n            fields[\"willNotSell\"] = true;\n        }\n        await db.collection('items').doc(itemId).update(fields).then(function () {\n            triggerNewPriceToastClose.click();\n            setTimeout(function () { location.reload(); }, 300);\n        });\n    }\n}\nlet acceptNewPriceHandler;\nlet denyNewPriceHandler;\nlet bidAcceptHandler;\nlet bidDenyHandler;\n\nasync function openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMax, currentMin) {\n    console.log(\"openNewPriceToast\", itemId, status, max, min, brand, description, category, type, currentMax, currentMin);\n    previousMinPrice.style.display = 'none';\n    previousMaxPrice.style.display = 'none';\n    maxPriceDiv.style.display = 'block';\n    minPriceDiv.style.display = 'block';\n\n    // Set content of toast\n    newPriceToastTitle.innerHTML = \"Nytt lägsta pris\";\n    newPriceHeading.innerHTML = `${brand}-plagg`;\n    const c = category.toLowerCase();\n    if (c && c !== \"null\") { newPriceHeading.innerHTML = `${brand}-${c}`; }\n    maxPrice.innerHTML = max;\n    minPrice.innerHTML = min;\n    if (currentMax && currentMax !== 'null' && currentMax !== '' && currentMax !== 'undefined' && max !== currentMax){\n        previousMaxPrice.innerHTML = currentMax;\n        previousMaxPrice.style.display = 'block';\n    }\n    if (currentMin && currentMin !== 'null' && currentMin !== '' && currentMin !== 'undefined' && min !== currentMin){\n        previousMinPrice.innerHTML = currentMin;\n        previousMinPrice.style.display = 'block';\n    }\n    acceptNewPriceButton.innerHTML = \"Sälj med nytt pris\";\n    denyNewPriceButton.innerHTML = \"Sänk ej\";\n\n    if (status === \"New\" && type === 'Valuation') {\n        newPriceToastTitle.innerHTML = \"Värdering\";\n        acceptNewPriceButton.innerHTML = \"Sälj till värdering\";\n        denyNewPriceButton.innerHTML = \"Avböj och avsluta\";\n    }\n    if (type === 'Adjusted ML Valuation'){\n        newPriceToastTitle.innerHTML = \"Nytt prisintervall\";\n\n    }\n    if (type !== 'Valuation' && type !== 'Adjusted ML Valuation'){ //Custom lowered price and automatic price dump cases\n        minPrice.innerHTML = `${min} kr`;\n        maxPriceDiv.style.display = 'none';\n    }\n    if (description && description !== 'undefined' && description !== '' && description !== 'null') {\n        newPriceText.innerHTML = description;\n        descriptionDiv.style.display = 'block';\n    }\n    acceptNewPriceButton.removeEventListener(\"click\", acceptNewPriceHandler);\n    const acceptNewPrice = () => { storePriceResponse(itemId, max, min, 'Accepted', status); }\n    acceptNewPriceButton.addEventListener('click', acceptNewPrice);\n    acceptNewPriceHandler = acceptNewPrice\n    denyNewPriceButton.removeEventListener(\"click\", denyNewPriceHandler);\n    const denyNewPrice = () => { storePriceResponse(itemId, max, min, 'Denied', status); }\n    denyNewPriceButton.addEventListener('click', denyNewPrice);\n    denyNewPriceHandler = denyNewPrice;\n\n\n    // Open toast\n    triggerNewPriceToastOpen.click();\n}\n\nexport function loadInfoRequests(items) {\n    console.log(\"loadInfoRequests\");\n    const bidClone = document.getElementById('infoRequestBidTemplate').cloneNode(true);\n    const measurementsClone = document.getElementById('infoRequestMeasurementsTemplate').cloneNode(true);\n    const longerPeriodClone = document.getElementById('infoRequestLongerPeriodTemplate').cloneNode(true);\n    const updateImagesClone = document.getElementById('infoRequestImagesTemplate').cloneNode(true);\n    const valuationClone = document.getElementById('infoRequestValuationTemplate').cloneNode(true);\n    const infoRequestsList = document.getElementById('infoRequestsList');\n    infoRequestsList.replaceChildren();\n\n    (items || []).forEach((item) => {\n        const itemId = item.id;\n        const infoRequests = item.infoRequests;\n            const status = item.status;\n            const brand = item.brand.replace(/'/g, '');\n            const currentMinPrice = item.minPriceEstimate;\n            const currentMaxPrice = item.maxPriceEstimate;\n            const deniedBefore = item?.infoRequests?.price?.response === \"Denied\" ? true : false;\n            const archived = item.archived;\n            const category = item.category;\n            const frontImageUrl = itemCoverImage(item);\n\n            if (archived == undefined && status !== \"Unsold\" && status !== \"Sold\" && infoRequests) {\n                displayRequests();\n            }\n\n            function displayRequests() {\n                for (const req in infoRequests) {\n                    if (infoRequests[req]?.status === \"Active\") {\n                        let description = infoRequests[req].description;\n\n                        if (description) { description = description.replace(/'/g, ''); }\n                        // PRICE REQUEST\n                        if (req === \"price\") {\n                            const type = infoRequests[req].type;\n                            const newRequest = valuationClone.cloneNode(true);\n                            newRequest.id = `infoRequestPrice-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a .pricebuttontext').innerText = 'Se prisförslag';\n                            newRequest.querySelector('.text-block-72').innerText = \"Vill du sänka priset och få det sålt?\";\n                            infoRequestsList.appendChild(newRequest);\n                            if (status === \"New\" && type !== 'Adjusted ML Valuation') {\n                                newRequest.querySelector('a .pricebuttontext').innerText = 'Se värdering';\n                                newRequest.querySelector('.text-block-72').innerText = 'Vill du sälja till vår värdering?'\n                                newRequest.querySelector('a').href = `/item-valuation?id=${itemId}`;\n                            } else {\n                                setTimeout(() => {\n                                    const max = infoRequests[req].maxPrice;\n                                    const min = infoRequests[req].minPrice;\n                                    document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener('click', async () => {\n                                        await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);\n                                    })\n                                }, 0);\n                            }\n                        }\n                        // MEASUREMENTS REQUEST\n                        if (req === \"measurements\") {\n                            const newRequest = measurementsClone.cloneNode(true);\n                            newRequest.id = `infoRequestMeasurements-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener('click', async () => {\n                                await openMeasurementsToast(itemId, description);\n                              })\n                            }, 0);\n                        }\n                        // IMAGES REQUEST\n                        if (req === \"images\") {\n                            const newRequest = updateImagesClone.cloneNode(true);\n                            newRequest.id = `infoRequestImages-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a').href = `/edit-item?id=${itemId}`;\n                            infoRequestsList.appendChild(newRequest);\n                        }\n                        // LONGER PERIOD REQUEST\n                        if (req === \"longerPeriod\") {\n                            const newRequest = longerPeriodClone.cloneNode(true);\n                            newRequest.id = `infoRequestLongerPeriod-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener('click', async () => {\n                                await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);\n                              })\n                            }, 0);\n                        }\n                        // BID REQUEST\n                        if (req === \"bid\") {\n                          const expires = infoRequests[req].expires;\n                          const now = new Date();\n                          const expirationDate = convertExpiresToDate(expires);\n\n                          // Only show bid request if it hasn't expired\n                          console.log(\"Expired?: \", (expirationDate > now));\n                          if (expirationDate > now) {\n                            console.log(\"We try to show it!\");\n                            const newRequest = bidClone.cloneNode(true);\n                            newRequest.id = `infoRequestBid-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestBid-${itemId} a`).addEventListener('click', async () => {\n                                const bidPrice = infoRequests[req].price;\n                                await openBidToast(itemId, currentMinPrice, bidPrice, expires);\n                              })\n                            }, 0);\n                          }\n                      }\n                        if (infoRequestsList.children.length > 0) {\n                            infoRequestsDiv.style.display = \"block\";\n                        }\n                    }\n                }\n            }\n    });\n\n/*\n    db.collection(\"items\").where(\"user\", \"==\", userId).get().then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n            const itemId = doc.id;\n            const item = doc.data();\n            const infoRequests = item.infoRequests;\n            const status = item.status;\n            const brand = item.brand.replace(/'/g, '');\n            const currentMinPrice = item.minPriceEstimate;\n            const currentMaxPrice = item.maxPriceEstimate;\n            const deniedBefore = item?.infoRequests?.price?.response === \"Denied\" ? true : false;\n            const archived = item.archived;\n            const category = item.category;\n            const frontImageUrl = itemCoverImage(item);\n            if (archived == undefined && status !== \"Unsold\" && status !== \"Sold\" && infoRequests) {\n                displayRequests();\n            }\n\n            function displayRequests() {\n                for (const req in infoRequests) {\n                    if (infoRequests[req]?.status === \"Active\") {\n                        let description = infoRequests[req].description;\n\n                        if (description) { description = description.replace(/'/g, ''); }\n                        // PRICE REQUEST\n                        if (req === \"price\") {\n                            const type = infoRequests[req].type;\n                            const newRequest = valuationClone.cloneNode(true);\n                            newRequest.id = `infoRequestPrice-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a .pricebuttontext').innerText = 'Se prisförslag';\n                            newRequest.querySelector('.text-block-72').innerText = \"Vill du sänka priset och få det sålt?\";\n                            infoRequestsList.appendChild(newRequest);\n                            if (status === \"New\" && type !== 'Adjusted ML Valuation') {\n                                newRequest.querySelector('a .pricebuttontext').innerText = 'Se värdering';\n                                newRequest.querySelector('.text-block-72').innerText = 'Vill du sälja till vår värdering?'\n                                newRequest.querySelector('a').href = `/item-valuation?id=${itemId}`;\n                            } else {\n                                setTimeout(() => {\n                                    const max = infoRequests[req].maxPrice;\n                                    const min = infoRequests[req].minPrice;\n                                    document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener('click', async () => {\n                                        await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);\n                                    })\n                                }, 0);\n                            }\n                        }\n                        // MEASUREMENTS REQUEST\n                        if (req === \"measurements\") {\n                            const newRequest = measurementsClone.cloneNode(true);\n                            newRequest.id = `infoRequestMeasurements-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener('click', async () => {\n                                await openMeasurementsToast(itemId, description);\n                              })\n                            }, 0);\n                        }\n                        // IMAGES REQUEST\n                        if (req === \"images\") {\n                            const newRequest = updateImagesClone.cloneNode(true);\n                            newRequest.id = `infoRequestImages-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a').href = `/edit-item?id=${itemId}`;\n                            infoRequestsList.appendChild(newRequest);\n                        }\n                        // LONGER PERIOD REQUEST\n                        if (req === \"longerPeriod\") {\n                            const newRequest = longerPeriodClone.cloneNode(true);\n                            newRequest.id = `infoRequestLongerPeriod-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener('click', async () => {\n                                await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);\n                              })\n                            }, 0);\n                        }\n                        infoRequestsDiv.style.display = \"block\";\n                    }\n                }\n            }\n        });\n    });\n*/\n\n}\n","export async function signOut() {\n    try {\n        try {\n          // Delete session cookie\n          await callBackendApi('/api/users/session', {\n            method: \"DELETE\",\n            fetchInit: { credentials: \"include\" },\n          });\n        } catch (error) {\n          console.warn(\"[SSO] Error clearing session cookie:\", error);\n          errorHandler.report(error);\n        }\n        await firebase.auth().signOut();\n        console.log('User signed out');\n        authUser.current = null;\n        user.current = null;\n        userId = null;\n        localStorage.removeItem('sessionUser');\n        localStorage.removeItem('idToken');\n        localStorage.removeItem('authUserId');\n        localStorage.removeItem('authUser');\n        deleteCookie('maiAuth');\n\n\n        location.href = '/';\n    } catch (error) {\n        errorHandler.report(error);\n        console.log(error);\n    }\n}\n\nexport function setFormAddressFields(user) {\n    document.getElementById(\"addressFirstName\").value = user.addressFirstName || '';\n    document.getElementById(\"addressFirstName\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressLastName\").value = user.addressLastName || '';\n    document.getElementById(\"addressLastName\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressStreetAddress\").value = user.addressStreetAddress || '';\n    document.getElementById(\"addressStreetAddress\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressCO\").value = user.addressCO || '';\n    document.getElementById(\"addressCO\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressPostalCode\").value = user.addressPostalCode || '';\n    document.getElementById(\"addressPostalCode\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressCity\").value = user.addressCity || '';\n    document.getElementById(\"addressCity\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressDoorCode\").value = user.addressDoorCode || '';\n    document.getElementById(\"addressDoorCode\").dispatchEvent(new Event('input'));\n}\nexport function getFormAddressFields() {\n    let addressFirstName = document.getElementById(\"addressFirstName\").value;\n    let addressLastName = document.getElementById(\"addressLastName\").value;\n    let addressStreetAddress = document.getElementById(\"addressStreetAddress\").value;\n    let addressCO = document.getElementById(\"addressCO\").value;\n    let addressPostalCode = document.getElementById(\"addressPostalCode\").value;\n    let addressCity = document.getElementById(\"addressCity\").value;\n    let addressDoorCode = document.getElementById(\"addressDoorCode\").value;\n\n    addressFirstName = addressFirstName ? addressFirstName.trim().charAt(0).toUpperCase() + addressFirstName.trim().slice(1) : \"\";\n    addressLastName = addressLastName ? addressLastName.trim().charAt(0).toUpperCase() + addressLastName.trim().slice(1) : \"\";\n    addressStreetAddress = addressStreetAddress ? addressStreetAddress.trim().charAt(0).toUpperCase() + addressStreetAddress.trim().slice(1) : \"\";\n    addressCO = addressCO ? addressCO.trim() : \"\";\n    addressPostalCode = addressPostalCode ? addressPostalCode.trim().replace(/\\D/g, '') : \"\";\n    addressCity = addressCity ? addressCity.trim().charAt(0).toUpperCase() + addressCity.trim().slice(1) : \"\";\n    addressDoorCode = addressDoorCode ? addressDoorCode.trim() : \"\";\n    return { addressFirstName, addressLastName, addressStreetAddress, addressCO, addressPostalCode, addressCity, addressDoorCode };\n}\n\n\n// Validate Swedish Social Security Number (personnummer) using checksum\n//   Note: this is somewhat simplified because it does not take into account\n//   that the date of the number is valid (e.g. \"000000-0000\" does return as true)\nexport function isValidSwedishSsn(ssn) {\n    ssn = ssn\n        .replace(/\\D/g, \"\")     // strip out all but digits\n        .split(\"\")              // convert string to array\n        .reverse()              // reverse order for Luhn\n        .slice(0, 10);          // keep only 10 digits (i.e. 1977 becomes 77)\n\n    // verify we got 10 digits, otherwise it is invalid\n    if (ssn.length !== 10) {\n        return false;\n    }\n    const sum = ssn.map((n) => Number(n))\n        .reduce((previous, current, index) => {\n            if (index % 2) current *= 2;\n            if (current > 9) current -= 9;\n            return previous + current;\n        });\n    return 0 === sum % 10;\n}\n\n\nexport function formatPersonalId(personalIdInput) {\n    let personalId = personalIdInput.replace('-', '');\n    if (personalId.length !== 12 && (personalId.substring(0, 2) !== '19' || personalId.substring(0, 2) !== '20')) {\n        if (Number(personalId.substring(0, 2)) <= 99 && Number(personalId.substring(0, 2)) > 25) {\n            personalId = \"19\" + personalId;\n        } else {\n            personalId = \"20\" + personalId;\n        }\n    }\n    if (personalId.length === 12) {\n        return personalId;\n    }\n    return null;\n}\n\nexport function itemCoverImage(item) {\n  if (item.images) {\n    const images = item.images;\n    return images.modelImageSmall || images.modelImage || images.coverImageSmall || images.coverImage || images.enhancedFrontImageSmall || images.enhancedFrontImage || images.frontImageSmall || images.frontImage;\n  } else if (item.imagesv2) {\n    const priorityOrder = ['modelImage', 'enhancedFrontImage', 'frontImage'];\n    for (const name of priorityOrder) {\n      const image = item.imagesv2.find(img => img.name === name);\n      if (image) {\n        if (image?.versions?.small) return image.versions.small;\n        if (image?.versions?.medium) return image.versions.medium;\n        if (image?.versions?.large) return image.versions.large;\n        if (image.url) return image.url;\n      }\n    }\n  }\n  return null;\n}\n\nexport function shareCode() {\n    const code = user.current.referralData.referralCode;\n    let text;\n    if (user.current?.maiCircle) {\n        text = \"Här får du en exklusiv inbjudan till Mai, som ger en extra fin start med tre kommissionsfria försäljningar.\";\n    } else {\n        text = \"Jag bjuder in dig till Mai för att sälja dina kläder! Gå genom min länk för att få en extra kommissionsfri försäljning.\";\n    }\n    if (navigator.share) {\n        navigator.share({\n            text: text,\n            url: `https://invite.maiapp.se/refer?invite=${code}`\n        }).then(() => { console.log('Thanks for sharing!'); }).catch((e) => {\n            console.error(e);\n            errorHandler.report(e);\n        });\n    } else {\n        console.log(\"Browser doesn't support navigator.share => Copy to clipboard!\");\n        const shareText = text + \"\\n\" + `https://invite.maiapp.se/refer?invite=${code}`;\n        navigator.clipboard.writeText(shareText);\n        linkCopiedBanner.style.display = 'flex';\n        setTimeout(function () { linkCopiedBanner.style.display = 'none'; }, 1500);\n    }\n}\n\n// Channel bottom sheet\nexport function channelRouter(webpath){\n  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n  if (isIOS) {\n    showChannelBottomSheet(webpath)\n  } else {\n    window.location.href = webpath;\n  }\n}\n\nfunction showChannelBottomSheet(webpath){\n  document.getElementById('continueOnWebBottomSheet').href = window.location.origin + webpath;\n  document.getElementById('darkOverlay').classList.add('active');\n  document.getElementById('channelBottomSheet').classList.add('active');\n}\n\nexport function hideChannelBottomSheet(){\n  document.getElementById('darkOverlay').classList.remove('active');\n  document.getElementById('channelBottomSheet').classList.remove('active');\n}\n// End of channel bottom sheet\n\n// Toast animation functions\nexport function animateOpenToast(elementId) {\n  const element = document.getElementById(elementId);\n  if (element) {\n    // Set initial position below screen\n    element.style.transform = 'translateY(100%)';\n    element.style.transition = 'transform 0.3s ease-out';\n    element.style.display = 'block';\n\n    // Animate to visible position\n    setTimeout(() => {\n      element.style.transform = 'translateY(0%)';\n    }, 10);\n    document.getElementById(\"darkOverlay\").classList.add(\"active\");\n  }\n}\n\nexport function animateCloseToast(elementId) {\n  const element = document.getElementById(elementId);\n\n  // Add the visibility check here\n  if (!element || element.style.display === 'none') {\n    return;\n  }\n\n  // Animate down and hide\n  element.style.transform = 'translateY(100%)';\n  element.style.transition = 'transform 0.3s ease-in';\n\n  // Hide after animation completes\n  setTimeout(() => {\n    element.style.display = 'none';\n  }, 300);\n\n  document.getElementById(\"darkOverlay\").classList.remove(\"active\");\n}\n\nexport function hideInfoRequestCard(elementId) {\n  const bidRequestElement = document.getElementById(elementId);\n  if (bidRequestElement) {\n    bidRequestElement.style.display = 'none';\n\n    // Check if there are any remaining visible cards\n    const infoRequestsList = document.getElementById('infoRequestsList');\n    if (infoRequestsList) {\n      const visibleCards = infoRequestsList.querySelectorAll('[id^=\"infoRequest\"]:not([style*=\"display: none\"])');\n      if (visibleCards.length === 0) {\n        const infoRequestsDiv = document.getElementById('infoRequestsDiv');\n        if (infoRequestsDiv) {\n          infoRequestsDiv.style.display = 'none';\n        }\n      }\n    }\n  }\n}\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["modules","entry","mainEntry","parcelRequireName","externals","distDir","publicUrl","devServer","globalObject","globalThis","self","window","global","previousRequire","importMap","i","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","Array","isArray","m","__esModule","forEach","v","key","exp","Object","keys","prototype","hasOwnProperty","defineProperty","enumerable","get","value","default","isParcelRequire","moduleName","bundle","parent","register","length","mainExports","define","amd","__globalThis","acceptNewPriceHandler","denyNewPriceHandler","bidAcceptHandler","bidDenyHandler","parcelHelpers","defineInteropFlag","export","loadInfoRequests","_general","convertExpiresToDate","expires","Date","undefined","_seconds","_nanoseconds","openMeasurementsToast","itemId","description","measurementDescriptionText","innerHTML","measurementsSubmitButton","addEventListener","input","measurementsInput","db","collection","doc","update","measurements","triggerMeasurementsToastClose","click","setTimeout","location","reload","triggerMeasurementsToastOpen","openLongerPeriodToast","brand","currentMinPrice","deniedBefore","console","log","priceWithDiscount30","Math","ceil","price","priceWithDiscount20","priceAfterDiscount30","priceAfterDiscount20","priceNoDiscount","longerPeriodDescriptionText","discountFormDiv","style","display","longerPeriodAcceptButton","todayDate","today","toISOString","split","newPrice","discount","discountRadioButtons","document","getElementsByName","checked","longerPeriodAcceptedDate","longerPeriodAcceptedDiscount","minPriceEstimate","triggerLongerPeriodToastClose","longerPeriodDenyButton","triggerLongerPeriodToastOpen","openBidToast","minPrice1","bidPrice","bidButtonsContainer","visibility","bidPriceText","now","timeDiffMinutes","floor","timeDiffMs","expirationDate","getTime","hours","minutes","bidDescription","bidAcceptButton","removeEventListener","acceptBid","acceptBidLoading","acceptBidButtonText","callBackendApi","method","data","type","response","bidTitle","transition","opacity","hideInfoRequestCard","error","bidDenyButton","denyBid","animateCloseToast","animateOpenToast","storePriceResponse","max","min","status","then","triggerNewPriceToastClose","fields","openNewPriceToast","category","currentMax","currentMin","previousMinPrice","previousMaxPrice","maxPriceDiv","minPriceDiv","newPriceToastTitle","newPriceHeading","c","toLowerCase","maxPrice","minPrice","acceptNewPriceButton","denyNewPriceButton","newPriceText","descriptionDiv","acceptNewPrice","denyNewPrice","triggerNewPriceToastOpen","items","bidClone","getElementById","cloneNode","measurementsClone","longerPeriodClone","updateImagesClone","valuationClone","infoRequestsList","replaceChildren","item","infoRequests","replace","currentMaxPrice","maxPriceEstimate","archived","frontImageUrl","itemCoverImage","displayRequests","req","newRequest","querySelector","backgroundImage","innerText","appendChild","href","children","infoRequestsDiv","signOut","fetchInit","credentials","warn","errorHandler","report","firebase","auth","authUser","current","user","userId","localStorage","removeItem","deleteCookie","setFormAddressFields","user1","addressFirstName","dispatchEvent","Event","addressLastName","addressStreetAddress","addressCO","addressPostalCode","addressCity","addressDoorCode","getFormAddressFields","trim","charAt","toUpperCase","slice","isValidSwedishSsn","ssn","reverse","sum","map","n","Number","reduce","previous","index","formatPersonalId","personalIdInput","personalId","substring","images","modelImageSmall","modelImage","coverImageSmall","coverImage","enhancedFrontImageSmall","enhancedFrontImage","frontImageSmall","frontImage","imagesv2","image","find","img","versions","small","medium","large","url","shareCode","text","referralData","referralCode","maiCircle","navigator","share","catch","e","shareText","clipboard","writeText","linkCopiedBanner","channelRouter","webpath","test","userAgent","MSStream","origin","classList","add","hideChannelBottomSheet","remove","elementId","element","transform","bidRequestElement","visibleCards","querySelectorAll","interopDefault","a","exportAll","source","dest","destName"],"version":3,"file":"infoRequestsFunctions.js.map"}