!function(e,t,n,o,i){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof a[o]&&a[o],r=l.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof a[o]&&a[o];if(!n&&i)return i(t,!0);if(l)return l(t,!0);if(s&&"string"==typeof t)return s(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}m.resolve=function(n){var o=e[t][1][n];return null!=o?o:n},m.cache={};var u=r[t]=new d.Module(t);e[t][0].call(u.exports,m,u,u.exports,this)}return r[t].exports;function m(e){var t=m.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=r,d.parent=l,d.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(d,"root",{get:function(){return a[o]}}),a[o]=d;for(var c=0;c<t.length;c++)d(t[c]);if(n){var u=d(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd?define(function(){return u}):i&&(this[i]=u)}}({"7h7Hl":[function(e,t,n){var o=e("./sellItemHelpers");async function i(){return document.getElementById("reclaimFormInner").reportValidity(),new Promise((e,t)=>{let n=document.getElementById("reclaimReason");return n.value?e(!0):(n.setCustomValidity(`V\xe4lj anledning till reklamationen`),document.getElementById("reclaimFormInner").reportValidity(),e(!1))})}async function a(e){if(!await i())return;let t=new Date,n=reclaimReason.value,o=reclaimListingError.value||"",a=reclaimDescription.value||"",r="",s=document.getElementsByName("compensationPreference");for(var d=0;d<s.length;d++)s[d].checked&&(r=s[d].value);let c=r.includes("10 percent discount")?parseInt(discount10PercentText.innerText.match(/\d+/g)):null,u={createdAt:t,status:"Pending",reason:n,description:a,listingError:o,compensationPreference:r,...c?{refundAmount:c}:{}};console.log("Will update: ",{itemId:e,reclaim:u}),await callFirebaseFunction("europe-west1","saveReclaim",{itemId:e,reclaim:u}),await l(e)}async function l(e){let t=document.querySelectorAll("input").values(),n=new Map;t.forEach(e=>{if(e.id.includes("Image")&&e.files[0]){let t=e.files[0];n.set(e,t)}}),console.log("images",n)}let r=async e=>{let t=await firebase.app().functions("europe-west1").httpsCallable("getItem")({itemId:e});return{...t?.data||{},id:e}};(async()=>{let e=getParamsObject(),t=e.id?await r(e.id):"";t||(console.error("Invalid item id param"),location.href="/"),function(e){let t=(e.cleanedBrand||e.brand).trim()+"-"+e.category.toLowerCase();document.getElementById("itemTitle").innerText=t,document.getElementById("itemTitleBanner").innerText=t,console.log("item",e),console.log("soldDate",e.soldDate);let n=new Date(e.soldDate).toLocaleDateString("sv-SE",{day:"numeric",month:"long",year:"numeric"}),o=`${e.soldPrice} kr, ${n}`;document.getElementById("itemSubtitle").innerText="Köptes för "+o,document.getElementById("itemSubtitleBanner").innerText=o;let i=window.innerWidth<=400?e?.images?.modelImage||e?.images?.enhancedFrontImageSmall||e?.images?.enhancedFrontImage||e?.images?.frontImageSmall||e?.images?.frontImage:e?.images?.modelImage||e?.images?.enhancedFrontImage||e?.images?.frontImage;document.getElementById("itemImage").src=i,document.getElementById("itemImageBanner").src=i,document.getElementById("resellButton").href=`./sell-item?id=${e.id}`;let a=Math.round(.1*e.soldPrice);a=a<60?60:a>250?250:a,discount10PercentText.innerText=`Beh\xe5lla plagget och f\xe5 ${a} kr \xe5terbetalt`;let l=e.buyer.Email||e.buyer.PhoneNumber;thankYouText.innerText=`Vi tittar p\xe5 \xe4rendet och skickar svar ${l.includes("@")?`till din email ${l}`:`p\xe5 SMS till ditt telefonnummer ${l}`}`}(t),document.getElementById("reclaimButton").addEventListener("click",function(){itemBanner.style.display="block",document.getElementById("reclaimForm").style.display="block",cancelButton.style.display="flex",doneButton.style.display="flex",resellButton.style.display="none",reclaimButton.style.display="none",document.getElementById("introDiv").style.display="none"}),reclaimReason.onchange=function(){let e=this.value;if(console.log("input",e),""===e){reasonLabel.style.display="none",this.style.color="#929292";return}reasonLabel.style.display="block",this.style.color="#101010",document.querySelectorAll(".simple-input-container").forEach(function(e){e.id.includes("Reason")||(e.style.display="none")}),reclaimImagesContainer.style.display="none",e.includes("Defects")?(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block"):e.includes("Listing")?reclaimListingErrorContainer.style.display="block":e.includes("False")?(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block"):e.includes("Dirty")?(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block"):e.includes("Smelly")?reclaimDescriptionContainer.style.display="block":(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block"),compensationPreferenceDiv.style.display="block"},reclaimListingError.onchange=function(){let e=this.value;if(""===e){listingErrorLabel.style.display="none",this.style.color="#929292";return}listingErrorLabel.style.display="block",this.style.color="#101010","Other"===e&&(reclaimDescriptionContainer.style.display="block")},document.getElementById("doneButton").addEventListener("click",async function(){let e=getParamsObject();await a(e.id),console.log("RECLAIM SAVED"),reclaimForm.style.display="none",resellButton.style.display="none",reclaimButton.style.display="none",cancelButton.style.display="none",doneButton.style.display="none",toMaiButton.style.display="none",toMaiButton.style.display="flex",thankYouDiv.style.display="block"}),["reclaimImage1","reclaimImage2","reclaimImage3","reclaimImage4"].forEach(function(e){let t=document.getElementById(e),n=document.getElementById(`${e}PreviewUploading`),i=document.getElementById(`${e}Preview`);t.addEventListener("change",function(){let t=this.files[0];if(t){let a=URL.createObjectURL(t);n.style.backgroundImage=`url('${a}')`,i.style.backgroundImage=`url('${a}')`,document.getElementById(`loading${(0,o.capitalizeFirstLetter)(e)}Icon`).style.display="none",document.getElementById(e).required=!1}})}),triggerShowContent.click()})()},{"./sellItemHelpers":"2G59s"}],"2G59s":[function(e,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");async function i(e,t){sessionStorage.getItem("newItemId")||sessionStorage.setItem("newItemId",await l());let n=sessionStorage.getItem("newItemId"),o=await a(e);if(!o)throw"Fel vid bearbetning av vald bild.";let i=new FormData;i.append("itemId",n),i.append("fileName",t),i.append("file",o),i.append("temporary","true"),i.append("generateSmallImage","true");let r=await fetch("https://uploaditemimagebinary-heypmjzjfq-ew.a.run.app",{method:"POST",body:i});return await r.json()}async function a(e){return e.size<9437184?Promise.resolve(e):new Promise((t,n)=>{let o=new FileReader;o.onload=()=>{let e=document.createElement("img");e.onload=()=>{let n=e.width,o=e.height;n>o?n>1512&&(o=1512/n*o,n=1512):o>2016&&(n=2016/o*n,o=2016);let i=document.createElement("canvas");i.width=n,i.height=o;let a=i.getContext("2d");a.imageSmoothingQuality="high",a.drawImage(e,0,0,n,o),i.toBlob(t,"image/jpeg")},e.src=o.result,o.onerror=n},o.readAsDataURL(e)})}async function l(){try{let e=await fetch("https://generateuniqueid-heypmjzjfq-ew.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)return console.error(`Error: ${e.statusText}`),null;return(await e.json()).id}catch(e){return console.error(`Failed to fetch unique ID, generating uuidv4 id: ${e.message}`,e),uuidv4()}}async function r(e,t=!0){let n=await s(e);return n?.url&&(t&&c("enhancedFrontImage",n.url,n.urlSmall),u("frontImage",window.innerWidth<=370?n.urlSmall:n.url)),d("frontImage"),n}async function s(e){try{let t=await firebase.app().functions("europe-west1").httpsCallable("enhanceFrontImage")({imageUrl:e});return sessionStorage.setItem("enhancedFrontImage",t.data.url),t.data}catch(e){return errorHandler.report(e),console.error(e),""}}function d(e){document.getElementById(`loading${m(e)}Icon`).style.display="none",document.getElementById(`delete${m(e)}Icon`).style.display="inline-block","frontImage"===e&&(document.getElementById("enhancedAnimationDiv").style.display="none")}function c(e,t,n){let o=JSON.parse(localStorage.getItem("newItem")||JSON.stringify({})),i=o.images||{};i[e]=t,i[`${e}Small`]=n,o.images=i,localStorage.setItem("newItem",JSON.stringify(o))}function u(e,t){document.getElementById(`${e}Preview`).style.backgroundImage=`url('${t}')`,d(e)}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}async function y(e,t,n=!0){try{document.getElementById(t).parentNode.parentNode.querySelector(".w-file-upload-error").style.display="none";let o=URL.createObjectURL(e);document.getElementById(`${t}PreviewUploading`).style.backgroundImage=`url('${o}')`,document.getElementById(`${t}Preview`).style.backgroundImage=`url('${o}')`,f(t),p(t,"success-state");let{url:a,urlSmall:l}=await i(e,t);return n&&c(t,a,l),a}catch(n){console.error("Failed to upload image",n),errorHandler.report(n),document.getElementById(`${t}PreviewUploading`).style.backgroundImage="",document.getElementById(`${t}Preview`).style.backgroundImage="",document.getElementById(`loading${m(t)}Icon`).style.display="none",p(t,"default-state"),e.size>10485760?g(t,"Error: Bilden är för stor. Max 10 MB."):g(t,"Error: Något gick fel vid uppladdning, försök igen eller kontakt oss om felet kvarstår."),document.getElementById(t).value=""}}function g(e,t){let n=document.getElementById(e).parentNode.parentNode;n.querySelector(".w-file-upload-error").style.display="block",n.querySelector(".w-file-upload-error-msg").innerText=t}function p(e,t){let n=document.getElementById(e).parentNode.parentNode.childNodes;for(let e=0;e<n.length;e++)n[e].className.includes(t)?n[e].style.display="block":n[e].style.display="none"}function f(e){if("frontImage"===e){document.getElementById(`delete${m(e)}Icon`).style.display="none",document.getElementById(`loading${m(e)}Icon`).style.display="none",localStorage.getItem("sessionUser")||(document.getElementById("photoroomDiv").style.display="flex"),document.getElementById("enhancedAnimationDiv").style.display="block",triggerEnhancingAnimation.click();return}document.getElementById(`loading${m(e)}Icon`).style.display="inline-block",document.getElementById(`delete${m(e)}Icon`).style.display="none"}function x(e,t){let n=["shein","lager 157","divided","brandy melville","cubus","bubbleroom","bondelid","nelly","dobber","åhléns","kappahl","primark","jack & jones","sisters point","missguided","topman","bik bok","cubus","happy holly","zign","glamorous","hollister","river island","light before dark","bohoo","crocker","forever 21","maze","mint&berry","chiara forthi","zalando","din sko","pull & bear","svea","zoul","boohoo","gap","topshop","ellos","lager 157","stradivarius","studio total","indiska","bershka","shein","riley","vero moda","vila","don donna","aldo","new look denim"],o=document.getElementById("hardToSellDiv");return(document.getElementById("itemBrand").setCustomValidity(""),!getParamsObject().id&&(n.includes(e.toLowerCase())||!["boots","dunjacka","jacka","kängor","kappa","kavaj","kostym","pälsjacka","regnjacka","rock","skinnjacka","vinterskor"].includes(t?.toLowerCase())&&["tom tailor","monki","dressmann","urban outfitters","asos","holly & white","only","gina tricot"].includes(e.toLowerCase())||["baddräkt","bikini","bodysuit","chinos","flip-flops","halsduk","handduk","hatt","jeans","keps","långärmad t-shirt","linne","mjukisbyxor","morgonrock","mössa","necessär","piké","pyjamas","sandaler","sarong","shorts","slips","sport-bh","strumpbyxor","t-shirt","tights","topp","träningsbyxor","träningströja","underställ","vantar"].includes(t?.toLowerCase())&&["karl kani","rieker","uniqlo","carin wester","stockh lm","weekday","mango","wera","ichi","lindex","h&m","zara","mng","mq","cheap monday","h&m premium","na-kd","clarks","gant","hackett","hugo boss","la chemise","lacoste","lyle & scott","marc o'polo","melvin & hamilton","ray-ban","reebok","sebago","stenströms","the shirt factory","hampton republic","quicksilver","banana republic","pieces","sprit","denim","east west","xit","jacqueline de yong","mexx","fb sister","okänt","bodyflirt","dorothy perkins","fransa","laurel","rut&circle","soc","junkyard","soyaconcept","amisu","u.s. polo assn.","line of oslo","gossip","i say","jascha stockholm","noisy may","six ames","velour by nostalgi","house of lola","fiveunits","miss me","flash","champion","under armour","oasis","fornarina","isolde","rosebud","chiquelle","kaffe","mckinley","cream","abercrombie & fitch","modström","ecco","esprit","alice bizous","craft","ellesse","wesc","dry lake","röhnisch","acqua limone","anna field","le","ax paris","burton","hansen & jacob","lou in love","mad lady","selected homme","tenson","whistles","zizzi","gerry weber"].includes(e.toLowerCase())))?(hardToSellText.innerHTML=n.includes(e.toLowerCase())?`Vi s\xe4ljer tyv\xe4rr inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`:`Vi s\xe4ljer tyv\xe4rr inte kategorin ${t} fr\xe5n ${e} p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`,stopIcon.style.display="flex",warningIcon.style.display="none",o.style.display="block",document.getElementById("itemBrand").setCustomValidity(n.includes(e.toLowerCase())?`Vi s\xe4ljer inte plagg fr\xe5n ${e}`:`Vi s\xe4ljer inte kategorin '${t}' fr\xe5n ${e}`),!0):["H&M","HM","Zara","ASOS","Nelly","Gina Tricot","BikBok","Bik Bok","Lindex","Kappahl","Cubus","NA-KD","NAKD","Mango","Ellos","Primark","Shein","Vila","Forever 21","Pull & Bear","Bershka","Stradivarius"].some(t=>e.toLowerCase().includes(t.toLowerCase()))?(hardToSellText.innerHTML=`Vi s\xe4ljer i regel inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5gt andrahandsv\xe4rde. Undantag kan finnas.`,stopIcon.style.display="none",warningIcon.style.display="block",o.style.display="block",!0):void(o.style.display="none")}function h(e="Kategori",t=x){$("#itemCategory").select2({selectionCssClass:"form-field",placeholder:e||"Kategori",data:[{id:"",text:""},{text:"Överdelar",children:[{id:"Tröja",text:"Tröja"},{id:"Blus",text:"Blus"},{id:"Topp",text:"Topp"},{id:"Skjorta",text:"Skjorta"},{id:"Linneskjorta",text:"Linneskjorta"},{id:"T-shirt",text:"T-shirt"},{id:"Kavaj",text:"Kavaj"},{id:"Sweatshirt",text:"Sweatshirt"},{id:"Hoodie",text:"Hoodie"},{id:"Polotröja",text:"Polotröja"},{id:"Tunika",text:"Tunika"},{id:"Väst",text:"Väst"},{id:"Kofta",text:"Kofta"},{id:"Linne",text:"Linne"},{id:"Träningströja",text:"Träningströja"},{id:"Poncho",text:"Poncho"},{id:"Piké",text:"Piké"},{id:"Långärmad T-shirt",text:"Långärmad T-shirt"},{id:"Kostymväst",text:"Kostymväst"}]},{text:"Underdelar",children:[{id:"Kjol",text:"Kjol"},{id:"Byxor",text:"Byxor"},{id:"Jeans",text:"Jeans"},{id:"Chinos",text:"Chinos"},{id:"Fritidsbyxor",text:"Fritidsbyxor"},{id:"Träningsbyxor",text:"Träningsbyxor"},{id:"Tights",text:"Tights"},{id:"Strumpbyxor",text:"Strumpbyxor"},{id:"Mjukisbyxor",text:"Mjukisbyxor"},{id:"Kostymbyxor",text:"Kostymbyxor"},{id:"Shorts",text:"Shorts"},{id:"Sarong",text:"Sarong"}]},{text:"Helkropp",children:[{id:"Klänning",text:"Klänning"},{id:"Kaftan",text:"Kaftan"},{id:"Kostym",text:"Kostym"},{id:"Set",text:"Set"},{id:"Jumpsuit",text:"Jumpsuit"},{id:"Baddräkt",text:"Baddräkt"},{id:"Bikini",text:"Bikini"},{id:"Pyjamas",text:"Pyjamas"},{id:"Morgonrock",text:"Morgonrock"},{id:"Bröllopsklänning",text:"Bröllopsklänning"},{id:"Balklänning",text:"Balklänning"},{id:"Bodysuit",text:"Bodysuit"},{id:"Underställ",text:"Underställ"}]},{text:"Ytterkläder",children:[{id:"Jacka",text:"Jacka"},{id:"Kappa",text:"Kappa"},{id:"Rock",text:"Rock"},{id:"Fritidsjacka",text:"Fritidsjacka"},{id:"Trenchcoat",text:"Trenchcoat"},{id:"Skinnjacka",text:"Skinnjacka"},{id:"Dunjacka",text:"Dunjacka"},{id:"Regnjacka",text:"Regnjacka"},{id:"Pälsjacka",text:"Pälsjacka"}]},{text:"Skor",children:[{id:"Sneakers",text:"Sneakers"},{id:"Sandaler",text:"Sandaler"},{id:"Klackar",text:"Klackar"},{id:"Ballerinaskor",text:"Ballerinaskor"},{id:"Loafers",text:"Loafers"},{id:"Flip-flops",text:"Flip-flops"},{id:"Boots",text:"Boots"},{id:"Kängor",text:"Kängor"},{id:"Vinterskor",text:"Vinterskor"},{id:"Skor",text:"Annat (Skor)"}]},{text:"Väskor",children:[{id:"Axelremsväska",text:"Axelremsväska"},{id:"Handväska",text:"Handväska"},{id:"Kuvertväska",text:"Kuvertväska"},{id:"Ryggsäck",text:"Ryggsäck"},{id:"Träningsväska",text:"Träningsväska"},{id:"Resväska",text:"Resväska"},{id:"Datorväska",text:"Datorväska"},{id:"Väska",text:"Annat (Väska)"}]},{text:"Accessoarer",children:[{id:"Solglasögon",text:"Solglasögon"},{id:"Glasögon",text:"Glasögon"},{id:"Örhänge",text:"Örhänge"},{id:"Halsband",text:"Halsband"},{id:"Armband",text:"Armband"},{id:"Ring",text:"Ring"},{id:"Brosch",text:"Brosch"},{id:"Keps",text:"Keps"},{id:"Sjal",text:"Sjal"},{id:"Krage",text:"Krage"},{id:"Bälte",text:"Bälte"},{id:"Plånbok",text:"Plånbok"},{id:"Halsduk",text:"Halsduk"},{id:"Hatt",text:"Hatt"},{id:"Mössa",text:"Mössa"},{id:"Vantar",text:"Vantar"},{id:"Necessär",text:"Necessär"},{id:"Slips",text:"Slips"},{id:"Handduk",text:"Handduk"},{id:"Klocka",text:"Klocka"}]}]}),$("body").on("click",".select2-container--open .select2-results__group",function(){$(this).parent().attr("class").match(/expanded-group/)?$(this).parent().removeClass("expanded-group"):($(".expanded-group").first().removeClass("expanded-group"),$(this).parent().addClass("expanded-group"))});let n=!1;$("#itemCategory").on("select2:select",()=>{analytics.track("Click",{elementID:"itemCategoryValue"}),document.querySelector("#itemCategory").dispatchEvent(new Event("change"))});let o=!1;$("#itemCategory").on("select2:open",()=>{o||(o=!0,$("input.select2-search__field").on("click",()=>{analytics.track("Click",{elementID:"itemCategorySearch"})}))}),$("#itemCategory").on("select2:close",()=>{document.querySelector("body").style.overflow="auto",document.querySelector("body").style.position="static",document.querySelector("html").style.overflow="static"}),$("#itemCategory").on("select2:open",function(){if(analytics.track("Element Viewed",{elementID:"itemCategoryContainer"}),document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.position="fixed",document.querySelector("html").style.overflow="fixed",document.querySelector(".select2-search__field").placeholder="Sök... (t.ex. Klänning/Sneakers/Blus)",$(".select2-search__field").on("input",e=>{e.target.value.length>0?$(".select2-results__option[role=group]").each((e,t)=>$(t).addClass("expanded-group")):$(".expanded-group").each((e,t)=>$(t).removeClass("expanded-group"))}),!n){let e=document.getElementById("categoryPopUpHeader"),t=document.querySelector(".select2-dropdown");t.insertBefore(e,t.firstChild),e.style.display="block",e.querySelector("#categorySelectClose").onclick=()=>$("#itemCategory").select2("close"),n=!0}document.querySelector(".select2-results__options").addEventListener("scroll",()=>document.activeElement.blur())}),$("#itemCategory").on("change",e=>{k("itemCategoryLabel")(e);let n=document.getElementById("itemCategory");t(document.getElementById("itemBrand").value,n.value)}),$("#itemCategory").on("select2:open",function(){$(".select2-results").css("visibility","hidden")}),$("#itemCategory").on("select2:opening",function(){setTimeout(function(){$(".select2-results").css("visibility","visible")},50)})}function k(e){return t=>{document.getElementById(e).style.display=t.target.value.length>0?"inline-block":"none"}}o.defineInteropFlag(n),o.export(n,"uploadTempImage",()=>i),o.export(n,"requestUniqueId",()=>l),o.export(n,"enhanceFrontImage",()=>r),o.export(n,"showDeleteImageIcon",()=>d),o.export(n,"rememberNewItemImageField",()=>c),o.export(n,"showImagePreview",()=>u),o.export(n,"capitalizeFirstLetter",()=>m),o.export(n,"uploadImageAndShowPreview",()=>y),o.export(n,"showImageState",()=>p),o.export(n,"showLoadingIcon",()=>f),o.export(n,"checkBlockedOrLowShareSoldBrand",()=>x),o.export(n,"initializeCategorySelect",()=>h),o.export(n,"fieldLabelToggle",()=>k)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}]},["7h7Hl"],"7h7Hl","parcelRequire81ca");
//# sourceMappingURL=reclaim.js.map
