!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(e,t,r,n,i){/* eslint-disable no-undef */var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof a[n]&&a[n],s=o.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function A(t,r){if(!s[t]){if(!e[t]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var i="function"==typeof a[n]&&a[n];if(!r&&i)return i(t,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(o)return o(t,!0);// Try the node require function if it exists.
if(l&&"string"==typeof t)return l(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}d.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},d.cache={};var u=s[t]=new A.Module(t);e[t][0].call(u.exports,d,u,u.exports,this)}return s[t].exports;function d(e){var t=d.resolve(e);return!1===t?{}:A(t)}}A.isParcelRequire=!0,A.Module=function(e){this.id=e,this.bundle=A,this.exports={}},A.modules=e,A.cache=s,A.parent=o,A.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(A,"root",{get:function(){return a[n]}}),a[n]=A;for(var c=0;c<t.length;c++)A(t[c]);if(r){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var u=A(r);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd?define(function(){return u}):i&&(this[i]=u)}}({"7h7Hl":[function(e,t,r){var n=e("./sellItemHelpers");function i(){resellButton.style.display="none",reclaimButton.style.display="none",cancelButton.style.display="none",doneButton.style.display="none",toMaiButton.style.display="none"}function a(){var e=[...document.querySelectorAll("input").values()];let t=[];return console.log("elementsArr",e),e.forEach(e=>{e.id.includes("Image")&&e.files[0]&&t.push(e.files[0])}),t}async function o(){return document.getElementById("reclaimFormInner").reportValidity(),new Promise((e,t)=>{// Custom
let r=document.getElementById("reclaimReason");return r.value?r.value.includes("Defects")||r.value.includes("False")||r.value.includes("Dirty")?(imagesTitle.innerText="Bilder p\xe5 felet (obligatoriskt)",e(function(){let e=a();return!!e.length||(document.getElementById("reclaimImage1").setCustomValidity(`Ladda upp minst en bild p\xe5 felet`),document.getElementById("reclaimFormInner").reportValidity(),!1)}())):e(!0):(r.setCustomValidity(`V\xe4lj anledning till reklamationen`),document.getElementById("reclaimFormInner").reportValidity(),e(!1))})}async function s(e){if(!await o())return!1;let t=new Date,r=reclaimReason.value,n=reclaimListingError.value||"";if(reclaimListingError.required&&!n)return!1;// Borde vara del av validering
let i=reclaimDescription.value||"",a="",s=document.getElementsByName("compensationPreference");for(var A=0;A<s.length;A++)s[A].checked&&(a=s[A].value);if(!a)return!1;// Borde vara del av validering
let c=a.includes("10 percent discount")?parseInt(discount10PercentText.innerText.match(/\d+/g)):null,u={createdAt:t,status:"Pending",reason:r,description:i,listingError:n,compensationPreference:a,...c?{refundAmount:c}:{}};return(// Spinner
document.getElementById("doneButtonSpinner").style.display="block",document.getElementById("doneButtonText").style.display="none",// Save reclaim
console.log("Will update: ",{itemId:e,reclaim:u}),u.images=await l(e),await callBackendApi(`/api/items/${e}/reclaim`,{data:{reclaim:u},requiresAuth:!1}),!0)}async function l(e){let t=a();// Uploads files and add the new imageUrls to the changes object
return await Promise.all(t.map(async(t,r)=>{let i=await (0,n.uploadTempImage)(t,`reclaim_${e}_${r}`);return i.url}))}let A=async e=>{let t=await callBackendApi(`/api/items/${e}`);return{...t?.data||{},id:e}},c=async()=>{let e=getParamsObject(),t=e.id?await A(e.id):"";t||(console.error("Invalid item id param"),location.href="/"),function(e){let t=(e.cleanedBrand||e.brand).trim()+"-"+e.category.toLowerCase();document.getElementById("itemTitle").innerText=t,document.getElementById("itemTitleBanner").innerText=t;let r=new Date(e.soldDate).toLocaleDateString("sv-SE",{day:"numeric",month:"long",year:"numeric"}),n=`K\xf6ptes ${r}${e.soldPlatform&&"Other"!==e.soldPlatform?` via ${e.soldPlatform}`:""}`;document.getElementById("itemSubtitle").innerText=n,document.getElementById("itemSubtitleBanner").innerText=n;let a=window.innerWidth<=400?e?.images?.modelImage||e?.images?.enhancedFrontImageSmall||e?.images?.enhancedFrontImage||e?.images?.frontImageSmall||e?.images?.frontImage:e?.images?.modelImage||e?.images?.enhancedFrontImage||e?.images?.frontImage;document.getElementById("itemImage").src=a,document.getElementById("itemImageBanner").src=a,document.getElementById("resellButton").href=`./sell-item?id=${e.id}`;let o=Math.round(.1*e.soldPrice);o=o<60?60:o>250?250:o,discount10PercentText.innerText=`Beh\xe5lla plagget och f\xe5 ${o} kr \xe5terbetalt`;let s=e.buyer.Email||e.buyer.PhoneNumber;thankYouText.innerText=`Vi tittar p\xe5 \xe4rendet och skickar svar ${s.includes("@")?`till din email ${s}`:`p\xe5 SMS till ditt telefonnummer ${s}`}`,e?.returnQrCode?(i(),toMaiButton.style.display="flex",introDiv.style.display="none",thankYouDiv.style.display="none",itemBanner.style.display="block",qrCodeImage.style.backgroundImage=`url('${e.returnQrCode}')`,postnordQrCodeLink.href=e.returnQrCodePage,postnordQrCodeDiv.style.display="flex",shippingText.innerText=`N\xe4r det skickats s\xe5 \xe5terbetalar vi dig och skickar bekr\xe4ftelse till din email ${s}`):e?.reclaim?.status&&(// Om reclaim redan finns -> GÃ¥ direkt till Tack!
i(),toMaiButton.style.display="flex",introDiv.style.display="none",thankYouDiv.style.display="block",itemBanner.style.display="block")}(t),document.getElementById("reclaimButton").addEventListener("click",function(){itemBanner.style.display="block",document.getElementById("reclaimForm").style.display="block",cancelButton.style.display="flex",doneButton.style.display="flex",resellButton.style.display="none",reclaimButton.style.display="none",document.getElementById("introDiv").style.display="none"}),reclaimReason.onchange=function(){// Color and label
let e=this.value;if(""===e){reasonLabel.style.display="none",this.style.color="#929292";return}reasonLabel.style.display="block",this.style.color="#101010";// Hide all fields
let t=document.querySelectorAll(".simple-input-container");t.forEach(function(e){e.id.includes("Reason")||(e.style.display="none")}),reclaimImagesContainer.style.display="none",reclaimDescription.required=!0,reclaimListingError.required=!1,e.includes("Defects")?(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block",imagesTitle.innerText="Bilder p\xe5 felet (obligatoriskt)"):e.includes("Listing")?(reclaimListingErrorContainer.style.display="block",reclaimDescription.required=!1,reclaimListingError.required=!0):e.includes("False")?(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block",imagesTitle.innerText="Bilder p\xe5 felet (obligatoriskt)"):e.includes("Dirty")?(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block",imagesTitle.innerText="Bilder p\xe5 felet (obligatoriskt)"):e.includes("Smelly")?reclaimDescriptionContainer.style.display="block":(reclaimDescriptionContainer.style.display="block",reclaimImagesContainer.style.display="block"),compensationPreferenceDiv.style.display="block"},reclaimListingError.onchange=function(){// Color and label
let e=this.value;if(""===e){listingErrorLabel.style.display="none",this.style.color="#929292";return}listingErrorLabel.style.display="block",this.style.color="#101010","Other"===e&&(reclaimDescriptionContainer.style.display="block",reclaimDescription.required=!0)},document.getElementById("doneButton").addEventListener("click",async function(){// Save reclaim
let e=getParamsObject(),t=await s(e.id);// Show confirmation
t&&(console.log("RECLAIM SAVED"),reclaimForm.style.display="none",i(),toMaiButton.style.display="flex",thankYouDiv.style.display="block")}),["reclaimImage1","reclaimImage2","reclaimImage3","reclaimImage4"].forEach(function(e){let t=document.getElementById(e),r=document.getElementById(`${e}PreviewUploading`),i=document.getElementById(`${e}Preview`);t.addEventListener("change",function(){let t=this.files[0];if(t){let a=URL.createObjectURL(t);r.style.backgroundImage=`url('${a}')`,i.style.backgroundImage=`url('${a}')`,document.getElementById(`loading${(0,n.capitalizeFirstLetter)(e)}Icon`).style.display="none",document.getElementById(e).required=!1}})}),document.querySelectorAll("input, select, textarea").forEach(e=>{// Add an event listener to each input to clear validation message on input
e.addEventListener("input",e=>{e.setCustomValidity("");// Clear validation message
}),"select"===e.tagName.toLowerCase()&&e.addEventListener("change",()=>{e.setCustomValidity("")})}),triggerShowContent.click()};c()},{"./sellItemHelpers":"2G59s"}],"2G59s":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"uploadTempImage",()=>s),n.export(r,"requestUniqueId",()=>c),n.export(r,"enhanceFrontImage",()=>u),n.export(r,"showDeleteImageIcon",()=>f),n.export(r,"rememberNewItemImageField",()=>h),n.export(r,"showImagePreview",()=>g),n.export(r,"capitalizeFirstLetter",()=>m),n.export(r,"uploadImageAndShowPreview",()=>p),n.export(r,"showImageError",()=>y),n.export(r,"hideImageError",()=>I),n.export(r,"showImageState",()=>B),n.export(r,"showLoadingIcon",()=>b),n.export(r,"checkBlockedOrLowShareSoldBrand",()=>x),n.export(r,"initializeCategorySelect",()=>w),n.export(r,"fieldLabelToggle",()=>_),n.export(r,"colorName",()=>E);var i=e("image-blob-reduce"),a=n.interopDefault(i);let o=(0,a.default)();async function s(e,t){try{return await l(e,t)}catch(r){if("ImageResizeError"!==r.name)// Retry once for upload errors
return console.error("Failed to upload image",r),errorHandler.report(r),await l(e,t);throw console.error("Failed to resize image",r),errorHandler.report(r),r;// Don't retry for resize errors
}}async function l(e,t){let r;sessionStorage.getItem("newItemId")||sessionStorage.setItem("newItemId",await c());let n=sessionStorage.getItem("newItemId");try{r=await A(e),console.log(`Resized image size: ${(r.size/1024/1024).toFixed(2)} MB`)}catch(t){let e=Error("Failed to resize image");throw e.name="ImageResizeError",e.originalError=t,e}if(!r)throw Error("Fel vid bearbetning av vald bild.");let i=new FormData;i.append("itemId",n),i.append("fileName",t),i.append("file",r),i.append("temporary","true"),i.append("generateSmallImage","true");let a=await fetch(`${BACKEND_API_URL}/api/items/${n}/uploadImage`,{method:"POST",body:i});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return await a.json()}async function A(e){if(e.size<5242880)return Promise.resolve(e);try{return console.log("Attempting to scale image with image-blob-reduce"),await o.toBlob(e,{max:4032})}catch(e){throw console.error("Image scaling failed",e),Error("Unable to process image")}}async function c(){try{let e=await callBackendApi("/api/id",{method:"POST",requiresAuth:!1});return e.data.id}catch(e){return console.error(`Failed to fetch unique ID, generating uuidv4 id: ${e.message}`,e),uuidv4()}}async function u(e,t=!0){let r=await d(e);return r?.url&&(t&&h("enhancedFrontImage",r.url,r.urlSmall),g("frontImage",window.innerWidth<=370?r.urlSmall:r.url)),f("frontImage"),r}async function d(e){try{let t=await callBackendApi("/api/images/enhance",{data:{imageUrl:e},requiresAuth:!1,timeoutSec:30});return sessionStorage.setItem("enhancedFrontImage",t.data.url),t.data}catch(e){return errorHandler.report(e),console.error(e),""}}function f(e){document.getElementById(`loading${m(e)}Icon`).style.display="none",document.getElementById(`delete${m(e)}Icon`).style.display="inline-block","frontImage"===e&&(document.getElementById("enhancedAnimationDiv").style.display="none")}function h(e,t,r){let n=JSON.parse(localStorage.getItem("newItem")||JSON.stringify({})),i=n.images||{};i[e]=t,i[`${e}Small`]=r,n.images=i,localStorage.setItem("newItem",JSON.stringify(n))}function g(e,t){document.getElementById(`${e}Preview`).style.backgroundImage=`url('${t}')`,f(e)}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}async function p(e,t,r=!0){try{I(t);let n=URL.createObjectURL(e);document.getElementById(`${t}PreviewUploading`).style.backgroundImage=`url('${n}')`,document.getElementById(`${t}Preview`).style.backgroundImage=`url('${n}')`,b(t),B(t,"success-state");let{url:i,urlSmall:a}=await s(e,t);return r&&h(t,i,a),i}catch(r){console.error("Failed to upload image",r),errorHandler.report(r),document.getElementById(`${t}PreviewUploading`).style.backgroundImage="",document.getElementById(`${t}Preview`).style.backgroundImage="",document.getElementById(`loading${m(t)}Icon`).style.display="none",B(t,"default-state"),e.size>10485760?y(t,"Error: Bilden \xe4r f\xf6r stor. Max 10 MB."):y(t,"Error: N\xe5got gick fel vid uppladdning, f\xf6rs\xf6k igen eller kontakt oss om felet kvarst\xe5r."),document.getElementById(t).value=""}}function y(e,t){let r=document.getElementById(e).parentNode.parentNode;r.querySelector(".w-file-upload-error").style.display="block",r.querySelector(".w-file-upload-error-msg").innerText=t}function I(e){let t=document.getElementById(e).parentNode.parentNode;t.querySelector(".w-file-upload-error").style.display="none"}function B(e,t){let r=document.getElementById(e).parentNode.parentNode.childNodes;for(let e=0;e<r.length;e++)r[e].className.includes(t)?r[e].style.display="block":r[e].style.display="none"}function b(e){if("frontImage"===e){document.getElementById(`delete${m(e)}Icon`).style.display="none",document.getElementById(`loading${m(e)}Icon`).style.display="none",localStorage.getItem("sessionUser")||(document.getElementById("photoroomDiv").style.display="flex"),document.getElementById("enhancedAnimationDiv").style.display="block",triggerEnhancingAnimation.click();return}document.getElementById(`loading${m(e)}Icon`).style.display="inline-block",document.getElementById(`delete${m(e)}Icon`).style.display="none"}function x(e,t){let r=["shein","lager 157","divided","brandy melville","cubus","bubbleroom","bondelid","nelly","dobber","\xe5hl\xe9ns","kappahl","primark","jack & jones","sisters point","missguided","topman","bik bok","cubus","happy holly","zign","glamorous","hollister","river island","light before dark","bohoo","crocker","forever 21","maze","mint&berry","chiara forthi","zalando","din sko","pull & bear","svea","zoul","boohoo","gap","topshop","ellos","lager 157","stradivarius","studio total","indiska","bershka","shein","riley","vero moda","vila","don donna","aldo","new look denim"],n=document.getElementById("hardToSellDiv");document.getElementById("itemBrand").setCustomValidity("");let i=getParamsObject();return!i.id&&(r.includes(e.toLowerCase())||!["boots","dunjacka","jacka","k\xe4ngor","kappa","kavaj","kostym","p\xe4lsjacka","regnjacka","rock","skinnjacka","vinterskor"].includes(t?.toLowerCase())&&["tom tailor","monki","dressmann","urban outfitters","asos","holly & white","only","gina tricot"].includes(e.toLowerCase())||["baddr\xe4kt","bikini","bodysuit","chinos","flip-flops","halsduk","handduk","hatt","jeans","keps","l\xe5ng\xe4rmad t-shirt","linne","mjukisbyxor","morgonrock","m\xf6ssa","necess\xe4r","pik\xe9","pyjamas","sandaler","sarong","shorts","slips","sport-bh","strumpbyxor","t-shirt","tights","topp","tr\xe4ningsbyxor","tr\xe4ningstr\xf6ja","underst\xe4ll","vantar"].includes(t?.toLowerCase())&&["karl kani","rieker","uniqlo","carin wester","stockh lm","weekday","mango","wera","ichi","lindex","h&m","zara","mng","mq","cheap monday","h&m premium","na-kd","clarks","gant","hackett","hugo boss","la chemise","lacoste","lyle & scott","marc o'polo","melvin & hamilton","ray-ban","reebok","sebago","stenstr\xf6ms","the shirt factory","hampton republic","quicksilver","banana republic","pieces","sprit","denim","east west","xit","jacqueline de yong","mexx","fb sister","ok\xe4nt","bodyflirt","dorothy perkins","fransa","laurel","rut&circle","soc","junkyard","soyaconcept","amisu","u.s. polo assn.","line of oslo","gossip","i say","jascha stockholm","noisy may","six ames","velour by nostalgi","house of lola","fiveunits","miss me","flash","champion","under armour","oasis","fornarina","isolde","rosebud","chiquelle","kaffe","mckinley","cream","abercrombie & fitch","modstr\xf6m","ecco","esprit","alice bizous","craft","ellesse","wesc","dry lake","r\xf6hnisch","acqua limone","anna field","le","ax paris","burton","hansen & jacob","lou in love","mad lady","selected homme","tenson","whistles","zizzi","gerry weber"].includes(e.toLowerCase()))?(hardToSellText.innerHTML=r.includes(e.toLowerCase())?`Vi s\xe4ljer tyv\xe4rr inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`:`Vi s\xe4ljer tyv\xe4rr inte kategorin ${t} fr\xe5n ${e} p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`,stopIcon.style.display="flex",warningIcon.style.display="none",n.style.display="block",document.getElementById("itemBrand").setCustomValidity(r.includes(e.toLowerCase())?`Vi s\xe4ljer inte plagg fr\xe5n ${e}`:`Vi s\xe4ljer inte kategorin '${t}' fr\xe5n ${e}`),!0):["H&M","HM","Zara","ASOS","Nelly","Gina Tricot","BikBok","Bik Bok","Lindex","Kappahl","Cubus","NA-KD","NAKD","Mango","Ellos","Primark","Shein","Vila","Forever 21","Pull & Bear","Bershka","Stradivarius"].some(t=>e.toLowerCase().includes(t.toLowerCase()))?(hardToSellText.innerHTML=`Vi s\xe4ljer i regel inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5gt andrahandsv\xe4rde. Undantag kan finnas.`,stopIcon.style.display="none",warningIcon.style.display="block",n.style.display="block",!0):void(n.style.display="none")}function w(e="Kategori",t=x){$("#itemCategory").select2({selectionCssClass:"form-field",placeholder:e||"Kategori",data:[{id:"",text:""},{text:"\xd6verdelar",children:[{id:"Tr\xf6ja",text:"Tr\xf6ja"},{id:"Blus",text:"Blus"},{id:"Topp",text:"Topp"},{id:"Skjorta",text:"Skjorta"},{id:"Linneskjorta",text:"Linneskjorta"},{id:"T-shirt",text:"T-shirt"},{id:"Kavaj",text:"Kavaj"},{id:"Sweatshirt",text:"Sweatshirt"},{id:"Hoodie",text:"Hoodie"},{id:"Polotr\xf6ja",text:"Polotr\xf6ja"},{id:"Tunika",text:"Tunika"},{id:"V\xe4st",text:"V\xe4st"},{id:"Kofta",text:"Kofta"},{id:"Linne",text:"Linne"},{id:"Tr\xe4ningstr\xf6ja",text:"Tr\xe4ningstr\xf6ja"},{id:"Poncho",text:"Poncho"},{id:"Pik\xe9",text:"Pik\xe9"},{id:"L\xe5ng\xe4rmad T-shirt",text:"L\xe5ng\xe4rmad T-shirt"},{id:"Kostymv\xe4st",text:"Kostymv\xe4st"}]},{text:"Underdelar",children:[{id:"Kjol",text:"Kjol"},{id:"Byxor",text:"Byxor"},{id:"Jeans",text:"Jeans"},{id:"Chinos",text:"Chinos"},{id:"Fritidsbyxor",text:"Fritidsbyxor"},{id:"Tr\xe4ningsbyxor",text:"Tr\xe4ningsbyxor"},{id:"Tights",text:"Tights"},{id:"Strumpbyxor",text:"Strumpbyxor"},{id:"Mjukisbyxor",text:"Mjukisbyxor"},{id:"Kostymbyxor",text:"Kostymbyxor"},{id:"Shorts",text:"Shorts"},{id:"Sarong",text:"Sarong"}]},{text:"Helkropp",children:[{id:"Kl\xe4nning",text:"Kl\xe4nning"},{id:"Kaftan",text:"Kaftan"},{id:"Kostym",text:"Kostym"},{id:"Set",text:"Set"},{id:"Jumpsuit",text:"Jumpsuit"},{id:"Baddr\xe4kt",text:"Baddr\xe4kt"},{id:"Bikini",text:"Bikini"},{id:"Pyjamas",text:"Pyjamas"},{id:"Morgonrock",text:"Morgonrock"},{id:"Br\xf6llopskl\xe4nning",text:"Br\xf6llopskl\xe4nning"},{id:"Balkl\xe4nning",text:"Balkl\xe4nning"},{id:"Bodysuit",text:"Bodysuit"},{id:"Underst\xe4ll",text:"Underst\xe4ll"}]},{text:"Ytterkl\xe4der",children:[{id:"Jacka",text:"Jacka"},{id:"Kappa",text:"Kappa"},{id:"Rock",text:"Rock"},{id:"Fritidsjacka",text:"Fritidsjacka"},{id:"Trenchcoat",text:"Trenchcoat"},{id:"Skinnjacka",text:"Skinnjacka"},{id:"Dunjacka",text:"Dunjacka"},{id:"Regnjacka",text:"Regnjacka"},{id:"P\xe4lsjacka",text:"P\xe4lsjacka"}]},{text:"Skor",children:[{id:"Sneakers",text:"Sneakers"},{id:"Sandaler",text:"Sandaler"},{id:"Klackar",text:"Klackar"},{id:"Ballerinaskor",text:"Ballerinaskor"},{id:"Loafers",text:"Loafers"},{id:"Flip-flops",text:"Flip-flops"},{id:"Boots",text:"Boots"},{id:"K\xe4ngor",text:"K\xe4ngor"},{id:"Vinterskor",text:"Vinterskor"},{id:"Skor",text:"Annat (Skor)"}]},{text:"V\xe4skor",children:[{id:"Axelremsv\xe4ska",text:"Axelremsv\xe4ska"},{id:"Handv\xe4ska",text:"Handv\xe4ska"},{id:"Kuvertv\xe4ska",text:"Kuvertv\xe4ska"},{id:"Ryggs\xe4ck",text:"Ryggs\xe4ck"},{id:"Tr\xe4ningsv\xe4ska",text:"Tr\xe4ningsv\xe4ska"},{id:"Resv\xe4ska",text:"Resv\xe4ska"},{id:"Datorv\xe4ska",text:"Datorv\xe4ska"},{id:"V\xe4ska",text:"Annat (V\xe4ska)"}]},{text:"Accessoarer",children:[{id:"Solglas\xf6gon",text:"Solglas\xf6gon"},{id:"Glas\xf6gon",text:"Glas\xf6gon"},{id:"\xd6rh\xe4nge",text:"\xd6rh\xe4nge"},{id:"Halsband",text:"Halsband"},{id:"Armband",text:"Armband"},{id:"Ring",text:"Ring"},{id:"Brosch",text:"Brosch"},{id:"Keps",text:"Keps"},{id:"Sjal",text:"Sjal"},{id:"Krage",text:"Krage"},{id:"B\xe4lte",text:"B\xe4lte"},{id:"Pl\xe5nbok",text:"Pl\xe5nbok"},{id:"Halsduk",text:"Halsduk"},{id:"Hatt",text:"Hatt"},{id:"M\xf6ssa",text:"M\xf6ssa"},{id:"Vantar",text:"Vantar"},{id:"Necess\xe4r",text:"Necess\xe4r"},{id:"Slips",text:"Slips"},{id:"Handduk",text:"Handduk"},{id:"Klocka",text:"Klocka"}]}]}),$("body").on("click",".select2-container--open .select2-results__group",function(){$(this).parent().attr("class").match(/expanded-group/)?$(this).parent().removeClass("expanded-group"):($(".expanded-group").first().removeClass("expanded-group"),$(this).parent().addClass("expanded-group"))});let r=!1;$("#itemCategory").on("select2:select",()=>{analytics.track("Click",{elementID:"itemCategoryValue"}),document.querySelector("#itemCategory").dispatchEvent(new Event("change"))});let n=!1;$("#itemCategory").on("select2:open",()=>{n||(n=!0,$("input.select2-search__field").on("click",()=>{analytics.track("Click",{elementID:"itemCategorySearch"})}))}),$("#itemCategory").on("select2:close",()=>{document.querySelector("body").style.overflow="auto",document.querySelector("body").style.position="static",document.querySelector("html").style.overflow="static"}),$("#itemCategory").on("select2:open",function(){analytics.track("Element Viewed",{elementID:"itemCategoryContainer"}),document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.position="fixed",document.querySelector("html").style.overflow="fixed";let e=document.querySelector(".select2-search__field");if(e.placeholder="S\xf6k... (t.ex. Kl\xe4nning/Sneakers/Blus)",$(".select2-search__field").on("input",e=>{e.target.value.length>0?$(".select2-results__option[role=group]").each((e,t)=>$(t).addClass("expanded-group")):$(".expanded-group").each((e,t)=>$(t).removeClass("expanded-group"))}),!r){let e=document.getElementById("categoryPopUpHeader"),t=document.querySelector(".select2-dropdown");t.insertBefore(e,t.firstChild),e.style.display="block",e.querySelector("#categorySelectClose").onclick=()=>$("#itemCategory").select2("close"),r=!0}document.querySelector(".select2-results__options").addEventListener("scroll",()=>document.activeElement.blur())}),$("#itemCategory").on("change",e=>{_("itemCategoryLabel")(e);let r=document.getElementById("itemCategory"),n=document.getElementById("itemBrand");t(n.value,r.value)}),// From https://github.com/select2/select2/issues/3015#issuecomment-570171720
$("#itemCategory").on("select2:open",function(){$(".select2-results").css("visibility","hidden")}),$("#itemCategory").on("select2:opening",function(){setTimeout(function(){$(".select2-results").css("visibility","visible")},50)})}function _(e){return t=>{document.getElementById(e).style.display=t.target.value.length>0?"inline-block":"none"}}function E(e){return({Beige:"Beige",Blue:"Bl\xe5",Brown:"Brun",Green:"Gr\xf6n",Grey:"Gr\xe5",Yellow:"Gul",Gold:"Guld",Purple:"Lila",Navy:"Navy",Orange:"Orange",Pink:"Rosa",Red:"R\xf6d",Silver:"Silver",Black:"Svart",Turquoise:"Turkos",Burgundy:"Vinr\xf6d",White:"Vit",Multicolour:"Flerf\xe4rgad"})[e]||e}},{"image-blob-reduce":"5kCCl","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"5kCCl":[function(e,t,r){/*! image-blob-reduce 4.1.0 https://github.com/nodeca/image-blob-reduce @license MIT */var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}n.defineInteropFlag(r),n.export(r,"default",()=>m);var a={};function o(e,t){var r={};return t.forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}),r}a.assign=function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=Object(arguments[r]))Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.pick=o,a.pick_pica_resize_options=function(e){return o(e,["alpha","unsharpAmount","unsharpRadius","unsharpThreshold","cancelToken"])};var s={exports:{}};s.exports=(function e(t,r,n){function a(s,l){if(!r[s]){if(!t[s]){if(!l&&i)return i(s,!0);if(o)return o(s,!0);var A=Error("Cannot find module '"+s+"'");throw A.code="MODULE_NOT_FOUND",A}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){return a(t[s][1][e]||e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o=i,s=0;s<n.length;s++)a(n[s]);return a})({1:[function(e,t,r){var n=e("multimath"),i=e("./mm_unsharp_mask"),a=e("./mm_resize");function o(e){var t=e||[],r={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};n.call(this,r),this.features={js:r.js,wasm:r.wasm&&this.has_wasm()},this.use(i),this.use(a)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.resizeAndUnsharp=function(e,t){var r=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(r,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),r},t.exports=o},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(e,t,r){//var FIXED_FRAC_BITS = 14;
function n(e){return e<0?0:e>255?255:e}function i(e){return e>=0?e:0}// Convolve image data in horizontal direction. Can be used for:
t.exports={convolveHor://
// 1. bitmap with premultiplied alpha
// 2. bitmap without alpha (all values 255)
//
// Notes:
//
// - output is transposed
// - output resolution is ~15 bits per channel(for better precision).
//
function(e,t,r,n,a,o){var s,l,A,c,u,d,f,h,g,m,p,y=0,I=0;// For each row
for(g=0;g<n;g++){for(m=0,u=0;m<a;m++){for(// Get the filter that determines the current output pixel.
d=o[u++],f=o[u++],h=y+4*d|0,s=l=A=c=0;f>0;f--)// Big thanks to @mraleph (Vyacheslav Egorov) for the tip.
c=c+(p=o[u++])*e[h+3]|0,A=A+p*e[h+2]|0,l=l+p*e[h+1]|0,s=s+p*e[h]|0,h=h+4|0;// Store 15 bits between passes for better precision
// Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only
//
t[I+3]=i(c>>7),t[I+2]=i(A>>7),t[I+1]=i(l>>7),t[I]=i(s>>7),I=I+4*n|0}I=(g+1)*4|0,y=(g+1)*r*4|0}}// Supplementary method for `convolveHor()`
,convolveVert://
function(e,t,r,i,a,o){var s,l,A,c,u,d,f,h,g,m,p,y=0,I=0;// For each row
for(g=0;g<i;g++){for(m=0,u=0;m<a;m++){for(// Get the filter that determines the current output pixel.
d=o[u++],f=o[u++],h=y+4*d|0,s=l=A=c=0;f>0;f--)// Big thanks to @mraleph (Vyacheslav Egorov) for the tip.
c=c+(p=o[u++])*e[h+3]|0,A=A+p*e[h+2]|0,l=l+p*e[h+1]|0,s=s+p*e[h]|0,h=h+4|0;// Sync with premultiplied version for exact result match
s>>=7,l>>=7,A>>=7,c>>=7,//
t[I+3]=n(c+8192>>14),t[I+2]=n(A+8192>>14),t[I+1]=n(l+8192>>14),t[I]=n(s+8192>>14),I=I+4*i|0}I=(g+1)*4|0,y=(g+1)*r*4|0}}// Premultiply & convolve image data in horizontal direction. Can be used for:
,convolveHorWithPre://
// - Any bitmap data, extracted with `.getImageData()` method (with
//   non-premultiplied alpha)
//
// For images without alpha channel this method is slower than `convolveHor()`
//
function(e,t,r,n,a,o){var s,l,A,c,u,d,f,h,g,m,p,y,I=0,B=0;// For each row
for(m=0;m<n;m++){for(p=0,d=0;p<a;p++){for(// Get the filter that determines the current output pixel.
f=o[d++],h=o[d++],g=I+4*f|0,s=l=A=c=0;h>0;h--)c=c+(y=o[d++])*// Big thanks to @mraleph (Vyacheslav Egorov) for the tip.
(u=e[g+3])|0,A=A+y*e[g+2]*u|0,l=l+y*e[g+1]*u|0,s=s+y*e[g]*u|0,g=g+4|0;// Premultiply is (* alpha / 255).
// Postpone division for better performance
A=A/255|0,l=l/255|0,s=s/255|0,// Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only
//
t[B+3]=i(c>>7),t[B+2]=i(A>>7),t[B+1]=i(l>>7),t[B]=i(s>>7),B=B+4*n|0}B=(m+1)*4|0,I=(m+1)*r*4|0}}// Supplementary method for `convolveHorWithPre()`
,convolveVertWithPre://
function(e,t,r,i,a,o){var s,l,A,c,u,d,f,h,g,m,p,y=0,I=0;// For each row
for(g=0;g<i;g++){for(m=0,u=0;m<a;m++){for(// Get the filter that determines the current output pixel.
d=o[u++],f=o[u++],h=y+4*d|0,s=l=A=c=0;f>0;f--)// Big thanks to @mraleph (Vyacheslav Egorov) for the tip.
c=c+(p=o[u++])*e[h+3]|0,A=A+p*e[h+2]|0,l=l+p*e[h+1]|0,s=s+p*e[h]|0,h=h+4|0;// Downscale to leave room for un-premultiply
s>>=7,l>>=7,A>>=7,c>>=7,(c=n(c+8192>>14))>0&&(s=255*s/c|0,l=255*l/c|0,A=255*A/c|0),// Shift value = FIXED_FRAC_BITS + 7
//
t[I+3]=c,t[I+2]=n(A+8192>>14),t[I+1]=n(l+8192>>14),t[I]=n(s+8192>>14),I=I+4*i|0}I=(g+1)*4|0,y=(g+1)*r*4|0}}}},{}],3:[function(e,t,r){/* eslint-disable max-len */t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(e,t,r){t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,r){var n=e("./resize_filter_gen"),i=e("./convolve"),a=i.convolveHor,o=i.convolveVert,s=i.convolveHorWithPre,l=i.convolveVertWithPre;t.exports=function(e){var t=e.src,r=e.width,i=e.height,A=e.toWidth,c=e.toHeight,u=e.scaleX||e.toWidth/e.width,d=e.scaleY||e.toHeight/e.height,f=e.offsetX||0,h=e.offsetY||0,g=e.dest||new Uint8Array(A*c*4),m=void 0===e.filter?"mks2013":e.filter,p=n(m,r,A,u,f),y=n(m,i,c,d,h),I=new Uint16Array(A*i*4);return!function(e,t,r){for(var n=3,i=t*r*4|0;n<i;){if(255!==e[n])return!0;n=n+4|0}return!1}(t,r,i)?(a(t,I,r,i,A,p),o(I,g,i,A,c,y),function(e,t,r){for(var n=3,i=t*r*4|0;n<i;)e[n]=255,n=n+4|0}(g,A,c)):(s(t,I,r,i,A,p),l(I,g,i,A,c,y)),g}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,r){var n=e("./resize_filter_info");// Precision of fixed FP values
function i(e){return Math.round(16383*e)}t.exports=function(e,t,r,a,o){var s,l,A,c,u,d,f,h,g,m,p,y,I,B,b,x,w,_=n.filter[e].fn,E=1/a,v=Math.min(1,a),C=n.filter[e].win/v,Q=new Int16Array((Math.floor((C+1)*2)+2)*r),k=0,D=!Q.subarray||!Q.set;for(s=0;s<r;s++){for(A=Math.max(0,Math.floor(// Scaling should be done relative to central pixel point
(l=(s+.5)*E+o)-C)),u=(c=Math.min(t-1,Math.ceil(l+C)))-A+1,d=new Float32Array(u),f=new Int16Array(u),h=0,g=A,m=0;g<=c;g++,m++)h+=p=_((g+.5-l)*v),d[m]=p;// Normalize filter, convert to fixed point and accumulate conversion error
for(m=0,y=0;m<d.length;m++)y+=I=d[m]/h,f[m]=i(I);// Compensate normalization error, to minimize brightness drift
for(f[r>>1]+=i(1-y),// Now pack filter to useable form
//
// 1. Trim heading and tailing zero values, and compensate shitf/length
// 2. Put all to single array in this format:
//
//    [ pos shift, data length, value1, value2, value3, ... ]
//
B=0;B<f.length&&0===f[B];)B++;if(B<f.length){for(b=f.length-1;b>0&&0===f[b];)b--;if(x=A+B,w=b-B+1,Q[k++]=x,Q[k++]=w,D)for(m=B;m<=b;m++)Q[k++]=f[m];else Q.set(f.subarray(B,b+1),k),k+=w}else // zero data, write header only
Q[k++]=0,Q[k++]=0}return Q}},{"./resize_filter_info":7}],7:[function(e,t,r){t.exports={filter:{// Nearest neibor
box:{win:.5,fn:function(e){return e<0&&(e=-e),e<.5?1:0}},// // Hamming
hamming:{win:1,fn:function(e){if(e<0&&(e=-e),e>=1)return 0;if(e<11920929e-14)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},// Lanczos, win = 2
lanczos2:{win:2,fn:function(e){if(e<0&&(e=-e),e>=2)return 0;if(e<11920929e-14)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},// Lanczos, win = 3
lanczos3:{win:3,fn:function(e){if(e<0&&(e=-e),e>=3)return 0;if(e<11920929e-14)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}},// Magic Kernel Sharp 2013, win = 2.5
// http://johncostella.com/magic/
mks2013:{win:2.5,fn:function(e){return(e<0&&(e=-e),e>=2.5)?0:e>=1.5?-.125*(e-2.5)*(e-2.5):e>=.5?.25*(4*e*e-11*e+7):1.0625-1.75*e*e}}},// Legacy mapping
f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(e,t,r){var n=e("./resize_filter_gen"),i=!0;try{i=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(e){}function a(e,t,r){if(i){t.set(new Uint8Array(e.buffer,0,e.byteLength),r);return}for(var n=r,a=0;a<e.length;a++){var o=e[a];t[n++]=255&o,t[n++]=o>>8&255}}t.exports=function(e){var t=e.src,r=e.width,i=e.height,o=e.toWidth,s=e.toHeight,l=e.scaleX||e.toWidth/e.width,A=e.scaleY||e.toHeight/e.height,c=e.offsetX||0,u=e.offsetY||0,d=e.dest||new Uint8Array(o*s*4),f=void 0===e.filter?"mks2013":e.filter,h=n(f,r,o,l,c),g=n(f,i,s,A,u),m=Math.max(t.byteLength,d.byteLength),p=this.__align(0+m),y=i*o*8,I=this.__align(p+y),B=this.__align(I+h.byteLength),b=B+g.byteLength,x=this.__instance("resize",b),w=new Uint8Array(this.__memory.buffer),_=new Uint32Array(this.__memory.buffer),E=new Uint32Array(t.buffer);_.set(E),// speed difference is not significant vs direct .set()
a(h,w,I),a(g,w,B);// emsdk does method names with '_'
var v=x.exports.convolveHV||x.exports._convolveHV;return!function(e,t,r){for(var n=3,i=t*r*4|0;n<i;){if(255!==e[n])return!0;n=n+4|0}return!1}(t,r,i)?(v(I,B,p,r,i,o,s,0),function(e,t,r){for(var n=3,i=t*r*4|0;n<i;)e[n]=255,n=n+4|0}(d,o,s)):v(I,B,p,r,i,o,s,1),new Uint32Array(d.buffer).set(new Uint32Array(this.__memory.buffer,0,s*o)),d}},{"./resize_filter_gen":6}],9:[function(e,t,r){t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(e,t,r){var n=e("glur/mono16");t.exports=function(e,t,r,i,a,o){if(0!==i&&!(a<.5)){a>2&&(a=2);var s,l,A,c,u,d=function(e,t,r){for(var n,i,a,o,s=t*r,l=new Uint16Array(s),A=0;A<s;A++)n=e[4*A],i=e[4*A+1],a=e[4*A+2],o=n>=i&&n>=a?n:i>=a&&i>=n?i:a,l[A]=o<<8;return l}(e,t,r),f=new Uint16Array(d);n(f,t,r,a);/* eslint-disable indent */for(var h=i/100*4096+.5|0,g=o<<8,m=t*r,p=0;p<m;p++)Math.abs(c=(s=d[p])-f[p])>=g&&(// in RGB by the same constant (same for HSL), see also:
// https://beesbuzz.biz/code/16-hsv-color-transforms
A=((l=// [255.003 .. 255.996] (FF01-FFFF). This allows to round this value as (x+.5)|0
// later without overflowing.
(l=// add unsharp mask to the brightness channel
(l=s+(h*c+2048>>12))>65280?65280:l)<0?0:l)<<12)/// change this value (because diff between colors gets inflated), so no need to verify correctness.
(s=0!==s?s:1)|0,e[//  - all numbers are positive
//  - r,g,b <= (v1/256)
//  - r,g,b,(v1/256),(v2/256) <= 255
// So highest this number can get is X*255/X+0.5=255.5 which is < 256 and rounds down.
u=4*p]=e[u]*A+2048>>12,e[u+1]=e[u+1]*A+2048>>12,e[u+2]=e[u+2]*A+2048>>12)}}},{"glur/mono16":18}],11:[function(e,t,r){t.exports=function(e,t,r,n,i,a){if(0!==n&&!(i<.5)){i>2&&(i=2);var o=t*r,s=4*o,l=2*o,A=2*o,c=4*Math.max(t,r),u=s+l,d=u+A,f=d+A,h=f+c,g=this.__instance("unsharp_mask",s+l+2*A+c+32,{exp:Math.exp}),m=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(m);var p=g.exports.hsv_v16||g.exports._hsv_v16;p(0,s,t,r),(p=g.exports.blurMono16||g.exports._blurMono16)(s,u,d,f,h,t,r,i),(p=g.exports.unsharp||g.exports._unsharp)(0,0,s,u,t,r,n,a),m.set(new Uint32Array(this.__memory.buffer,0,o))}}},{}],12:[function(e,t,r){/* eslint-disable max-len */t.exports="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"},{}],13:[function(e,t,r){function n(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}n.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},n.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return t.gc()},100))},n.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter(function(r){return!(t-r.lastUsed>e.idle)||(r.destroy(),!1)}),0!==this.available.length?this.timeoutId=setTimeout(function(){return e.gc()},100):this.timeoutId=0},t.exports=n},{}],14:[function(e,t,r){t.exports=function(e,t,r,n,i,a){var o=r/e,s=n/t,l=(2*a+2+1)/i;// it could only happen because of invalid options
if(l>.5)return[[r,n]];var A=Math.ceil(Math.log(Math.min(o,s))/Math.log(l));// no additional resizes are necessary,
// stageCount can be zero or be negative when enlarging the image
if(A<=1)return[[r,n]];for(var c=[],u=0;u<A;u++){var d=Math.round(Math.pow(Math.pow(e,A-u-1)*Math.pow(r,u+1),1/A)),f=Math.round(Math.pow(Math.pow(t,A-u-1)*Math.pow(n,u+1),1/A));c.push([d,f])}return c}},{}],15:[function(e,t,r){function n(e){var t=Math.round(e);return 1e-5>Math.abs(e-t)?t:Math.floor(e)}function i(e){var t=Math.round(e);return 1e-5>Math.abs(e-t)?t:Math.ceil(e)}t.exports=function(e){var t,r,a,o,s,l,A=e.toWidth/e.width,c=e.toHeight/e.height,u=n(e.srcTileSize*A)-2*e.destTileBorder,d=n(e.srcTileSize*c)-2*e.destTileBorder;if(u<1||d<1)throw Error("Internal error in pica: target tile width/height is too small.");var f=[];// doesn in the browser
for(o=0;o<e.toHeight;o+=d)for(a=0;a<e.toWidth;a+=u)(t=a-e.destTileBorder)<0&&(t=0),s=a+u+e.destTileBorder-t,t+s>=e.toWidth&&(s=e.toWidth-t),(r=o-e.destTileBorder)<0&&(r=0),l=o+d+e.destTileBorder-r,r+l>=e.toHeight&&(l=e.toHeight-r),f.push({toX:t,toY:r,toWidth:s,toHeight:l,toInnerX:a,toInnerY:o,toInnerWidth:u,toInnerHeight:d,offsetX:t/A-n(t/A),offsetY:r/c-n(r/c),scaleX:A,scaleY:c,x:n(t/A),y:n(r/c),width:i(s/A),height:i(l/c)});return f}},{}],16:[function(e,t,r){function n(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=n(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"/* node-canvas */===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===n(e)},t.exports.isImageBitmap=function(e){return"[object ImageBitmap]"===n(e)},t.exports.limiter=function(e){var t=0,r=[];function n(){t<e&&r.length&&(t++,r.shift()())}return function(e){return new Promise(function(i,a){r.push(function(){e().then(function(e){i(e),t--,n()},function(e){a(e),t--,n()})}),n()})}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(e){return Promise.resolve().then(function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(e){var r=10===e.width;// Branch below is filtered on upper level. We do not call resize
return(// detection for basic ImageBitmap.
//
// https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap
// old Crome 51 has ImageBitmap without .close(). Then this code
// will throw and return 'false' as expected.
//
e.close(),t=null,r)})}).catch(function(){return!1})},t.exports.worker_offscreen_canvas_support=function(){return new Promise(function(e,t){if("undefined"==typeof OffscreenCanvas){// if OffscreenCanvas is present, we assume browser supports Worker and built-in Promise as well
e(!1);return}var r=btoa("(".concat((function(e){if("undefined"==typeof createImageBitmap){e.postMessage(!1);return}Promise.resolve().then(function(){var e=new OffscreenCanvas(10,10);// test that 2d context can be used in worker
return e.getContext("2d").rect(0,0,1,1),createImageBitmap(e,0,0,1,1)}).then(function(){return e.postMessage(!0)},function(){return e.postMessage(!1)})}).toString(),")(self);")),n=new Worker("data:text/javascript;base64,".concat(r));n.onmessage=function(t){return e(t.data)},n.onerror=t}).then(function(e){return e},function(){return!1})},// FireFox randomizes the output of that function in `privacy.resistFingerprinting` mode
t.exports.can_use_canvas=function(e){var t=!1;try{var r=e(2,1).getContext("2d"),n=r.createImageData(2,1);n.data[0]=12,n.data[1]=23,n.data[2]=34,n.data[3]=255,n.data[4]=45,n.data[5]=56,n.data[6]=67,n.data[7]=255,r.putImageData(n,0,0),n=null,n=r.getImageData(0,0,2,1),12===n.data[0]&&23===n.data[1]&&34===n.data[2]&&255===n.data[3]&&45===n.data[4]&&56===n.data[5]&&67===n.data[6]&&255===n.data[7]&&(t=!0)}catch(e){}return t},// with JPEG images oriented with Exif;
// https://bugs.chromium.org/p/chromium/issues/detail?id=1220671
// TODO: remove after it's fixed in chrome for at least 2 releases
t.exports.cib_can_use_region=function(){return new Promise(function(e){if("undefined"==typeof createImageBitmap){e(!1);return}var t=new Image;t.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",t.onload=function(){createImageBitmap(t,0,0,t.width,t.height).then(function(r){r.width===t.width&&r.height===t.height?e(!0):e(!1)},function(){return e(!1)})},t.onerror=function(){return e(!1)}})}},{}],17:[function(e,t,r){t.exports=function(){var t,r=e("./mathlib");/* eslint-disable no-undef */onmessage=function(e){var n=e.data.opts;if(!n.src&&n.srcBitmap){var i=new OffscreenCanvas(n.width,n.height),a=i.getContext("2d");a.drawImage(n.srcBitmap,0,0),n.src=a.getImageData(0,0,n.width,n.height).data,i.width=i.height=0,i=null,n.srcBitmap.close(),n.srcBitmap=null;// https://github.com/nodeca/pica/issues/223
// returnBitmap = true;
}t||(t=new r(e.data.features));// Use multimath's sync auto-init. Avoid Promise use in old browsers,
// because polyfills are not propagated to webworker.
var o=t.resizeAndUnsharp(n);postMessage({data:o},[o.buffer])}}},{"./mathlib":1}],18:[function(e,t,r){// Calculate Gaussian blur of an image using IIR filter
// The method is taken from Intel's white paper and code example attached to it:
// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter
// -implementation-using-intel-advanced-vector-extensions
var n,i,a,o,s,l,A,c;function u(e,t,r,n,i,a){var o,s,l,A,c,u,d,f,h,g,m,p,y,I;for(h=0;h<a;h++){for(g=0,u=h*i,d=h,f=0,A=c=// left to right
(o=e[u])*n[6],m=n[0],p=n[1],y=n[4],I=n[5];g<i;g++)l=(s=e[u])*m+o*p+A*y+c*I,c=A,A=l,o=s,r[f]=A,f++,u++;for(u--,f--,d+=a*(i-1),A=c=// right to left
(o=e[u])*n[7],s=o,m=n[2],p=n[3],g=i-1;g>=0;g--)l=s*m+o*p+A*y+c*I,c=A,A=l,o=s,s=e[u],t[d]=r[f]+A,u--,f--,d-=a}}t.exports=function(e,t,r,d){// Quick exit on zero radius
if(d){var f,h,g,m,p,y=new Uint16Array(e.length),I=new Float32Array(Math.max(t,r)),B=((f=d)<.5&&(f=.5),g=Math.exp(-(h=Math.exp(.527076)/f)),m=Math.exp(-2*h),n=p=(1-g)*(1-g)/(1+2*h*g-m),i=p*(h-1)*g,a=p*(h+1)*g,o=-p*m,A=(n+i)/(1-(s=2*g)-(l=-m)),c=(a+o)/(1-s-l),new Float32Array([n,i,a,o,s,l,A,c]));u(e,y,I,B,t,r),u(y,e,I,B,r,t)}}},{}],19:[function(e,t,r){var n=e("object-assign"),i=e("./lib/base64decode"),a=e("./lib/wa_detect"),o={js:!0,wasm:!0};function s(e){if(!(this instanceof s))return new s(e);var t=n({},o,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=a,s.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map(function(t){var r=e.__modules[t];return e.options.wasm&&e.has_wasm()&&r.wasm_fn&&!e.__wasm[t]?WebAssembly.compile(e.__base64decode(r.wasm_src)).then(function(r){e.__wasm[t]=r}):null})).then(function(){return e}),this.__init_promise},////////////////////////////////////////////////////////////////////////////////
// Methods below are for internal use from plugins
// Simple decode base64 to typed array. Useful to load embedded webassembly
// code. You probably don't need to call this method directly.
//
s.prototype.__base64decode=i,// Increase current memory to include specified number of bytes. Do nothing if
// size is already ok. You probably don't need to call this method directly,
// because it will be invoked from `.__instance()`.
//
s.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},// Returns instantinated webassembly item by name, with specified memory size
// and environment.
// - use cache if available
// - do sync module init, if async init was not called earlier
// - allocate memory if not enougth
// - can export functions to webassembly via "env_extra",
//   for example, { exp: Math.exp }
//
s.prototype.__instance=function(e,t,r){// If .init() was not called, do sync compile
if(t&&this.__reallocate(t),!this.__wasm[e]){var i=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(i.wasm_src))}if(!this.__cache[e]){var a={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:n(a,r||{})})}return this.__cache[e]},// Helper to calculate memory aligh for pointers. Webassembly does not require
// this, but you may wish to experiment. Default base = 8;
//
s.prototype.__align=function(e,t){var r=e%(t=t||8);return e+(r?t-r:0)},t.exports=s},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(e,t,r){t.exports=function(e){for(var t=e.replace(/[\r\n=]/g,""),r=t.length,n=new Uint8Array(3*r>>2),i=0,a=0,o=0;o<r;o++)o%4==0&&o&&(n[a++]=i>>16&255,n[a++]=i>>8&255,n[a++]=255&i),i=i<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(o));var s=r%4*6;return 0===s?(n[a++]=i>>16&255,n[a++]=i>>8&255,n[a++]=255&i):18===s?(n[a++]=i>>10&255,n[a++]=i>>2&255):12===s&&(n[a++]=i>>4&255),n}},{}],21:[function(e,t,r){var n;t.exports=function(){// use cache if called before;
if(void 0!==n||(n=!1,"undefined"==typeof WebAssembly))return n;// If WebAssenbly is disabled, code can throw on compile
try{// https://github.com/brion/min-wasm-fail/blob/master/min-wasm-fail.in.js
// Additional check that WA internals are correct
/* eslint-disable comma-spacing, max-len */var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e),r=new WebAssembly.Instance(t,{});// test storing to and loading from a non-zero location via a parameter.
// Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations
0!==r.exports.test(4)&&(n=!0)}catch(e){}return n}},{}],22:[function(e,t,r){/* eslint-disable no-unused-vars */var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=!function(){try{if(!Object.assign)return!1;// Detect buggy property enumeration order in older V8 versions.
// https://bugs.chromium.org/p/v8/issues/detail?id=4118
var e=new String("abc");// eslint-disable-line no-new-wrappers
if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==n.join(""))return!1;// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var i={};if("abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join(""))return!1;return!0}catch(e){// We don't expect any of the above to throw, but better to be safe.
return!1}}()?function(e,t){for(var r,o,s=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var A in r=Object(arguments[l]))i.call(r,A)&&(s[A]=r[A]);if(n){o=n(r);for(var c=0;c<o.length;c++)a.call(r,o[c])&&(s[o[c]]=r[o[c]])}}return s}:Object.assign},{}],23:[function(e,t,r){var n=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var r,s=Object.keys(a),l=0,A=s.length;l<A;l++){var c=s[l],u=a[c].exports;// Using babel as a transpiler to use esmodule, the export will always
// be an object with the default export as a property of it. To ensure
// the existing api and babel esmodule exports are both supported we
// check for both
if(u===e||u&&u.default===e){r=c;break}}if(!r){r=Math.floor(4294967296*Math.random()).toString(16);for(var d={},l=0,A=s.length;l<A;l++){var c=s[l];d[c]=c}i[r]=["function(require,module,exports){"+e+"(self); }",d]}var f=Math.floor(4294967296*Math.random()).toString(16),h={};h[r]=r,i[f]=["function(require,module,exports){var f = require("+o(r)+");(f.default ? f.default : f)(self);}",h];var g={};!function e(t){for(var r in g[t]=!0,i[t][1]){var n=i[t][1][r];g[n]||e(n)}}(f);var m="("+n+")({"+Object.keys(g).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(f)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return y;var I=p.createObjectURL(y),B=new Worker(I);return B.objectURL=I,B}},{}],"/index.js":[function(e,t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i=e("object-assign"),a=e("webworkify"),o=e("./lib/mathlib"),s=e("./lib/pool"),l=e("./lib/utils"),A=e("./lib/worker"),c=e("./lib/stepper"),u=e("./lib/tiler"),d=e("./lib/mm_resize/resize_filter_info"),f={},h=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(h=navigator.userAgent.indexOf("Safari")>=0)}catch(e){}var g=1;"undefined"!=typeof navigator&&(g=Math.min(navigator.hardwareConcurrency||1,4));var m={tile:1024,concurrency:g,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r}},p={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},y=!1,I=!1,B=!1,b=!1,x=!1;function w(){return{value:a(A),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}////////////////////////////////////////////////////////////////////////////////
// API methods
function _(e){if(!(this instanceof _))return new _(e);this.options=i({},m,e||{});var t="lk_".concat(this.options.concurrency);// Share limiters to avoid multiple parallel workers when user creates
// multiple pica instances.
this.__limit=f[t]||l.limiter(this.options.concurrency),f[t]||(f[t]=this.__limit),this.features={js:!1,// pure JS implementation, can be disabled for testing
wasm:!1,// webassembly implementation for heavy functions
cib:!1,// resize via createImageBitmap (only FF at this moment)
ww:!1// webworkers
},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}_.prototype.init=function(){var t,r,n=this;if(this.__initPromise)return this.__initPromise;// Test if we can create ImageData without canvas and memory copy
if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{/* eslint-disable no-new */new ImageData(new Uint8ClampedArray(400),10,10),y=!0}catch(e){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?I=!0:this.debug("ImageBitmap does not support .close(), disabled"));var a=this.options.features.slice();if(a.indexOf("all")>=0&&(a=["cib","wasm","js","ww"]),this.__requested_features=a,this.__mathlib=new o(a),a.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)// https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11
try{e("webworkify")(function(){}).terminate(),this.features.ww=!0;var A="wp_".concat(JSON.stringify(this.options));f[A]?this.__workersPool=f[A]:(this.__workersPool=new s(w,this.options.idle),f[A]=this.__workersPool)}catch(e){}var c=this.__mathlib.init().then(function(e){// Copy detected features
i(n.features,e.features)});t=I?l.cib_support(this.options.createCanvas).then(function(e){if(n.features.cib&&0>a.indexOf("cib")){n.debug("createImageBitmap() resize supported, but disabled by config");return}a.indexOf("cib")>=0&&(n.features.cib=e)}):Promise.resolve(!1),B=l.can_use_canvas(this.options.createCanvas),r=(r=I&&y&&-1!==a.indexOf("ww")?l.worker_offscreen_canvas_support():Promise.resolve(!1)).then(function(e){b=e});// so need to check whether function works correctly;
// https://bugs.chromium.org/p/chromium/issues/detail?id=1220671
var u=l.cib_can_use_region().then(function(e){x=e});// Init math lib. That's async because can load some
return this.__initPromise=Promise.all([c,t,r,u]).then(function(){return n}),this.__initPromise},_.prototype.__invokeResize=function(e,t){var r=this;return(// Share cache between calls:
//
// - wasm instance
// - wasm memory object
//
t.__mathCache=t.__mathCache||{},Promise.resolve().then(function(){return r.features.ww?new Promise(function(n,i){var a=r.__workersPool.acquire();t.cancelToken&&t.cancelToken.catch(function(e){return i(e)}),a.value.onmessage=function(e){a.release(),e.data.err?i(e.data.err):n(e.data)};var o=[];e.src&&o.push(e.src.buffer),e.srcBitmap&&o.push(e.srcBitmap),a.value.postMessage({opts:e,features:r.__requested_features,preload:{wasm_nodule:r.__mathlib.__}},o)}):{data:r.__mathlib.resizeAndUnsharp(e,t.__mathCache)}}))},_.prototype.__extractTileData=function(e,t,r,n,i){if(this.features.ww&&b&&// can use canvas because canvas doesn't have orientation;
// see https://bugs.chromium.org/p/chromium/issues/detail?id=1220671
(l.isCanvas(t)||x))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(n.srcImageBitmap||t,e.x,e.y,e.width,e.height).then(function(e){return i.srcBitmap=e,i});// Extract tile RGBA buffer, depending on input type
if(l.isCanvas(t))return n.srcCtx||(n.srcCtx=t.getContext("2d")),this.debug("Get tile pixel data"),i.src=n.srcCtx.getImageData(e.x,e.y,e.width,e.height).data,i;// If input is Image or decoded to ImageBitmap,
// draw region to temporary canvas and extract data from it
//
// Note! Attempt to reuse this canvas causes significant slowdown in chrome
//
this.debug("Draw tile imageBitmap/image to temporary canvas");var a=this.options.createCanvas(e.width,e.height),o=a.getContext("2d");return o.globalCompositeOperation="copy",o.drawImage(n.srcImageBitmap||t,e.x,e.y,e.width,e.height,0,0,e.width,e.height),this.debug("Get tile pixel data"),i.src=o.getImageData(0,0,e.width,e.height).data,// https://github.com/nodeca/pica/issues/199
a.width=a.height=0,i},_.prototype.__landTileData=function(e,t,r){var n;if(this.debug("Convert raw rgba tile result to ImageData"),t.bitmap)return r.toCtx.drawImage(t.bitmap,e.toX,e.toY),null;if(y)// If `new ImageData()` & Uint8ClampedArray suported
n=new ImageData(new Uint8ClampedArray(t.data),e.toWidth,e.toHeight);else if(// fallback for `node-canvas` and old browsers
// (IE11 has ImageData but does not support `new ImageData()`)
(n=r.toCtx.createImageData(e.toWidth,e.toHeight)).data.set)n.data.set(t.data);else for(var i=n.data.length-1;i>=0;i--)n.data[i]=t.data[i];return this.debug("Draw tile"),h?r.toCtx.putImageData(n,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):r.toCtx.putImageData(n,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),null},_.prototype.__tileAndResize=function(e,t,r){var n=this,i={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};// If image - try to decode in background if possible
return Promise.resolve().then(function(){if(i.toCtx=t.getContext("2d"),l.isCanvas(e))return null;if(l.isImageBitmap(e))return i.srcImageBitmap=e,i.isImageBitmapReused=!0,null;if(l.isImage(e))return(// try do decode image in background for faster next operations;
// if we're using offscreen canvas, cib is called per tile, so not needed here
I?(n.debug("Decode image via createImageBitmap"),createImageBitmap(e).then(function(e){i.srcImageBitmap=e})// Suppress error to use fallback, if method fails
.catch(function(e){return null})):null);throw Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(r.canceled)return r.cancelToken;n.debug("Calculate tiles");var a=u({width:r.width,height:r.height,srcTileSize:n.options.tile,toWidth:r.toWidth,toHeight:r.toHeight,destTileBorder:r.__destTileBorder}).map(function(t){return n.__limit(function(){if(r.canceled)return r.cancelToken;var a={width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,filter:r.filter,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};return n.debug("Invoke resize math"),Promise.resolve(a).then(function(a){return n.__extractTileData(t,e,r,i,a)}).then(function(e){return n.debug("Invoke resize math"),n.__invokeResize(e,r)}).then(function(e){return r.canceled?r.cancelToken:(i.srcImageData=null,n.__landTileData(t,e,i))})})});function o(e){e.srcImageBitmap&&(e.isImageBitmapReused||e.srcImageBitmap.close(),e.srcImageBitmap=null)}return n.debug("Process tiles"),Promise.all(a).then(function(){return n.debug("Finished!"),o(i),t},function(e){throw o(i),e})})},_.prototype.__processStages=function(e,t,r,a){var o,s,l,A=this;if(a.canceled)return a.cancelToken;var c=function(e){if(Array.isArray(e))return e}(o=e.shift())||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(o,2)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(o,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],f=c[1],h=0===e.length;return s=h||0>d.q2f.indexOf(a.filter)?a.filter:"box"===a.filter?"box":"hamming",a=i({},a,{toWidth:u,toHeight:f,filter:s}),h||(l=this.options.createCanvas(u,f)),this.__tileAndResize(t,h?r:l,a).then(function(){return h?r:(a.width=u,a.height=f,A.__processStages(e,l,r,a))}).then(function(e){return l&&// https://github.com/nodeca/pica/issues/199
(l.width=l.height=0),e})},_.prototype.__resizeViaCreateImageBitmap=function(e,t,r){var n=this,i=t.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:r.toWidth,resizeHeight:r.toHeight,resizeQuality:l.cib_quality_name(d.f2q[r.filter])}).then(function(e){if(r.canceled)return r.cancelToken;// if no unsharp - draw directly to output canvas
if(!r.unsharpAmount)return i.drawImage(e,0,0),e.close(),i=null,n.debug("Finished!"),t;n.debug("Unsharp result");var a=n.options.createCanvas(r.toWidth,r.toHeight),o=a.getContext("2d");o.drawImage(e,0,0),e.close();var s=o.getImageData(0,0,r.toWidth,r.toHeight);return n.__mathlib.unsharp_mask(s.data,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),i.putImageData(s,0,0),// https://github.com/nodeca/pica/issues/199
a.width=a.height=0,s=o=a=i=null,n.debug("Finished!"),t})},_.prototype.resize=function(e,t,r){var n=this;this.debug("Start resize...");var a=i({},p);if(isNaN(r)?r&&(a=i(a,r)):a=i(a,{quality:r}),a.toWidth=t.width,a.toHeight=t.height,a.width=e.naturalWidth||e.width,a.height=e.naturalHeight||e.height,Object.prototype.hasOwnProperty.call(a,"quality")){if(a.quality<0||a.quality>3)throw Error("Pica: .quality should be [0..3], got ".concat(a.quality));a.filter=d.q2f[a.quality]}// Prevent stepper from infinite loop
return 0===t.width||0===t.height?Promise.reject(Error("Invalid output size: ".concat(t.width,"x").concat(t.height))):(a.unsharpRadius>2&&(a.unsharpRadius=2),a.canceled=!1,a.cancelToken&&(a.cancelToken=a.cancelToken.then(function(e){throw a.canceled=!0,e},function(e){throw a.canceled=!0,e})),a.__destTileBorder=Math.ceil(Math.max(3,2.5*a.unsharpRadius|0)),this.init().then(function(){if(a.canceled)return a.cancelToken;// if createImageBitmap supports resize, just do it and return
if(n.features.cib){if(d.q2f.indexOf(a.filter)>=0)return n.__resizeViaCreateImageBitmap(e,t,a);n.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!B){var r=Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw r.code="ERR_GET_IMAGE_DATA",r}//
// No easy way, let's resize manually via arrays
//
var i=c(a.width,a.height,a.toWidth,a.toHeight,n.options.tile,a.__destTileBorder);return n.__processStages(i,e,t,a)}))},//
_.prototype.resizeBuffer=function(e){var t=this,r=i({},p,e);if(Object.prototype.hasOwnProperty.call(r,"quality")){if(r.quality<0||r.quality>3)throw Error("Pica: .quality should be [0..3], got ".concat(r.quality));r.filter=d.q2f[r.quality]}return this.init().then(function(){return t.__mathlib.resizeAndUnsharp(r)})},_.prototype.toBlob=function(e,t,r){return t=t||"image/png",new Promise(function(n){if(e.toBlob){e.toBlob(function(e){return n(e)},t,r);return}if(e.convertToBlob){n(e.convertToBlob({type:t,quality:r}));return}// Fallback for old browsers
for(var i=atob(e.toDataURL(t,r).split(",")[1]),a=i.length,o=new Uint8Array(a),s=0;s<a;s++)o[s]=i.charCodeAt(s);n(new Blob([o],{type:t}))})},_.prototype.debug=function(){},t.exports=_},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js");var l={},A={exports:{}};!function(e){//////////////////////////////////////////////////////////////////////////
// Helpers
//
function t(e,t){var r=Error(e);return r.code=t,r}// Convert number to 0xHH string
//
function r(e){for(var t=e.toString(16).toUpperCase(),r=2-t.length;r>0;r--)t="0"+t;return"0x"+t}// Check if input is a Uint8Array
//
function n(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}//////////////////////////////////////////////////////////////////////////
// Exif parser
//
// Input:
//  - jpeg_bin:   Uint8Array - jpeg file
//  - exif_start: Number     - start of TIFF header (after Exif\0\0)
//  - exif_end:   Number     - end of Exif segment
//  - on_entry:   Number     - callback
//
function i(e,r,n){// Uint8Array, exif without signature (which isn't included in offsets)
this.input=e.subarray(r,n),// offset correction for `on_entry` callback
this.start=r;// Check TIFF header (includes byte alignment and first IFD offset)
var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\x00"!==i&&"MM\x00*"!==i)throw t("invalid TIFF signature","EBADDATA");// true if motorola (big endian) byte alignment, false if intel
this.big_endian="M"===i[0]}i.prototype.each=function(e){// allow premature exit
this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,e)}},i.prototype.filter=function(e){var r={};// make sure IFD0 always exists
r.ifd0={id:0,entries:[]},this.each(function(t){(!1!==e(t)||t.is_subifd_link)&&(t.is_subifd_link&&1!==t.count&&4!==t.format||(r["ifd"+t.ifd]||(r["ifd"+t.ifd]={id:t.ifd,entries:[]}),r["ifd"+t.ifd].entries.push(t)))}),// thumbnails are not supported just yet, so delete all information related to it
delete r.ifd1;// Calculate output size
var n=8;Object.keys(r).forEach(function(e){n+=2,r[e].entries.forEach(function(e){n+=12+(e.data_length>4?2*Math.ceil(e.data_length/2):0)}),n+=4}),this.output=new Uint8Array(n),this.output[0]=this.output[1]=(this.big_endian?"M":"I").charCodeAt(0),this.write_uint16(2,42);var i=8,a=this;if(this.write_uint32(4,i),Object.keys(r).forEach(function(e){r[e].written_offset=i;var t=i,n=t+2+12*r[e].entries.length+4;i=n,a.write_uint16(t,r[e].entries.length),r[e].entries.sort(function(e,t){// IFD entries must be in order of increasing tag IDs
return e.tag-t.tag}).forEach(function(e,n){var o=t+2+12*n;a.write_uint16(o,e.tag),a.write_uint16(o+2,e.format),a.write_uint32(o+4,e.count),e.is_subifd_link?r["ifd"+e.tag]&&(r["ifd"+e.tag].link_offset=o+8):e.data_length<=4?a.output.set(a.input.subarray(e.data_offset-a.start,e.data_offset-a.start+4),o+8):(a.write_uint32(o+8,i),a.output.set(a.input.subarray(e.data_offset-a.start,e.data_offset-a.start+e.data_length),i),i+=2*Math.ceil(e.data_length/2))});var o=r["ifd"+(r[e].id+1)];o&&(o.link_offset=n-4)}),Object.keys(r).forEach(function(e){r[e].written_offset&&r[e].link_offset&&a.write_uint32(r[e].link_offset,r[e].written_offset)}),this.output.length!==i)throw t("internal error: incorrect buffer size allocated");return this.output},i.prototype.read_uint16=function(e){var r=this.input;if(e+2>r.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?256*r[e]+r[e+1]:r[e]+256*r[e+1]},i.prototype.read_uint32=function(e){var r=this.input;if(e+4>r.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?16777216*r[e]+65536*r[e+1]+256*r[e+2]+r[e+3]:r[e]+256*r[e+1]+65536*r[e+2]+16777216*r[e+3]},i.prototype.write_uint16=function(e,t){var r=this.output;this.big_endian?(r[e]=t>>>8&255,r[e+1]=255&t):(r[e]=255&t,r[e+1]=t>>>8&255)},i.prototype.write_uint32=function(e,t){var r=this.output;this.big_endian?(r[e]=t>>>24&255,r[e+1]=t>>>16&255,r[e+2]=t>>>8&255,r[e+3]=255&t):(r[e]=255&t,r[e+1]=t>>>8&255,r[e+2]=t>>>16&255,r[e+3]=t>>>24&255)},i.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||// SubIFD
0===e&&34853===t||// GPS Info
34665===e&&40965===t;// Interop IFD
},// Returns byte length of a single component of a given format
//
i.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:// unknown type
return 0}},// Reads Exif data
//
i.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:return this.input[t];case 6:return(r=this.input[t])|(128&r)*33554430;case 3:return this.read_uint16(t);case 8:return(r=this.read_uint16(t))|(32768&r)*131070;case 4:return this.read_uint32(t);case 9:return 0|(r=this.read_uint32(t));default:return null;// not implemented
}},i.prototype.scan_ifd=function(e,r,n){var i=this.read_uint16(r);r+=2;for(var a=0;a<i;a++){var o=this.read_uint16(r),s=this.read_uint16(r+2),l=this.read_uint32(r+4),A=this.exif_format_length(s),c=l*A,u=c<=4?r+8:this.read_uint32(r+8),d=!1;if(u+c>this.input.length)throw t("unexpected EOF","EBADDATA");for(var f=[],h=u,g=0;g<l;g++,h+=A){var m=this.exif_format_read(s,h);if(null===m){f=null;break}f.push(m)}if(Array.isArray(f)&&2===s){try{f=function(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}(String.fromCharCode.apply(null,f))}catch(e){f=null}f&&"\x00"===f[f.length-1]&&(f=f.slice(0,-1))}if(this.is_subifd_link(e,o)&&Array.isArray(f)&&Number.isInteger(f[0])&&f[0]>0&&(this.ifds_to_read.push({id:o,offset:f[0]}),d=!0),!1===n({is_big_endian:this.big_endian,ifd:e,tag:o,format:s,count:l,entry_offset:r+this.start,data_length:c,data_offset:u+this.start,value:f,is_subifd_link:d})){this.aborted=!0;return}r+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(r)})},// Check whether input is a JPEG image
//
// Input:
//  - jpeg_bin: Uint8Array - jpeg file
//
// Returns true if it is and false otherwise
//
e.exports.is_jpeg=function(e){return e.length>=4&&255===e[0]&&216===e[1]&&255===e[2]},// Call an iterator on each segment in the given JPEG image
//
// Input:
//  - jpeg_bin:   Uint8Array - jpeg file
//  - on_segment: Function - callback executed on each JPEG marker segment
//    - segment:  Object
//      - code:   Number - marker type (2nd byte, e.g. 0xE0 for APP0)
//      - offset: Number - offset of the first byte (0xFF) relative to `jpeg_bin` start
//      - length: Number - length of the entire marker segment including first two bytes and length
//        - 2 for standalone markers
//        - 4+length for markers with data
//
// Iteration stops when `EOI` (0xFFD9) marker is reached or if `on_segment`
// function returns `false`.
//
e.exports.jpeg_segments_each=function(i,a){if(!n(i))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof a)throw t("Invalid argument (on_segment), Function expected","EINVAL");if(!e.exports.is_jpeg(i))throw t("Unknown file format","ENOTJPEG");for(var o=0,s=i.length,l=!1;;){if(o+1>=s)throw t("Unexpected EOF","EBADDATA");var A,c,u=i[o],d=i[o+1];if(255===u&&255===d)// padding
A=255,c=1;else if(255===u&&0!==d){if(c=2,208<=// marker
(A=d)&&A<=217||1===A);else{if(o+3>=s)throw t("Unexpected EOF","EBADDATA");if((c+=256*i[o+2]+i[o+3])<2)throw t("Invalid segment length","EBADDATA");if(o+c-1>=s)throw t("Unexpected EOF","EBADDATA")}l&&(A>=208&&A<=215||(l=!1)),218/* SOS */===A&&(l=!0)}else if(l)for(var f=o+1;;f++){// scan until we find FF
if(f>=s)throw t("Unexpected EOF","EBADDATA");if(255===i[f]){if(f+1>=s)throw t("Unexpected EOF","EBADDATA");if(0!==i[f+1]){A=0,c=f-o;break}}}else throw t("Unexpected byte at segment start: "+r(u)+" (offset "+r(o)+")","EBADDATA");if(!1===a({code:A,offset:o,length:c})||217/* EOI */===A)break;o+=c}},// Replace or remove segments in the given JPEG image
//
// Input:
//  - jpeg_bin:   Uint8Array - jpeg file
//  - on_segment: Function - callback executed on each JPEG marker segment
//    - segment:  Object
//      - code:   Number - marker type (2nd byte, e.g. 0xE0 for APP0)
//      - offset: Number - offset of the first byte (0xFF) relative to `jpeg_bin` start
//      - length: Number - length of the entire marker segment including first two bytes and length
//        - 2 for standalone markers
//        - 4+length for markers with data
//
// `on_segment` function should return one of the following:
//  - `false`        - segment is removed from the output
//  - Uint8Array     - segment is replaced with the new data
//  - [ Uint8Array ] - segment is replaced with the new data
//  - anything else  - segment is copied to the output as is
//
// Any data after `EOI` (0xFFD9) marker is removed.
//
e.exports.jpeg_segments_filter=function(r,i){if(!n(r))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof i)throw t("Invalid argument (on_segment), Function expected","EINVAL");var a=[],o=0;e.exports.jpeg_segments_each(r,function(e){var t=i(e);if(n(t))a.push({data:t}),o+=t.length;else if(Array.isArray(t))t.filter(n).forEach(function(e){a.push({data:e}),o+=e.length});else if(!1!==t){var r={start:e.offset,end:e.offset+e.length};a.length>0&&a[a.length-1].end===r.start?a[a.length-1].end=r.end:a.push(r),o+=e.length}});var s=new Uint8Array(o),l=0;return a.forEach(function(e){var t=e.data||r.subarray(e.start,e.end);s.set(t,l),l+=t.length}),s},// Call an iterator on each Exif entry in the given JPEG image
//
// Input:
//  - jpeg_bin: Uint8Array - jpeg file
//  - on_entry: Function - callback executed on each Exif entry
//    - entry:  Object
//      - is_big_endian:  Boolean - whether Exif uses big or little endian byte alignment
//      - ifd:            Number  - IFD identifier (0 for IFD0, 1 for IFD1, 0x8769 for SubIFD,
//                                 0x8825 for GPS Info, 0xA005 for Interop IFD)
//      - tag:            Number  - exif entry tag (0x0110 - camera name, 0x0112 - orientation, etc. - see Exif spec)
//      - format:         Number  - exif entry format (1 - byte, 2 - ascii, 3 - short, etc. - see Exif spec)
//      - count:          Number  - number of components of the given format inside data
//                                 (usually 1, or string length for ascii format)
//      - entry_offset:   Number  - start of Exif entry (entry length is always 12, so not included)
//      - data_offset:    Number  - start of data attached to Exif entry (will overlap with entry if length <= 4)
//      - data_length:    Number  - length of data attached to Exif entry
//      - value:          Array|String|Null - our best attempt at parsing data (not all formats supported right now)
//      - is_subifd_link: Boolean - whether this entry is recognized to be a link to subifd (can't filter these out)
//
// Iteration stops early if iterator returns `false`.
//
// If Exif wasn't found anywhere (before start of the image data, SOS),
// iterator is never executed.
//
e.exports.jpeg_exif_tags_each=function(r,a){if(!n(r))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof a)throw t("Invalid argument (on_exif_entry), Function expected","EINVAL");/* eslint-disable consistent-return */e.exports.jpeg_segments_each(r,function(e){return 218/* SOS */!==e.code&&(225===e.code&&e.length>=10&&69===r[e.offset+4]&&120===r[e.offset+5]&&105===r[e.offset+6]&&102===r[e.offset+7]&&0===r[e.offset+8]&&0===r[e.offset+9]?(new i(r,e.offset+10,e.offset+e.length).each(a),!1):void 0)})},// Remove Exif entries in the given JPEG image
//
// Input:
//  - jpeg_bin: Uint8Array - jpeg file
//  - on_entry: Function - callback executed on each Exif entry
//    - entry:  Object
//      - is_big_endian:  Boolean - whether Exif uses big or little endian byte alignment
//      - ifd:            Number  - IFD identifier (0 for IFD0, 1 for IFD1, 0x8769 for SubIFD,
//                                  0x8825 for GPS Info, 0xA005 for Interop IFD)
//      - tag:            Number  - exif entry tag (0x0110 - camera name, 0x0112 - orientation, etc. - see Exif spec)
//      - format:         Number  - exif entry format (1 - byte, 2 - ascii, 3 - short, etc. - see Exif spec)
//      - count:          Number  - number of components of the given format inside data
//                                  (usually 1, or string length for ascii format)
//      - entry_offset:   Number  - start of Exif entry (entry length is always 12, so not included)
//      - data_offset:    Number  - start of data attached to Exif entry (will overlap with entry if length <= 4)
//      - data_length:    Number  - length of data attached to Exif entry
//      - value:          Array|String|Null - our best attempt at parsing data (not all formats supported right now)
//      - is_subifd_link: Boolean - whether this entry is recognized to be a link to subifd (can't filter these out)
//
// This function removes following from Exif:
//  - all entries where iterator returned false (except subifd links which are mandatory)
//  - IFD1 and thumbnail image (the purpose of this function is to reduce file size,
//    so thumbnail is usually the first thing to go)
//  - all other data that isn't in IFD0, SubIFD, GPSIFD, InteropIFD
//    (theoretically possible proprietary extensions, I haven't seen any of these yet)
//
// Changing data inside Exif entries is NOT supported yet (modifying `entry` object inside callback may break stuff).
//
// If Exif wasn't found anywhere (before start of the image data, SOS),
// iterator is never executed, and original JPEG is returned as is.
//
e.exports.jpeg_exif_tags_filter=function(r,a){if(!n(r))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof a)throw t("Invalid argument (on_exif_entry), Function expected","EINVAL");var o=!1;return e.exports.jpeg_segments_filter(r,function(e){if(!o&&(218/* SOS */===e.code&&(o=!0),225===e.code&&e.length>=10&&69===r[e.offset+4]&&120===r[e.offset+5]&&105===r[e.offset+6]&&102===r[e.offset+7]&&0===r[e.offset+8]&&0===r[e.offset+9])){var t=new i(r,e.offset+10,e.offset+e.length).filter(a);if(!t)return!1;var n=new Uint8Array(10);return n.set(r.slice(e.offset,e.offset+10)),n[2]=t.length+8>>>8&255,n[3]=t.length+8&255,o=!0,[n,t]}})},// Inserts a custom comment marker segment into JPEG file.
//
// Input:
//  - jpeg_bin: Uint8Array - jpeg file
//  - comment:  String
//
// Comment is inserted after first two bytes (FFD8, SOI).
//
// If JFIF (APP0) marker exists immediately after SOI (as mandated by the JFIF
// spec), we insert comment after it instead.
//
e.exports.jpeg_add_comment=function(t,r){var n=!1,i=0;return e.exports.jpeg_segments_filter(t,function(e){if((1!=++i||216/* SOI  */!==e.code)&&(2!==i||224/* APP0 */!==e.code)&&!n){r=function(e){try{return unescape(encodeURIComponent(e))}catch(t){return e}}(r);// comment segment
var a=new Uint8Array(5+r.length),o=0;return a[o++]=255,a[o++]=254,a[o++]=r.length+3>>>8&255,a[o++]=r.length+3&255,r.split("").forEach(function(e){a[o++]=255&e.charCodeAt(0)}),a[o++]=0,n=!0,[a,t.subarray(e.offset,e.offset+e.length)]}})}}(A);var c=A.exports;function u(e){return this._getUint8Array(e.blob).then(function(t){if(e.is_jpeg=c.is_jpeg(t),!e.is_jpeg)return Promise.resolve(e);e.orig_blob=e.blob;try{var r,n;if(/* eslint-disable consistent-return */c.jpeg_exif_tags_each(t,function(t){if(0===t.ifd&&274===t.tag&&Array.isArray(t.value))return e.orientation=t.value[0]||1,r=t.is_big_endian,n=t.data_offset,!1}),n){var i=new Uint8Array(r?[0,1]:[1,0]);e.blob=new Blob([t.slice(0,n),i,t.slice(n+2)],{type:"image/jpeg"})}}catch(e){}return e})}function d(e){if(!e.is_jpeg)return Promise.resolve(e);var t,r=e.orientation-1;if(!r)return Promise.resolve(e);var n=(t=4&r?this.pica.options.createCanvas(e.out_canvas.height,e.out_canvas.width):this.pica.options.createCanvas(e.out_canvas.width,e.out_canvas.height)).getContext("2d");return n.save(),1&r&&n.transform(-1,0,0,1,t.width,0),2&r&&n.transform(-1,0,0,-1,t.width,t.height),4&r&&n.transform(0,1,1,0,0,0),n.drawImage(e.out_canvas,0,0),n.restore(),// Safari 12 workaround
// https://github.com/nodeca/pica/issues/199
e.out_canvas.width=e.out_canvas.height=0,e.out_canvas=t,Promise.resolve(e)}function f(e){return e.is_jpeg?Promise.all([this._getUint8Array(e.blob),this._getUint8Array(e.out_blob)]).then(function(t){var r=t[0],n=t[1];if(!c.is_jpeg(r))return Promise.resolve(e);var i=[];return c.jpeg_segments_each(r,function(e){if(218/* SOS */===e.code)return!1;i.push(e)}),i=i.filter(function(e){return(// Drop ICC_PROFILE
//
226!==e.code&&(e.code>=224&&e.code<240||254===e.code))}).map(function(e){return r.slice(e.offset,e.offset+e.length)}),e.out_blob=new Blob([n.slice(0,2)].concat(i).concat([n.slice(20)]),{type:"image/jpeg"}),e}):Promise.resolve(e)}l.jpeg_patch_exif=u,l.jpeg_rotate_canvas=d,l.jpeg_attach_orig_segments=f,l.assign=function(e){e.before("_blob_to_image",u),e.after("_transform",d),e.after("_create_blob",f)};var h=s.exports;function g(e){if(!(this instanceof g))return new g(e);e=e||{},this.pica=e.pica||h({}),this.initialized=!1,this.utils=a}g.prototype.use=function(e/*, params, ... */){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},g.prototype.init=function(){this.use(l.assign)},g.prototype.toBlob=function(e,t){var r=a.assign({max:1/0},t);return this.initialized||(this.init(),this.initialized=!0),Promise.resolve({blob:e,opts:r}).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(this._create_blob).then(function(e){return(// Safari 12 workaround
// https://github.com/nodeca/pica/issues/199
e.out_canvas.width=e.out_canvas.height=0,e.out_blob)})},g.prototype.toCanvas=function(e,t){var r=a.assign({max:1/0},t);return this.initialized||(this.init(),this.initialized=!0),Promise.resolve({blob:e,opts:r}).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(function(e){return e.out_canvas})},g.prototype.before=function(e,t){if(!this[e])throw Error('Method "'+e+'" does not exist');if("function"!=typeof t)throw Error('Invalid argument "fn", function expected');var r=this[e],n=this;return this[e]=function(e){return t.call(n,e).then(function(e){return r.call(n,e)})},this},g.prototype.after=function(e,t){if(!this[e])throw Error('Method "'+e+'" does not exist');if("function"!=typeof t)throw Error('Invalid argument "fn", function expected');var r=this[e],n=this;return this[e]=function(e){return r.call(n,e).then(function(e){return t.call(n,e)})},this},g.prototype._blob_to_image=function(e){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;return e.image=document.createElement("img"),e.image_url=t.createObjectURL(e.blob),e.image.src=e.image_url,new Promise(function(t,r){e.image.onerror=function(){r(Error("ImageBlobReduce: failed to create Image() from blob"))},e.image.onload=function(){t(e)}})},g.prototype._calculate_size=function(e){//
// Note, if your need not "symmetric" resize logic, you MUST check
// `env.orientation` (set by plugins) and swap width/height appropriately.
//
var t=e.opts.max/Math.max(e.image.width,e.image.height);return t>1&&(t=1),e.transform_width=Math.max(Math.round(e.image.width*t),1),e.transform_height=Math.max(Math.round(e.image.height*t),1),// Info for user plugins, to check if scaling applied
e.scale_factor=t,Promise.resolve(e)},g.prototype._transform=function(e){e.out_canvas=this.pica.options.createCanvas(e.transform_width,e.transform_height),// Dim env temporary vars to prohibit use and avoid confusion when orientation
// changed. You should take real size from canvas.
e.transform_width=null,e.transform_height=null;// By default use alpha for png only
var t={alpha:"image/png"===e.blob.type};return(// Extract pica options if been passed
this.utils.assign(t,this.utils.pick_pica_resize_options(e.opts)),this.pica.resize(e.image,e.out_canvas,t).then(function(){return e}))},g.prototype._cleanup=function(e){e.image.src="",e.image=null;var t=window.URL||window.webkitURL||window.mozURL||window.msURL;return t.revokeObjectURL&&t.revokeObjectURL(e.image_url),e.image_url=null,Promise.resolve(e)},g.prototype._create_blob=function(e){return this.pica.toBlob(e.out_canvas,e.blob.type).then(function(t){return e.out_blob=t,e})},g.prototype._getUint8Array=function(e){return e.arrayBuffer?e.arrayBuffer().then(function(e){return new Uint8Array(e)}):new Promise(function(t,r){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){t(new Uint8Array(n.result))},n.onerror=function(){r(Error("ImageBlobReduce: failed to load data from input blob")),n.abort()},n.onabort=function(){r(Error("ImageBlobReduce: failed to load data from input blob (aborted)"))}})},g.pica=h;var m=g},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}]},["7h7Hl"],"7h7Hl","parcelRequire81ca")//# sourceMappingURL=reclaim.js.map
;
//# sourceMappingURL=reclaim.js.map
