!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(t,n,i,o,a){/* eslint-disable no-undef */var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof r[o]&&r[o],s=l.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(n,i){if(!s[n]){if(!t[n]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var a="function"==typeof r[o]&&r[o];if(!i&&a)return a(n,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(l)return l(n,!0);// Try the node require function if it exists.
if(d&&"string"==typeof n)return d(n);var u=Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}g.resolve=function(i){var o=t[n][1][i];return null!=o?o:i},g.cache={};var m=s[n]=new c.Module(n);t[n][0].call(m.exports,g,m,m.exports,this)}return s[n].exports;function g(t){var n=g.resolve(t);return!1===n?{}:c(n)}}c.isParcelRequire=!0,c.Module=function(t){this.id=t,this.bundle=c,this.exports={}},c.modules=t,c.cache=s,c.parent=l,c.register=function(n,i){t[n]=[function(t,n){n.exports=i},{}]},Object.defineProperty(c,"root",{get:function(){return r[o]}}),r[o]=c;for(var u=0;u<n.length;u++)c(n[u]);if(i){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var m=c(i);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=m:"function"==typeof define&&define.amd?define(function(){return m}):a&&(this[a]=m)}}({dxOtH:[function(t,n,i){var o=t("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(i),o.export(i,"loadItemCards",()=>m);var a=t("./general"),r=t("./private");async function l(t,n){console.log(`storeShippingMethod(${t}, ${n}) is running`),await db.collection("items").doc(t).update({shippingMethod:n}).then(i=>{console.log(`Shipping method '${n}' stored on item with ID: `,t),window.pickupFlowItemId=t,"Service point"==n&&(document.getElementById("feedbackFormTitle").innerHTML="Tack, d\xe5 vet vi att paketet snart l\xe4mnas till ett ombud.",document.getElementById("triggerShippingToastClose").click()),(0,r.closePickupToast)(),document.getElementById("triggerFeedbackFormOpen").click()})}function s(t,n){console.log(`openShippingToast(${t}, ${n})`),window.pickupFlowItemId=t,setTimeout(()=>{document.getElementById("servicePointButton").addEventListener("click",async()=>{await l(t,"Service point")}),document.getElementById("bookPickupButton").addEventListener("click",()=>{d(t,n)})},0),triggerShippingToastOpen.click()}function d(t,n,i="none"){console.log(`openPickupToast(${t}, ${n}) is running`),triggerShippingToastClose.click(),triggerServicePointToastClose.click(),changeToServicePointButton.addEventListener("click",async()=>{await l(t,"Service point")}),changeToServicePointButton.style.display=i,function(t){console.log(`setDatesOfPickupToast(${t}) is running`),// Hide all options first, to later determine which ones to show
radioFieldOne.style.display="none",radioFieldTwo.style.display="none",radioFieldThree.style.display="none",radioFieldFour.style.display="none";// Create the 4 first possible pickup dates, starting 4 b-days after soldDate
var n=new Date(t);n.setTime(n.getTime()+36e5),n.setDate(n.getDate()+4),6==n.getDay()||0==n.getDay()||1==n.getDay()||2==n.getDay()?n.setDate(n.getDate()+2):3==n.getDay()&&n.setDate(n.getDate()+1);var i=new Date(n);i.setDate(i.getDate()+1),6==i.getDay()&&i.setDate(i.getDate()+2);var o=new Date(i);o.setDate(o.getDate()+1),6==o.getDay()&&o.setDate(o.getDate()+2);var a=new Date(o);a.setDate(a.getDate()+1),6==a.getDay()&&a.setDate(a.getDate()+2);var r=["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],l=["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"];// Change value of radio buttons and display to user
let s=new Date,d=0;console.log("Today",s),console.log("firstDate > today",n>s),console.log("secondDate > today",i>s),console.log("thirdDate > today",o>s),console.log("forthDate > today",a>s);let c=document.getElementById("pickupDateOne"),u=document.getElementById("pickupDateTwo"),m=document.getElementById("pickupDateThree"),g=document.getElementById("pickupDateFour");// If less than two options displayed, add at least two options
if(n>s&&($("#radioButtonOne").val(n.toISOString().split("T")[0]),c.innerHTML=r[n.getDay()]+", "+n.getDate()+" "+l[n.getMonth()]+", kl 9-16",radioFieldOne.style.display="flex",d++),i>s&&($("#radioButtonTwo").val(i.toISOString().split("T")[0]),u.innerHTML=r[i.getDay()]+", "+i.getDate()+" "+l[i.getMonth()]+", kl 9-16",radioFieldTwo.style.display="flex",d++),o>s&&($("#radioButtonThree").val(o.toISOString().split("T")[0]),m.innerHTML=r[o.getDay()]+", "+o.getDate()+" "+l[o.getMonth()]+", kl 9-16",radioFieldThree.style.display="flex",d++),a>s&&($("#radioButtonFour").val(a.toISOString().split("T")[0]),g.innerHTML=r[a.getDay()]+", "+a.getDate()+" "+l[a.getMonth()]+", kl 9-16",radioFieldFour.style.display="flex",d++),d<2){radioFieldOne.style.display="none",radioFieldTwo.style.display="none",radioFieldThree.style.display="none",radioFieldFour.style.display="none";var p=new Date;p.setDate(s.getDate()+1),0==p.getDay()?p.setDate(p.getDate()+1):6==p.getDay()&&p.setDate(p.getDate()+2);var y=new Date(p);y.setDate(y.getDate()+1),6==y.getDay()&&y.setDate(y.getDate()+2),console.log("dayOne: ",p),console.log("dayTwo: ",y),// Show tomorrow as an option
$("#radioButtonOne").val(p.toISOString().split("T")[0]),c.innerHTML=r[p.getDay()]+", "+p.getDate()+" "+l[p.getMonth()]+", kl 9-16",radioFieldOne.style.display="flex",// Show day after tomorrow as an option
$("#radioButtonTwo").val(y.toISOString().split("T")[0]),u.innerHTML=r[y.getDay()]+", "+y.getDate()+" "+l[y.getMonth()]+", kl 9-16",radioFieldTwo.style.display="flex"}}(n),window.pickupFlowItemId=t,triggerPickupAnimation.click()}function c(t,n,i,o){t.checked?(db.collection("items").doc(n).update({bagReceived:!0}).then(t=>{console.log("Stored in DB that bag is received for item with ID: ",n)}),"Pickup"===o)?d(n,i,"flex"):"Service point"===o?(console.log("openServicePointToast"),changeToPickupButton.addEventListener("click",()=>{d(n,i)}),triggerServicePointToastOpen.click()):s(n,i):db.collection("items").doc(n).update({bagReceived:!1}).then(t=>{console.log("Stored in DB that bag is NOT received for item with ID: ",n)})}function u(t,n,i){let o=`<div class="w-form">
            <form method="get" name="wf-form-" id="bagReceivedForm">
                <label class="w-checkbox checkbox-field-3">
                    <div class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-2"></div>
                    <input type="checkbox" id="bagReceivedCheckbox-${t}" style="opacity:0;position:absolute;z-index:-1">
                    <span class="checkbox-label-3 w-form-label">Etiketten har kommit</span>
                </label>
            </form>
        </div>`;return o}function m(t){itemListSelling.innerHTML="",itemListSoldNotSent.innerHTML="",itemListSold.innerHTML="";var n=0;(t||[]).forEach(t=>{let i;var o=t.id,r=t.soldDate,l=t.status,m=t.shippingStatus,g=t.brand,p=t.soldPrice,y=t.sellerGets?Math.ceil(t.sellerGets):t.sellerGets,f=t.buyer?.FirstName||t.buyerFirstName,x=t.buyer?.City||t.buyerAddressCity,k=t.minPriceEstimate,v=t.maxPriceEstimate,h=t.infoRequests,b=t.pickupDate,I=t.shippingMethod,w=t.postnordQrCode,S=t.dhlLicensePlateBarcodeSrc,T=t.upsShipmentId,B=t.bagReceived,E=t.soldPlatform,L=t.archived,D=t.holidayMode,M=t.longerPeriodAcceptedDate;t.images;var C=(0,a.itemCoverImage)(t);let P="",j=t.publishedDate;if(j){j=new Date(j);let t=Math.round((M?60:30)-(new Date().getTime()-j.getTime())/864e5);P=t<=0?"0 dagar kvar":`${t} dagar kvar`}if(r){let t=new Date(r),n=new Date;t.setHours(0,0,0,0),n.setHours(0,0,0,0),i=Math.round((n-t)/864e5)}L||"Unsold"===l||function(){//Putting the items in the right list
let a=window.location.origin+`/item?id=${o}`;// WE SELL RIGHT NOW
if("Sold"!==l){let t="",n="";if("New"===l&&(h?.price?.status==="Active"?t=`<div class='text-block-34'>Inv\xe4ntar ditt svar</div>`:k&&v?(t=`<div class='text-block-34'>${k} - ${v} kr</div>`,n=`<div class='text-block-34'>F\xf6rbereds</div>`):t=`<div class='text-block-34'>V\xe4rdering p\xe5g\xe5r</div>`),"Published"===l&&k&&v){t=`<div class='text-block-34'>${k} - ${v} kr</div>`;let i=D?"Pausad":P;n=`<div class='text-block-34'>${i}</div>`}let i=`<div class="div-block-14-big"><a id="itemLinkBlock" href="${a}" class="link-block-18 w-inline-block"><div class="ratio-box _16-9"><div class="conten-block with-image"><div class="img-container" style="background-image: url('${C}');"></div></div></div><div class="text-block-14">${g}</div>${t}${n}</a></div>`;itemListSelling.innerHTML+=i,//Display list
myItemsDiv.style.display="block",//Hide empty state
noItemsDiv.style.display="none",headerSellItemButton.style.display="block",sellButtonText.innerHTML="S\xe4lj ett plagg";// SOLD - NOT SENT
}else if("Sold"!=l||"Not sent"!=m&&m){var L=`<div class="item-card-small"><div class="ratio-box _16-9"><div class="conten-block with-image"><a id="itemLinkFromSoldBeforeSection" href="${a}"><div class="img-container" style="background-image: url('${C}');"></div></a></div></div><div class="text-block-14">${p} kr</div><div class='text-block-34'>Du fick ${y} kr</div></div>`;itemListSold.innerHTML+=L,// Display list, hide empty state
soldItemsDiv.style.display="block",itemListSoldContainer.style.display="block",sellButtonText.innerHTML="S\xe4lj ett plagg",n+=y,youEarnedDiv.innerHTML=`Du har tj\xe4nat ${Math.round(n).toLocaleString("en-US").replaceAll(","," ")} kr`}else{// Prepare card
let n="Vestiaire Collective"===E&&i>7;var M="",j="";let l="",m="",g="",k=`Du f\xe5r ${y} kr${"Brand Gift Card"===t.payoutType?" i g\xe5vokort":""}`,v="",h="";if(n)M=function(t){let n=window.location.origin+`/sell-item?id=${t}`,i=`<a id="resellButton" href="${n}" class="link-block-39">
                            <div class="div-block-194">
                                            <div class="text-block-113">L\xe4gg upp p\xe5 nytt</div>
                            </div>
                    </a>`;return i}(o),k="K\xf6paren avbr\xf6t k\xf6pet",v="Skickades ej inom 7 dagar",m+=`
          <a id="removeItemButton-${o}" href="#" class="link-block-87">
              <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65269f37a18d8c128d29ed1c_trash-can%20(1).svg" class="image-154">
              <div class="text-block-373">Ta bort plagg</div>
          </a>`,setTimeout(()=>{document.getElementById(`removeItemButton-${o}`).addEventListener("click",()=>{itemMoreMenu.style.display="block",setTimeout(()=>itemMoreMenu.classList.add("sticky-bottom-show"),0),itemMoreMenu.dataset.itemId=o,itemMoreMenu.dataset.section="sold-not-sent",e.preventDefault(),e.stopPropagation()})},0);else{if(null!=f&&null!=x&&p){let n="Eytys"===t.brand&&featureIsEnabled("modelDB"),i=`S\xe5ld till ${f} i ${x}${n?"":" f\xf6r "+p+" kr"}`;if(n)v=i.trim();else{// Split sentence into two equally long rows
let t="",n=i.split(" ");n.forEach(function(n){t.trim().length>i.length/2&&!t.includes("<br>")&&(t+="<br>"),t+=n+" "}),v=t.trim()}h=n&&"Brand Gift Card"!==t.payoutType?`\xc4ndra till ${p} kr i g\xe5vokort?`:""}"Service point"===I&&(S?(M=function(t){let n=window.location.origin+`/ship-item?id=${t}`,i=`<a id="barcodeButton" href="${n}" class="link-block-39">
                            <div class="div-block-194">
                                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65418186f29682eaff3f74be_barcode-icon%20(1).svg" class="image-100">
                                            <div class="text-block-113">Visa streckkod</div>
                            </div>
                    </a>`;return i}(o),g="dhl"):"Vestiaire Collective"===E||"Grailed"===E?B||(M=u(o,r,I),T&&(g="ups"),setTimeout(()=>{document.getElementById(`bagReceivedCheckbox-${o}`).addEventListener("click",t=>{c(t.target,o,r,I)})},0)):w&&(g="postnord",M=function(t){let n=window.location.origin+`/ship-item?id=${t}`,i=`<a id="qrCodeButton" href="${n}" class="link-block-39">
                            <div class="div-block-194">
                                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63bdeaf1af902f05607f86ef_Group.svg" class="image-43">
                                            <div class="text-block-113">Visa QR</div>
                            </div>
                    </a>`;return i}(o))),"Pickup"===I&&(B?B&&!b&&(M=function(t){let n=`<a id="bookPickupButton-${t}" href="#" class="link-block-39">
                            <div class="div-block-194">
                                <div class="text-block-113">Boka h\xe4mtning</div>
                            </div>
                    </a>`;return n}(o),setTimeout(()=>{document.getElementById(`bookPickUpButton-${o}`).addEventListener("click",()=>{d(o,r)})},0)):(M=u(o,r,I),setTimeout(()=>{document.getElementById(`bagReceivedCheckbox-${o}`).addEventListener("click",t=>{c(t.target,o,r,I)})},0))),// Always show the 'shippingInfoDiv' - Styling depending on state is set in the function
j=function(t,n,i,o,a,r){let l="",s=a&&(!a||"Pickup"!=n||o)?"":'<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg" class="image-44">',d=window.location.origin+`/ship-item?id=${t}`;if("Service point"==n){let t="6297d3d527db5dd4cf02e924/6399ac2a3505ee6071fbc18a_Vector%20(1).svg";"postnord"===r&&(t="6297d3d527db5dd4cf02e924/655d182c37fc30df71b078cd_postnord-square-icon%20(1).svg"),"dhl"===r&&(t="6297d3d527db5dd4cf02e924/655d1830f259c0bc084c2937_dhl-square-icon%20(1).svg"),"ups"===r&&(t="6297d3d527db5dd4cf02e924/6603eaef0d5af57f5cce2e40_ups-squared-icon.jpg"),l+=`
                        <img src="https://global-uploads.webflow.com/${t}" class="shipper-icon">
                        <div class="next-step-text-small">L\xe4mnas till ombud</div>
                        ${s}
                    `}else if("Pickup"==n){if(o){var c=new Date(o),u=c.getDate(),m=["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"][c.getMonth()],g=["S\xf6n","M\xe5n","Tis","Ons","Tors","Fre","L\xf6r"][c.getDay()];l+=`
                                <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg" class="image-45">
                                <div class="next-step-text-small">${g+", "+u+" "+m+", kl 9-16"}</div>`}else l+=`
                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg" class="image-45">
                            <div class="next-step-text-small">Upph\xe4mtning</div>
                            ${s}
                        `}// Turn shipping info into a link to ship item page
let p=`
                        <a id="shipItemPageLink" href="${d}" class="link-block-40">
                                ${l}
                        </a>`;return p}(o,I,0,b,B,g),B&&("Service point"===I||"Pickup"===I&&b)&&(j='<div class="spacing-15-px"></div>'+j,l+=`
          <a id="changeShippingMethodA-${o}" href="#">
              <div id="changeShippingMethod-${o}" class="change-shipping-method-text">\xc4ndra frakts\xe4tt</div>
          </a>`,setTimeout(()=>{document.getElementById(`changeShippingMethodA-${o}`).addEventListener("click",()=>{s(o,r)})},0))}//Create card
var F="";F=`<div class="div-block-118"><div class="div-block-45"><div class="div-block-43"><div class="ratio-box _16-9"><div class="content-block with-image"><a id="itemLinkFromSoldNotSentSection" href="${a}"><div class="img-container" style="background-image: url('${C}');"></div></a></div></div></div><div class="div-block-46">
          <a id="youGetLink-${o}" href="#" class="you-get-link">
              <div class="text-block-43">${k}</div>
              ${"K\xf6paren avbr\xf6t k\xf6pet"!==k?'<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg" class="you-get-info-icon"></img>':""}
          </a>
          <div class="text-block-44">${v}</div>
          <div class="text-block-44" id="convertToGiftCardDiv-${o}" style="margin-top: 5px"><a style="text-decoration: underline" id="convertToGiftCard-${o}">${h}</a></div>
                      ${M}
                      ${j}
                      ${l}
                      ${m}
                  </div></div></div></div>`,setTimeout(()=>{document.getElementById(`youGetLink-${o}`).addEventListener("click",()=>{console.log(`clicked youGetLink-${o}`),function(t,n){priceAfterPlatformFee.innerHTML=t;let i=t-n;commissionAmount.innerHTML=0===i?"-":"-"+i,i/t>.9&&i/t<.11&&(commissionTitle.innerHTML="Rabatterad kommission (10%)"),i/t>.19&&i/t<.21&&(commissionTitle.innerHTML="Kommission (20%)"),i/t>.29&&i/t<.31&&50!==i&&500!==i&&(commissionTitle.innerHTML="Kommission (30%)"),i<1&&(commissionTitle.innerHTML="Fri kommission (0%)"),youGetAmount.innerHTML=n,youGetInfoBox.style.display="flex",darkOverlay.style.display="block",closeYouGetInfoBox.addEventListener("click",()=>{youGetInfoBox.style.display="none",darkOverlay.style.display="none"})}(p,y)}),document.getElementById(`convertToGiftCard-${o}`)?.addEventListener("click",()=>{let n=t?.images?.modelImage||t?.images?.enhancedFrontImageSmall||t?.images?.enhancedFrontImage||t?.images?.frontImageSmall||t?.images?.frontImage;document.getElementById("convertGiftCardInfoBox").style.display="block",document.querySelector(".window-shade").style.display="block",document.getElementById("giftCardItemImage").src=n,document.getElementById("giftCardText").innerText=`Vill du f\xe5 100% av vinsten (${p} kr) som g\xe5vokort att handla f\xf6r p\xe5 EYTYS.com ist\xe4llet?`,document.getElementById("closeGiftCardBox").addEventListener("click",()=>{document.getElementById("convertGiftCardInfoBox").style.display="none",document.querySelector(".window-shade").style.display="none"}),document.getElementById("closeGiftCardBoxButton").addEventListener("click",()=>{document.getElementById("convertGiftCardInfoBox").style.display="none",document.querySelector(".window-shade").style.display="none"}),document.getElementById("convertToGiftCardButton").addEventListener("click",async()=>{await callBackendApi(`/api/items/${o}`,{data:{payoutType:"Brand Gift Card"},method:"PUT"}),document.getElementById("convertGiftCardInfoBox").style.display="none",document.querySelector(".window-shade").style.display="none",document.querySelector(`convertToGiftCardDiv-${o}`).style.display="none"})})},0),itemListSoldNotSent.innerHTML+=F,// Display list
soldNotSentDiv.style.display="block",// Hide empty state
noItemsDiv.style.display="none",headerSellItemButton.style.display="block",sellButtonText.innerHTML="S\xe4lj ett plagg";// SOLD BEFORE
}}()}),loadingDiv.style.display="none",sectionsDiv.style.display="block",analytics.track("Element Viewed",{elementID:"sectionsDiv"}),quickInfoDiv.style.display="block"}},{"./general":"1tOWF","./private":"flS2m","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"1tOWF":[function(t,n,i){var o=t("@parcel/transformer-js/src/esmodule-helpers.js");function a(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),location.href="/"}).catch(t=>{errorHandler.report(t),console.log(t)})}function r(t){document.getElementById("addressFirstName").value=t.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=t.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=t.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=t.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=t.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=t.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=t.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function l(){let t=document.getElementById("addressFirstName").value,n=document.getElementById("addressLastName").value,i=document.getElementById("addressStreetAddress").value,o=document.getElementById("addressCO").value,a=document.getElementById("addressPostalCode").value,r=document.getElementById("addressCity").value,l=document.getElementById("addressDoorCode").value;return t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",n=n?n.trim().charAt(0).toUpperCase()+n.trim().slice(1):"",i=i?i.trim().charAt(0).toUpperCase()+i.trim().slice(1):"",o=o?o.trim():"",{addressFirstName:t,addressLastName:n,addressStreetAddress:i,addressCO:o,addressPostalCode:a=a?a.trim().replace(/\D/g,""):"",addressCity:r=r?r.trim().charAt(0).toUpperCase()+r.trim().slice(1):"",addressDoorCode:l=l?l.trim():""}}function s(t){// verify we got 10 digits, otherwise it is invalid
if(10!==(t=t.replace(/\D/g,"")// strip out all but digits
.split("")// convert string to array
.reverse()// reverse order for Luhn
.slice(0,10)).length)return!1;let n=t.map(t=>Number(t)).reduce((t,n,i)=>(i%2&&(n*=2),n>9&&(n-=9),t+n));return 0==n%10}function d(t){let n=t.replace("-","");return(12!==n.length&&("19"!==n.substring(0,2)||"20"!==n.substring(0,2))&&(n=99>=Number(n.substring(0,2))&&Number(n.substring(0,2))>25?"19"+n:"20"+n),12===n.length)?n:null}function c(t){let n=t.images;return n.modelImage?n.modelImageSmall||n.modelImage:n.coverImage?n.coverImageSmall||n.coverImage:n.enhancedFrontImage?n.enhancedFrontImageSmall||n.enhancedFrontImage:n.frontImageSmall||n.frontImage}function u(){let t=user.current.referralData.referralCode,n=`Hej! F\xf6lj min personliga l\xe4nk s\xe5 s\xe4ljer Mai ditt f\xf6rsta plagg kostnadsfritt! Mai sk\xf6ter f\xf6rs\xe4ljningen av dina kl\xe4der, inklusive v\xe4rdering, l\xe4gger ut p\xe5 flera plattformar samtidigt, har kontakten med k\xf6pare och ordnar med frakt n\xe4r det blir s\xe5lt. Man f\xe5r sj\xe4lv beh\xe5lla 80% av vinsten, och blir det inte s\xe5lt kostar det ingenting.

Om du registrerar dig med min kod (f\xf6lj l\xe4nken) och provar s\xe4lja ett plagg inom 7 dagar f\xe5r du beh\xe5lla 100% av vinsten f\xf6r det f\xf6rsta plagget (ist\xe4llet f\xf6r 80%). Min kod: ${t}`;if(navigator.share)navigator.share({text:n,url:`https://maiapp.se/?invite=${t}`}).then(()=>{console.log("Thanks for sharing!")}).catch(t=>{console.error(t),errorHandler.report(t)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let i=n+"\n"+`https://maiapp.se/?invite=${t}`;navigator.clipboard.writeText(i),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}o.defineInteropFlag(i),o.export(i,"signOut",()=>a),o.export(i,"setFormAddressFields",()=>r),o.export(i,"getFormAddressFields",()=>l),// Validate Swedish Social Security Number (personnummer) using checksum
//   Note: this is somewhat simplified because it does not take into account
//   that the date of the number is valid (e.g. "000000-0000" does return as true)
o.export(i,"isValidSwedishSsn",()=>s),o.export(i,"formatPersonalId",()=>d),o.export(i,"itemCoverImage",()=>c),o.export(i,"shareCode",()=>u)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(t,n,i){i.interopDefault=function(t){return t&&t.__esModule?t:{default:t}},i.defineInteropFlag=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.exportAll=function(t,n){return Object.keys(t).forEach(function(i){"default"===i||"__esModule"===i||n.hasOwnProperty(i)||Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[i]}})}),n},i.export=function(t,n,i){Object.defineProperty(t,n,{enumerable:!0,get:i})}},{}],flS2m:[function(t,n,i){var o,a=t("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(i),a.export(i,"updateIC",()=>d),a.export(i,"closePickupToast",()=>h);var r=t("./general"),l=t("./infoRequestsFunctions"),s=t("./loadItemCards");function d(t,n,i){let o=n,a=i;null===o&&(o=""),null===a&&(a=""),window.intercomSettings={app_id:"klyy0le5",user_id:`${t}`},db.collection("users").doc(t).get().then(n=>{if(n.exists){let r=n.data(),l="",s="";if(r.addressFirstName){let t=r.addressFirstName,n=r.addressLastName;l=t+" "+n,s=r.addressCity}r.phoneNumber&&(a=r.phoneNumber);// Update intercom
var i={mai_user_id:`${t}`,user_id:`${t}`,phone:`${a}`,email:`${o}`,name:`${l}`,city:`${s}`};Intercom("update",i)}else console.log("No such user document exist!")}).catch(t=>{errorHandler.report(t),console.log("Error getting document:",t)})}function c(t){let n,i;console.log("Prepare menu",t.signInMethod),"phone"===t.signInMethod&&t.phoneNumber?(n=t.phoneNumber,i="Inloggad med SMS-kod"):"password"===t.signInMethod&&t.email?(n=t.email,i="Inloggad med email"):"google.com"===t.signInMethod&&t.email&&(n=t.email,i="Inloggad med Google"),n&&(account.innerHTML=n,account.style.display="block",accountSignInMethod.innerHTML=i,accountSignInMethod.style.display="block"),t.addressFirstName&&t.addressLastName&&(accountName.innerHTML=t.addressFirstName+" "+t.addressLastName,accountName.style.display="block"),t?.referralData?.referralCode&&(referralCodeText.innerHTML=t.referralData.referralCode,headerInviteButton.style.display="flex",menuInviteLink.style.display="block")}t("./sellItemHelpers");let u=JSON.parse(localStorage.getItem("sessionUser"));async function m(){try{let t=await callBackendApi("/api/bags/orders/allowed",{requiresAuth:!0});t?.data?.maxOrderBags>0&&(document.getElementById("orderBagsSection").style.display="block")}catch(t){console.log(t)}}async function g(t){let n,i="",o="",a=!0,r=!1,l=!1,s=!1;// First, get items with status "Sold" and shippingStatus "Not sent"
await db.collection("items").where("user","==",t).where("status","==","Sold").orderBy("soldDate").get().then(t=>{t.forEach(t=>{t.data().status,i=t.data().shippingStatus;let n=t.data().payoutStatus;"Not sent"===i&&(l=!0),"Payed"!==n&&(r=!0)})}),// Second, check if user has no address or personal id added yet
await db.collection("users").doc(t).get().then(t=>{o=t.data().addressFirstName,n=t.data().personalId;let i=t.data()?.preferences?.shippingMethod;n?""===n&&(a=!1):a=!1,"Pickup"==i&&(s=!0)}),!0==l&&void 0==o&&s&&(location.href="/address-form"),!0==r&&!1==a&&(location.href="/personal-id-form")}async function p(){var t;if(console.log("privateMain running"),!user.current)return;d(o=authUser.current.uid,authUser.current.email||sessionStorage.getItem("email"),authUser.current.phoneNumber||sessionStorage.getItem("phoneNumber")),g(o),(t=document.getElementById("itemListSoldByOthers")).innerHTML="",// SOLD BY OTHERS QUERY + Add cards to list
db.collection("items").where("status","==","Sold").orderBy("soldDate","desc").limit(30).get().then(n=>{n.forEach(n=>{var i=n.data().user,a=n.data().brand,l=n.data().soldPrice,s=(0,r.itemCoverImage)(n.data());// Add card to list if seller is other than myself
if(i!=o&&l>=200){var d=`<div class="div-block-14"><div class="ratio-box _16-9"><div class="conten-block with-image"><div class="img-container" style="background-image: url('${s}');"></div></div></div><div class="text-block-14">${l} kr</div><div class='text-block-34'>${a}</div></div>`;t.innerHTML+=d}})}),soldByOthersDiv.style.display="block",setPreferredLogInMethodCookie(authUser.current.providerData[0].providerId);//Yearly Summary
/*
  yearlyDataExist(userId).then((result) => {
    if (result) {
      console.log('Yearly data exist!');
      document.getElementById('yearlySummaryDiv').style.display = 'block';
      document.getElementById('yearlySummaryDiv').addEventListener("click", function () {
        location.href = `/2023withmai?id=${userId.substring(0, 10)}`;
      });
    } else {
      console.log('No yearly summary exist!');
    }
  });
  */let n=(await callBackendApi("/api/items",{requiresAuth:!0}))?.data;!function(t){let n=new Date,i=10,o=0,a=user.current?.elementViews?user.current.elementViews.filter(t=>"inviteToast"===t.elementID):[],r=a.length?Array.from(a,t=>parseInt(Math.floor((n.getTime()-1e3*t.timestamp.seconds)/864e5))):[],l=r.length?Math.min(...r):null,s=!!a.length;t&&t.forEach(t=>{let a=t.soldDate,r=t.status,l=(t.shippingStatus,t.archived);if(!l&&"Sold"===r&&a&&(o++,a)){a=new Date(a);let t=Math.floor((n.getTime()-a.getTime())/864e5);t<=i&&(i=t)}}),user.current?.referralData?.referralCode&&(!s||l>45)&&(i<=7||o>=3&&i<=45)&&(referralCodeText.innerHTML=user.current.referralData.referralCode,triggerInviteToastOpen.click(),// Store elementViews to be able to not show it again
db.collection("users").doc(authUser.current.uid).update({elementViews:firebase.firestore.FieldValue.arrayUnion({elementID:"inviteToast",timestamp:new Date})}),// Track with segment
analytics.track("Element Viewed",{elementID:"inviteToast"}))}(n);let i=checkCookie("invite");i&&await connectReferralUsers(i);// Set invite code cookie
let a=checkCookie("photo_invite");a&&!localStorage.getItem("photoShootBooked")&&(photoShootOffer.style.display="block",bonusSection.style.display="block"),document.getElementById("stickyBottomClose").addEventListener("click",()=>{itemMoreMenu.classList.remove("sticky-bottom-show"),setTimeout(()=>itemMoreMenu.style.display="none",500)}),document.getElementById("stickyBottomDelete").addEventListener("click",async()=>{if(itemMoreMenu.classList.remove("sticky-bottom-show"),setTimeout(()=>itemMoreMenu.style.display="none",500),"inactive"===itemMoreMenu.dataset.section){document.getElementById(itemMoreMenu.dataset.itemId).style.display="none";let t=document.getElementById("inactiveItemList"),n=Array.from(t.children).find(t=>"none"!==t.style.display);n||(document.getElementById("inactiveItemsDiv").style.display="none"),await callBackendApi(`/api/items/unsold/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}})}if("sold-not-sent"===itemMoreMenu.dataset.section){await callBackendApi(`/api/items/unsold/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}});// hide the element from the list
let t=document.getElementById(`removeItemButton-${itemMoreMenu.dataset.itemId}`),n=t.parentElement;for(;n&&!n.classList.contains("div-block-45");)n=n.parentElement;n&&(n.style.display="none");// Also hide the full 'Sold - to be sent' list if this was the only item in it
let i=document.querySelectorAll("#itemListSoldNotSent .div-block-45"),o=Array.from(i).filter(t=>"none"!==t.style.display);0===o.length&&(document.getElementById("soldNotSentDiv").style.display="none")}else{document.getElementById(itemMoreMenu.dataset.itemId).style.display="none";let t=document.getElementById("wardrobeItemList"),n=Array.from(t.children).find(t=>"none"!==t.style.display);n||(document.getElementById("wardrobeItemsDiv").style.display="none"),await callBackendApi(`/api/items/wardrobe/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}})}}),await Promise.all([x(),m(),f()]),(0,s.loadItemCards)(n),window.location.href.endsWith("#wardrobe")&&setTimeout(()=>{document.getElementById("wardrobeItemsDiv").scrollIntoView({behavior:"smooth",block:"center"})},600),k(n),v(n),showReferralSection(),showBonusSection(),function(t){let n=getCookie("noCommissionCampaignCookie"),i=new Intl.DateTimeFormat("se-SV").format(new Date),o=t.filter(t=>t?.status!=="Draft").length;"noCommission"===n&&i>="2024-08-12"&&i<="2024-08-18"&&o<1&&("none"===bonusActivatedState.style.display||""===bonusActivatedState.style.display)&&document.getElementById("bonusSection")&&(document.getElementById("bonusName").innerHTML="KAMPANJ - T.o.m s\xf6n 18/8",document.getElementById("bonusTitle").innerHTML="S\xe4lj f\xf6rsta gratis",document.getElementById("bonusText").innerHTML="L\xe4gg upp ett plagg senast s\xf6ndag 18 augusti s\xe5 f\xe5r du beh\xe5lla 100% av vinsten f\xf6r ditt f\xf6rsta s\xe5lda plagg (ist\xe4llet f\xf6r 80%).",document.getElementById("bonusActivatedState").style.display="block",document.getElementById("enterCodeState").style.display="none",bonusSection.style.display="block")}(n),c(user.current),(0,l.loadInfoRequests)(n),user.current&&user.current.addressFirstName&&user.current.addressLastName&&!user.current?.referralData?.referralCode&&await createReferralCode()}function y(t){if(!t||["Tr\xf6ja","Blus","Topp","Skjorta","Linneskjorta","T-shirt","Kavaj","Sweatshirt","Hoodie","Polotr\xf6ja","Tunika","V\xe4st","Kofta","Linne","Tr\xe4ningstr\xf6ja","Poncho","Pik\xe9","L\xe5ng\xe4rmad T-shirt","Kostymv\xe4st","Kjol","Byxor","Jeans","Chinos","Fritidsbyxor","Tr\xe4ningsbyxor","Tights","Strumpbyxor","Mjukisbyxor","Kostymbyxor","Sarong","Kl\xe4nning","Kaftan","Kostym","Set","Jumpsuit","Baddr\xe4kt","Bikini","Pyjamas","Morgonrock","Br\xf6llopskl\xe4nning","Balkl\xe4nning","Bodysuit","Jacka","Kappa","Rock","Fritidsjacka","Trenchcoat","Skinnjacka","Regnjacka","Sneakers","Klackar","Ballerinaskor","Loafers","Boots","K\xe4ngor","Skor","Axelremsv\xe4ska","Handv\xe4ska","Kuvertv\xe4ska","Ryggs\xe4ck","Tr\xe4ningsv\xe4ska","Resv\xe4ska","Datorv\xe4ska","V\xe4ska","Solglas\xf6gon","Glas\xf6gon","\xd6rh\xe4nge","Halsband","Armband","Ring","Brosch","Keps","Sjal","Krage","B\xe4lte","Pl\xe5nbok","Hatt","Necess\xe4r","Slips","Handduk","Klocka"].includes(t))return!0;let n=new Date,i=new Date(n.getFullYear(),7,15),o=new Date(n.getFullYear(),3,15);return!!["Underst\xe4ll","Dunjacka","P\xe4lsjacka","Vinterskor","Halsduk","M\xf6ssa","Vantar"].includes(t)&&(n<=o||n>=i)||["Shorts","Sandaler","Flip-flops"].includes(t)&&n>=o&&n<=i}async function f(){let t=await callBackendApi("/api/items/unsold",{requiresAuth:!0});if(!t.data?.length)return;t.data.sort((t,n)=>{let i=y(t.category),o=y(n.category);return i&&!o?-1:o&&!i?1:t.minPriceEstimate>=100&&n.minPriceEstimate<=100?-1:t.minPriceEstimate<=100&&n.minPriceEstimate>=100?1:0});let n=document.querySelector("#inactiveItemsDiv");n.style.display="block";let i=n.querySelector("#inactiveItemCard"),o=n.querySelector("#inactiveItemList");o.innerHTML="";let a=document.querySelector("#itemMoreMenu");for(let n of t.data){let t=i.cloneNode(!0);t.id=n.id;let r=n.images?.modelImageLarge||n.images?.modelImage||n.images?.enhancedFrontImageLarge||n.images?.enhancedFrontImage||n.images?.frontImageLarge||n.images?.frontImage;t.querySelector(".img-container").style.backgroundImage=`url("${r}")`,t.querySelector(".inactive-card-brand").innerText=`${n.cleanedBrand||n.brand?.trim()}`,t.querySelector(".inactive-card-category").innerText=`${n.category||""}`,t.querySelector(".inactive-card-reason").innerText="Avslutad",y(n.category)&&(t.querySelector(".in-season-label").style.display="block",n.minPriceEstimate>100&&(t.querySelector(".restart-button").href=`/sell-item?id=${n.id}&type=${"Draft"===n.status?"draft":"resell"}`,t.querySelector(".restart-button").style.display="inline-block")),t.querySelector(".inactive-dots-button").style.display="block",t.querySelector(".inactive-dots-button").addEventListener("click",async t=>{a.style.display="block",setTimeout(()=>a.classList.add("sticky-bottom-show"),0),a.dataset.itemId=n.id,a.dataset.section="inactive",t.preventDefault(),t.stopPropagation()}),o.appendChild(t)}//Tracking
o.querySelectorAll("a").forEach(t=>t.addEventListener("click",linkClickTracker))}async function x(){let t=await callBackendApi("/api/items/wardrobe",{requiresAuth:!0});if(!t.data?.length)return;document.getElementById("wardrobeItemsDiv").style.display="block";let n=document.getElementById("wardrobeItemCard"),i=document.getElementById("wardrobeItemList");i.innerHTML="";let o=document.getElementById("itemMoreMenu");for(let a of t.data){let t=n.cloneNode(!0);t.id=a.id;let r=a.images?.modelImageLarge||a.images?.modelImage||a.images?.enhancedFrontImageLarge||a.images?.enhancedFrontImage||a.images?.frontImageLarge||a.images?.frontImage;r?(t.querySelector(".img-container").style.backgroundImage=`url("${r}")`,t.querySelector(".no-image-text").style.display="none"):t.querySelector(".img-container").style.display="none",t.addEventListener("click",()=>{location.href=`/sell-item?id=${a.id}&type=${"Draft"===a.status?"draft":"resell"}`}),t.querySelector(".resell-button").href=`/sell-item?id=${a.id}&type=${"Draft"===a.status?"draft":"resell"}`,t.querySelector(".resell-item-title").innerText=`${a.cleanedBrand||a.brand?.trim()}`,t.querySelector(".resell-subtext").innerText=`${[a.category,a.maiSize].filter(t=>t).join(", ")}`;let l=a.soldPlatform||"Mai purchase"===a.draftSource?`K\xf6pt via Mai`:"Digital receipt"===a.draftSource?"Fr\xe5n digitalt kvitto":"lwl"===a.draftSource?"Fr\xe5n LWL":"";t.querySelector(".resell-sub-subtext").innerText=l;let s=a.soldPlatform||"Mai purchase"===a.draftSource?"resellPurchaseButton":"Digital receipt"===a.draftSource?"resellDigitalReceiptButton":"lwl"===a.draftSource?"resellLwlButton":"";t.querySelector(".resell-button").id=s,t.querySelector("#wardrobeDotsButton").addEventListener("click",async t=>{o.style.display="block",setTimeout(()=>o.classList.add("sticky-bottom-show"),0),o.dataset.itemId=a.id,o.dataset.section="wardrobe",t.preventDefault(),t.stopPropagation()}),i.appendChild(t)}//Tracking
i.querySelectorAll("a").forEach(t=>t.addEventListener("click",linkClickTracker));let a=new IntersectionObserver((t,n)=>{let o=i.getBoundingClientRect(),r=o.top>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight);r&&(console.log("Wardrobe viewed"),analytics.track("Element Viewed",{elementID:"wardrobeItemsDiv"}),a.disconnect())},{threshold:1,root:null});a.observe(i)}async function k(t){if(!user)return;let n=new Date,i=0,o=0,a=user.current?.elementViews?user.current.elementViews.reverse().find(t=>"npsSurvey"===t.elementID):null,r=a?new Date(1e3*a.timestamp.seconds):null,l=r?Math.floor((n.getTime()-r.getTime())/864e5):null;t&&t.forEach(t=>{if(t.publishedDate&&!t.archived){let a=new Date(t.publishedDate),r=Math.floor((n.getTime()-a.getTime())/864e5);r>i&&(i=r),(r<o||0===o&&r>0)&&(o=r)}}),i>=25&&o<=60&&(!r||l>90)&&!document.referrer.includes("feedback-nps")&&(location.href="/feedback-nps")}async function v(t){if(t&&t.length)try{let n=[];t.forEach(t=>n.push(t.id));let i=n.slice(0,10).map(t=>`items=${t}`).join("&")+"&number=20",o=await callBackendApi(`/api/items/recommendations?${i}`,{requiresAuth:!0});if(!o.data.length)return;document.getElementById("recommendedItemsDiv").style.display="block";let a=document.getElementById("recommendedItemsList");a.innerHTML="";let r=[],l=0;for(let t of o.data){r.includes(t.maiSize)||r.push(t.maiSize);let n=t.images.modelImageLarge||t.images.modelImage||t.images.enhancedFrontImageLarge||t.images.enhancedFrontImage,i=`<div class="div-block-14-big"><a id="recommendedItemCard${l++}" href="${t.platformListings.maiShop.url}"/><div class="ratio-box _16-9"><div class="conten-block with-image">
                        <div class="img-container" style="background-image: url('${n}')"></div></div></div>
                        <div class="recently-added-text-block">
                            <div class="recent-added-items-subheader">${t.cleanedBrand}</div>
                            <div class="recent-added-items-subheader-category">${t.category}, ${t.maiSize}</div>
                            <div class="recently-added-price">${t.platformListings.maiShop.currentPrice} kr</div>
                            <div class="recently-added-brands-link-text">Mai Shop</div>
                        </div><a/></div>`;a.innerHTML+=i}a.querySelectorAll("a").forEach(t=>t.addEventListener("click",linkClickTracker)),document.getElementById("goToMaiShopLinkRecommendations").setAttribute("href",`https://shop.maiapp.se/collections/damklader/${o.data[0].sex||"Woman"}?sort_by=created-descending&filter.p.m.global.size=${r.join("&filter.p.m.global.size=")}`);let s=new IntersectionObserver((t,n)=>{let i=a.getBoundingClientRect(),o=i.top>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight);o&&(console.log("Recommendations viewed"),analytics.track("Element Viewed",{elementID:"recommendedItems"}),s.disconnect())},{threshold:1,root:null});s.observe(a)}catch(t){errorHandler.report(t),console.log("error",t)}}function h(){document.getElementById("triggerPickupToastClose").click()}function b(){document.getElementById("triggerFeedbackFormClose").click(),setTimeout(function(){location.reload()},400)}async function I(){let t="";for(var n=document.getElementsByName("Pickup"),i=0;i<n.length;i++)n[i].checked&&(t=n[i].value);// yyyy--mm-dd
db.collection("items").doc(pickupFlowItemId).update({pickupDate:t,shippingMethod:"Pickup"}).then(n=>{console.log(`pickupDate '${t}' and shippingMethod 'Pickup' is now updated on Firestore item`),h(),document.getElementById("triggerFeedbackFormOpen").click()})}async function w(t){let n=db.collection("items").doc(pickupFlowItemId);await n.update({happinessRate:t}).then(function(){console.log("happinessRate is now set on Firestore item"),happinessQuestionDiv.style.display="none",openQuestionDiv.style.display="block",feedbackSubmitButton.style.display="block"})}async function S(){let t=feedbackTextField.value,n=db.collection("items").doc(pickupFlowItemId);await n.update({feedbackText:t}).then(function(){console.log("feedbackText is now set on Firestore item"),b()})}u&&(u?.referralData?.referralCode,c(u)),checkCookie("invite"),localStorage.removeItem("latestItemCreated"),sessionStorage.removeItem("itemToBeCreatedAfterSignIn"),console.log(`user ${user.current}`),user.whenSet(p),//Disable webflow form submissions
Webflow.push(function(){$("form").submit(function(){return!1})});let T=!1;function B(){console.log("onLoadHandler running"),menuSignoutButton.addEventListener("click",r.signOut),bookPickupForm.addEventListener("submit",I),closePickupToastIcon.addEventListener("click",h),closeFeedbackFormButton.addEventListener("click",b),happySmileyButton.addEventListener("click",function(){w(3)},!1),neutralSmileyButton.addEventListener("click",function(){w(2)},!1),angrySmileyButton.addEventListener("click",function(){w(1)},!1),feedbackSubmitButton.addEventListener("click",S),saveReferralCodeButton.addEventListener("click",async function(){saveRefCodeLoadingDiv.style.display="flex",saveReferralCodeButton.style.display="none";let t=referralCodeInput.value;await connectReferralUsers(t)}),closeMeasurementsToastButton.addEventListener("click",function(){triggerMeasurementsToastClose.click()}),closeNewPriceToastButton.addEventListener("click",function(){triggerNewPriceToastClose.click()}),closeInviteToastButton.addEventListener("click",function(){triggerInviteToastClose.click()}),closeServicePointToastButton.addEventListener("click",function(){triggerServicePointToastClose.click()}),confirmServicePointButton.addEventListener("click",function(){document.getElementById("feedbackFormTitle").innerHTML="",triggerServicePointToastClose.click(),triggerFeedbackFormOpen.click()}),closeLongerPeriodToastButton.addEventListener("click",function(){triggerLongerPeriodToastClose.click()}),shareCodeButton.addEventListener("click",r.shareCode),sharePersonalLinkButton.addEventListener("click",r.shareCode),T=!0,menuButton.addEventListener("click",function(){Intercom("update",{hide_default_launcher:!0})}),closeMenuButton.addEventListener("click",function(){Intercom("update",{hide_default_launcher:!1})})}localStorage.getItem("lwlItemDrafts")&&(location.href="/lwl?createDrafts=true"),window.addEventListener("load",B),console.log(`document.readyState ${document.readyState}`),"complete"!==document.readyState||T||(console.log("Running it since event listener did not"),B()),window.addEventListener("pageshow",t=>{t.persisted?(console.log("This page was restored from the bfcache."),"none"!==menu.style.display&&(menu.style.display="none")):console.log("This page was loaded normally.")}),window.intercomSettings={app_id:"klyy0le5"},function(){var t=window,n=t.Intercom;if("function"==typeof n)n("reattach_activator"),n("update",t.intercomSettings);else{var i=document,o=function(){o.c(arguments)};o.q=[],o.c=function(t){o.q.push(t)},t.Intercom=o;var a=function(){var t=i.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/klyy0le5";var n=i.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)};t.attachEvent?t.attachEvent("onload",a):t.addEventListener("load",a,!1)}}()},{"./general":"1tOWF","./infoRequestsFunctions":"21npA","./loadItemCards":"dxOtH","./sellItemHelpers":"2G59s","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"21npA":[function(t,n,i){var o=t("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(i),o.export(i,"loadInfoRequests",()=>c);var a=t("./general");async function r(t,n){measurementDescriptionText.innerHTML=n,measurementsSubmitButton.addEventListener("click",async function(){let n=measurementsInput.value;n.length>0&&" "!==n&&await db.collection("items").doc(t).update({measurements:n,"infoRequests.measurements.status":"Resolved"}),triggerMeasurementsToastClose.click(),setTimeout(function(){location.reload()},400)}),triggerMeasurementsToastOpen.click()}async function l(t,n,i,o){if(!t)return;console.log("is this happening?");let a=10*Math.ceil(.7*i/10),r=10*Math.ceil(.8*i/10);priceAfterDiscount30.innerHTML=`(Priset blir ${a} kr)`,priceAfterDiscount20.innerHTML=`(Priset blir ${r} kr)`,priceNoDiscount.innerHTML=`(${i} kr)`,i>=140&&!o?(longerPeriodDescriptionText.innerHTML=`S\xe4ljperioden f\xf6r ditt ${n}-plagg har n\xe5tt sitt slut. V\xe4lj om du vill f\xf6rl\xe4nga s\xe4ljperioden med ytterligare 30 dagar och om du vill s\xe4nka priset f\xf6r att \xf6ka chansen att f\xe5 det s\xe5lt.`,discountFormDiv.style.display="block"):(longerPeriodDescriptionText.innerHTML=`S\xe4ljperioden f\xf6r ditt ${n}-plagg har n\xe5tt sitt slut. Vill du f\xf6rl\xe4nga s\xe4ljperioden med ytterligare 30 dagar eller avsluta f\xf6rs\xe4ljningen?`,discountFormDiv.style.display="none"),// Accept longer selling window and store chosen discount
longerPeriodAcceptButton.addEventListener("click",async function(){let n=new Date,o=n.toISOString().split("T")[0],l=i,s=0;for(var d=document.getElementsByName("Discount"),c=0;c<d.length;c++)if(d[c].checked){let t=d[c].value;"30"===t&&(l=a,s=30),"20"===t&&(l=r,s=20)}await db.collection("items").doc(t).update({longerPeriodAcceptedDate:o,"infoRequests.longerPeriod.status":"Resolved","infoRequests.longerPeriod.response":"Accepted",longerPeriodAcceptedDiscount:s,minPriceEstimate:l}),triggerLongerPeriodToastClose.click(),setTimeout(function(){location.reload()},300)}),// Decline longer selling period and quit sales
longerPeriodDenyButton.addEventListener("click",async function(){await db.collection("items").doc(t).update({"infoRequests.longerPeriod.status":"Resolved","infoRequests.longerPeriod.response":"Denied",status:"Unsold"// This field is normally mastered by AT - I do this for the user to see the effect immediately (the card is removed)
}),triggerLongerPeriodToastClose.click(),setTimeout(function(){location.reload()},300)}),triggerLongerPeriodToastOpen.click()}async function s(t,n,i,o,a){// Deny price
if(console.log("storePriceResponse",t,n,i,o),"Accepted"===o&&await db.collection("items").doc(t).update({"infoRequests.price.status":"Resolved","infoRequests.price.response":"Accepted",maxPriceEstimate:n,minPriceEstimate:i}).then(function(){triggerNewPriceToastClose.click(),setTimeout(function(){location.reload()},300)}),"Denied"===o){let n={"infoRequests.price.status":"Resolved","infoRequests.price.response":"Denied"};"New"===a&&(n.archived=!0,n.willNotSell=!0),await db.collection("items").doc(t).update(n).then(function(){triggerNewPriceToastClose.click(),setTimeout(function(){location.reload()},300)})}}async function d(t,n,i,o,a,r,l,d,c,u){console.log("openNewPriceToast",t,n,i,o,a,r,l,d,c,u),previousMinPrice.style.display="none",previousMaxPrice.style.display="none",maxPriceDiv.style.display="block",minPriceDiv.style.display="block",// Set content of toast
newPriceToastTitle.innerHTML="Nytt l\xe4gsta pris",newPriceHeading.innerHTML=`${a}-plagg`;let m=l.toLowerCase();m&&"null"!==m&&(newPriceHeading.innerHTML=`${a}-${m}`),maxPrice.innerHTML=i,minPrice.innerHTML=o,c&&"null"!==c&&""!==c&&"undefined"!==c&&i!==c&&(previousMaxPrice.innerHTML=c,previousMaxPrice.style.display="block"),u&&"null"!==u&&""!==u&&"undefined"!==u&&o!==u&&(previousMinPrice.innerHTML=u,previousMinPrice.style.display="block"),acceptNewPriceButton.innerHTML="S\xe4lj med nytt pris",denyNewPriceButton.innerHTML="S\xe4nk ej","New"===n&&"Valuation"===d&&(newPriceToastTitle.innerHTML="V\xe4rdering",acceptNewPriceButton.innerHTML="S\xe4lj till v\xe4rdering",denyNewPriceButton.innerHTML="Avb\xf6j och avsluta"),"Adjusted ML Valuation"===d&&(newPriceToastTitle.innerHTML="Nytt prisintervall"),"Valuation"!==d&&"Adjusted ML Valuation"!==d&&(minPrice.innerHTML=`${o} kr`,maxPriceDiv.style.display="none"),r&&"undefined"!==r&&""!==r&&"null"!==r&&(newPriceText.innerHTML=r,descriptionDiv.style.display="block"),acceptNewPriceButton.addEventListener("click",()=>{s(t,i,o,"Accepted",n)}),denyNewPriceButton.addEventListener("click",()=>{s(t,i,o,"Denied",n)}),// Open toast
triggerNewPriceToastOpen.click()}function c(t){let n=document.getElementById("infoRequestMeasurementsTemplate").cloneNode(!0),i=document.getElementById("infoRequestLongerPeriodTemplate").cloneNode(!0),o=document.getElementById("infoRequestImagesTemplate").cloneNode(!0),s=document.getElementById("infoRequestValuationTemplate").cloneNode(!0),c=document.getElementById("infoRequestsList");c.replaceChildren(),(t||[]).forEach(t=>{let u=t.id,m=t.infoRequests,g=t.status,p=t.brand.replace(/'/g,""),y=t.minPriceEstimate,f=t.maxPriceEstimate,x=t?.infoRequests?.price?.response==="Denied",k=t.archived,v=t.category,h=(0,a.itemCoverImage)(t);void 0==k&&"Unsold"!==g&&"Sold"!==g&&m&&function(){for(let t in m)if(m[t]?.status==="Active"){let a=m[t].description;// PRICE REQUEST
if(a&&(a=a.replace(/'/g,"")),"price"===t){let n=m[t].type,i=s.cloneNode(!0);i.id=`infoRequestPrice-${u}`,i.querySelector(".img-container").style.backgroundImage=`url('${h}')`,i.querySelector("a .pricebuttontext").innerText="Se prisf\xf6rslag",i.querySelector(".text-block-72").innerText="Vill du s\xe4nka priset och f\xe5 det s\xe5lt?",c.appendChild(i),"New"===g&&"Adjusted ML Valuation"!==n?(i.querySelector("a .pricebuttontext").innerText="Se v\xe4rdering",i.querySelector(".text-block-72").innerText="Vill du s\xe4lja till v\xe5r v\xe4rdering?",i.querySelector("a").href=`/item-valuation?id=${u}`):setTimeout(()=>{let i=m[t].maxPrice,o=m[t].minPrice;document.querySelector(`#infoRequestPrice-${u} a`).addEventListener("click",async()=>{await d(u,g,i,o,p,a,v,n,f,y)})},0)}// MEASUREMENTS REQUEST
if("measurements"===t){let t=n.cloneNode(!0);t.id=`infoRequestMeasurements-${u}`,t.querySelector(".img-container").style.backgroundImage=`url('${h}')`,c.appendChild(t),setTimeout(()=>{document.querySelector(`#infoRequestMeasurements-${u} a`).addEventListener("click",async()=>{await r(u,a)})},0)}// IMAGES REQUEST
if("images"===t){let t=o.cloneNode(!0);t.id=`infoRequestImages-${u}`,t.querySelector(".img-container").style.backgroundImage=`url('${h}')`,t.querySelector("a").href=`/edit-item?id=${u}`,c.appendChild(t)}// LONGER PERIOD REQUEST
if("longerPeriod"===t){let t=i.cloneNode(!0);t.id=`infoRequestLongerPeriod-${u}`,t.querySelector(".img-container").style.backgroundImage=`url('${h}')`,c.appendChild(t),setTimeout(()=>{document.querySelector(`#infoRequestLongerPeriod-${u} a`).addEventListener("click",async()=>{await l(u,p,y,x)})},0)}infoRequestsDiv.style.display="block"}}()});/*
    db.collection("items").where("user", "==", userId).get().then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
            const itemId = doc.id;
            const item = doc.data();
            const infoRequests = item.infoRequests;
            const status = item.status;
            const brand = item.brand.replace(/'/g, '');
            const currentMinPrice = item.minPriceEstimate;
            const currentMaxPrice = item.maxPriceEstimate;
            const deniedBefore = item?.infoRequests?.price?.response === "Denied" ? true : false;
            const archived = item.archived;
            const category = item.category;
            const frontImageUrl = itemCoverImage(item);
            if (archived == undefined && status !== "Unsold" && status !== "Sold" && infoRequests) {
                displayRequests();
            }

            function displayRequests() {
                for (const req in infoRequests) {
                    if (infoRequests[req]?.status === "Active") {
                        let description = infoRequests[req].description;
                        
                        if (description) { description = description.replace(/'/g, ''); }
                        // PRICE REQUEST
                        if (req === "price") {
                            const type = infoRequests[req].type;
                            const newRequest = valuationClone.cloneNode(true);
                            newRequest.id = `infoRequestPrice-${itemId}`;
                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;
                            newRequest.querySelector('a .pricebuttontext').innerText = 'Se prisförslag';
                            newRequest.querySelector('.text-block-72').innerText = "Vill du sänka priset och få det sålt?";
                            infoRequestsList.appendChild(newRequest);
                            if (status === "New" && type !== 'Adjusted ML Valuation') {
                                newRequest.querySelector('a .pricebuttontext').innerText = 'Se värdering';
                                newRequest.querySelector('.text-block-72').innerText = 'Vill du sälja till vår värdering?'
                                newRequest.querySelector('a').href = `/item-valuation?id=${itemId}`;
                            } else {
                                setTimeout(() => {
                                    const max = infoRequests[req].maxPrice;
                                    const min = infoRequests[req].minPrice;
                                    document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener('click', async () => {
                                        await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);
                                    })
                                }, 0);
                            }
                        }
                        // MEASUREMENTS REQUEST
                        if (req === "measurements") {
                            const newRequest = measurementsClone.cloneNode(true);
                            newRequest.id = `infoRequestMeasurements-${itemId}`;
                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;
                            infoRequestsList.appendChild(newRequest);
                            setTimeout(() => {
                              document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener('click', async () => {
                                await openMeasurementsToast(itemId, description);
                              })
                            }, 0);
                        }
                        // IMAGES REQUEST
                        if (req === "images") {
                            const newRequest = updateImagesClone.cloneNode(true);
                            newRequest.id = `infoRequestImages-${itemId}`;
                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;
                            newRequest.querySelector('a').href = `/edit-item?id=${itemId}`;
                            infoRequestsList.appendChild(newRequest);
                        }
                        // LONGER PERIOD REQUEST
                        if (req === "longerPeriod") {
                            const newRequest = longerPeriodClone.cloneNode(true);
                            newRequest.id = `infoRequestLongerPeriod-${itemId}`;
                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;
                            infoRequestsList.appendChild(newRequest);
                            setTimeout(() => {
                              document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener('click', async () => {
                                await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);
                              })
                            }, 0);
                        }
                        infoRequestsDiv.style.display = "block";
                    }
                }
            }
        });
    });
*/}},{"./general":"1tOWF","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"2G59s":[function(t,n,i){var o=t("@parcel/transformer-js/src/esmodule-helpers.js");async function a(t,n){sessionStorage.getItem("newItemId")||sessionStorage.setItem("newItemId",await l());let i=sessionStorage.getItem("newItemId"),o=await r(t);if(!o)throw"Fel vid bearbetning av vald bild.";let a=new FormData;a.append("itemId",i),a.append("fileName",n),a.append("file",o),a.append("temporary","true"),a.append("generateSmallImage","true");let s=await fetch(`${BACKEND_API_URL}/api/items/${i}/uploadImage`,{method:"POST",body:a});return await s.json()}async function r(t){return t.size<9437184?Promise.resolve(t):new Promise((n,i)=>{let o=new FileReader;o.onload=()=>{let t=document.createElement("img");t.onload=()=>{let i=t.width,o=t.height;i>o?i>1512&&(o*=1512/i,i=1512):o>2016&&(i*=2016/o,o=2016);let a=document.createElement("canvas");a.width=i,a.height=o;let r=a.getContext("2d");r.imageSmoothingQuality="high",r.drawImage(t,0,0,i,o),a.toBlob(n,"image/jpeg")},t.src=o.result,o.onerror=i},o.readAsDataURL(t)})}async function l(){try{let t=await callBackendApi("/api/id",{method:"POST",requiresAuth:!1});return t.data.id}catch(t){return console.error(`Failed to fetch unique ID, generating uuidv4 id: ${t.message}`,t),uuidv4()}}async function s(t,n=!0){let i=await d(t);return i?.url&&(n&&u("enhancedFrontImage",i.url,i.urlSmall),m("frontImage",window.innerWidth<=370?i.urlSmall:i.url)),c("frontImage"),i}async function d(t){try{let n=await callBackendApi("/api/images/enhance",{data:{imageUrl:t},requiresAuth:!1});return sessionStorage.setItem("enhancedFrontImage",n.data.url),n.data}catch(t){return errorHandler.report(t),console.error(t),""}}function c(t){document.getElementById(`loading${g(t)}Icon`).style.display="none",document.getElementById(`delete${g(t)}Icon`).style.display="inline-block","frontImage"===t&&(document.getElementById("enhancedAnimationDiv").style.display="none")}function u(t,n,i){let o=JSON.parse(localStorage.getItem("newItem")||JSON.stringify({})),a=o.images||{};a[t]=n,a[`${t}Small`]=i,o.images=a,localStorage.setItem("newItem",JSON.stringify(o))}function m(t,n){document.getElementById(`${t}Preview`).style.backgroundImage=`url('${n}')`,c(t)}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}async function p(t,n,i=!0){try{!function(t){let n=document.getElementById(t).parentNode.parentNode;n.querySelector(".w-file-upload-error").style.display="none"}(n);let o=URL.createObjectURL(t);document.getElementById(`${n}PreviewUploading`).style.backgroundImage=`url('${o}')`,document.getElementById(`${n}Preview`).style.backgroundImage=`url('${o}')`,x(n),f(n,"success-state");let{url:r,urlSmall:l}=await a(t,n);return i&&u(n,r,l),r}catch(i){console.error("Failed to upload image",i),errorHandler.report(i),document.getElementById(`${n}PreviewUploading`).style.backgroundImage="",document.getElementById(`${n}Preview`).style.backgroundImage="",document.getElementById(`loading${g(n)}Icon`).style.display="none",f(n,"default-state"),t.size>10485760?y(n,"Error: Bilden \xe4r f\xf6r stor. Max 10 MB."):y(n,"Error: N\xe5got gick fel vid uppladdning, f\xf6rs\xf6k igen eller kontakt oss om felet kvarst\xe5r."),document.getElementById(n).value=""}}function y(t,n){let i=document.getElementById(t).parentNode.parentNode;i.querySelector(".w-file-upload-error").style.display="block",i.querySelector(".w-file-upload-error-msg").innerText=n}function f(t,n){let i=document.getElementById(t).parentNode.parentNode.childNodes;for(let t=0;t<i.length;t++)i[t].className.includes(n)?i[t].style.display="block":i[t].style.display="none"}function x(t){if("frontImage"===t){document.getElementById(`delete${g(t)}Icon`).style.display="none",document.getElementById(`loading${g(t)}Icon`).style.display="none",localStorage.getItem("sessionUser")||(document.getElementById("photoroomDiv").style.display="flex"),document.getElementById("enhancedAnimationDiv").style.display="block",triggerEnhancingAnimation.click();return}document.getElementById(`loading${g(t)}Icon`).style.display="inline-block",document.getElementById(`delete${g(t)}Icon`).style.display="none"}function k(t,n){let i=["shein","lager 157","divided","brandy melville","cubus","bubbleroom","bondelid","nelly","dobber","\xe5hl\xe9ns","kappahl","primark","jack & jones","sisters point","missguided","topman","bik bok","cubus","happy holly","zign","glamorous","hollister","river island","light before dark","bohoo","crocker","forever 21","maze","mint&berry","chiara forthi","zalando","din sko","pull & bear","svea","zoul","boohoo","gap","topshop","ellos","lager 157","stradivarius","studio total","indiska","bershka","shein","riley","vero moda","vila","don donna","aldo","new look denim"],o=document.getElementById("hardToSellDiv");document.getElementById("itemBrand").setCustomValidity("");let a=getParamsObject();return!a.id&&(i.includes(t.toLowerCase())||!["boots","dunjacka","jacka","k\xe4ngor","kappa","kavaj","kostym","p\xe4lsjacka","regnjacka","rock","skinnjacka","vinterskor"].includes(n?.toLowerCase())&&["tom tailor","monki","dressmann","urban outfitters","asos","holly & white","only","gina tricot"].includes(t.toLowerCase())||["baddr\xe4kt","bikini","bodysuit","chinos","flip-flops","halsduk","handduk","hatt","jeans","keps","l\xe5ng\xe4rmad t-shirt","linne","mjukisbyxor","morgonrock","m\xf6ssa","necess\xe4r","pik\xe9","pyjamas","sandaler","sarong","shorts","slips","sport-bh","strumpbyxor","t-shirt","tights","topp","tr\xe4ningsbyxor","tr\xe4ningstr\xf6ja","underst\xe4ll","vantar"].includes(n?.toLowerCase())&&["karl kani","rieker","uniqlo","carin wester","stockh lm","weekday","mango","wera","ichi","lindex","h&m","zara","mng","mq","cheap monday","h&m premium","na-kd","clarks","gant","hackett","hugo boss","la chemise","lacoste","lyle & scott","marc o'polo","melvin & hamilton","ray-ban","reebok","sebago","stenstr\xf6ms","the shirt factory","hampton republic","quicksilver","banana republic","pieces","sprit","denim","east west","xit","jacqueline de yong","mexx","fb sister","ok\xe4nt","bodyflirt","dorothy perkins","fransa","laurel","rut&circle","soc","junkyard","soyaconcept","amisu","u.s. polo assn.","line of oslo","gossip","i say","jascha stockholm","noisy may","six ames","velour by nostalgi","house of lola","fiveunits","miss me","flash","champion","under armour","oasis","fornarina","isolde","rosebud","chiquelle","kaffe","mckinley","cream","abercrombie & fitch","modstr\xf6m","ecco","esprit","alice bizous","craft","ellesse","wesc","dry lake","r\xf6hnisch","acqua limone","anna field","le","ax paris","burton","hansen & jacob","lou in love","mad lady","selected homme","tenson","whistles","zizzi","gerry weber"].includes(t.toLowerCase()))?(hardToSellText.innerHTML=i.includes(t.toLowerCase())?`Vi s\xe4ljer tyv\xe4rr inte ${t}-plagg p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`:`Vi s\xe4ljer tyv\xe4rr inte kategorin ${n} fr\xe5n ${t} p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`,stopIcon.style.display="flex",warningIcon.style.display="none",o.style.display="block",document.getElementById("itemBrand").setCustomValidity(i.includes(t.toLowerCase())?`Vi s\xe4ljer inte plagg fr\xe5n ${t}`:`Vi s\xe4ljer inte kategorin '${n}' fr\xe5n ${t}`),!0):["H&M","HM","Zara","ASOS","Nelly","Gina Tricot","BikBok","Bik Bok","Lindex","Kappahl","Cubus","NA-KD","NAKD","Mango","Ellos","Primark","Shein","Vila","Forever 21","Pull & Bear","Bershka","Stradivarius"].some(n=>t.toLowerCase().includes(n.toLowerCase()))?(hardToSellText.innerHTML=`Vi s\xe4ljer i regel inte ${t}-plagg p\xe5 grund av f\xf6r l\xe5gt andrahandsv\xe4rde. Undantag kan finnas.`,stopIcon.style.display="none",warningIcon.style.display="block",o.style.display="block",!0):void(o.style.display="none")}function v(t="Kategori",n=k){$("#itemCategory").select2({selectionCssClass:"form-field",placeholder:t||"Kategori",data:[{id:"",text:""},{text:"\xd6verdelar",children:[{id:"Tr\xf6ja",text:"Tr\xf6ja"},{id:"Blus",text:"Blus"},{id:"Topp",text:"Topp"},{id:"Skjorta",text:"Skjorta"},{id:"Linneskjorta",text:"Linneskjorta"},{id:"T-shirt",text:"T-shirt"},{id:"Kavaj",text:"Kavaj"},{id:"Sweatshirt",text:"Sweatshirt"},{id:"Hoodie",text:"Hoodie"},{id:"Polotr\xf6ja",text:"Polotr\xf6ja"},{id:"Tunika",text:"Tunika"},{id:"V\xe4st",text:"V\xe4st"},{id:"Kofta",text:"Kofta"},{id:"Linne",text:"Linne"},{id:"Tr\xe4ningstr\xf6ja",text:"Tr\xe4ningstr\xf6ja"},{id:"Poncho",text:"Poncho"},{id:"Pik\xe9",text:"Pik\xe9"},{id:"L\xe5ng\xe4rmad T-shirt",text:"L\xe5ng\xe4rmad T-shirt"},{id:"Kostymv\xe4st",text:"Kostymv\xe4st"}]},{text:"Underdelar",children:[{id:"Kjol",text:"Kjol"},{id:"Byxor",text:"Byxor"},{id:"Jeans",text:"Jeans"},{id:"Chinos",text:"Chinos"},{id:"Fritidsbyxor",text:"Fritidsbyxor"},{id:"Tr\xe4ningsbyxor",text:"Tr\xe4ningsbyxor"},{id:"Tights",text:"Tights"},{id:"Strumpbyxor",text:"Strumpbyxor"},{id:"Mjukisbyxor",text:"Mjukisbyxor"},{id:"Kostymbyxor",text:"Kostymbyxor"},{id:"Shorts",text:"Shorts"},{id:"Sarong",text:"Sarong"}]},{text:"Helkropp",children:[{id:"Kl\xe4nning",text:"Kl\xe4nning"},{id:"Kaftan",text:"Kaftan"},{id:"Kostym",text:"Kostym"},{id:"Set",text:"Set"},{id:"Jumpsuit",text:"Jumpsuit"},{id:"Baddr\xe4kt",text:"Baddr\xe4kt"},{id:"Bikini",text:"Bikini"},{id:"Pyjamas",text:"Pyjamas"},{id:"Morgonrock",text:"Morgonrock"},{id:"Br\xf6llopskl\xe4nning",text:"Br\xf6llopskl\xe4nning"},{id:"Balkl\xe4nning",text:"Balkl\xe4nning"},{id:"Bodysuit",text:"Bodysuit"},{id:"Underst\xe4ll",text:"Underst\xe4ll"}]},{text:"Ytterkl\xe4der",children:[{id:"Jacka",text:"Jacka"},{id:"Kappa",text:"Kappa"},{id:"Rock",text:"Rock"},{id:"Fritidsjacka",text:"Fritidsjacka"},{id:"Trenchcoat",text:"Trenchcoat"},{id:"Skinnjacka",text:"Skinnjacka"},{id:"Dunjacka",text:"Dunjacka"},{id:"Regnjacka",text:"Regnjacka"},{id:"P\xe4lsjacka",text:"P\xe4lsjacka"}]},{text:"Skor",children:[{id:"Sneakers",text:"Sneakers"},{id:"Sandaler",text:"Sandaler"},{id:"Klackar",text:"Klackar"},{id:"Ballerinaskor",text:"Ballerinaskor"},{id:"Loafers",text:"Loafers"},{id:"Flip-flops",text:"Flip-flops"},{id:"Boots",text:"Boots"},{id:"K\xe4ngor",text:"K\xe4ngor"},{id:"Vinterskor",text:"Vinterskor"},{id:"Skor",text:"Annat (Skor)"}]},{text:"V\xe4skor",children:[{id:"Axelremsv\xe4ska",text:"Axelremsv\xe4ska"},{id:"Handv\xe4ska",text:"Handv\xe4ska"},{id:"Kuvertv\xe4ska",text:"Kuvertv\xe4ska"},{id:"Ryggs\xe4ck",text:"Ryggs\xe4ck"},{id:"Tr\xe4ningsv\xe4ska",text:"Tr\xe4ningsv\xe4ska"},{id:"Resv\xe4ska",text:"Resv\xe4ska"},{id:"Datorv\xe4ska",text:"Datorv\xe4ska"},{id:"V\xe4ska",text:"Annat (V\xe4ska)"}]},{text:"Accessoarer",children:[{id:"Solglas\xf6gon",text:"Solglas\xf6gon"},{id:"Glas\xf6gon",text:"Glas\xf6gon"},{id:"\xd6rh\xe4nge",text:"\xd6rh\xe4nge"},{id:"Halsband",text:"Halsband"},{id:"Armband",text:"Armband"},{id:"Ring",text:"Ring"},{id:"Brosch",text:"Brosch"},{id:"Keps",text:"Keps"},{id:"Sjal",text:"Sjal"},{id:"Krage",text:"Krage"},{id:"B\xe4lte",text:"B\xe4lte"},{id:"Pl\xe5nbok",text:"Pl\xe5nbok"},{id:"Halsduk",text:"Halsduk"},{id:"Hatt",text:"Hatt"},{id:"M\xf6ssa",text:"M\xf6ssa"},{id:"Vantar",text:"Vantar"},{id:"Necess\xe4r",text:"Necess\xe4r"},{id:"Slips",text:"Slips"},{id:"Handduk",text:"Handduk"},{id:"Klocka",text:"Klocka"}]}]}),$("body").on("click",".select2-container--open .select2-results__group",function(){$(this).parent().attr("class").match(/expanded-group/)?$(this).parent().removeClass("expanded-group"):($(".expanded-group").first().removeClass("expanded-group"),$(this).parent().addClass("expanded-group"))});let i=!1;$("#itemCategory").on("select2:select",()=>{analytics.track("Click",{elementID:"itemCategoryValue"}),document.querySelector("#itemCategory").dispatchEvent(new Event("change"))});let o=!1;$("#itemCategory").on("select2:open",()=>{o||(o=!0,$("input.select2-search__field").on("click",()=>{analytics.track("Click",{elementID:"itemCategorySearch"})}))}),$("#itemCategory").on("select2:close",()=>{document.querySelector("body").style.overflow="auto",document.querySelector("body").style.position="static",document.querySelector("html").style.overflow="static"}),$("#itemCategory").on("select2:open",function(){analytics.track("Element Viewed",{elementID:"itemCategoryContainer"}),document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.position="fixed",document.querySelector("html").style.overflow="fixed";let t=document.querySelector(".select2-search__field");if(t.placeholder="S\xf6k... (t.ex. Kl\xe4nning/Sneakers/Blus)",$(".select2-search__field").on("input",t=>{t.target.value.length>0?$(".select2-results__option[role=group]").each((t,n)=>$(n).addClass("expanded-group")):$(".expanded-group").each((t,n)=>$(n).removeClass("expanded-group"))}),!i){let t=document.getElementById("categoryPopUpHeader"),n=document.querySelector(".select2-dropdown");n.insertBefore(t,n.firstChild),t.style.display="block",t.querySelector("#categorySelectClose").onclick=()=>$("#itemCategory").select2("close"),i=!0}document.querySelector(".select2-results__options").addEventListener("scroll",()=>document.activeElement.blur())}),$("#itemCategory").on("change",t=>{h("itemCategoryLabel")(t);let i=document.getElementById("itemCategory"),o=document.getElementById("itemBrand");n(o.value,i.value)}),// From https://github.com/select2/select2/issues/3015#issuecomment-570171720
$("#itemCategory").on("select2:open",function(){$(".select2-results").css("visibility","hidden")}),$("#itemCategory").on("select2:opening",function(){setTimeout(function(){$(".select2-results").css("visibility","visible")},50)})}function h(t){return n=>{document.getElementById(t).style.display=n.target.value.length>0?"inline-block":"none"}}function b(t){return({Beige:"Beige",Blue:"Bl\xe5",Brown:"Brun",Green:"Gr\xf6n",Grey:"Gr\xe5",Yellow:"Gul",Gold:"Guld",Purple:"Lila",Navy:"Navy",Orange:"Orange",Pink:"Rosa",Red:"R\xf6d",Silver:"Silver",Black:"Svart",Turquoise:"Turkos",Burgundy:"Vinr\xf6d",White:"Vit",Multicolour:"Flerf\xe4rgad"})[t]||t}o.defineInteropFlag(i),o.export(i,"uploadTempImage",()=>a),o.export(i,"requestUniqueId",()=>l),o.export(i,"enhanceFrontImage",()=>s),o.export(i,"showDeleteImageIcon",()=>c),o.export(i,"rememberNewItemImageField",()=>u),o.export(i,"showImagePreview",()=>m),o.export(i,"capitalizeFirstLetter",()=>g),o.export(i,"uploadImageAndShowPreview",()=>p),o.export(i,"showImageState",()=>f),o.export(i,"showLoadingIcon",()=>x),o.export(i,"checkBlockedOrLowShareSoldBrand",()=>k),o.export(i,"initializeCategorySelect",()=>v),o.export(i,"fieldLabelToggle",()=>h),o.export(i,"colorName",()=>b)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}]},["dxOtH"],"dxOtH","parcelRequire81ca")//# sourceMappingURL=loadItemCards.js.map
;
//# sourceMappingURL=loadItemCards.js.map
