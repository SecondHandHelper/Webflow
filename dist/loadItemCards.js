!function(e,t,n,i,o,r,a){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof l[i]&&l[i],d=s.i||{},c=s.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function m(t,n){if(!c[t]){if(!e[t]){var o="function"==typeof l[i]&&l[i];if(!n&&o)return o(t,!0);if(s)return s(t,!0);if(u&&"string"==typeof t)return u(t);var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}d.resolve=function(n){var i=e[t][1][n];return null!=i?i:n},d.cache={};var a=c[t]=new m.Module(t);e[t][0].call(a.exports,d,a,a.exports,l)}return c[t].exports;function d(e){var t=d.resolve(e);return!1===t?{}:m(t)}}m.isParcelRequire=!0,m.Module=function(e){this.id=e,this.bundle=m,this.require=u,this.exports={}},m.modules=e,m.cache=c,m.parent=s,m.distDir=void 0,m.publicUrl=void 0,m.devServer=void 0,m.i=d,m.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(m,"root",{get:function(){return l[i]}}),l[i]=m;for(var g=0;g<t.length;g++)m(t[g]);if(n){var p=m(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({dxOtH:[function(e,t,n,i){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(n),o.export(n,"loadItemCards",()=>u);var r=e("./general"),a=e("./private");async function l(e,t){console.log(`storeShippingMethod(${e}, ${t}) is running`),await db.collection("items").doc(e).update({shippingMethod:t}).then(n=>{console.log(`Shipping method '${t}' stored on item with ID: `,e),window.pickupFlowItemId=e,"Service point"==t&&(document.getElementById("feedbackFormTitle").innerHTML="Tack, då vet vi att paketet snart lämnas till ett ombud.",document.getElementById("triggerShippingToastClose").click()),(0,a.closePickupToast)(),document.getElementById("triggerFeedbackFormOpen").click()})}function s(e,t){console.log(`openShippingToast(${e}, ${t})`),window.pickupFlowItemId=e,setTimeout(()=>{document.getElementById("servicePointButton").addEventListener("click",async()=>{await l(e,"Service point")}),document.getElementById("bookPickupButton").addEventListener("click",()=>{d(e,t)})},0),triggerShippingToastOpen.click()}function d(e,t,n="none"){console.log(`openPickupToast(${e}, ${t}) is running`),triggerShippingToastClose.click(),triggerServicePointToastClose.click(),changeToServicePointButton.addEventListener("click",async()=>{await l(e,"Service point")}),changeToServicePointButton.style.display=n,function(e){console.log(`setDatesOfPickupToast(${e}) is running`),radioFieldOne.style.display="none",radioFieldTwo.style.display="none",radioFieldThree.style.display="none",radioFieldFour.style.display="none";var t=new Date(e);t.setTime(t.getTime()+36e5),t.setDate(t.getDate()+4),6==t.getDay()||0==t.getDay()||1==t.getDay()||2==t.getDay()?t.setDate(t.getDate()+2):3==t.getDay()&&t.setDate(t.getDate()+1);var n=new Date(t);n.setDate(n.getDate()+1),6==n.getDay()&&n.setDate(n.getDate()+2);var i=new Date(n);i.setDate(i.getDate()+1),6==i.getDay()&&i.setDate(i.getDate()+2);var o=new Date(i);o.setDate(o.getDate()+1),6==o.getDay()&&o.setDate(o.getDate()+2);var r=["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],a=["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"];let l=new Date,s=0;console.log("Today",l),console.log("firstDate > today",t>l),console.log("secondDate > today",n>l),console.log("thirdDate > today",i>l),console.log("forthDate > today",o>l);let d=document.getElementById("pickupDateOne"),c=document.getElementById("pickupDateTwo"),u=document.getElementById("pickupDateThree"),m=document.getElementById("pickupDateFour");if(t>l&&($("#radioButtonOne").val(t.toISOString().split("T")[0]),d.innerHTML=r[t.getDay()]+", "+t.getDate()+" "+a[t.getMonth()]+", kl 9-16",radioFieldOne.style.display="flex",s++),n>l&&($("#radioButtonTwo").val(n.toISOString().split("T")[0]),c.innerHTML=r[n.getDay()]+", "+n.getDate()+" "+a[n.getMonth()]+", kl 9-16",radioFieldTwo.style.display="flex",s++),i>l&&($("#radioButtonThree").val(i.toISOString().split("T")[0]),u.innerHTML=r[i.getDay()]+", "+i.getDate()+" "+a[i.getMonth()]+", kl 9-16",radioFieldThree.style.display="flex",s++),o>l&&($("#radioButtonFour").val(o.toISOString().split("T")[0]),m.innerHTML=r[o.getDay()]+", "+o.getDate()+" "+a[o.getMonth()]+", kl 9-16",radioFieldFour.style.display="flex",s++),s<2){radioFieldOne.style.display="none",radioFieldTwo.style.display="none",radioFieldThree.style.display="none",radioFieldFour.style.display="none";var g=new Date;g.setDate(l.getDate()+1),0==g.getDay()?g.setDate(g.getDate()+1):6==g.getDay()&&g.setDate(g.getDate()+2);var p=new Date(g);p.setDate(p.getDate()+1),6==p.getDay()&&p.setDate(p.getDate()+2),console.log("dayOne: ",g),console.log("dayTwo: ",p),$("#radioButtonOne").val(g.toISOString().split("T")[0]),d.innerHTML=r[g.getDay()]+", "+g.getDate()+" "+a[g.getMonth()]+", kl 9-16",radioFieldOne.style.display="flex",$("#radioButtonTwo").val(p.toISOString().split("T")[0]),c.innerHTML=r[p.getDay()]+", "+p.getDate()+" "+a[p.getMonth()]+", kl 9-16",radioFieldTwo.style.display="flex"}}(t),window.pickupFlowItemId=e,triggerPickupAnimation.click()}function c(e,t,n){return`<div class="w-form">
            <form method="get" name="wf-form-" id="bagReceivedForm">
                <label class="w-checkbox checkbox-field-3">
                    <div class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-2"></div>
                    <input type="checkbox" id="bagReceivedCheckbox-${e}" style="opacity:0;position:absolute;z-index:-1">
                    <span class="checkbox-label-3 w-form-label">Etiketten har kommit</span>
                </label>
            </form>
        </div>`}function u(e,t=null){itemListSelling.innerHTML="",itemListSoldNotSent.innerHTML="",itemListSold.innerHTML="",document.createDocumentFragment(),document.createDocumentFragment(),document.createDocumentFragment();let n="",i="",o="";var a=0;(e||[]).forEach(e=>{let l,s;var d=e.id,u=e.soldDate,m=e.status,g=e.shippingStatus,p=e.brand,y=e.soldPrice,f=e.sellerGets?Math.ceil(e.sellerGets):e.sellerGets,v="Brand Gift Card"===e.payoutType?y:f,k=e.buyer?.FirstName||e.buyerFirstName,h=e.buyer?.City||e.buyerAddressCity,b=e.minPriceEstimate,x=e.maxPriceEstimate,I=e.infoRequests,B=e.pickupDate,S=e.shippingMethod,w=e.postnordQrCode,T=e.dhlLicensePlateBarcodeSrc,E=e.upsShipmentId,L=e.bagReceived,D=e.soldPlatform,C=e.archived,M=e.holidayMode,P=e.longerPeriodAcceptedDate;e.images;var j=(0,r.itemCoverImage)(e);let q="",F=e.publishedDate;if(F){F=new Date(F);let e=Math.round((P?60:30)-(l=(new Date().getTime()-F.getTime())/864e5));q=e<=0?"0 dagar kvar":`${e} dagar kvar`}if(u){let e=new Date(u),t=new Date;e.setHours(0,0,0,0),t.setHours(0,0,0,0),s=Math.round((t-e)/864e5)}C||"Unsold"===m||function(){let r=window.location.origin+`/item?id=${d}`;if("Sold"!==m){let e="",i="";if("New"===m&&(I?.price?.status==="Active"?e=`<div class='text-block-34'>Inv\xe4ntar ditt svar</div>`:b&&x?(e=`<div class='text-block-34'>${b} - ${x} kr</div>`,i=`<div class='text-block-34'>F\xf6rbereds</div>`):e=`<div class='text-block-34'>V\xe4rdering p\xe5g\xe5r</div>`),"Published"===m&&b&&x){e=`<div class='text-block-34'>${b} - ${x} kr</div>`;let n=t?.specialDeal?`Live (${Math.round(l)} dagar)`:q;i=`<div class='text-block-34'>${M?"Pausad":n}</div>`}let o=`<div class="div-block-14-big"><a id="itemLinkBlock" href="${r}" class="link-block-18 w-inline-block"><div class="ratio-box _16-9"><div class="conten-block with-image"><div class="img-container" style="background-image: url('${j}');"></div></div></div><div class="text-block-14">${p}</div>${e}${i}</a></div>`;n+=o,myItemsDiv.style.display="block",noItemsDiv.style.display="none",headerSellItemButton.style.display="block",sellButtonText.innerHTML="Sälj ett plagg"}else if("Sold"!=m||"Not sent"!=g&&g){let t="Brand Gift Card"===e.payoutType?"<br> (Presentkort)":"";var f=`<div class="item-card-small"><div class="ratio-box _16-9"><div class="conten-block with-image"><a id="itemLinkFromSoldBeforeSection" href="${r}"><div class="img-container" style="background-image: url('${j}');"></div></a></div></div><div class="text-block-14">${y} kr</div><div class='text-block-34'>${"Payed"===e.payoutStatus?"Du fick":"Du får"} ${v} kr${t}</div></div>`;o+=f,soldItemsDiv.style.display="block",itemListSoldContainer.style.display="block",sellButtonText.innerHTML="Sälj ett plagg",a+=v,youEarnedDiv.innerHTML=`Du har tj\xe4nat ${Math.round(a).toLocaleString("en-US").replaceAll(","," ")} kr`}else{var C="",P="";let t="",n="",o="",a=`Du f\xe5r ${v} kr`,l="",m="";if("Vestiaire Collective"===D&&s>7){let e;e=window.location.origin+`/sell-item?id=${d}`,C=`<a id="resellButton" href="${e}" class="link-block-39">
                            <div class="div-block-194">
                                            <div class="text-block-113">L\xe4gg upp p\xe5 nytt</div>
                            </div>
                    </a>`,a="Köparen avbröt köpet",l="Skickades ej inom 7 dagar",n+=`
          <a id="removeItemButton-${d}" href="#" class="link-block-87">
              <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65269f37a18d8c128d29ed1c_trash-can%20(1).svg" class="image-154">
              <div class="text-block-373">Ta bort plagg</div>
          </a>`,window._pendingEventListeners=window._pendingEventListeners||[],window._pendingEventListeners.push({type:"removeItemButton",itemId:d})}else{if(null!=k&&null!=h&&y){let t=isGiftCardPartner(e.brand)?.giftCards,n=`S\xe5ld till ${k} i ${h}${t?"":" för "+y+" kr"}`;if(t)l=n.trim();else{let e="";n.split(" ").forEach(function(t){e.trim().length>n.length/2&&!e.includes("<br>")&&(e+="<br>"),e+=t+" "}),l=e.trim()}l="Brand Gift Card"===e.payoutType?`(${brandPartners[e.brand].name}-presentkort)<br>`+l:l,m=t&&"Brand Gift Card"!==e.payoutType?`\xc4ndra till ${y} kr i presentkort?`:""}if("Service point"===S){if(T){let e;e=window.location.origin+`/ship-item?id=${d}`,C=`<a id="barcodeButton" href="${e}" class="link-block-39">
                            <div class="div-block-194">
                                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65418186f29682eaff3f74be_barcode-icon%20(1).svg" class="image-100">
                                            <div class="text-block-113">Visa streckkod</div>
                            </div>
                    </a>`,o="dhl"}else if("Vestiaire Collective"===D||"Grailed"===D)L||(C=c(d,u,S),E&&(o="ups"),window._pendingEventListeners=window._pendingEventListeners||[],window._pendingEventListeners.push({type:"bagReceivedCheckbox",itemId:d,soldDate:u,shippingMethod:S}));else if(w){let e;o="postnord",e=window.location.origin+`/ship-item?id=${d}`,C=`<a id="qrCodeButton" href="${e}" class="link-block-39">
                            <div class="div-block-194">
                                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63bdeaf1af902f05607f86ef_Group.svg" class="image-43">
                                            <div class="text-block-113">Visa QR</div>
                            </div>
                    </a>`}}"Pickup"===S&&(L?L&&!B&&(C=`<a id="bookPickupButton-${d}" href="#" class="link-block-39">
                            <div class="div-block-194">
                                <div class="text-block-113">Boka h\xe4mtning</div>
                            </div>
                    </a>`,window._pendingEventListeners=window._pendingEventListeners||[],window._pendingEventListeners.push({type:"bookPickupButton",itemId:d,soldDate:u})):(C=c(d,u,S),window._pendingEventListeners=window._pendingEventListeners||[],window._pendingEventListeners.push({type:"bagReceivedCheckbox",itemId:d,soldDate:u,shippingMethod:S}))),P=function(e,t,n,i,o,r){let a="",l=o&&(!o||"Pickup"!=t||i)?"":'<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg" class="image-44">',s=window.location.origin+`/ship-item?id=${e}`;if("Service point"==t){let e="6297d3d527db5dd4cf02e924/6399ac2a3505ee6071fbc18a_Vector%20(1).svg";"postnord"===r&&(e="6297d3d527db5dd4cf02e924/655d182c37fc30df71b078cd_postnord-square-icon%20(1).svg"),"dhl"===r&&(e="6297d3d527db5dd4cf02e924/655d1830f259c0bc084c2937_dhl-square-icon%20(1).svg"),"ups"===r&&(e="6297d3d527db5dd4cf02e924/6603eaef0d5af57f5cce2e40_ups-squared-icon.jpg"),a+=`
                        <img src="https://global-uploads.webflow.com/${e}" class="shipper-icon">
                        <div class="next-step-text-small">L\xe4mnas till ombud</div>
                        ${l}
                    `}else if("Pickup"==t)if(i){var d=new Date(i),c=d.getDate(),u=["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"][d.getMonth()],m=["Sön","Mån","Tis","Ons","Tors","Fre","Lör"][d.getDay()];a+=`
                                <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg" class="image-45">
                                <div class="next-step-text-small">${m+", "+c+" "+u+", kl 9-16"}</div>`}else a+=`
                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg" class="image-45">
                            <div class="next-step-text-small">Upph\xe4mtning</div>
                            ${l}
                        `;return`
                        <a id="shipItemPageLink" href="${s}" class="link-block-40">
                                ${a}
                        </a>`}(d,S,0,B,L,o),L&&("Service point"===S||"Pickup"===S&&B)&&(P='<div class="spacing-15-px"></div>'+P,t+=`
          <a id="changeShippingMethodA-${d}" href="#">
              <div id="changeShippingMethod-${d}" class="change-shipping-method-text">\xc4ndra frakts\xe4tt</div>
          </a>`,window._pendingEventListeners=window._pendingEventListeners||[],window._pendingEventListeners.push({type:"changeShippingMethod",itemId:d,soldDate:u}))}var F="";F=`<div class="div-block-118"><div class="div-block-45"><div class="div-block-43"><div class="ratio-box _16-9"><div class="content-block with-image"><a id="itemLinkFromSoldNotSentSection" href="${r}"><div class="img-container" style="background-image: url('${j}');"></div></a></div></div></div><div class="div-block-46">
          <a id="youGetLink-${d}" href="#" class="you-get-link">
              <div class="text-block-43" id="text1-${d}">${a}</div>
              ${"Köparen avbröt köpet"!==a?'<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg" class="you-get-info-icon"></img>':""}
          </a>
          <div class="text-block-44" id="text2-${d}">${l}</div>
          ${m?`<div class="change-to-gift-card-text" id="convertToGiftCardDiv-${d}"><a id="convertToGiftCard-${d}">${m}</a></div>`:""}
          ${C}
          ${P}
          ${t}
          ${n}
          </div></div></div></div>`,window._pendingEventListeners=window._pendingEventListeners||[],window._pendingEventListeners.push({type:"youGetLink",itemId:d,soldPrice:y,sellerGetsValue:v}),m&&window._pendingEventListeners.push({type:"convertToGiftCard",itemId:d,item:e,soldPrice:y}),i+=F,soldNotSentDiv.style.display="block",noItemsDiv.style.display="none",headerSellItemButton.style.display="block",sellButtonText.innerHTML="Sälj ett plagg"}}()}),n&&(itemListSelling.innerHTML=n),i&&(itemListSoldNotSent.innerHTML=i),o&&(itemListSold.innerHTML=o),window._pendingEventListeners&&(window._pendingEventListeners.forEach(e=>{if("youGetLink"===e.type){let t=document.getElementById(`youGetLink-${e.itemId}`);t&&t.addEventListener("click",()=>{!function(e,t){priceAfterPlatformFee.innerHTML=e;let n=e-t;commissionAmount.innerHTML=0===n?"-":"-"+n,n/e>.9&&n/e<.11&&(commissionTitle.innerHTML="Rabatterad kommission (10%)"),n/e>.19&&n/e<.21&&(commissionTitle.innerHTML="Kommission (20%)"),n/e>.29&&n/e<.31&&50!==n&&500!==n&&(commissionTitle.innerHTML="Kommission (30%)"),n<1&&(commissionTitle.innerHTML="Fri kommission (0%)"),youGetAmount.innerHTML=t,youGetInfoBox.style.display="flex",darkOverlay.style.display="block",closeYouGetInfoBox.addEventListener("click",()=>{youGetInfoBox.style.display="none",darkOverlay.style.display="none"})}(e.soldPrice,e.sellerGetsValue)})}else if("convertToGiftCard"===e.type){let t=document.getElementById(`convertToGiftCard-${e.itemId}`);t&&t.addEventListener("click",()=>{var t,n,i;let o=e.item?.images?.modelImage||e.item?.images?.enhancedFrontImageSmall||e.item?.images?.enhancedFrontImage||e.item?.images?.frontImageSmall||e.item?.images?.frontImage;t=e.itemId,n=e.soldPrice,i=e.item.brand,document.getElementById("convertGiftCardInfoBox").style.display="flex",document.querySelector(".dark-overlay").style.display="block",document.getElementById("giftCardItemImage").src=o,document.getElementById("giftCardText").innerText=`Vill du f\xe5 ${n}kr (100% av vinsten) att handla f\xf6r p\xe5 ${brandPartners[i].url} ist\xe4llet?`,document.getElementById("closeGiftCardBox").addEventListener("click",()=>{document.getElementById("convertGiftCardInfoBox").style.display="none",document.querySelector(".dark-overlay").style.display="none"}),document.getElementById("closeGiftCardBoxButton").addEventListener("click",()=>{document.getElementById("convertGiftCardInfoBox").style.display="none",document.querySelector(".dark-overlay").style.display="none"}),document.getElementById("convertToGiftCardButton").dataset.currentItemId=t,document.getElementById("convertToGiftCardButton").dataset.currentBrand=i,document.getElementById("convertToGiftCardButton").dataset.currentSoldPrice=n})}else if("bagReceivedCheckbox"===e.type){let t=document.getElementById(`bagReceivedCheckbox-${e.itemId}`);t&&t.addEventListener("click",t=>{!function(e,t,n,i){if(e.checked)if(db.collection("items").doc(t).update({bagReceived:!0}).then(e=>{console.log("Stored in DB that bag is received for item with ID: ",t)}),"Pickup"===i)d(t,n,"flex");else if("Service point"===i)console.log("openServicePointToast"),changeToPickupButton.addEventListener("click",()=>{d(t,n)}),triggerServicePointToastOpen.click();else s(t,n);else db.collection("items").doc(t).update({bagReceived:!1}).then(e=>{console.log("Stored in DB that bag is NOT received for item with ID: ",t)})}(t.target,e.itemId,e.soldDate,e.shippingMethod)})}else if("bookPickupButton"===e.type){let t=document.getElementById(`bookPickUpButton-${e.itemId}`);t&&t.addEventListener("click",()=>{d(e.itemId,e.soldDate)})}else if("changeShippingMethod"===e.type){let t=document.getElementById(`changeShippingMethodA-${e.itemId}`);t&&t.addEventListener("click",()=>{s(e.itemId,e.soldDate)})}else if("removeItemButton"===e.type){let t=document.getElementById(`removeItemButton-${e.itemId}`);t&&t.addEventListener("click",t=>{itemMoreMenu.style.display="block",setTimeout(()=>itemMoreMenu.classList.add("sticky-bottom-show"),0),itemMoreMenu.dataset.itemId=e.itemId,itemMoreMenu.dataset.section="sold-not-sent",t.preventDefault(),t.stopPropagation()})}}),window._pendingEventListeners=[]),loadingDiv.style.display="none",sectionsDiv.style.display="block",analytics.track("Element Viewed",{elementID:"sectionsDiv"}),quickInfoDiv.style.display="block"}e("./sellItemHelpers"),document.getElementById("convertToGiftCardButton").addEventListener("click",async()=>{let e=document.getElementById("convertToGiftCardButton").dataset.currentItemId,t=document.getElementById("convertToGiftCardButton").dataset.currentBrand,n=document.getElementById("convertToGiftCardButton").dataset.currentSoldPrice;await callBackendApi(`/api/items/${e}`,{data:{payoutType:"Brand Gift Card"},method:"PUT"}),document.getElementById("convertGiftCardInfoBox").style.display="none",document.querySelector(".dark-overlay").style.display="none",document.getElementById(`convertToGiftCardDiv-${e}`).style.display="none",document.getElementById(`text1-${e}`).innerHTML=document.getElementById(`text1-${e}`).innerHTML.replace(/\d+/,n),document.getElementById(`text2-${e}`).innerHTML=`(${brandPartners[t].name}-presentkort)<br>`})},{"./general":"1tOWF","./private":"flS2m","./sellItemHelpers":"2G59s","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"1tOWF":[function(e,t,n,i){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function r(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),location.href="/"}).catch(e=>{errorHandler.report(e),console.log(e)})}function a(e){document.getElementById("addressFirstName").value=e.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=e.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=e.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=e.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=e.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=e.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=e.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function l(){let e=document.getElementById("addressFirstName").value,t=document.getElementById("addressLastName").value,n=document.getElementById("addressStreetAddress").value,i=document.getElementById("addressCO").value,o=document.getElementById("addressPostalCode").value,r=document.getElementById("addressCity").value,a=document.getElementById("addressDoorCode").value;return e=e?e.trim().charAt(0).toUpperCase()+e.trim().slice(1):"",t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",n=n?n.trim().charAt(0).toUpperCase()+n.trim().slice(1):"",i=i?i.trim():"",o=o?o.trim().replace(/\D/g,""):"",{addressFirstName:e,addressLastName:t,addressStreetAddress:n,addressCO:i,addressPostalCode:o,addressCity:r=r?r.trim().charAt(0).toUpperCase()+r.trim().slice(1):"",addressDoorCode:a=a?a.trim():""}}function s(e){return 10===(e=e.replace(/\D/g,"").split("").reverse().slice(0,10)).length&&0==e.map(e=>Number(e)).reduce((e,t,n)=>(n%2&&(t*=2),t>9&&(t-=9),e+t))%10}function d(e){let t=e.replace("-","");return(12!==t.length&&("19"!==t.substring(0,2)||"20"!==t.substring(0,2))&&(t=99>=Number(t.substring(0,2))&&Number(t.substring(0,2))>25?"19"+t:"20"+t),12===t.length)?t:null}function c(e){if(e.images){let t=e.images;return t.modelImageSmall||t.modelImage||t.coverImageSmall||t.coverImage||t.enhancedFrontImageSmall||t.enhancedFrontImage||t.frontImageSmall||t.frontImage}if(e.imagesv2)for(let t of["modelImage","enhancedFrontImage","frontImage"]){let n=e.imagesv2.find(e=>e.name===t);if(n){if(n?.versions?.small)return n.versions.small;if(n?.versions?.medium)return n.versions.medium;if(n?.versions?.large)return n.versions.large;if(n.url)return n.url}}return null}function u(){let e=user.current.referralData.referralCode,t=`Hej! F\xf6lj min personliga l\xe4nk s\xe5 s\xe4ljer Mai ditt f\xf6rsta plagg kostnadsfritt! Mai sk\xf6ter f\xf6rs\xe4ljningen av dina kl\xe4der, inklusive v\xe4rdering, l\xe4gger ut p\xe5 flera plattformar samtidigt, har kontakten med k\xf6pare och ordnar med frakt n\xe4r det blir s\xe5lt. Man f\xe5r sj\xe4lv beh\xe5lla 80% av vinsten, och blir det inte s\xe5lt kostar det ingenting.

Om du registrerar dig med min kod (f\xf6lj l\xe4nken) och provar s\xe4lja ett plagg inom 7 dagar f\xe5r du beh\xe5lla 100% av vinsten f\xf6r det f\xf6rsta plagget (ist\xe4llet f\xf6r 80%). Min kod: ${e}`;if(navigator.share)navigator.share({text:t,url:`https://invite.maiapp.se/refer?invite=${e}`}).then(()=>{console.log("Thanks for sharing!")}).catch(e=>{console.error(e),errorHandler.report(e)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let n=t+"\n"+`https://invite.maiapp.se/refer?invite=${e}`;navigator.clipboard.writeText(n),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}function m(e){var t;/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?(t=e,document.getElementById("continueOnWebBottomSheet").href=window.location.origin+t,document.getElementById("darkOverlay").classList.add("active"),document.getElementById("channelBottomSheet").classList.add("active")):window.location.href=e}function g(){document.getElementById("darkOverlay").classList.remove("active"),document.getElementById("channelBottomSheet").classList.remove("active")}function p(e){let t=document.getElementById(e);t&&(t.style.transform="translateY(100%)",t.style.transition="transform 0.3s ease-out",t.style.display="block",setTimeout(()=>{t.style.transform="translateY(0%)"},10),document.getElementById("darkOverlay").classList.add("active"))}function y(e){let t=document.getElementById(e);t&&"none"!==t.style.display&&(t.style.transform="translateY(100%)",t.style.transition="transform 0.3s ease-in",setTimeout(()=>{t.style.display="none"},300),document.getElementById("darkOverlay").classList.remove("active"))}function f(e){let t=document.getElementById(e);if(t){t.style.display="none";let e=document.getElementById("infoRequestsList");if(e&&0===e.querySelectorAll('[id^="infoRequest"]:not([style*="display: none"])').length){let e=document.getElementById("infoRequestsDiv");e&&(e.style.display="none")}}}o.defineInteropFlag(n),o.export(n,"signOut",()=>r),o.export(n,"setFormAddressFields",()=>a),o.export(n,"getFormAddressFields",()=>l),o.export(n,"isValidSwedishSsn",()=>s),o.export(n,"formatPersonalId",()=>d),o.export(n,"itemCoverImage",()=>c),o.export(n,"shareCode",()=>u),o.export(n,"channelRouter",()=>m),o.export(n,"hideChannelBottomSheet",()=>g),o.export(n,"animateOpenToast",()=>p),o.export(n,"animateCloseToast",()=>y),o.export(n,"hideInfoRequestCard",()=>f)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(e,t,n,i){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}],flS2m:[function(e,t,n,i){var o,r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"updateIC",()=>c),r.export(n,"closePickupToast",()=>S);var a=e("./general"),l=e("./infoRequestsFunctions"),s=e("./loadItemCards");async function d(){let e=await callBackendApi("/api/users/token",{method:"POST",requiresAuth:!0});document.getElementById("openAppAndSignIn").href="maiapp://?aat="+encodeURIComponent(e.data.customToken)}function c(e,t,n){let i=t,o=n;null===i&&(i=""),null===o&&(o=""),window.intercomSettings={app_id:"klyy0le5",user_id:`${e}`},db.collection("users").doc(e).get().then(t=>{if(t.exists){let n=t.data(),r="",a="";n.addressFirstName&&(r=n.addressFirstName+" "+n.addressLastName,a=n.addressCity),n.phoneNumber&&(o=n.phoneNumber),Intercom("update",{mai_user_id:`${e}`,user_id:`${e}`,phone:`${o}`,email:`${i}`,name:`${r}`,city:`${a}`})}else console.log("No such user document exist!")}).catch(e=>{errorHandler.report(e),console.log("Error getting document:",e)})}function u(e){let t,n;console.log("Prepare menu",e.signInMethod),"phone"===e.signInMethod&&e.phoneNumber?(t=e.phoneNumber,n="Inloggad med SMS-kod"):"password"===e.signInMethod&&e.email?(t=e.email,n="Inloggad med email"):"google.com"===e.signInMethod&&e.email&&(t=e.email,n="Inloggad med Google"),t&&(account.innerHTML=t,account.style.display="block",accountSignInMethod.innerHTML=n,accountSignInMethod.style.display="block"),e.addressFirstName&&e.addressLastName&&(accountName.innerHTML=e.addressFirstName+" "+e.addressLastName,accountName.style.display="block"),e?.referralData?.referralCode&&(referralCodeText.innerHTML=e.referralData.referralCode,headerInviteButton.style.display="flex",menuInviteLink.style.display="block")}d(),setInterval(d,6e5);let m=JSON.parse(localStorage.getItem("sessionUser"));async function g(){try{let e=await callBackendApi("/api/bags/orders/allowed",{requiresAuth:!0});e?.data?.maxOrderBags>0&&(document.getElementById("orderBagsSection").style.display="block")}catch(e){console.log(e)}}async function p(e){let t,n="",i="",o=!0,r=!1,a=!1,l=!1,s=!1;await db.collection("items").where("user","==",e).where("status","==","Sold").orderBy("soldDate").get().then(e=>{e.forEach(e=>{e.data().status,n=e.data().shippingStatus;let t=e.data().payoutStatus,i=e.data().saleApprovalStatus;"Not sent"===n&&(l=!0),"Payed"!==t&&(r=!0,"Approved"===i&&(a=!0))})}),await db.collection("users").doc(e).get().then(e=>{i=e.data().addressFirstName,t=e.data().personalId;let n=e.data()?.preferences?.shippingMethod;t?""===t&&(o=!1):o=!1,"Pickup"==n&&(s=!0)}),!0==l&&void 0==i&&s&&(location.href="/address-form");let d=user.current?.trustedSellerStatus==="Trusted";user.current?.trustedSellerStatus,r&&!o&&!["l3FdLmp4CHU0tdmGXvVkjx1inr32"].includes(e)&&(d||a)&&(location.href="/personal-id-form")}async function y(){var e;if(console.log("privateMain running"),!user.current)return;o=authUser.current.uid,c(o,authUser.current.email||sessionStorage.getItem("email"),authUser.current.phoneNumber||sessionStorage.getItem("phoneNumber")),p(o),user.current?.trustedSellerStatus==="Trusted"?document.getElementById("trustedIconHeader").style.display="block":(document.getElementById("fullLogo").style.display="block",document.getElementById("onlyLogo").style.display="none"),(e=document.getElementById("itemListSoldByOthers")).innerHTML="",db.collection("items").where("status","==","Sold").orderBy("soldDate","desc").limit(30).get().then(t=>{t.forEach(t=>{var n=t.data().user,i=t.data().brand,r=t.data().soldPrice,l=(0,a.itemCoverImage)(t.data());if(n!=o&&r>=200){var s=`<div class="div-block-14"><div class="ratio-box _16-9"><div class="conten-block with-image"><div class="img-container" style="background-image: url('${l}');"></div></div></div><div class="text-block-14">${r} kr</div><div class='text-block-34'>${i}</div></div>`;e.innerHTML+=s}})}),soldByOthersDiv.style.display="block",setPreferredLogInMethodCookie(authUser.current.providerData[0].providerId);let t=(await callBackendApi("/api/items",{requiresAuth:!0}))?.data;!function(e){let t=new Date,n=10,i=0,o=!1,r=user.current?.elementViews?user.current.elementViews.filter(e=>"inviteToast"===e.elementID):[],a=r.length?Array.from(r,e=>parseInt(Math.floor((t.getTime()-1e3*e.timestamp.seconds)/864e5))):[],l=a.length?Math.min(...a):null,s=!!r.length;e&&e.forEach(e=>{let r=e.soldDate,a=e.status,l=e.shippingStatus;if(!e.archived&&"Sold"===a&&r){if(i++,r){r=new Date(r);let e=Math.floor((t.getTime()-r.getTime())/864e5);e<=n&&(n=e)}"Sent"===l&&(o=!0)}}),user.current?.referralData?.referralCode&&o&&(!s||l>45)&&(n<=14||i>=3&&n<=45)&&(referralCodeText.innerHTML=user.current.referralData.referralCode,triggerInviteToastOpen.click(),db.collection("users").doc(authUser.current.uid).update({elementViews:firebase.firestore.FieldValue.arrayUnion({elementID:"inviteToast",timestamp:new Date})}),analytics.track("Element Viewed",{elementID:"inviteToast"}))}(t);let n=checkCookie("invite");n&&await connectReferralUsers(n),checkCookie("photo_invite")&&!localStorage.getItem("photoShootBooked")&&(photoShootOffer.style.display="block",bonusSection.style.display="block"),document.getElementById("stickyBottomClose").addEventListener("click",()=>{itemMoreMenu.classList.remove("sticky-bottom-show"),setTimeout(()=>itemMoreMenu.style.display="none",500)}),document.getElementById("stickyBottomDelete").addEventListener("click",async()=>{if(itemMoreMenu.classList.remove("sticky-bottom-show"),setTimeout(()=>itemMoreMenu.style.display="none",500),"inactive"===itemMoreMenu.dataset.section&&(document.getElementById(itemMoreMenu.dataset.itemId).style.display="none",Array.from(document.getElementById("inactiveItemList").children).find(e=>"none"!==e.style.display)||(document.getElementById("inactiveItemsDiv").style.display="none"),await callBackendApi(`/api/items/unsold/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}})),"sold-not-sent"===itemMoreMenu.dataset.section){await callBackendApi(`/api/items/unsold/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}});let e=document.getElementById(`removeItemButton-${itemMoreMenu.dataset.itemId}`).parentElement;for(;e&&!e.classList.contains("div-block-45");)e=e.parentElement;e&&(e.style.display="none"),0===Array.from(document.querySelectorAll("#itemListSoldNotSent .div-block-45")).filter(e=>"none"!==e.style.display).length&&(document.getElementById("soldNotSentDiv").style.display="none")}else document.getElementById(itemMoreMenu.dataset.itemId).style.display="none",Array.from(document.getElementById("wardrobeItemList").children).find(e=>"none"!==e.style.display)||(document.getElementById("wardrobeItemsDiv").style.display="none"),await callBackendApi(`/api/items/wardrobe/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}})}),await Promise.all([k(),g(),v()]),(0,s.loadItemCards)(t,user.current),function(e){if(!user.current?.trustedSellerStatus||user.current?.trustedSellerStatus==="Pending"){let t=document.getElementById("trustedSellerWidget");if(!(e?.data?.length>0)){console.log("No items, moving widget after soldByOthersDiv");let e=document.getElementById("soldByOthersDiv");e.parentNode.insertBefore(t,e.nextSibling)}user.current?.approvedSalesCount&&(document.getElementById("widgetNumApprovedSales").innerText=Math.max(0,3-Number(user.current?.approvedSalesCount))),user.current?.approvedSalesCount===2&&(document.getElementById("approvedSalesText").innerText="godkänd försäljning kvar"),user.current?.approvedSalesCount>=1&&(document.getElementById("widgetFirstSaleBar").style.backgroundColor="#02AC08"),user.current?.approvedSalesCount>=2&&(document.getElementById("widgetSecondSaleBar").style.backgroundColor="#02AC08"),user.current?.approvedSalesCount>=3&&(document.getElementById("widgetThirdSaleBar").style.backgroundColor="#02AC08"),t.style.display="block"}}(t),console.log("user.current",user.current),window.location.href.endsWith("#wardrobe")&&setTimeout(()=>{document.getElementById("wardrobeItemsDiv").scrollIntoView({behavior:"smooth",block:"center"})},600),I(t),B(t),showReferralSection(),showBonusSection(),function(e){let t=getCookie("noCommissionCampaignCookie"),n=new Intl.DateTimeFormat("se-SV").format(new Date),i=e.filter(e=>e?.status!=="Draft").length;"noCommission"===t&&n>="2024-08-12"&&n<="2024-08-18"&&i<1&&("none"===bonusActivatedState.style.display||""===bonusActivatedState.style.display)&&document.getElementById("bonusSection")&&(document.getElementById("bonusName").innerHTML="KAMPANJ - T.o.m sön 18/8",document.getElementById("bonusTitle").innerHTML="Sälj första gratis",document.getElementById("bonusText").innerHTML="Lägg upp ett plagg senast söndag 18 augusti så får du behålla 100% av vinsten för ditt första sålda plagg (istället för 80%).",document.getElementById("bonusActivatedState").style.display="block",document.getElementById("enterCodeState").style.display="none",bonusSection.style.display="block")}(t),u(user.current),(0,l.loadInfoRequests)(t),h(t),user.current?.trustedSellerStatus!=="Pending"&&user.current?.trustedSellerStatusChange&&!user.current.trustedSellerStatusChange.seen&&function(){document.getElementById("darkOverlay").classList.add("active");let e=user.current?.trustedSellerStatusChange.type;"pendingToTrusted"===e?(document.getElementById("trustedSellerTitle").innerText="Du har uppnåt statusen\nPålitlig Säljare!",document.getElementById("trustedSellerText").innerText="Tack vare en hög andel godkända försäljningar har du nu blivit Pålitlig Säljare! Från och med nu får du utbetalt direkt när du skickar dina plagg och täcks av Mais säljarskydd vid eventuella reklamationer."):"untrustedToTrusted"===e?(document.getElementById("trustedSellerTitle").innerText="Du har uppnåt statusen\nPålitlig Säljare!",document.getElementById("trustedSellerText").innerText=`Tack${user.current?.addressFirstName?" "+user.current.addressFirstName:""}, f\xf6r att du g\xf6r det enkelt f\xf6r k\xf6pare att handla tryggt i andra hand! Fr\xe5n och med nu f\xe5r du utbetalt direkt n\xe4r du skickar dina plagg och t\xe4cks av Mais s\xe4ljarskydd vid eventuella reklamationer.`):"pendingToUntrusted"===e?(document.getElementById("trustedSellerButton").innerText="Okej",document.getElementById("trustedSellerIcon").style.opacity="0.2",document.getElementById("trustedSellerLink").innerText="Hur blir jag Pålitlig Säljare?",document.getElementById("trustedSellerTitle").innerText="Just nu uppfyller du inte kriterierna för Pålitlig Säljare",document.getElementById("trustedSellerText").innerHTML=`Eftersom en av dina f\xf6rsta f\xf6rs\xe4ljningar antingen reklamerades eller inte skickades i tid, s\xe5 uppfyller du just nu inte kriterierna f\xf6r statusen P\xe5litlig S\xe4ljare. Du kan fortfarande s\xe4lja, men har \xe4nnu inte kvalificerat dig f\xf6r snabbare utbetalningar eller Mais s\xe4ljarskydd.`):"trustedToUntrusted"===e&&(document.getElementById("trustedSellerButton").innerText="Okej",document.getElementById("trustedSellerIcon").style.opacity="0.2",document.getElementById("trustedSellerLink").innerText="Hur blir jag Pålitlig Säljare igen?",document.getElementById("trustedSellerTitle").innerText="Du har inte längre statusen Pålitlig Säljare",document.getElementById("trustedSellerText").innerText=`P\xe5 grund av upprepade reklamationer eller f\xf6rs\xe4ljningar som inte skickats i tid, s\xe5 uppfyller du f\xf6r n\xe4rvarande inte kriterierna f\xf6r s\xe4ljarstatusen P\xe5litlig S\xe4ljare. Du kan fortfarande s\xe4lja, men utbetalning sker f\xf6rst n\xe4r k\xf6paren mottagit varan och eventuella reklamationer skickas tillbaka till dig.`),document.getElementById("trustedSellerBottomSheet").classList.add("active")}(),x(),user.current&&user.current.addressFirstName&&user.current.addressLastName&&!user.current?.referralData?.referralCode&&await createReferralCode()}function f(e){if(!e||["Tröja","Blus","Topp","Skjorta","Linneskjorta","T-shirt","Kavaj","Sweatshirt","Hoodie","Polotröja","Tunika","Väst","Kofta","Linne","Träningströja","Poncho","Piké","Långärmad T-shirt","Kostymväst","Kjol","Byxor","Jeans","Chinos","Fritidsbyxor","Träningsbyxor","Tights","Strumpbyxor","Mjukisbyxor","Kostymbyxor","Sarong","Klänning","Kaftan","Kostym","Set","Jumpsuit","Baddräkt","Bikini","Pyjamas","Morgonrock","Bröllopsklänning","Balklänning","Bodysuit","Jacka","Kappa","Rock","Fritidsjacka","Trenchcoat","Skinnjacka","Regnjacka","Sneakers","Klackar","Ballerinaskor","Loafers","Boots","Kängor","Skor","Axelremsväska","Handväska","Kuvertväska","Ryggsäck","Träningsväska","Resväska","Datorväska","Väska","Solglasögon","Glasögon","Örhänge","Halsband","Armband","Ring","Brosch","Keps","Sjal","Krage","Bälte","Plånbok","Hatt","Necessär","Slips","Handduk","Klocka"].includes(e))return!0;let t=new Date,n=new Date(t.getFullYear(),7,15),i=new Date(t.getFullYear(),3,15);return!!["Underställ","Dunjacka","Pälsjacka","Vinterskor","Halsduk","Mössa","Vantar"].includes(e)&&(t<=i||t>=n)||["Shorts","Sandaler","Flip-flops"].includes(e)&&t>=i&&t<=n}async function v(){let e=await callBackendApi("/api/items/unsold",{requiresAuth:!0});if(!e.data?.length)return;e.data.sort((e,t)=>{let n=f(e.category),i=f(t.category);return n&&!i?-1:i&&!n?1:e.minPriceEstimate>=100&&t.minPriceEstimate<=100?-1:+(e.minPriceEstimate<=100&&t.minPriceEstimate>=100)});let t=document.querySelector("#inactiveItemsDiv");t.style.display="block";let n=t.querySelector("#inactiveItemCard"),i=t.querySelector("#inactiveItemList");i.innerHTML="";let o=document.querySelector("#itemMoreMenu");for(let t of e.data){let e=n.cloneNode(!0);e.id=t.id;let r=t.images?.modelImageLarge||t.images?.modelImage||t.images?.enhancedFrontImageLarge||t.images?.enhancedFrontImage||t.images?.frontImageLarge||t.images?.frontImage;e.querySelector(".img-container").style.backgroundImage=`url("${r}")`,e.querySelector(".inactive-card-brand").innerText=`${t.cleanedBrand||t.brand?.trim()}`,e.querySelector(".inactive-card-category").innerText=`${t.category||""}`,e.querySelector(".inactive-card-reason").innerText="Avslutad",f(t.category)&&(e.querySelector(".in-season-label").style.display="block",t.minPriceEstimate>100&&(e.querySelector(".restart-button").href=`/sell-item?id=${t.id}&type=${"Draft"===t.status?"draft":"resell"}`,e.querySelector(".restart-button").style.display="inline-block")),e.querySelector(".inactive-dots-button").style.display="block",e.querySelector(".inactive-dots-button").addEventListener("click",async e=>{o.style.display="block",setTimeout(()=>o.classList.add("sticky-bottom-show"),0),o.dataset.itemId=t.id,o.dataset.section="inactive",e.preventDefault(),e.stopPropagation()}),i.appendChild(e)}i.querySelectorAll("a").forEach(e=>e.addEventListener("click",linkClickTracker))}async function k(){let e=await callBackendApi("/api/items/wardrobe",{requiresAuth:!0});if(!e.data?.length)return;document.getElementById("wardrobeItemsDiv").style.display="block";let t=document.getElementById("wardrobeItemCard"),n=document.getElementById("wardrobeItemList");n.innerHTML="";let i=document.getElementById("itemMoreMenu");for(let o of e.data){let e=t.cloneNode(!0);e.id=o.id;let r=o.images?.modelImageLarge||o.images?.modelImage||o.images?.enhancedFrontImageLarge||o.images?.enhancedFrontImage||o.images?.frontImageLarge||o.images?.frontImage;r?(e.querySelector(".img-container").style.backgroundImage=`url("${r}")`,e.querySelector(".no-image-text").style.display="none"):e.querySelector(".img-container").style.display="none",e.addEventListener("click",()=>{location.href=`/sell-item?id=${o.id}&type=${"Draft"===o.status?"draft":"resell"}`}),e.querySelector(".resell-button").href=`/sell-item?id=${o.id}&type=${"Draft"===o.status?"draft":"resell"}`,e.querySelector(".resell-item-title").innerText=`${o.cleanedBrand||o.brand?.trim()}`,e.querySelector(".resell-subtext").innerText=`${[o.category,o.maiSize].filter(e=>e).join(", ")}`;let a=o.soldPlatform||"Mai purchase"===o.draftSource?`K\xf6pt via Mai`:"Digital receipt"===o.draftSource?"Från digitalt kvitto":"lwl"===o.draftSource?"Från LWL":"";e.querySelector(".resell-sub-subtext").innerText=a;let l=o.soldPlatform||"Mai purchase"===o.draftSource?"resellPurchaseButton":"Digital receipt"===o.draftSource?"resellDigitalReceiptButton":"lwl"===o.draftSource?"resellLwlButton":"";e.querySelector(".resell-button").id=l,e.querySelector("#wardrobeDotsButton").addEventListener("click",async e=>{i.style.display="block",setTimeout(()=>i.classList.add("sticky-bottom-show"),0),i.dataset.itemId=o.id,i.dataset.section="wardrobe",e.preventDefault(),e.stopPropagation()}),n.appendChild(e)}n.querySelectorAll("a").forEach(e=>e.addEventListener("click",linkClickTracker))}async function h(e){let t=0===e.length,n=!e.some(e=>"Sold"===e.status),i=await db.collection("users").doc(authUser.current.uid).get();i.data()?.oneTimeCommissionFreeCoupon==="Active"&&(!t&&n&&(document.getElementById("freeSellBoxTitle").innerHTML="Nästa försäljning är fri",document.getElementById("freeSellBoxText").innerHTML="Du har fått en fri försäljning av Mai"),document.getElementById("freeSellBox").style.display="block")}async function b(){document.getElementById("appPromoSection").style.display="none",authUser.current&&db.collection("users").doc(authUser.current.uid).update({elementViews:firebase.firestore.FieldValue.arrayUnion({elementID:"appPromoSection",timestamp:new Date})})}async function x(){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(document.getElementById("menuDownloadApp").style.display="block")}async function I(e){if(!user)return;let t=new Date,n=0,i=0,o=user.current?.elementViews?user.current.elementViews.reverse().find(e=>"npsSurvey"===e.elementID):null,r=o?new Date("string"!=typeof o?1e3*o.seconds:o):null,a=r?Math.floor((t.getTime()-r.getTime())/864e5):null;e&&e.forEach(e=>{if(e.publishedDate&&!e.archived){let o=new Date(e.publishedDate),r=Math.floor((t.getTime()-o.getTime())/864e5);r>n&&(n=r),(r<i||0===i&&r>0)&&(i=r)}}),n>=25&&i<=60&&(!r||a>90)&&!document.referrer.includes("feedback-nps")&&(location.href="/feedback-nps")}async function B(e){if(e&&e.length)try{let t=[];e.forEach(e=>t.push(e.id));let n=t.slice(0,10).map(e=>`items=${e}`).join("&")+"&number=20",i=await callBackendApi(`/api/items/recommendations?${n}`,{requiresAuth:!0});if(!i.data.length)return;document.getElementById("recommendedItemsDiv").style.display="block";let o=document.getElementById("recommendedItemsList");o.innerHTML="";let r=[],a=0;for(let e of i.data){r.includes(e.maiSize)||r.push(e.maiSize);let t=e.images.modelImageLarge||e.images.modelImage||e.images.enhancedFrontImageLarge||e.images.enhancedFrontImage,n=`<div class="div-block-14-big"><a id="recommendedItemCard${a++}" href="${e.platformListings.maiShop.url}"/><div class="ratio-box _16-9"><div class="conten-block with-image">
                        <div class="img-container" style="background-image: url('${t}')"></div></div></div>
                        <div class="recently-added-text-block">
                            <div class="recent-added-items-subheader">${e.cleanedBrand}</div>
                            <div class="recent-added-items-subheader-category">${e.category}, ${e.maiSize}</div>
                            <div class="recently-added-price">${e.platformListings.maiShop.currentPrice} kr</div>
                            <div class="recently-added-brands-link-text">Mai Shop</div>
                        </div><a/></div>`;o.innerHTML+=n}o.querySelectorAll("a").forEach(e=>e.addEventListener("click",linkClickTracker)),document.getElementById("goToMaiShopLinkRecommendations").setAttribute("href",`https://shop.maiapp.se/collections/damklader/${i.data[0].sex||"Woman"}?sort_by=created-descending&filter.p.m.global.size=${r.join("&filter.p.m.global.size=")}`);let l=new IntersectionObserver((e,t)=>{let n=o.getBoundingClientRect();n.top>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(console.log("Recommendations viewed"),analytics.track("Element Viewed",{elementID:"recommendedItems"}),l.disconnect())},{threshold:1,root:null});l.observe(o)}catch(e){errorHandler.report(e),console.log("error",e)}}function S(){document.getElementById("triggerPickupToastClose").click()}function w(){document.getElementById("triggerFeedbackFormClose").click(),setTimeout(function(){location.reload()},400)}async function T(){let e="";for(var t=document.getElementsByName("Pickup"),n=0;n<t.length;n++)t[n].checked&&(e=t[n].value);db.collection("items").doc(pickupFlowItemId).update({pickupDate:e,shippingMethod:"Pickup"}).then(t=>{console.log(`pickupDate '${e}' and shippingMethod 'Pickup' is now updated on Firestore item`),S(),document.getElementById("triggerFeedbackFormOpen").click()})}async function E(e){let t=db.collection("items").doc(pickupFlowItemId);await t.update({happinessRate:e}).then(function(){console.log("happinessRate is now set on Firestore item"),happinessQuestionDiv.style.display="none",openQuestionDiv.style.display="block",feedbackSubmitButton.style.display="block"})}async function L(){let e=feedbackTextField.value,t=db.collection("items").doc(pickupFlowItemId);await t.update({feedbackText:e}).then(function(){console.log("feedbackText is now set on Firestore item"),w()})}async function D(){document.getElementById("approvedSaleInfoBox").style.display="none",document.getElementById("darkOverlay").classList.remove("active")}async function C(){document.getElementById("darkOverlay").classList.remove("active"),document.getElementById("trustedSellerBottomSheet").classList.remove("active");try{await callBackendApi("/api/users",{data:{data:{trustedSellerStatusChange:{type:user.current?.trustedSellerStatusChange?.type,timestamp:new Date,seen:!0}}},method:"PUT"})}catch(e){errorHandler.report(e),console.log("Error updating user",e)}}m&&(m?.referralData?.referralCode,u(m)),checkCookie("invite"),localStorage.removeItem("latestItemCreated"),sessionStorage.removeItem("itemToBeCreatedAfterSignIn"),console.log(`user ${user.current}`),user.whenSet(y),Webflow.push(function(){$("form").submit(function(){return!1})});let M=!1;function P(){console.log("onLoadHandler running"),menuSignoutButton.addEventListener("click",a.signOut),bookPickupForm.addEventListener("submit",T),closePickupToastIcon.addEventListener("click",S),closeFeedbackFormButton.addEventListener("click",w),happySmileyButton.addEventListener("click",function(){E(3)},!1),neutralSmileyButton.addEventListener("click",function(){E(2)},!1),angrySmileyButton.addEventListener("click",function(){E(1)},!1),feedbackSubmitButton.addEventListener("click",L),saveReferralCodeButton.addEventListener("click",async function(){saveRefCodeLoadingDiv.style.display="flex",saveReferralCodeButton.style.display="none";let e=referralCodeInput.value;await connectReferralUsers(e)}),closeBidToastButton.addEventListener("click",function(){(0,a.animateCloseToast)("bidToast")}),closeMeasurementsToastButton.addEventListener("click",function(){triggerMeasurementsToastClose.click()}),closeNewPriceToastButton.addEventListener("click",function(){triggerNewPriceToastClose.click()}),closeInviteToastButton.addEventListener("click",function(){triggerInviteToastClose.click()}),closeServicePointToastButton.addEventListener("click",function(){triggerServicePointToastClose.click()}),confirmServicePointButton.addEventListener("click",function(){document.getElementById("feedbackFormTitle").innerHTML="",triggerServicePointToastClose.click(),triggerFeedbackFormOpen.click()}),closeLongerPeriodToastButton.addEventListener("click",function(){triggerLongerPeriodToastClose.click()}),shareCodeButton.addEventListener("click",a.shareCode),sharePersonalLinkButton.addEventListener("click",a.shareCode),M=!0,menuButton.addEventListener("click",function(){Intercom("update",{hide_default_launcher:!0})}),closeMenuButton.addEventListener("click",function(){Intercom("update",{hide_default_launcher:!1})}),document.getElementById("closeAppPromo").addEventListener("click",function(e){console.log("Close button clicked!"),b()}),document.getElementById("darkOverlay").addEventListener("click",function(){C(),D(),(0,a.animateCloseToast)("bidToast")}),document.getElementById("closeTrustedSellerBottomSheet").addEventListener("click",C),document.getElementById("trustedSellerButton").addEventListener("click",C),document.getElementById("approvedSalesLines").addEventListener("click",function(){document.getElementById("approvedSaleInfoBox").style.display="block",document.getElementById("darkOverlay").classList.add("active")}),document.getElementById("closeApprovedSaleInfoBox").addEventListener("click",D)}localStorage.getItem("lwlItemDrafts")&&(location.href="/lwl?createDrafts=true"),window.addEventListener("load",P),console.log(`document.readyState ${document.readyState}`),"complete"!==document.readyState||M||(console.log("Running it since event listener did not"),P()),window.addEventListener("pageshow",e=>{e.persisted?(console.log("This page was restored from the bfcache."),"none"!==menu.style.display&&(menu.style.display="none")):console.log("This page was loaded normally.")}),window.intercomSettings={app_id:"klyy0le5"},function(){var e=window,t=e.Intercom;if("function"==typeof t)t("reattach_activator"),t("update",e.intercomSettings);else{var n=document,i=function(){i.c(arguments)};i.q=[],i.c=function(e){i.q.push(e)},e.Intercom=i;var o=function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://widget.intercom.io/widget/klyy0le5";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)};e.attachEvent?e.attachEvent("onload",o):e.addEventListener("load",o,!1)}}()},{"./general":"1tOWF","./infoRequestsFunctions":"21npA","./loadItemCards":"dxOtH","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"21npA":[function(e,t,n,i){let o,r,a,l;var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(n),s.export(n,"loadInfoRequests",()=>f);var d=e("./general");function c(e){return new Date(e&&"object"==typeof e&&void 0!==e._seconds?1e3*e._seconds+(e._nanoseconds||0)/1e6:e)}async function u(e,t){measurementDescriptionText.innerHTML=t,measurementsSubmitButton.addEventListener("click",async function(){let t=measurementsInput.value;t.length>0&&" "!==t&&await db.collection("items").doc(e).update({measurements:t,"infoRequests.measurements.status":"Resolved"}),triggerMeasurementsToastClose.click(),setTimeout(function(){location.reload()},400)}),triggerMeasurementsToastOpen.click()}async function m(e,t,n,i){if(!e)return;console.log("is this happening?");let o=10*Math.ceil(.7*n/10),r=10*Math.ceil(.8*n/10);priceAfterDiscount30.innerHTML=`(Priset blir ${o} kr)`,priceAfterDiscount20.innerHTML=`(Priset blir ${r} kr)`,priceNoDiscount.innerHTML=`(${n} kr)`,n>=140&&!i?(longerPeriodDescriptionText.innerHTML=`S\xe4ljperioden f\xf6r ditt ${t}-plagg har n\xe5tt sitt slut. V\xe4lj om du vill f\xf6rl\xe4nga s\xe4ljperioden med ytterligare 30 dagar och om du vill s\xe4nka priset f\xf6r att \xf6ka chansen att f\xe5 det s\xe5lt.`,discountFormDiv.style.display="block"):(longerPeriodDescriptionText.innerHTML=`S\xe4ljperioden f\xf6r ditt ${t}-plagg har n\xe5tt sitt slut. Vill du f\xf6rl\xe4nga s\xe4ljperioden med ytterligare 30 dagar eller avsluta f\xf6rs\xe4ljningen?`,discountFormDiv.style.display="none"),longerPeriodAcceptButton.addEventListener("click",async function(){let t=new Date().toISOString().split("T")[0],i=n,a=0;for(var l=document.getElementsByName("Discount"),s=0;s<l.length;s++)if(l[s].checked){let e=l[s].value;"30"===e&&(i=o,a=30),"20"===e&&(i=r,a=20)}await db.collection("items").doc(e).update({longerPeriodAcceptedDate:t,"infoRequests.longerPeriod.status":"Resolved","infoRequests.longerPeriod.response":"Accepted",longerPeriodAcceptedDiscount:a,minPriceEstimate:i}),triggerLongerPeriodToastClose.click(),setTimeout(function(){location.reload()},300)}),longerPeriodDenyButton.addEventListener("click",async function(){await db.collection("items").doc(e).update({"infoRequests.longerPeriod.status":"Resolved","infoRequests.longerPeriod.response":"Denied",status:"Unsold"}),triggerLongerPeriodToastClose.click(),setTimeout(function(){location.reload()},300)}),triggerLongerPeriodToastOpen.click()}async function g(e,t,n,i){if(!e)return;bidButtonsContainer.style.visibility="visible",bidButtonsContainer.style.visibility="visible",bidPriceText.innerHTML=`${n} kr`;let o=new Date,r=Math.floor((c(i).getTime()-o.getTime())/6e4),s=Math.floor(r/60),u=Math.floor(r%60);bidDescription.innerHTML=`Budet ligger under ditt l\xe4gsta pris p\xe5 ${t} kr. Giltigt i ${s} tim och ${u} min.`,bidAcceptButton.removeEventListener("click",a);let m=async function(){try{acceptBidLoading.style.display="block",acceptBidButtonText.style.display="none",await callBackendApi(`/api/items/${e}/infoRequests`,{method:"PUT",data:{type:"bid",response:"Accepted"}}),acceptBidLoading.style.display="none",acceptBidButtonText.style.display="block",bidTitle.style.visibility="hidden",bidButtonsContainer.style.visibility="hidden",bidPriceText.style.transition="opacity 0.3s ease",bidDescription.style.transition="opacity 0.3s ease",bidPriceText.style.opacity="0",bidDescription.style.opacity="0",setTimeout(()=>{bidPriceText.innerHTML="Toppen!",bidDescription.innerHTML="När köparen betalat får du ett SMS om att det är sålt och redo att skickas.",bidPriceText.style.opacity="1",bidDescription.style.opacity="1"},300),(0,d.hideInfoRequestCard)(`infoRequestBid-${e}`)}catch(e){console.error("Failed to accept bid:",e)}};bidAcceptButton.addEventListener("click",m),a=m,bidDenyButton.removeEventListener("click",l);let g=async function(){await db.collection("items").doc(e).update({"infoRequests.bid.status":"Resolved","infoRequests.bid.response":"Denied"}),(0,d.animateCloseToast)("bidToast"),(0,d.hideInfoRequestCard)(`infoRequestBid-${e}`)};bidDenyButton.addEventListener("click",g),l=g,(0,d.animateOpenToast)("bidToast")}async function p(e,t,n,i,o){if(console.log("storePriceResponse",e,t,n,i),"Accepted"===i&&await db.collection("items").doc(e).update({"infoRequests.price.status":"Resolved","infoRequests.price.response":"Accepted",maxPriceEstimate:t,minPriceEstimate:n}).then(function(){triggerNewPriceToastClose.click(),setTimeout(function(){location.reload()},300)}),"Denied"===i){let t={"infoRequests.price.status":"Resolved","infoRequests.price.response":"Denied"};"New"===o&&(t.archived=!0,t.willNotSell=!0),await db.collection("items").doc(e).update(t).then(function(){triggerNewPriceToastClose.click(),setTimeout(function(){location.reload()},300)})}}async function y(e,t,n,i,a,l,s,d,c,u){console.log("openNewPriceToast",e,t,n,i,a,l,s,d,c,u),previousMinPrice.style.display="none",previousMaxPrice.style.display="none",maxPriceDiv.style.display="block",minPriceDiv.style.display="block",newPriceToastTitle.innerHTML="Nytt lägsta pris",newPriceHeading.innerHTML=`${a}-plagg`;let m=s.toLowerCase();m&&"null"!==m&&(newPriceHeading.innerHTML=`${a}-${m}`),maxPrice.innerHTML=n,minPrice.innerHTML=i,c&&"null"!==c&&""!==c&&"undefined"!==c&&n!==c&&(previousMaxPrice.innerHTML=c,previousMaxPrice.style.display="block"),u&&"null"!==u&&""!==u&&"undefined"!==u&&i!==u&&(previousMinPrice.innerHTML=u,previousMinPrice.style.display="block"),acceptNewPriceButton.innerHTML="Sälj med nytt pris",denyNewPriceButton.innerHTML="Sänk ej","New"===t&&"Valuation"===d&&(newPriceToastTitle.innerHTML="Värdering",acceptNewPriceButton.innerHTML="Sälj till värdering",denyNewPriceButton.innerHTML="Avböj och avsluta"),"Adjusted ML Valuation"===d&&(newPriceToastTitle.innerHTML="Nytt prisintervall"),"Valuation"!==d&&"Adjusted ML Valuation"!==d&&(minPrice.innerHTML=`${i} kr`,maxPriceDiv.style.display="none"),l&&"undefined"!==l&&""!==l&&"null"!==l&&(newPriceText.innerHTML=l,descriptionDiv.style.display="block"),acceptNewPriceButton.removeEventListener("click",o);let g=()=>{p(e,n,i,"Accepted",t)};acceptNewPriceButton.addEventListener("click",g),o=g,denyNewPriceButton.removeEventListener("click",r);let y=()=>{p(e,n,i,"Denied",t)};denyNewPriceButton.addEventListener("click",y),r=y,triggerNewPriceToastOpen.click()}function f(e){console.log("loadInfoRequests");let t=document.getElementById("infoRequestBidTemplate").cloneNode(!0),n=document.getElementById("infoRequestMeasurementsTemplate").cloneNode(!0),i=document.getElementById("infoRequestLongerPeriodTemplate").cloneNode(!0),o=document.getElementById("infoRequestImagesTemplate").cloneNode(!0),r=document.getElementById("infoRequestValuationTemplate").cloneNode(!0),a=document.getElementById("infoRequestsList");a.replaceChildren(),(e||[]).forEach(e=>{let l=e.id,s=e.infoRequests,p=e.status,f=e.brand.replace(/'/g,""),v=e.minPriceEstimate,k=e.maxPriceEstimate,h=e?.infoRequests?.price?.response==="Denied",b=e.archived,x=e.category,I=(0,d.itemCoverImage)(e);void 0==b&&"Unsold"!==p&&"Sold"!==p&&s&&function(){for(let e in console.log("displayRequests",s),s)if(s[e]?.status==="Active"){let d=s[e].description;if(d&&(d=d.replace(/'/g,"")),"price"===e){let t=s[e].type,n=r.cloneNode(!0);n.id=`infoRequestPrice-${l}`,n.querySelector(".img-container").style.backgroundImage=`url('${I}')`,n.querySelector("a .pricebuttontext").innerText="Se prisförslag",n.querySelector(".text-block-72").innerText="Vill du sänka priset och få det sålt?",a.appendChild(n),"New"===p&&"Adjusted ML Valuation"!==t?(n.querySelector("a .pricebuttontext").innerText="Se värdering",n.querySelector(".text-block-72").innerText="Vill du sälja till vår värdering?",n.querySelector("a").href=`/item-valuation?id=${l}`):setTimeout(()=>{let n=s[e].maxPrice,i=s[e].minPrice;document.querySelector(`#infoRequestPrice-${l} a`).addEventListener("click",async()=>{await y(l,p,n,i,f,d,x,t,k,v)})},0)}if("measurements"===e){let e=n.cloneNode(!0);e.id=`infoRequestMeasurements-${l}`,e.querySelector(".img-container").style.backgroundImage=`url('${I}')`,a.appendChild(e),setTimeout(()=>{document.querySelector(`#infoRequestMeasurements-${l} a`).addEventListener("click",async()=>{await u(l,d)})},0)}if("images"===e){let e=o.cloneNode(!0);e.id=`infoRequestImages-${l}`,e.querySelector(".img-container").style.backgroundImage=`url('${I}')`,e.querySelector("a").href=`/edit-item?id=${l}`,a.appendChild(e)}if("longerPeriod"===e){let e=i.cloneNode(!0);e.id=`infoRequestLongerPeriod-${l}`,e.querySelector(".img-container").style.backgroundImage=`url('${I}')`,a.appendChild(e),setTimeout(()=>{document.querySelector(`#infoRequestLongerPeriod-${l} a`).addEventListener("click",async()=>{await m(l,f,v,h)})},0)}if("bid"===e){let n=s[e].expires,i=new Date,o=c(n);if(console.log("Expired?: ",o>i),o>i){console.log("We try to show it!");let i=t.cloneNode(!0);i.id=`infoRequestBid-${l}`,i.querySelector(".img-container").style.backgroundImage=`url('${I}')`,a.appendChild(i),setTimeout(()=>{document.querySelector(`#infoRequestBid-${l} a`).addEventListener("click",async()=>{let t=s[e].price;await g(l,v,t,n)})},0)}}a.children.length>0&&(infoRequestsDiv.style.display="block")}}()})}},{"./general":"1tOWF","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"2G59s":[function(e,t,n,i){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");async function r(e,t,n=null){try{return await a(e,t,n)}catch(i){if("ImageResizeError"!==i.name)return console.error("Failed to upload image",i),errorHandler.report(i),await a(e,t,n);throw console.error("Failed to resize image",i),errorHandler.report(i),i}}async function a(e,t,n=null){let i;n||sessionStorage.getItem("newItemId")||sessionStorage.setItem("newItemId",await u());let o=n||sessionStorage.getItem("newItemId");try{i=await l(e),console.log(`Scaled image size: ${(i.size/1024/1024).toFixed(2)} MB`)}catch(t){let e=Error("Failed to resize image");throw e.name="ImageResizeError",e.originalError=t,e}if(!i)throw Error("Fel vid bearbetning av vald bild.");let r=new FormData;r.append("itemId",o),r.append("fileName",t),r.append("file",i),r.append("temporary",!n),r.append("generateSmallImage","true");let s=await fetch(`${BACKEND_API_URL}/api/items/${o}/uploadImage`,{method:"POST",body:r});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);return await s.json()}async function l(e){if(e.size<5242880)return Promise.resolve(e);if("createImageBitmap"in window)try{return console.log("Attempting to scale image with createImageBitmap"),await s(e,3024,4032)}catch(e){console.warn("createImageBitmap scaling method failed",e)}if("OffscreenCanvas"in window)try{return console.log("Attempting to scale image with OffscreenCanvas"),await d(e,3024,4032)}catch(e){console.warn("OffscreenCanvas scaling method failed",e)}try{return console.log("Attempting to scale image with original method"),await c(e,3024,4032)}catch(e){throw console.error("All scaling methods failed",e),Error("Unable to process image")}}async function s(e,t,n){try{let i=await createImageBitmap(e),o=new OffscreenCanvas(t,n),r=o.getContext("2d"),{width:a,height:l}=i;return a>l?a>t&&(l*=t/a,a=t):l>n&&(a*=n/l,l=n),o.width=a,o.height=l,r.drawImage(i,0,0,a,l),await o.convertToBlob({type:"image/jpeg",quality:.9})}catch(e){throw console.error("Image scaling failed",e),Error("Unable to process image")}}async function d(e,t,n){let i=await createImageBitmap(e),o=i.width,r=i.height;o>r?o>t&&(r=t/o*r,o=t):r>n&&(o=n/r*o,r=n);let a=new OffscreenCanvas(o,r);return a.getContext("2d").drawImage(i,0,0,o,r),a.convertToBlob({type:"image/jpeg",quality:.9})}async function c(e,t,n){return new Promise((i,o)=>{let r=new Image;r.onload=()=>{let e=document.createElement("canvas"),o=r.width,a=r.height;o>a?o>t&&(a*=t/o,o=t):a>n&&(o*=n/a,a=n),e.width=o,e.height=a,e.getContext("2d").drawImage(r,0,0,o,a),e.toBlob(e=>{console.log(`Fallback resize: ${(e.size/1024/1024).toFixed(2)} MB`),i(e)},"image/jpeg",.9)},r.onerror=o,r.src=URL.createObjectURL(e)})}async function u(){try{return(await callBackendApi("/api/id",{method:"POST",requiresAuth:!1})).data.id}catch(e){return console.error(`Failed to fetch unique ID, generating uuidv4 id: ${e.message}`,e),uuidv4()}}async function m(e,t=!0){let n=await g(e);return n?.url&&(t&&y("enhancedFrontImage",n.url,n.urlSmall),f("frontImage",window.innerWidth<=370?n.urlSmall:n.url)),p("frontImage"),n}async function g(e){try{let t=await callBackendApi("/api/images/enhance",{data:{imageUrl:e},requiresAuth:!1,timeoutSec:30});return sessionStorage.setItem("enhancedFrontImage",t.data.url),t.data}catch(e){return errorHandler.report(e),console.error(e),""}}function p(e){document.getElementById(`loading${v(e)}Icon`).style.display="none",document.getElementById(`delete${v(e)}Icon`).style.display="inline-block","frontImage"===e&&(document.getElementById("enhancedAnimationDiv").style.display="none")}function y(e,t,n){let i=JSON.parse(localStorage.getItem("newItem")||JSON.stringify({})),o=i.images||{};o[e]=t,o[`${e}Small`]=n,i.images=o,localStorage.setItem("newItem",JSON.stringify(i))}function f(e,t){document.getElementById(`${e}Preview`).style.backgroundImage=`url('${t}')`,p(e)}function v(e){return e.charAt(0).toUpperCase()+e.slice(1)}async function k(e,t,n=!0){try{b(t);let i=URL.createObjectURL(e);document.getElementById(`${t}PreviewUploading`).style.backgroundImage=`url('${i}')`,document.getElementById(`${t}Preview`).style.backgroundImage=`url('${i}')`,I(t),x(t,"success-state");let{url:o,urlSmall:a}=await r(e,t);return n&&y(t,o,a),o}catch(n){console.error("Failed to upload image",n),errorHandler.report(n),document.getElementById(`${t}PreviewUploading`).style.backgroundImage="",document.getElementById(`${t}Preview`).style.backgroundImage="",document.getElementById(`loading${v(t)}Icon`).style.display="none",x(t,"default-state"),e.size>0xa00000?h(t,"Error: Bilden är för stor. Max 10 MB."):h(t,"Error: Något gick fel vid uppladdning, försök igen eller kontakt oss om felet kvarstår."),document.getElementById(t).value=""}}function h(e,t){let n=document.getElementById(e).parentNode.parentNode;n.querySelector(".w-file-upload-error").style.display="block",n.querySelector(".w-file-upload-error-msg").innerText=t}function b(e){document.getElementById(e).parentNode.parentNode.querySelector(".w-file-upload-error").style.display="none"}function x(e,t){let n=document.getElementById(e).parentNode.parentNode.childNodes;for(let e=0;e<n.length;e++)n[e].className.includes(t)?n[e].style.display="block":n[e].style.display="none"}function I(e){if("frontImage"===e){document.getElementById(`delete${v(e)}Icon`).style.display="none",document.getElementById(`loading${v(e)}Icon`).style.display="none",localStorage.getItem("sessionUser")||(document.getElementById("photoroomDiv").style.display="flex"),document.getElementById("enhancedAnimationDiv").style.display="block",triggerEnhancingAnimation.click();return}document.getElementById(`loading${v(e)}Icon`).style.display="inline-block",document.getElementById(`delete${v(e)}Icon`).style.display="none"}function B(e,t){let n=["shein","lager 157","divided","brandy melville","cubus","bubbleroom","bondelid","nelly","dobber","åhléns","kappahl","primark","jack & jones","sisters point","missguided","topman","bik bok","cubus","happy holly","zign","glamorous","hollister","river island","light before dark","bohoo","crocker","forever 21","maze","mint&berry","chiara forthi","zalando","din sko","pull & bear","svea","zoul","boohoo","gap","topshop","ellos","lager 157","stradivarius","studio total","indiska","bershka","shein","riley","vero moda","vila","don donna","aldo","new look denim"],i=document.getElementById("hardToSellDiv");return(document.getElementById("itemBrand").setCustomValidity(""),!getParamsObject().id&&(n.includes(e.toLowerCase())||!["boots","dunjacka","jacka","kängor","kappa","kavaj","kostym","pälsjacka","regnjacka","rock","skinnjacka","vinterskor"].includes(t?.toLowerCase())&&["tom tailor","monki","dressmann","urban outfitters","asos","holly & white","only","gina tricot"].includes(e.toLowerCase())||["baddräkt","bikini","bodysuit","chinos","flip-flops","halsduk","handduk","hatt","jeans","keps","långärmad t-shirt","linne","mjukisbyxor","morgonrock","mössa","necessär","piké","pyjamas","sandaler","sarong","shorts","slips","sport-bh","strumpbyxor","t-shirt","tights","topp","träningsbyxor","träningströja","underställ","vantar"].includes(t?.toLowerCase())&&["karl kani","rieker","uniqlo","carin wester","stockh lm","weekday","mango","wera","ichi","lindex","h&m","zara","mng","mq","cheap monday","h&m premium","na-kd","clarks","gant","hackett","hugo boss","la chemise","lacoste","lyle & scott","marc o'polo","melvin & hamilton","ray-ban","reebok","sebago","stenströms","the shirt factory","hampton republic","quicksilver","banana republic","pieces","sprit","denim","east west","xit","jacqueline de yong","mexx","fb sister","okänt","bodyflirt","dorothy perkins","fransa","laurel","rut&circle","soc","junkyard","soyaconcept","amisu","u.s. polo assn.","line of oslo","gossip","i say","jascha stockholm","noisy may","six ames","velour by nostalgi","house of lola","fiveunits","miss me","flash","champion","under armour","oasis","fornarina","isolde","rosebud","chiquelle","kaffe","mckinley","cream","abercrombie & fitch","modström","ecco","esprit","alice bizous","craft","ellesse","wesc","dry lake","röhnisch","acqua limone","anna field","le","ax paris","burton","hansen & jacob","lou in love","mad lady","selected homme","tenson","whistles","zizzi","gerry weber"].includes(e.toLowerCase())))?(hardToSellText.innerHTML=n.includes(e.toLowerCase())?`Vi s\xe4ljer tyv\xe4rr inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`:`Vi s\xe4ljer tyv\xe4rr inte kategorin ${t} fr\xe5n ${e} p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`,stopIcon.style.display="flex",warningIcon.style.display="none",i.style.display="block",document.getElementById("itemBrand").setCustomValidity(n.includes(e.toLowerCase())?`Vi s\xe4ljer inte plagg fr\xe5n ${e}`:`Vi s\xe4ljer inte kategorin '${t}' fr\xe5n ${e}`),!0):["H&M","HM","Zara","ASOS","Nelly","Gina Tricot","BikBok","Bik Bok","Lindex","Kappahl","Cubus","NA-KD","NAKD","Mango","Ellos","Primark","Shein","Vila","Forever 21","Pull & Bear","Bershka","Stradivarius"].some(t=>e.toLowerCase().includes(t.toLowerCase()))?(hardToSellText.innerHTML=`Vi s\xe4ljer i regel inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5gt andrahandsv\xe4rde. Undantag kan finnas.`,stopIcon.style.display="none",warningIcon.style.display="block",i.style.display="block",!0):void(i.style.display="none")}function S(e="Kategori",t=B){$("#itemCategory").select2({selectionCssClass:"form-field",placeholder:e||"Kategori",data:[{id:"",text:""},{text:"Överdelar",children:[{id:"Tröja",text:"Tröja"},{id:"Blus",text:"Blus"},{id:"Topp",text:"Topp"},{id:"Skjorta",text:"Skjorta"},{id:"Linneskjorta",text:"Linneskjorta"},{id:"T-shirt",text:"T-shirt"},{id:"Kavaj",text:"Kavaj"},{id:"Sweatshirt",text:"Sweatshirt"},{id:"Hoodie",text:"Hoodie"},{id:"Polotröja",text:"Polotröja"},{id:"Tunika",text:"Tunika"},{id:"Väst",text:"Väst"},{id:"Kofta",text:"Kofta"},{id:"Linne",text:"Linne"},{id:"Träningströja",text:"Träningströja"},{id:"Poncho",text:"Poncho"},{id:"Piké",text:"Piké"},{id:"Långärmad T-shirt",text:"Långärmad T-shirt"},{id:"Kostymväst",text:"Kostymväst"}]},{text:"Underdelar",children:[{id:"Kjol",text:"Kjol"},{id:"Byxor",text:"Byxor"},{id:"Jeans",text:"Jeans"},{id:"Chinos",text:"Chinos"},{id:"Fritidsbyxor",text:"Fritidsbyxor"},{id:"Träningsbyxor",text:"Träningsbyxor"},{id:"Tights",text:"Tights"},{id:"Strumpbyxor",text:"Strumpbyxor"},{id:"Mjukisbyxor",text:"Mjukisbyxor"},{id:"Kostymbyxor",text:"Kostymbyxor"},{id:"Shorts",text:"Shorts"},{id:"Sarong",text:"Sarong"}]},{text:"Helkropp",children:[{id:"Klänning",text:"Klänning"},{id:"Kaftan",text:"Kaftan"},{id:"Kostym",text:"Kostym"},{id:"Set",text:"Set"},{id:"Jumpsuit",text:"Jumpsuit"},{id:"Baddräkt",text:"Baddräkt"},{id:"Bikini",text:"Bikini"},{id:"Pyjamas",text:"Pyjamas"},{id:"Morgonrock",text:"Morgonrock"},{id:"Bröllopsklänning",text:"Bröllopsklänning"},{id:"Balklänning",text:"Balklänning"},{id:"Bodysuit",text:"Bodysuit"},{id:"Underställ",text:"Underställ"}]},{text:"Ytterkläder",children:[{id:"Jacka",text:"Jacka"},{id:"Kappa",text:"Kappa"},{id:"Rock",text:"Rock"},{id:"Fritidsjacka",text:"Fritidsjacka"},{id:"Trenchcoat",text:"Trenchcoat"},{id:"Skinnjacka",text:"Skinnjacka"},{id:"Dunjacka",text:"Dunjacka"},{id:"Regnjacka",text:"Regnjacka"},{id:"Pälsjacka",text:"Pälsjacka"}]},{text:"Skor",children:[{id:"Sneakers",text:"Sneakers"},{id:"Sandaler",text:"Sandaler"},{id:"Klackar",text:"Klackar"},{id:"Ballerinaskor",text:"Ballerinaskor"},{id:"Loafers",text:"Loafers"},{id:"Flip-flops",text:"Flip-flops"},{id:"Regnstövlar",text:"Regnstövlar"},{id:"Boots",text:"Boots"},{id:"Kängor",text:"Kängor"},{id:"Vinterskor",text:"Vinterskor"},{id:"Skor",text:"Annat (Skor)"}]},{text:"Väskor",children:[{id:"Axelremsväska",text:"Axelremsväska"},{id:"Handväska",text:"Handväska"},{id:"Kuvertväska",text:"Kuvertväska"},{id:"Ryggsäck",text:"Ryggsäck"},{id:"Träningsväska",text:"Träningsväska"},{id:"Resväska",text:"Resväska"},{id:"Datorväska",text:"Datorväska"},{id:"Väska",text:"Annat (Väska)"}]},{text:"Accessoarer",children:[{id:"Solglasögon",text:"Solglasögon"},{id:"Glasögon",text:"Glasögon"},{id:"Örhänge",text:"Örhänge"},{id:"Halsband",text:"Halsband"},{id:"Armband",text:"Armband"},{id:"Ring",text:"Ring"},{id:"Brosch",text:"Brosch"},{id:"Keps",text:"Keps"},{id:"Sjal",text:"Sjal"},{id:"Krage",text:"Krage"},{id:"Bälte",text:"Bälte"},{id:"Plånbok",text:"Plånbok"},{id:"Halsduk",text:"Halsduk"},{id:"Hatt",text:"Hatt"},{id:"Mössa",text:"Mössa"},{id:"Vantar",text:"Vantar"},{id:"Necessär",text:"Necessär"},{id:"Slips",text:"Slips"},{id:"Handduk",text:"Handduk"},{id:"Klocka",text:"Klocka"}]}]}),$("body").on("click",".select2-container--open .select2-results__group",function(){$(this).parent().attr("class").match(/expanded-group/)?$(this).parent().removeClass("expanded-group"):($(".expanded-group").first().removeClass("expanded-group"),$(this).parent().addClass("expanded-group"))});let n=!1;$("#itemCategory").on("select2:select",()=>{analytics.track("Click",{elementID:"itemCategoryValue"}),document.querySelector("#itemCategory").dispatchEvent(new Event("change"))});let i=!1;$("#itemCategory").on("select2:open",()=>{i||(i=!0,$("input.select2-search__field").on("click",()=>{analytics.track("Click",{elementID:"itemCategorySearch"})}))}),$("#itemCategory").on("select2:close",()=>{document.querySelector("body").style.overflow="auto",document.querySelector("body").style.position="static",document.querySelector("html").style.overflow="static"}),$("#itemCategory").on("select2:open",function(){if(analytics.track("Element Viewed",{elementID:"itemCategoryContainer"}),document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.position="fixed",document.querySelector("html").style.overflow="fixed",document.querySelector(".select2-search__field").placeholder="Sök... (t.ex. Klänning/Sneakers/Blus)",$(".select2-search__field").on("input",e=>{e.target.value.length>0?$(".select2-results__option[role=group]").each((e,t)=>$(t).addClass("expanded-group")):$(".expanded-group").each((e,t)=>$(t).removeClass("expanded-group"))}),!n){let e=document.getElementById("categoryPopUpHeader"),t=document.querySelector(".select2-dropdown");t.insertBefore(e,t.firstChild),e.style.display="block",e.querySelector("#categorySelectClose").onclick=()=>$("#itemCategory").select2("close"),n=!0}document.querySelector(".select2-results__options").addEventListener("scroll",()=>document.activeElement.blur())}),$("#itemCategory").on("change",e=>{w("itemCategoryLabel")(e);let n=document.getElementById("itemCategory");t(document.getElementById("itemBrand").value,n.value)}),$("#itemCategory").on("select2:open",function(){$(".select2-results").css("visibility","hidden")}),$("#itemCategory").on("select2:opening",function(){setTimeout(function(){$(".select2-results").css("visibility","visible")},50)})}function w(e){return t=>{document.getElementById(e).style.display=t.target.value.length>0?"inline-block":"none"}}o.defineInteropFlag(n),o.export(n,"uploadTempImage",()=>r),o.export(n,"requestUniqueId",()=>u),o.export(n,"enhanceFrontImage",()=>m),o.export(n,"showDeleteImageIcon",()=>p),o.export(n,"rememberNewItemImageField",()=>y),o.export(n,"showImagePreview",()=>f),o.export(n,"capitalizeFirstLetter",()=>v),o.export(n,"uploadImageAndShowPreview",()=>k),o.export(n,"showImageError",()=>h),o.export(n,"hideImageError",()=>b),o.export(n,"showImageState",()=>x),o.export(n,"showLoadingIcon",()=>I),o.export(n,"checkBlockedOrLowShareSoldBrand",()=>B),o.export(n,"initializeCategorySelect",()=>S),o.export(n,"fieldLabelToggle",()=>w),o.export(n,"colorMapping",()=>T),o.export(n,"colorName",()=>E),o.export(n,"swedishColorToEnglish",()=>L);let T={Beige:"Beige",Blue:"Blå",Brown:"Brun",Green:"Grön",Grey:"Grå",Yellow:"Gul",Gold:"Guld",Purple:"Lila",Navy:"Navy",Orange:"Orange",Pink:"Rosa",Red:"Röd",Silver:"Silver",Black:"Svart",Turquoise:"Turkos",Burgundy:"Vinröd",White:"Vit",Multicolour:"Flerfärgad"};function E(e){return T[e]||e}function L(e){return Object.entries(T).find(([t,n])=>n.toLowerCase()===e.toLowerCase())?.[0]||e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}]},["dxOtH"],"dxOtH","parcelRequire81ca");
//# sourceMappingURL=loadItemCards.js.map
