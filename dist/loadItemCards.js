!function(e,t,n,i,o){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r="function"==typeof a[i]&&a[i],l=r.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,n){if(!l[t]){if(!e[t]){var o="function"==typeof a[i]&&a[i];if(!n&&o)return o(t,!0);if(r)return r(t,!0);if(s&&"string"==typeof t)return s(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}m.resolve=function(n){var i=e[t][1][n];return null!=i?i:n},m.cache={};var u=l[t]=new d.Module(t);e[t][0].call(u.exports,m,u,u.exports,this)}return l[t].exports;function m(e){var t=m.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=l,d.parent=r,d.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(d,"root",{get:function(){return a[i]}}),a[i]=d;for(var c=0;c<t.length;c++)d(t[c]);if(n){var u=d(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd?define(function(){return u}):o&&(this[o]=u)}}({dxOtH:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"loadItemCards",()=>u);var o=e("./general"),a=e("./private");async function r(e,t){console.log(`storeShippingMethod(${e}, ${t}) is running`),await db.collection("items").doc(e).update({shippingMethod:t}).then(n=>{console.log(`Shipping method '${t}' stored on item with ID: `,e),window.pickupFlowItemId=e,"Service point"==t&&(document.getElementById("feedbackFormTitle").innerHTML="Tack, då vet vi att paketet snart lämnas till ett ombud.",document.getElementById("triggerShippingToastClose").click()),(0,a.closePickupToast)(),document.getElementById("triggerFeedbackFormOpen").click()})}function l(e,t){console.log(`openShippingToast(${e}, ${t})`),window.pickupFlowItemId=e,setTimeout(()=>{document.getElementById("servicePointButton").addEventListener("click",async()=>{await r(e,"Service point")}),document.getElementById("bookPickupButton").addEventListener("click",()=>{s(e,t)})},0),triggerShippingToastOpen.click()}function s(e,t,n="none"){console.log(`openPickupToast(${e}, ${t}) is running`),triggerShippingToastClose.click(),triggerServicePointToastClose.click(),changeToServicePointButton.addEventListener("click",async()=>{await r(e,"Service point")}),changeToServicePointButton.style.display=n,function(e){console.log(`setDatesOfPickupToast(${e}) is running`),radioFieldOne.style.display="none",radioFieldTwo.style.display="none",radioFieldThree.style.display="none",radioFieldFour.style.display="none";var t=new Date(e);t.setTime(t.getTime()+36e5),t.setDate(t.getDate()+4),6==t.getDay()||0==t.getDay()||1==t.getDay()||2==t.getDay()?t.setDate(t.getDate()+2):3==t.getDay()&&t.setDate(t.getDate()+1);var n=new Date(t);n.setDate(n.getDate()+1),6==n.getDay()&&n.setDate(n.getDate()+2);var i=new Date(n);i.setDate(i.getDate()+1),6==i.getDay()&&i.setDate(i.getDate()+2);var o=new Date(i);o.setDate(o.getDate()+1),6==o.getDay()&&o.setDate(o.getDate()+2);var a=["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],r=["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"];let l=new Date,s=0;console.log("Today",l),console.log("firstDate > today",t>l),console.log("secondDate > today",n>l),console.log("thirdDate > today",i>l),console.log("forthDate > today",o>l);let d=document.getElementById("pickupDateOne"),c=document.getElementById("pickupDateTwo"),u=document.getElementById("pickupDateThree"),m=document.getElementById("pickupDateFour");if(t>l&&($("#radioButtonOne").val(t.toISOString().split("T")[0]),d.innerHTML=a[t.getDay()]+", "+t.getDate()+" "+r[t.getMonth()]+", kl 9-16",radioFieldOne.style.display="flex",s++),n>l&&($("#radioButtonTwo").val(n.toISOString().split("T")[0]),c.innerHTML=a[n.getDay()]+", "+n.getDate()+" "+r[n.getMonth()]+", kl 9-16",radioFieldTwo.style.display="flex",s++),i>l&&($("#radioButtonThree").val(i.toISOString().split("T")[0]),u.innerHTML=a[i.getDay()]+", "+i.getDate()+" "+r[i.getMonth()]+", kl 9-16",radioFieldThree.style.display="flex",s++),o>l&&($("#radioButtonFour").val(o.toISOString().split("T")[0]),m.innerHTML=a[o.getDay()]+", "+o.getDate()+" "+r[o.getMonth()]+", kl 9-16",radioFieldFour.style.display="flex",s++),s<2){radioFieldOne.style.display="none",radioFieldTwo.style.display="none",radioFieldThree.style.display="none",radioFieldFour.style.display="none";var g=new Date;g.setDate(l.getDate()+1),0==g.getDay()?g.setDate(g.getDate()+1):6==g.getDay()&&g.setDate(g.getDate()+2);var p=new Date(g);p.setDate(p.getDate()+1),6==p.getDay()&&p.setDate(p.getDate()+2),console.log("dayOne: ",g),console.log("dayTwo: ",p),$("#radioButtonOne").val(g.toISOString().split("T")[0]),d.innerHTML=a[g.getDay()]+", "+g.getDate()+" "+r[g.getMonth()]+", kl 9-16",radioFieldOne.style.display="flex",$("#radioButtonTwo").val(p.toISOString().split("T")[0]),c.innerHTML=a[p.getDay()]+", "+p.getDate()+" "+r[p.getMonth()]+", kl 9-16",radioFieldTwo.style.display="flex"}}(t),window.pickupFlowItemId=e,triggerPickupAnimation.click()}function d(e,t,n,i){e.checked?(db.collection("items").doc(t).update({bagReceived:!0}).then(e=>{console.log("Stored in DB that bag is received for item with ID: ",t)}),"Pickup"===i)?s(t,n,"flex"):"Service point"===i?(console.log("openServicePointToast"),changeToPickupButton.addEventListener("click",()=>{s(t,n)}),triggerServicePointToastOpen.click()):l(t,n):db.collection("items").doc(t).update({bagReceived:!1}).then(e=>{console.log("Stored in DB that bag is NOT received for item with ID: ",t)})}function c(e,t,n){return`<div class="w-form">
            <form method="get" name="wf-form-" id="bagReceivedForm">
                <label class="w-checkbox checkbox-field-3">
                    <div class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-2"></div>
                    <input type="checkbox" id="bagReceivedCheckbox-${e}" style="opacity:0;position:absolute;z-index:-1">
                    <span class="checkbox-label-3 w-form-label">Etiketten har kommit</span>
                </label>
            </form>
        </div>`}function u(e){itemListSelling.innerHTML="",itemListSoldNotSent.innerHTML="",itemListSold.innerHTML="";var t=0;(e||[]).forEach(e=>{let n;var i=e.id,a=e.soldDate,r=e.status,u=e.shippingStatus,m=e.brand,g=e.soldPrice,p=e.sellerGets?Math.ceil(e.sellerGets):e.sellerGets,y=e.buyer?.FirstName||e.buyerFirstName,f=e.buyer?.City||e.buyerAddressCity,k=e.minPriceEstimate,v=e.maxPriceEstimate,h=e.infoRequests,b=e.pickupDate,x=e.shippingMethod,I=e.postnordQrCode,w=e.dhlLicensePlateBarcodeSrc,S=e.upsShipmentId,T=e.bagReceived,B=e.soldPlatform,L=e.archived,E=e.holidayMode,D=e.longerPeriodAcceptedDate;e.images;var M=(0,o.itemCoverImage)(e);let P="",C=e.publishedDate;if(C){C=new Date(C);let e=Math.round((D?60:30)-(new Date().getTime()-C.getTime())/864e5);P=e<=0?"0 dagar kvar":`${e} dagar kvar`}if(a){let e=new Date(a),t=new Date;e.setHours(0,0,0,0),t.setHours(0,0,0,0),n=Math.round((t-e)/864e5)}L||"Unsold"===r||function(){let e=window.location.origin+`/item?id=${i}`;if("Sold"!==r){let t="",n="";if("New"===r&&(h?.price?.status==="Active"?t=`<div class='text-block-34'>Inv\xe4ntar ditt svar</div>`:k&&v?(t=`<div class='text-block-34'>${k} - ${v} kr</div>`,n=`<div class='text-block-34'>F\xf6rbereds</div>`):t=`<div class='text-block-34'>V\xe4rdering p\xe5g\xe5r</div>`),"Published"===r&&k&&v){t=`<div class='text-block-34'>${k} - ${v} kr</div>`;let e=E?"Pausad":P;n=`<div class='text-block-34'>${e}</div>`}let i=`<div class="div-block-14-big"><a id="itemLinkBlock" href="${e}" class="link-block-18 w-inline-block"><div class="ratio-box _16-9"><div class="conten-block with-image"><div class="img-container" style="background-image: url('${M}');"></div></div></div><div class="text-block-14">${m}</div>${t}${n}</a></div>`;itemListSelling.innerHTML+=i,myItemsDiv.style.display="block",noItemsDiv.style.display="none",headerSellItemButton.style.display="block",sellButtonText.innerHTML="Sälj ett plagg"}else if("Sold"!=r||"Not sent"!=u&&u){var o=`<div class="item-card-small"><div class="ratio-box _16-9"><div class="conten-block with-image"><a id="itemLinkFromSoldBeforeSection" href="${e}"><div class="img-container" style="background-image: url('${M}');"></div></a></div></div><div class="text-block-14">${g} kr</div><div class='text-block-34'>Du fick ${p} kr</div></div>`;itemListSold.innerHTML+=o,soldItemsDiv.style.display="block",itemListSoldContainer.style.display="block",sellButtonText.innerHTML="Sälj ett plagg",t+=p,youEarnedDiv.innerHTML=`Du har tj\xe4nat ${Math.round(t).toLocaleString("en-US").replaceAll(","," ")} kr`}else{var L="",D="";let t="",o="";var C=`Du f\xe5r ${p}`,j="";if("Vestiaire Collective"===B&&n>7){let e;e=window.location.origin+`/sell-item?id=${i}`,L=`<a id="resellButton" href="${e}" class="link-block-39">
                            <div class="div-block-194">
                                            <div class="text-block-113">L\xe4gg upp p\xe5 nytt</div>
                            </div>
                    </a>`,C="Köparen avbröt köpet",j="Skickades ej inom 7 dagar"}else{if(null!=y&&null!=f&&g){let e=`S\xe5ld till ${y} i ${f} f\xf6r ${g} kr`,t="";e.split(" ").forEach(function(n){t.trim().length>e.length/2&&!t.includes("<br>")&&(t+="<br>"),t+=n+" "}),j=t.trim()}if("Service point"===x){if(w){let e;e=window.location.origin+`/ship-item?id=${i}`,L=`<a id="barcodeButton" href="${e}" class="link-block-39">
                            <div class="div-block-194">
                                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65418186f29682eaff3f74be_barcode-icon%20(1).svg" class="image-100">
                                            <div class="text-block-113">Visa streckkod</div>
                            </div>
                    </a>`,o="dhl"}else if("Vestiaire Collective"===B||"Grailed"===B)T||(L=c(i,a,x),S&&(o="ups"),setTimeout(()=>{document.getElementById(`bagReceivedCheckbox-${i}`).addEventListener("click",e=>{d(e.target,i,a,x)})},0));else if(I){let e;o="postnord",e=window.location.origin+`/ship-item?id=${i}`,L=`<a id="qrCodeButton" href="${e}" class="link-block-39">
                            <div class="div-block-194">
                                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63bdeaf1af902f05607f86ef_Group.svg" class="image-43">
                                            <div class="text-block-113">Visa QR</div>
                            </div>
                    </a>`}}"Pickup"===x&&(T?T&&!b&&(L=`<a id="bookPickupButton-${i}" href="#" class="link-block-39">
                            <div class="div-block-194">
                                <div class="text-block-113">Boka h\xe4mtning</div>
                            </div>
                    </a>`,setTimeout(()=>{document.getElementById(`bookPickUpButton-${i}`).addEventListener("click",()=>{s(i,a)})},0)):(L=c(i,a,x),setTimeout(()=>{document.getElementById(`bagReceivedCheckbox-${i}`).addEventListener("click",e=>{d(e.target,i,a,x)})},0))),D=function(e,t,n,i,o,a){let r="",l=o&&(!o||"Pickup"!=t||i)?"":'<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg" class="image-44">',s=window.location.origin+`/ship-item?id=${e}`;if("Service point"==t){let e="6297d3d527db5dd4cf02e924/6399ac2a3505ee6071fbc18a_Vector%20(1).svg";"postnord"===a&&(e="6297d3d527db5dd4cf02e924/655d182c37fc30df71b078cd_postnord-square-icon%20(1).svg"),"dhl"===a&&(e="6297d3d527db5dd4cf02e924/655d1830f259c0bc084c2937_dhl-square-icon%20(1).svg"),"ups"===a&&(e="6297d3d527db5dd4cf02e924/6603eaef0d5af57f5cce2e40_ups-squared-icon.jpg"),r+=`
                        <img src="https://global-uploads.webflow.com/${e}" class="shipper-icon">
                        <div class="next-step-text-small">L\xe4mnas till ombud</div>
                        ${l}
                    `}else if("Pickup"==t){if(i){var d=new Date(i),c=d.getDate(),u=["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"][d.getMonth()],m=["Sön","Mån","Tis","Ons","Tors","Fre","Lör"][d.getDay()];r+=`
                                <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg" class="image-45">
                                <div class="next-step-text-small">${m+", "+c+" "+u+", kl 9-16"}</div>`}else r+=`
                            <img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg" class="image-45">
                            <div class="next-step-text-small">Upph\xe4mtning</div>
                            ${l}
                        `}return`
                        <a id="shipItemPageLink" href="${s}" class="link-block-40">
                                ${r}
                        </a>`}(i,x,0,b,T,o),T&&("Service point"===x||"Pickup"===x&&b)&&(D='<div class="spacing-15-px"></div>'+D,t+=`
          <a id="changeShippingMethodA-${i}" href="#">
              <div id="changeShippingMethod-${i}" class="change-shipping-method-text">\xc4ndra frakts\xe4tt</div>
          </a>`,setTimeout(()=>{document.getElementById(`changeShippingMethodA-${i}`).addEventListener("click",()=>{l(i,a)})},0))}var F="";F=`<div class="div-block-118"><div class="div-block-45"><div class="div-block-43"><div class="ratio-box _16-9"><div class="content-block with-image"><a id="itemLinkFromSoldNotSentSection" href="${e}"><div class="img-container" style="background-image: url('${M}');"></div></a></div></div></div><div class="div-block-46">
          <a id="youGetLink-${i}" href="#" class="you-get-link">
              <div class="text-block-43">${C}</div>
              ${"Köparen avbröt köpet"!==C?'<img src="https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg" class="you-get-info-icon"></img>':""}
          </a>
          <div class="text-block-44">${j}</div>
                      ${L}
                      ${D}
                      ${t}
                  </div></div></div></div>`,setTimeout(()=>{document.getElementById(`youGetLink-${i}`).addEventListener("click",()=>{console.log(`clicked youGetLink-${i}`),function(e,t){priceAfterPlatformFee.innerHTML=e;let n=e-t;commissionAmount.innerHTML=0===n?"-":"-"+n,n/e>.9&&n/e<.11&&(commissionTitle.innerHTML="Rabatterad kommission (10%)"),n/e>.19&&n/e<.21&&(commissionTitle.innerHTML="Kommission (20%)"),n/e>.29&&n/e<.31&&50!==n&&500!==n&&(commissionTitle.innerHTML="Kommission (30%)"),n<1&&(commissionTitle.innerHTML="Fri kommission (0%)"),youGetAmount.innerHTML=t,youGetInfoBox.style.display="flex",darkOverlay.style.display="block",closeYouGetInfoBox.addEventListener("click",()=>{youGetInfoBox.style.display="none",darkOverlay.style.display="none"})}(g,p)})},0),itemListSoldNotSent.innerHTML+=F,soldNotSentDiv.style.display="block",noItemsDiv.style.display="none",headerSellItemButton.style.display="block",sellButtonText.innerHTML="Sälj ett plagg"}}()}),loadingDiv.style.display="none",sectionsDiv.style.display="block",analytics.track("Element Viewed",{elementID:"sectionsDiv"}),quickInfoDiv.style.display="block"}},{"./general":"1tOWF","./private":"flS2m","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"1tOWF":[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function o(){firebase.auth().signOut().then(()=>{console.log("User signed out"),authUser.current=null,user.current=null,userId=null,localStorage.removeItem("sessionUser"),localStorage.removeItem("idToken"),localStorage.removeItem("authUserId"),localStorage.removeItem("authUser"),deleteCookie("maiAuth"),location.href="/"}).catch(e=>{errorHandler.report(e),console.log(e)})}function a(e){document.getElementById("addressFirstName").value=e.addressFirstName||"",document.getElementById("addressFirstName").dispatchEvent(new Event("input")),document.getElementById("addressLastName").value=e.addressLastName||"",document.getElementById("addressLastName").dispatchEvent(new Event("input")),document.getElementById("addressStreetAddress").value=e.addressStreetAddress||"",document.getElementById("addressStreetAddress").dispatchEvent(new Event("input")),document.getElementById("addressCO").value=e.addressCO||"",document.getElementById("addressCO").dispatchEvent(new Event("input")),document.getElementById("addressPostalCode").value=e.addressPostalCode||"",document.getElementById("addressPostalCode").dispatchEvent(new Event("input")),document.getElementById("addressCity").value=e.addressCity||"",document.getElementById("addressCity").dispatchEvent(new Event("input")),document.getElementById("addressDoorCode").value=e.addressDoorCode||"",document.getElementById("addressDoorCode").dispatchEvent(new Event("input"))}function r(){let e=document.getElementById("addressFirstName").value,t=document.getElementById("addressLastName").value,n=document.getElementById("addressStreetAddress").value,i=document.getElementById("addressCO").value,o=document.getElementById("addressPostalCode").value,a=document.getElementById("addressCity").value,r=document.getElementById("addressDoorCode").value;return e=e?e.trim().charAt(0).toUpperCase()+e.trim().slice(1):"",t=t?t.trim().charAt(0).toUpperCase()+t.trim().slice(1):"",n=n?n.trim().charAt(0).toUpperCase()+n.trim().slice(1):"",i=i?i.trim():"",{addressFirstName:e,addressLastName:t,addressStreetAddress:n,addressCO:i,addressPostalCode:o=o?o.trim().replace(/\D/g,""):"",addressCity:a=a?a.trim().charAt(0).toUpperCase()+a.trim().slice(1):"",addressDoorCode:r=r?r.trim():""}}function l(e){return 10===(e=e.replace(/\D/g,"").split("").reverse().slice(0,10)).length&&0==e.map(e=>Number(e)).reduce((e,t,n)=>(n%2&&(t*=2),t>9&&(t-=9),e+t))%10}function s(e){let t=e.replace("-","");return(12!==t.length&&("19"!==t.substring(0,2)||"20"!==t.substring(0,2))&&(t=99>=Number(t.substring(0,2))&&Number(t.substring(0,2))>25?"19"+t:"20"+t),12===t.length)?t:null}function d(e){let t=e.images;return t.modelImage?t.modelImageSmall||t.modelImage:t.coverImage?t.coverImageSmall||t.coverImage:t.enhancedFrontImage?t.enhancedFrontImageSmall||t.enhancedFrontImage:t.frontImageSmall||t.frontImage}function c(){let e=user.current.referralData.referralCode,t=`Hej! F\xf6lj min personliga l\xe4nk s\xe5 s\xe4ljer Mai ditt f\xf6rsta plagg kostnadsfritt! Mai sk\xf6ter f\xf6rs\xe4ljningen av dina kl\xe4der, inklusive v\xe4rdering, l\xe4gger ut p\xe5 flera plattformar samtidigt, har kontakten med k\xf6pare och ordnar med frakt n\xe4r det blir s\xe5lt. Man f\xe5r sj\xe4lv beh\xe5lla 80% av vinsten, och blir det inte s\xe5lt kostar det ingenting.

Om du registrerar dig med min kod (f\xf6lj l\xe4nken) och provar s\xe4lja ett plagg inom 7 dagar f\xe5r du beh\xe5lla 100% av vinsten f\xf6r det f\xf6rsta plagget (ist\xe4llet f\xf6r 80%). Min kod: ${e}`;if(navigator.share)navigator.share({text:t,url:`https://maiapp.se/?invite=${e}`}).then(()=>{console.log("Thanks for sharing!")}).catch(e=>{console.error(e),errorHandler.report(e)});else{console.log("Browser doesn't support navigator.share => Copy to clipboard!");let n=t+"\n"+`https://maiapp.se/?invite=${e}`;navigator.clipboard.writeText(n),linkCopiedBanner.style.display="flex",setTimeout(function(){linkCopiedBanner.style.display="none"},1500)}}i.defineInteropFlag(n),i.export(n,"signOut",()=>o),i.export(n,"setFormAddressFields",()=>a),i.export(n,"getFormAddressFields",()=>r),i.export(n,"isValidSwedishSsn",()=>l),i.export(n,"formatPersonalId",()=>s),i.export(n,"itemCoverImage",()=>d),i.export(n,"shareCode",()=>c)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],bNgzC:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}],flS2m:[function(e,t,n){var i,o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(n),o.export(n,"updateIC",()=>s),o.export(n,"closePickupToast",()=>h);var a=e("./general"),r=e("./infoRequestsFunctions"),l=e("./loadItemCards");function s(e,t,n){let i=t,o=n;null===i&&(i=""),null===o&&(o=""),window.intercomSettings={app_id:"klyy0le5",user_id:`${e}`},db.collection("users").doc(e).get().then(t=>{if(t.exists){let a=t.data(),r="",l="";a.addressFirstName&&(r=a.addressFirstName+" "+a.addressLastName,l=a.addressCity),a.phoneNumber&&(o=a.phoneNumber);var n={mai_user_id:`${e}`,user_id:`${e}`,phone:`${o}`,email:`${i}`,name:`${r}`,city:`${l}`};Intercom("update",n)}else console.log("No such user document exist!")}).catch(e=>{errorHandler.report(e),console.log("Error getting document:",e)})}function d(e){let t,n;console.log("Prepare menu",e.signInMethod),"phone"===e.signInMethod&&e.phoneNumber?(t=e.phoneNumber,n="Inloggad med SMS-kod"):"password"===e.signInMethod&&e.email?(t=e.email,n="Inloggad med email"):"google.com"===e.signInMethod&&e.email&&(t=e.email,n="Inloggad med Google"),t&&(account.innerHTML=t,account.style.display="block",accountSignInMethod.innerHTML=n,accountSignInMethod.style.display="block"),e.addressFirstName&&e.addressLastName&&(accountName.innerHTML=e.addressFirstName+" "+e.addressLastName,accountName.style.display="block"),e?.referralData?.referralCode&&(referralCodeText.innerHTML=e.referralData.referralCode,headerInviteButton.style.display="flex",menuInviteLink.style.display="block")}e("./sellItemHelpers");let c=JSON.parse(localStorage.getItem("sessionUser"));async function u(){try{let e=await callBackendApi("/api/bags/orders/allowed",{requiresAuth:!0});e?.data?.maxOrderBags>0&&(document.getElementById("orderBagsSection").style.display="block")}catch(e){console.log(e)}}async function m(e){let t,n="",i="",o=!0,a=!1,r=!1,l=!1;await db.collection("items").where("user","==",e).where("status","==","Sold").orderBy("soldDate").get().then(e=>{e.forEach(e=>{e.data().status,n=e.data().shippingStatus;let t=e.data().payoutStatus;"Not sent"===n&&(r=!0),"Payed"!==t&&(a=!0)})}),await db.collection("users").doc(e).get().then(e=>{i=e.data().addressFirstName,t=e.data().personalId;let n=e.data()?.preferences?.shippingMethod;t?""===t&&(o=!1):o=!1,"Pickup"==n&&(l=!0)}),!0==r&&void 0==i&&l&&(location.href="/address-form"),!0==a&&!1==o&&(location.href="/personal-id-form")}async function g(){var e;if(console.log("privateMain running"),!user.current)return;s(i=authUser.current.uid,authUser.current.email||sessionStorage.getItem("email"),authUser.current.phoneNumber||sessionStorage.getItem("phoneNumber")),m(i),(e=document.getElementById("itemListSoldByOthers")).innerHTML="",db.collection("items").where("status","==","Sold").orderBy("soldDate","desc").limit(30).get().then(t=>{t.forEach(t=>{var n=t.data().user,o=t.data().brand,r=t.data().soldPrice,l=(0,a.itemCoverImage)(t.data());if(n!=i&&r>=200){var s=`<div class="div-block-14"><div class="ratio-box _16-9"><div class="conten-block with-image"><div class="img-container" style="background-image: url('${l}');"></div></div></div><div class="text-block-14">${r} kr</div><div class='text-block-34'>${o}</div></div>`;e.innerHTML+=s}})}),soldByOthersDiv.style.display="block",setPreferredLogInMethodCookie(authUser.current.providerData[0].providerId);let t=(await callBackendApi("/api/items",{requiresAuth:!0}))?.data;!function(e){let t=new Date,n=10,i=0,o=user.current?.elementViews?user.current.elementViews.filter(e=>"inviteToast"===e.elementID):[],a=o.length?Array.from(o,e=>parseInt(Math.floor((t.getTime()-1e3*e.timestamp.seconds)/864e5))):[],r=a.length?Math.min(...a):null,l=!!o.length;e&&e.forEach(e=>{let o=e.soldDate,a=e.status;if(e.shippingStatus,!e.archived&&"Sold"===a&&o&&(i++,o)){o=new Date(o);let e=Math.floor((t.getTime()-o.getTime())/864e5);e<=n&&(n=e)}}),user.current?.referralData?.referralCode&&(!l||r>45)&&(n<=7||i>=3&&n<=45)&&(referralCodeText.innerHTML=user.current.referralData.referralCode,triggerInviteToastOpen.click(),db.collection("users").doc(authUser.current.uid).update({elementViews:firebase.firestore.FieldValue.arrayUnion({elementID:"inviteToast",timestamp:new Date})}),analytics.track("Element Viewed",{elementID:"inviteToast"}))}(t);let n=checkCookie("invite");n&&await connectReferralUsers(n),checkCookie("photo_invite")&&!localStorage.getItem("photoShootBooked")&&(photoShootOffer.style.display="block",bonusSection.style.display="block"),document.getElementById("stickyBottomClose").addEventListener("click",()=>{itemMoreMenu.classList.remove("sticky-bottom-show"),setTimeout(()=>itemMoreMenu.style.display="none",500)}),document.getElementById("stickyBottomDelete").addEventListener("click",async()=>{itemMoreMenu.classList.remove("sticky-bottom-show"),setTimeout(()=>itemMoreMenu.style.display="none",500),document.getElementById(itemMoreMenu.dataset.itemId).style.display="none","inactive"===itemMoreMenu.dataset.section?(Array.from(document.getElementById("inactiveItemList").children).find(e=>"none"!==e.style.display)||(document.getElementById("inactiveItemsDiv").style.display="none"),await callBackendApi(`/api/items/unsold/${itemMoreMenu.dataset.itemId}`,{method:"DELETE"})):(Array.from(document.getElementById("wardrobeItemList").children).find(e=>"none"!==e.style.display)||(document.getElementById("wardrobeItemsDiv").style.display="none"),await callBackendApi(`/api/items/wardrobe/${itemMoreMenu.dataset.itemId}`,{method:"DELETE",data:{itemId:itemMoreMenu.dataset.itemId}}))}),await Promise.all([f(),u(),y()]),(0,l.loadItemCards)(t),window.location.href.endsWith("#wardrobe")&&setTimeout(()=>{document.getElementById("wardrobeItemsDiv").scrollIntoView({behavior:"smooth",block:"center"})},600),k(t),v(t),showReferralSection(),showBonusSection(),d(user.current),(0,r.loadInfoRequests)(t),t&&t.forEach(e=>{let t=e.status;if(!e.archived&&"Published"===t&&e.publishedDate){let t=new Date(e.publishedDate);45>=Math.floor((new Date().getTime()-t.getTime())/864e5)&&(document.getElementById("holidayModeDiv").style.display="block",document.getElementById("openHolidayChat").onclick=()=>Intercom("showNewMessage","När reser du iväg, och när är du tillbaka?\n\n"))}}),user.current&&user.current.addressFirstName&&user.current.addressLastName&&!user.current?.referralData?.referralCode&&await createReferralCode()}function p(e){if(!e||["Tröja","Blus","Topp","Skjorta","Linneskjorta","T-shirt","Kavaj","Sweatshirt","Hoodie","Polotröja","Tunika","Väst","Kofta","Linne","Träningströja","Poncho","Piké","Långärmad T-shirt","Kostymväst","Kjol","Byxor","Jeans","Chinos","Fritidsbyxor","Träningsbyxor","Tights","Strumpbyxor","Mjukisbyxor","Kostymbyxor","Sarong","Klänning","Kaftan","Kostym","Set","Jumpsuit","Baddräkt","Bikini","Pyjamas","Morgonrock","Bröllopsklänning","Balklänning","Bodysuit","Jacka","Kappa","Rock","Fritidsjacka","Trenchcoat","Skinnjacka","Regnjacka","Sneakers","Klackar","Ballerinaskor","Loafers","Boots","Kängor","Skor","Axelremsväska","Handväska","Kuvertväska","Ryggsäck","Träningsväska","Resväska","Datorväska","Väska","Solglasögon","Glasögon","Örhänge","Halsband","Armband","Ring","Brosch","Keps","Sjal","Krage","Bälte","Plånbok","Hatt","Necessär","Slips","Handduk","Klocka"].includes(e))return!0;let t=new Date,n=new Date(t.getFullYear(),7,15),i=new Date(t.getFullYear(),3,15);return!!["Underställ","Dunjacka","Pälsjacka","Vinterskor","Halsduk","Mössa","Vantar"].includes(e)&&(t<=i||t>=n)||["Shorts","Sandaler","Flip-flops"].includes(e)&&t>=i&&t<=n}async function y(){let e=await callBackendApi("/api/items/unsold",{requiresAuth:!0});if(!e.data?.length)return;e.data.sort((e,t)=>{let n=p(e.category),i=p(t.category);return n&&!i?-1:i&&!n?1:e.minPriceEstimate>=100&&t.minPriceEstimate<=100?-1:e.minPriceEstimate<=100&&t.minPriceEstimate>=100?1:0});let t=document.querySelector("#inactiveItemsDiv");t.style.display="block";let n=t.querySelector("#inactiveItemCard"),i=t.querySelector("#inactiveItemList");i.innerHTML="";let o=document.querySelector("#itemMoreMenu");for(let t of e.data){let e=n.cloneNode(!0);e.id=t.id;let a=t.images?.modelImageLarge||t.images?.modelImage||t.images?.enhancedFrontImageLarge||t.images?.enhancedFrontImage||t.images?.frontImageLarge||t.images?.frontImage;e.querySelector(".img-container").style.backgroundImage=`url("${a}")`,e.querySelector(".inactive-card-brand").innerText=`${t.cleanedBrand||t.brand?.trim()}`,e.querySelector(".inactive-card-category").innerText=`${t.category||""}`,e.querySelector(".inactive-card-reason").innerText="Avslutad",p(t.category)&&(e.querySelector(".in-season-label").style.display="block",t.minPriceEstimate>100&&(e.querySelector(".restart-button").href=`/sell-item?id=${t.id}&type=${"Draft"===t.status?"draft":"resell"}`,e.querySelector(".restart-button").style.display="inline-block")),e.querySelector(".inactive-dots-button").style.display="block",e.querySelector(".inactive-dots-button").addEventListener("click",async e=>{o.style.display="block",setTimeout(()=>o.classList.add("sticky-bottom-show"),0),o.dataset.itemId=t.id,o.dataset.section="inactive",e.preventDefault(),e.stopPropagation()}),i.appendChild(e)}i.querySelectorAll("a").forEach(e=>e.addEventListener("click",linkClickTracker))}async function f(){let e=await callBackendApi("/api/items/wardrobe",{requiresAuth:!0});if(!e.data?.length)return;document.getElementById("wardrobeItemsDiv").style.display="block";let t=document.getElementById("wardrobeItemCard"),n=document.getElementById("wardrobeItemList");n.innerHTML="";let i=document.getElementById("itemMoreMenu");for(let o of e.data){let e=t.cloneNode(!0);e.id=o.id;let a=o.images?.modelImageLarge||o.images?.modelImage||o.images?.enhancedFrontImageLarge||o.images?.enhancedFrontImage||o.images?.frontImageLarge||o.images?.frontImage;a?(e.querySelector(".img-container").style.backgroundImage=`url("${a}")`,e.querySelector(".no-image-text").style.display="none"):e.querySelector(".img-container").style.display="none",e.addEventListener("click",()=>{location.href=`/sell-item?id=${o.id}&type=${"Draft"===o.status?"draft":"resell"}`}),e.querySelector(".resell-button").href=`/sell-item?id=${o.id}&type=${"Draft"===o.status?"draft":"resell"}`,e.querySelector(".resell-item-title").innerText=`${o.cleanedBrand||o.brand?.trim()}`,e.querySelector(".resell-subtext").innerText=`${[o.category,o.maiSize].filter(e=>e).join(", ")}`;let r=o.soldPlatform||"Mai purchase"===o.draftSource?`K\xf6pt via Mai`:"Digital receipt"===o.draftSource?"Från digitalt kvitto":"lwl"===o.draftSource?"Från LWL":"";e.querySelector(".resell-sub-subtext").innerText=r;let l=o.soldPlatform||"Mai purchase"===o.draftSource?"resellPurchaseButton":"Digital receipt"===o.draftSource?"resellDigitalReceiptButton":"lwl"===o.draftSource?"resellLwlButton":"";e.querySelector(".resell-button").id=l,e.querySelector("#wardrobeDotsButton").addEventListener("click",async e=>{i.style.display="block",setTimeout(()=>i.classList.add("sticky-bottom-show"),0),i.dataset.itemId=o.id,i.dataset.section="inactive",e.preventDefault(),e.stopPropagation()}),n.appendChild(e)}n.querySelectorAll("a").forEach(e=>e.addEventListener("click",linkClickTracker));let o=new IntersectionObserver((e,t)=>{let i=n.getBoundingClientRect();i.top>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(console.log("Wardrobe viewed"),analytics.track("Element Viewed",{elementID:"wardrobeItemsDiv"}),o.disconnect())},{threshold:1,root:null});o.observe(n)}async function k(e){if(!user)return;let t=new Date,n=0,i=0,o=user.current?.elementViews?user.current.elementViews.reverse().find(e=>"npsSurvey"===e.elementID):null,a=o?new Date(1e3*o.timestamp.seconds):null,r=a?Math.floor((t.getTime()-a.getTime())/864e5):null;e&&e.forEach(e=>{if(e.publishedDate&&!e.archived){let o=new Date(e.publishedDate),a=Math.floor((t.getTime()-o.getTime())/864e5);a>n&&(n=a),(a<i||0===i&&a>0)&&(i=a)}}),n>=25&&i<=60&&(!a||r>90)&&!document.referrer.includes("feedback-nps")&&(location.href="/feedback-nps")}async function v(e){if(e&&e.length)try{let t=[];e.forEach(e=>t.push(e.id));let n=t.slice(0,10).map(e=>`items=${e}`).join("&")+"&number=20",i=await callBackendApi(`/api/items/recommendations?${n}`,{requiresAuth:!0});if(!i.data.length)return;document.getElementById("recommendedItemsDiv").style.display="block";let o=document.getElementById("recommendedItemsList");o.innerHTML="";let a=[],r=0;for(let e of i.data){a.includes(e.maiSize)||a.push(e.maiSize);let t=e.images.modelImageLarge||e.images.modelImage||e.images.enhancedFrontImageLarge||e.images.enhancedFrontImage,n=`<div class="div-block-14-big"><a id="recommendedItemCard${r++}" href="${e.platformListings.maiShop.url}"/><div class="ratio-box _16-9"><div class="conten-block with-image">
                        <div class="img-container" style="background-image: url('${t}')"></div></div></div>
                        <div class="recently-added-text-block">
                            <div class="recent-added-items-subheader">${e.cleanedBrand}</div>
                            <div class="recent-added-items-subheader-category">${e.category}, ${e.maiSize}</div>
                            <div class="recently-added-price">${e.platformListings.maiShop.currentPrice} kr</div>
                            <div class="recently-added-brands-link-text">Mai Shop</div>
                        </div><a/></div>`;o.innerHTML+=n}o.querySelectorAll("a").forEach(e=>e.addEventListener("click",linkClickTracker)),document.getElementById("goToMaiShopLinkRecommendations").setAttribute("href",`https://shop.maiapp.se/collections/damklader/${i.data[0].sex||"Woman"}?sort_by=created-descending&filter.p.m.global.size=${a.join("&filter.p.m.global.size=")}`);let l=new IntersectionObserver((e,t)=>{let n=o.getBoundingClientRect();n.top>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(console.log("Recommendations viewed"),analytics.track("Element Viewed",{elementID:"recommendedItems"}),l.disconnect())},{threshold:1,root:null});l.observe(o)}catch(e){errorHandler.report(e),console.log("error",e)}}function h(){document.getElementById("triggerPickupToastClose").click()}function b(){document.getElementById("triggerFeedbackFormClose").click(),setTimeout(function(){location.reload()},400)}async function x(){let e="";for(var t=document.getElementsByName("Pickup"),n=0;n<t.length;n++)t[n].checked&&(e=t[n].value);db.collection("items").doc(pickupFlowItemId).update({pickupDate:e,shippingMethod:"Pickup"}).then(t=>{console.log(`pickupDate '${e}' and shippingMethod 'Pickup' is now updated on Firestore item`),h(),document.getElementById("triggerFeedbackFormOpen").click()})}async function I(e){let t=db.collection("items").doc(pickupFlowItemId);await t.update({happinessRate:e}).then(function(){console.log("happinessRate is now set on Firestore item"),happinessQuestionDiv.style.display="none",openQuestionDiv.style.display="block",feedbackSubmitButton.style.display="block"})}async function w(){let e=feedbackTextField.value,t=db.collection("items").doc(pickupFlowItemId);await t.update({feedbackText:e}).then(function(){console.log("feedbackText is now set on Firestore item"),b()})}c&&(c?.referralData?.referralCode,d(c)),checkCookie("invite"),localStorage.removeItem("latestItemCreated"),sessionStorage.removeItem("itemToBeCreatedAfterSignIn"),console.log(`user ${user.current}`),user.whenSet(g),Webflow.push(function(){$("form").submit(function(){return!1})});let S=!1;function T(){console.log("onLoadHandler running"),menuSignoutButton.addEventListener("click",a.signOut),bookPickupForm.addEventListener("submit",x),closePickupToastIcon.addEventListener("click",h),closeFeedbackFormButton.addEventListener("click",b),happySmileyButton.addEventListener("click",function(){I(3)},!1),neutralSmileyButton.addEventListener("click",function(){I(2)},!1),angrySmileyButton.addEventListener("click",function(){I(1)},!1),feedbackSubmitButton.addEventListener("click",w),saveReferralCodeButton.addEventListener("click",async function(){saveRefCodeLoadingDiv.style.display="flex",saveReferralCodeButton.style.display="none";let e=referralCodeInput.value;await connectReferralUsers(e)}),closeMeasurementsToastButton.addEventListener("click",function(){triggerMeasurementsToastClose.click()}),closeNewPriceToastButton.addEventListener("click",function(){triggerNewPriceToastClose.click()}),closeInviteToastButton.addEventListener("click",function(){triggerInviteToastClose.click()}),closeServicePointToastButton.addEventListener("click",function(){triggerServicePointToastClose.click()}),confirmServicePointButton.addEventListener("click",function(){document.getElementById("feedbackFormTitle").innerHTML="",triggerServicePointToastClose.click(),triggerFeedbackFormOpen.click()}),closeLongerPeriodToastButton.addEventListener("click",function(){triggerLongerPeriodToastClose.click()}),shareCodeButton.addEventListener("click",a.shareCode),sharePersonalLinkButton.addEventListener("click",a.shareCode),S=!0,menuButton.addEventListener("click",function(){Intercom("update",{hide_default_launcher:!0})}),closeMenuButton.addEventListener("click",function(){Intercom("update",{hide_default_launcher:!1})})}localStorage.getItem("lwlItemDrafts")&&(location.href="/lwl?createDrafts=true"),window.addEventListener("load",T),console.log(`document.readyState ${document.readyState}`),"complete"!==document.readyState||S||(console.log("Running it since event listener did not"),T()),window.addEventListener("pageshow",e=>{e.persisted?(console.log("This page was restored from the bfcache."),"none"!==menu.style.display&&(menu.style.display="none")):console.log("This page was loaded normally.")}),window.intercomSettings={app_id:"klyy0le5"},function(){var e=window,t=e.Intercom;if("function"==typeof t)t("reattach_activator"),t("update",e.intercomSettings);else{var n=document,i=function(){i.c(arguments)};i.q=[],i.c=function(e){i.q.push(e)},e.Intercom=i;var o=function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://widget.intercom.io/widget/klyy0le5";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)};e.attachEvent?e.attachEvent("onload",o):e.addEventListener("load",o,!1)}}()},{"./general":"1tOWF","./infoRequestsFunctions":"21npA","./loadItemCards":"dxOtH","./sellItemHelpers":"2G59s","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"21npA":[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"loadInfoRequests",()=>d);var o=e("./general");async function a(e,t){measurementDescriptionText.innerHTML=t,measurementsSubmitButton.addEventListener("click",async function(){let t=measurementsInput.value;t.length>0&&" "!==t&&await db.collection("items").doc(e).update({measurements:t,"infoRequests.measurements.status":"Resolved"}),triggerMeasurementsToastClose.click(),setTimeout(function(){location.reload()},400)}),triggerMeasurementsToastOpen.click()}async function r(e,t,n,i){if(!e)return;console.log("is this happening?");let o=10*Math.ceil(.7*n/10),a=10*Math.ceil(.8*n/10);priceAfterDiscount30.innerHTML=`(Priset blir ${o} kr)`,priceAfterDiscount20.innerHTML=`(Priset blir ${a} kr)`,priceNoDiscount.innerHTML=`(${n} kr)`,n>=140&&!i?(longerPeriodDescriptionText.innerHTML=`S\xe4ljperioden f\xf6r ditt ${t}-plagg har n\xe5tt sitt slut. V\xe4lj om du vill f\xf6rl\xe4nga s\xe4ljperioden med ytterligare 30 dagar och om du vill s\xe4nka priset f\xf6r att \xf6ka chansen att f\xe5 det s\xe5lt.`,discountFormDiv.style.display="block"):(longerPeriodDescriptionText.innerHTML=`S\xe4ljperioden f\xf6r ditt ${t}-plagg har n\xe5tt sitt slut. Vill du f\xf6rl\xe4nga s\xe4ljperioden med ytterligare 30 dagar eller avsluta f\xf6rs\xe4ljningen?`,discountFormDiv.style.display="none"),longerPeriodAcceptButton.addEventListener("click",async function(){let t=new Date().toISOString().split("T")[0],i=n,r=0;for(var l=document.getElementsByName("Discount"),s=0;s<l.length;s++)if(l[s].checked){let e=l[s].value;"30"===e&&(i=o,r=30),"20"===e&&(i=a,r=20)}await db.collection("items").doc(e).update({longerPeriodAcceptedDate:t,"infoRequests.longerPeriod.status":"Resolved","infoRequests.longerPeriod.response":"Accepted",longerPeriodAcceptedDiscount:r,minPriceEstimate:i}),triggerLongerPeriodToastClose.click(),setTimeout(function(){location.reload()},300)}),longerPeriodDenyButton.addEventListener("click",async function(){await db.collection("items").doc(e).update({"infoRequests.longerPeriod.status":"Resolved","infoRequests.longerPeriod.response":"Denied",status:"Unsold"}),triggerLongerPeriodToastClose.click(),setTimeout(function(){location.reload()},300)}),triggerLongerPeriodToastOpen.click()}async function l(e,t,n,i,o){if(console.log("storePriceResponse",e,t,n,i),"Accepted"===i&&await db.collection("items").doc(e).update({"infoRequests.price.status":"Resolved","infoRequests.price.response":"Accepted",maxPriceEstimate:t,minPriceEstimate:n}).then(function(){triggerNewPriceToastClose.click(),setTimeout(function(){location.reload()},300)}),"Denied"===i){let t={"infoRequests.price.status":"Resolved","infoRequests.price.response":"Denied"};"New"===o&&(t.archived=!0,t.willNotSell=!0),await db.collection("items").doc(e).update(t).then(function(){triggerNewPriceToastClose.click(),setTimeout(function(){location.reload()},300)})}}async function s(e,t,n,i,o,a,r,s,d,c){console.log("openNewPriceToast",e,t,n,i,o,a,r,s,d,c),previousMinPrice.style.display="none",previousMaxPrice.style.display="none",maxPriceDiv.style.display="block",minPriceDiv.style.display="block",newPriceToastTitle.innerHTML="Nytt lägsta pris",newPriceHeading.innerHTML=`${o}-plagg`;let u=r.toLowerCase();u&&"null"!==u&&(newPriceHeading.innerHTML=`${o}-${u}`),maxPrice.innerHTML=n,minPrice.innerHTML=i,d&&"null"!==d&&""!==d&&"undefined"!==d&&n!==d&&(previousMaxPrice.innerHTML=d,previousMaxPrice.style.display="block"),c&&"null"!==c&&""!==c&&"undefined"!==c&&i!==c&&(previousMinPrice.innerHTML=c,previousMinPrice.style.display="block"),acceptNewPriceButton.innerHTML="Sälj med nytt pris",denyNewPriceButton.innerHTML="Sänk ej","New"===t&&"Valuation"===s&&(newPriceToastTitle.innerHTML="Värdering",acceptNewPriceButton.innerHTML="Sälj till värdering",denyNewPriceButton.innerHTML="Avböj och avsluta"),"Adjusted ML Valuation"===s&&(newPriceToastTitle.innerHTML="Nytt prisintervall"),"Valuation"!==s&&"Adjusted ML Valuation"!==s&&(minPrice.innerHTML=`${i} kr`,maxPriceDiv.style.display="none"),a&&"undefined"!==a&&""!==a&&"null"!==a&&(newPriceText.innerHTML=a,descriptionDiv.style.display="block"),acceptNewPriceButton.addEventListener("click",()=>{l(e,n,i,"Accepted",t)}),denyNewPriceButton.addEventListener("click",()=>{l(e,n,i,"Denied",t)}),triggerNewPriceToastOpen.click()}function d(e){let t=document.getElementById("infoRequestMeasurementsTemplate").cloneNode(!0),n=document.getElementById("infoRequestLongerPeriodTemplate").cloneNode(!0),i=document.getElementById("infoRequestImagesTemplate").cloneNode(!0),l=document.getElementById("infoRequestValuationTemplate").cloneNode(!0),d=document.getElementById("infoRequestsList");d.replaceChildren(),(e||[]).forEach(e=>{let c=e.id,u=e.infoRequests,m=e.status,g=e.brand.replace(/'/g,""),p=e.minPriceEstimate,y=e.maxPriceEstimate,f=e?.infoRequests?.price?.response==="Denied",k=e.archived,v=e.category,h=(0,o.itemCoverImage)(e);void 0==k&&"Unsold"!==m&&"Sold"!==m&&u&&function(){for(let e in u)if(u[e]?.status==="Active"){let o=u[e].description;if(o&&(o=o.replace(/'/g,"")),"price"===e){let t=u[e].type,n=l.cloneNode(!0);n.id=`infoRequestPrice-${c}`,n.querySelector(".img-container").style.backgroundImage=`url('${h}')`,n.querySelector("a .pricebuttontext").innerText="Se prisförslag",n.querySelector(".text-block-72").innerText="Vill du sänka priset och få det sålt?",d.appendChild(n),"New"===m&&"Adjusted ML Valuation"!==t?(n.querySelector("a .pricebuttontext").innerText="Se värdering",n.querySelector(".text-block-72").innerText="Vill du sälja till vår värdering?",n.querySelector("a").href=`/item-valuation?id=${c}`):setTimeout(()=>{let n=u[e].maxPrice,i=u[e].minPrice;document.querySelector(`#infoRequestPrice-${c} a`).addEventListener("click",async()=>{await s(c,m,n,i,g,o,v,t,y,p)})},0)}if("measurements"===e){let e=t.cloneNode(!0);e.id=`infoRequestMeasurements-${c}`,e.querySelector(".img-container").style.backgroundImage=`url('${h}')`,d.appendChild(e),setTimeout(()=>{document.querySelector(`#infoRequestMeasurements-${c} a`).addEventListener("click",async()=>{await a(c,o)})},0)}if("images"===e){let e=i.cloneNode(!0);e.id=`infoRequestImages-${c}`,e.querySelector(".img-container").style.backgroundImage=`url('${h}')`,e.querySelector("a").href=`/edit-item?id=${c}`,d.appendChild(e)}if("longerPeriod"===e){let e=n.cloneNode(!0);e.id=`infoRequestLongerPeriod-${c}`,e.querySelector(".img-container").style.backgroundImage=`url('${h}')`,d.appendChild(e),setTimeout(()=>{document.querySelector(`#infoRequestLongerPeriod-${c} a`).addEventListener("click",async()=>{await r(c,g,p,f)})},0)}infoRequestsDiv.style.display="block"}}()})}},{"./general":"1tOWF","@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}],"2G59s":[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");async function o(e,t){sessionStorage.getItem("newItemId")||sessionStorage.setItem("newItemId",await r());let n=sessionStorage.getItem("newItemId"),i=await a(e);if(!i)throw"Fel vid bearbetning av vald bild.";let o=new FormData;o.append("itemId",n),o.append("fileName",t),o.append("file",i),o.append("temporary","true"),o.append("generateSmallImage","true");let l=await fetch(`${BACKEND_API_URL}/api/items/${n}/uploadImage`,{method:"POST",body:o});return await l.json()}async function a(e){return e.size<9437184?Promise.resolve(e):new Promise((t,n)=>{let i=new FileReader;i.onload=()=>{let e=document.createElement("img");e.onload=()=>{let n=e.width,i=e.height;n>i?n>1512&&(i=1512/n*i,n=1512):i>2016&&(n=2016/i*n,i=2016);let o=document.createElement("canvas");o.width=n,o.height=i;let a=o.getContext("2d");a.imageSmoothingQuality="high",a.drawImage(e,0,0,n,i),o.toBlob(t,"image/jpeg")},e.src=i.result,i.onerror=n},i.readAsDataURL(e)})}async function r(){try{return(await callBackendApi("/api/id",{method:"POST",requiresAuth:!1})).data.id}catch(e){return console.error(`Failed to fetch unique ID, generating uuidv4 id: ${e.message}`,e),uuidv4()}}async function l(e,t=!0){let n=await s(e);return n?.url&&(t&&c("enhancedFrontImage",n.url,n.urlSmall),u("frontImage",window.innerWidth<=370?n.urlSmall:n.url)),d("frontImage"),n}async function s(e){try{let t=await callBackendApi("/api/images/enhance",{data:{imageUrl:e},requiresAuth:!1});return sessionStorage.setItem("enhancedFrontImage",t.data.url),t.data}catch(e){return errorHandler.report(e),console.error(e),""}}function d(e){document.getElementById(`loading${m(e)}Icon`).style.display="none",document.getElementById(`delete${m(e)}Icon`).style.display="inline-block","frontImage"===e&&(document.getElementById("enhancedAnimationDiv").style.display="none")}function c(e,t,n){let i=JSON.parse(localStorage.getItem("newItem")||JSON.stringify({})),o=i.images||{};o[e]=t,o[`${e}Small`]=n,i.images=o,localStorage.setItem("newItem",JSON.stringify(i))}function u(e,t){document.getElementById(`${e}Preview`).style.backgroundImage=`url('${t}')`,d(e)}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}async function g(e,t,n=!0){try{document.getElementById(t).parentNode.parentNode.querySelector(".w-file-upload-error").style.display="none";let i=URL.createObjectURL(e);document.getElementById(`${t}PreviewUploading`).style.backgroundImage=`url('${i}')`,document.getElementById(`${t}Preview`).style.backgroundImage=`url('${i}')`,f(t),y(t,"success-state");let{url:a,urlSmall:r}=await o(e,t);return n&&c(t,a,r),a}catch(n){console.error("Failed to upload image",n),errorHandler.report(n),document.getElementById(`${t}PreviewUploading`).style.backgroundImage="",document.getElementById(`${t}Preview`).style.backgroundImage="",document.getElementById(`loading${m(t)}Icon`).style.display="none",y(t,"default-state"),e.size>10485760?p(t,"Error: Bilden är för stor. Max 10 MB."):p(t,"Error: Något gick fel vid uppladdning, försök igen eller kontakt oss om felet kvarstår."),document.getElementById(t).value=""}}function p(e,t){let n=document.getElementById(e).parentNode.parentNode;n.querySelector(".w-file-upload-error").style.display="block",n.querySelector(".w-file-upload-error-msg").innerText=t}function y(e,t){let n=document.getElementById(e).parentNode.parentNode.childNodes;for(let e=0;e<n.length;e++)n[e].className.includes(t)?n[e].style.display="block":n[e].style.display="none"}function f(e){if("frontImage"===e){document.getElementById(`delete${m(e)}Icon`).style.display="none",document.getElementById(`loading${m(e)}Icon`).style.display="none",localStorage.getItem("sessionUser")||(document.getElementById("photoroomDiv").style.display="flex"),document.getElementById("enhancedAnimationDiv").style.display="block",triggerEnhancingAnimation.click();return}document.getElementById(`loading${m(e)}Icon`).style.display="inline-block",document.getElementById(`delete${m(e)}Icon`).style.display="none"}function k(e,t){let n=["shein","lager 157","divided","brandy melville","cubus","bubbleroom","bondelid","nelly","dobber","åhléns","kappahl","primark","jack & jones","sisters point","missguided","topman","bik bok","cubus","happy holly","zign","glamorous","hollister","river island","light before dark","bohoo","crocker","forever 21","maze","mint&berry","chiara forthi","zalando","din sko","pull & bear","svea","zoul","boohoo","gap","topshop","ellos","lager 157","stradivarius","studio total","indiska","bershka","shein","riley","vero moda","vila","don donna","aldo","new look denim"],i=document.getElementById("hardToSellDiv");return(document.getElementById("itemBrand").setCustomValidity(""),!getParamsObject().id&&(n.includes(e.toLowerCase())||!["boots","dunjacka","jacka","kängor","kappa","kavaj","kostym","pälsjacka","regnjacka","rock","skinnjacka","vinterskor"].includes(t?.toLowerCase())&&["tom tailor","monki","dressmann","urban outfitters","asos","holly & white","only","gina tricot"].includes(e.toLowerCase())||["baddräkt","bikini","bodysuit","chinos","flip-flops","halsduk","handduk","hatt","jeans","keps","långärmad t-shirt","linne","mjukisbyxor","morgonrock","mössa","necessär","piké","pyjamas","sandaler","sarong","shorts","slips","sport-bh","strumpbyxor","t-shirt","tights","topp","träningsbyxor","träningströja","underställ","vantar"].includes(t?.toLowerCase())&&["karl kani","rieker","uniqlo","carin wester","stockh lm","weekday","mango","wera","ichi","lindex","h&m","zara","mng","mq","cheap monday","h&m premium","na-kd","clarks","gant","hackett","hugo boss","la chemise","lacoste","lyle & scott","marc o'polo","melvin & hamilton","ray-ban","reebok","sebago","stenströms","the shirt factory","hampton republic","quicksilver","banana republic","pieces","sprit","denim","east west","xit","jacqueline de yong","mexx","fb sister","okänt","bodyflirt","dorothy perkins","fransa","laurel","rut&circle","soc","junkyard","soyaconcept","amisu","u.s. polo assn.","line of oslo","gossip","i say","jascha stockholm","noisy may","six ames","velour by nostalgi","house of lola","fiveunits","miss me","flash","champion","under armour","oasis","fornarina","isolde","rosebud","chiquelle","kaffe","mckinley","cream","abercrombie & fitch","modström","ecco","esprit","alice bizous","craft","ellesse","wesc","dry lake","röhnisch","acqua limone","anna field","le","ax paris","burton","hansen & jacob","lou in love","mad lady","selected homme","tenson","whistles","zizzi","gerry weber"].includes(e.toLowerCase())))?(hardToSellText.innerHTML=n.includes(e.toLowerCase())?`Vi s\xe4ljer tyv\xe4rr inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`:`Vi s\xe4ljer tyv\xe4rr inte kategorin ${t} fr\xe5n ${e} p\xe5 grund av f\xf6r l\xe5g efterfr\xe5gan.`,stopIcon.style.display="flex",warningIcon.style.display="none",i.style.display="block",document.getElementById("itemBrand").setCustomValidity(n.includes(e.toLowerCase())?`Vi s\xe4ljer inte plagg fr\xe5n ${e}`:`Vi s\xe4ljer inte kategorin '${t}' fr\xe5n ${e}`),!0):["H&M","HM","Zara","ASOS","Nelly","Gina Tricot","BikBok","Bik Bok","Lindex","Kappahl","Cubus","NA-KD","NAKD","Mango","Ellos","Primark","Shein","Vila","Forever 21","Pull & Bear","Bershka","Stradivarius"].some(t=>e.toLowerCase().includes(t.toLowerCase()))?(hardToSellText.innerHTML=`Vi s\xe4ljer i regel inte ${e}-plagg p\xe5 grund av f\xf6r l\xe5gt andrahandsv\xe4rde. Undantag kan finnas.`,stopIcon.style.display="none",warningIcon.style.display="block",i.style.display="block",!0):void(i.style.display="none")}function v(e="Kategori",t=k){$("#itemCategory").select2({selectionCssClass:"form-field",placeholder:e||"Kategori",data:[{id:"",text:""},{text:"Överdelar",children:[{id:"Tröja",text:"Tröja"},{id:"Blus",text:"Blus"},{id:"Topp",text:"Topp"},{id:"Skjorta",text:"Skjorta"},{id:"Linneskjorta",text:"Linneskjorta"},{id:"T-shirt",text:"T-shirt"},{id:"Kavaj",text:"Kavaj"},{id:"Sweatshirt",text:"Sweatshirt"},{id:"Hoodie",text:"Hoodie"},{id:"Polotröja",text:"Polotröja"},{id:"Tunika",text:"Tunika"},{id:"Väst",text:"Väst"},{id:"Kofta",text:"Kofta"},{id:"Linne",text:"Linne"},{id:"Träningströja",text:"Träningströja"},{id:"Poncho",text:"Poncho"},{id:"Piké",text:"Piké"},{id:"Långärmad T-shirt",text:"Långärmad T-shirt"},{id:"Kostymväst",text:"Kostymväst"}]},{text:"Underdelar",children:[{id:"Kjol",text:"Kjol"},{id:"Byxor",text:"Byxor"},{id:"Jeans",text:"Jeans"},{id:"Chinos",text:"Chinos"},{id:"Fritidsbyxor",text:"Fritidsbyxor"},{id:"Träningsbyxor",text:"Träningsbyxor"},{id:"Tights",text:"Tights"},{id:"Strumpbyxor",text:"Strumpbyxor"},{id:"Mjukisbyxor",text:"Mjukisbyxor"},{id:"Kostymbyxor",text:"Kostymbyxor"},{id:"Shorts",text:"Shorts"},{id:"Sarong",text:"Sarong"}]},{text:"Helkropp",children:[{id:"Klänning",text:"Klänning"},{id:"Kaftan",text:"Kaftan"},{id:"Kostym",text:"Kostym"},{id:"Set",text:"Set"},{id:"Jumpsuit",text:"Jumpsuit"},{id:"Baddräkt",text:"Baddräkt"},{id:"Bikini",text:"Bikini"},{id:"Pyjamas",text:"Pyjamas"},{id:"Morgonrock",text:"Morgonrock"},{id:"Bröllopsklänning",text:"Bröllopsklänning"},{id:"Balklänning",text:"Balklänning"},{id:"Bodysuit",text:"Bodysuit"},{id:"Underställ",text:"Underställ"}]},{text:"Ytterkläder",children:[{id:"Jacka",text:"Jacka"},{id:"Kappa",text:"Kappa"},{id:"Rock",text:"Rock"},{id:"Fritidsjacka",text:"Fritidsjacka"},{id:"Trenchcoat",text:"Trenchcoat"},{id:"Skinnjacka",text:"Skinnjacka"},{id:"Dunjacka",text:"Dunjacka"},{id:"Regnjacka",text:"Regnjacka"},{id:"Pälsjacka",text:"Pälsjacka"}]},{text:"Skor",children:[{id:"Sneakers",text:"Sneakers"},{id:"Sandaler",text:"Sandaler"},{id:"Klackar",text:"Klackar"},{id:"Ballerinaskor",text:"Ballerinaskor"},{id:"Loafers",text:"Loafers"},{id:"Flip-flops",text:"Flip-flops"},{id:"Boots",text:"Boots"},{id:"Kängor",text:"Kängor"},{id:"Vinterskor",text:"Vinterskor"},{id:"Skor",text:"Annat (Skor)"}]},{text:"Väskor",children:[{id:"Axelremsväska",text:"Axelremsväska"},{id:"Handväska",text:"Handväska"},{id:"Kuvertväska",text:"Kuvertväska"},{id:"Ryggsäck",text:"Ryggsäck"},{id:"Träningsväska",text:"Träningsväska"},{id:"Resväska",text:"Resväska"},{id:"Datorväska",text:"Datorväska"},{id:"Väska",text:"Annat (Väska)"}]},{text:"Accessoarer",children:[{id:"Solglasögon",text:"Solglasögon"},{id:"Glasögon",text:"Glasögon"},{id:"Örhänge",text:"Örhänge"},{id:"Halsband",text:"Halsband"},{id:"Armband",text:"Armband"},{id:"Ring",text:"Ring"},{id:"Brosch",text:"Brosch"},{id:"Keps",text:"Keps"},{id:"Sjal",text:"Sjal"},{id:"Krage",text:"Krage"},{id:"Bälte",text:"Bälte"},{id:"Plånbok",text:"Plånbok"},{id:"Halsduk",text:"Halsduk"},{id:"Hatt",text:"Hatt"},{id:"Mössa",text:"Mössa"},{id:"Vantar",text:"Vantar"},{id:"Necessär",text:"Necessär"},{id:"Slips",text:"Slips"},{id:"Handduk",text:"Handduk"},{id:"Klocka",text:"Klocka"}]}]}),$("body").on("click",".select2-container--open .select2-results__group",function(){$(this).parent().attr("class").match(/expanded-group/)?$(this).parent().removeClass("expanded-group"):($(".expanded-group").first().removeClass("expanded-group"),$(this).parent().addClass("expanded-group"))});let n=!1;$("#itemCategory").on("select2:select",()=>{analytics.track("Click",{elementID:"itemCategoryValue"}),document.querySelector("#itemCategory").dispatchEvent(new Event("change"))});let i=!1;$("#itemCategory").on("select2:open",()=>{i||(i=!0,$("input.select2-search__field").on("click",()=>{analytics.track("Click",{elementID:"itemCategorySearch"})}))}),$("#itemCategory").on("select2:close",()=>{document.querySelector("body").style.overflow="auto",document.querySelector("body").style.position="static",document.querySelector("html").style.overflow="static"}),$("#itemCategory").on("select2:open",function(){if(analytics.track("Element Viewed",{elementID:"itemCategoryContainer"}),document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.position="fixed",document.querySelector("html").style.overflow="fixed",document.querySelector(".select2-search__field").placeholder="Sök... (t.ex. Klänning/Sneakers/Blus)",$(".select2-search__field").on("input",e=>{e.target.value.length>0?$(".select2-results__option[role=group]").each((e,t)=>$(t).addClass("expanded-group")):$(".expanded-group").each((e,t)=>$(t).removeClass("expanded-group"))}),!n){let e=document.getElementById("categoryPopUpHeader"),t=document.querySelector(".select2-dropdown");t.insertBefore(e,t.firstChild),e.style.display="block",e.querySelector("#categorySelectClose").onclick=()=>$("#itemCategory").select2("close"),n=!0}document.querySelector(".select2-results__options").addEventListener("scroll",()=>document.activeElement.blur())}),$("#itemCategory").on("change",e=>{h("itemCategoryLabel")(e);let n=document.getElementById("itemCategory");t(document.getElementById("itemBrand").value,n.value)}),$("#itemCategory").on("select2:open",function(){$(".select2-results").css("visibility","hidden")}),$("#itemCategory").on("select2:opening",function(){setTimeout(function(){$(".select2-results").css("visibility","visible")},50)})}function h(e){return t=>{document.getElementById(e).style.display=t.target.value.length>0?"inline-block":"none"}}i.defineInteropFlag(n),i.export(n,"uploadTempImage",()=>o),i.export(n,"requestUniqueId",()=>r),i.export(n,"enhanceFrontImage",()=>l),i.export(n,"showDeleteImageIcon",()=>d),i.export(n,"rememberNewItemImageField",()=>c),i.export(n,"showImagePreview",()=>u),i.export(n,"capitalizeFirstLetter",()=>m),i.export(n,"uploadImageAndShowPreview",()=>g),i.export(n,"showImageState",()=>y),i.export(n,"showLoadingIcon",()=>f),i.export(n,"checkBlockedOrLowShareSoldBrand",()=>k),i.export(n,"initializeCategorySelect",()=>v),i.export(n,"fieldLabelToggle",()=>h)},{"@parcel/transformer-js/src/esmodule-helpers.js":"bNgzC"}]},["dxOtH"],"dxOtH","parcelRequire81ca");
//# sourceMappingURL=loadItemCards.js.map
