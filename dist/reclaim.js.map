{"mappings":"C,A,kC;A,uC;A,E;A,2D;A,E;A,4D;A,wD;A,S,C,C,C,C,C,C,C,C,C,E,2B,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,0D;A,+D;A,8B;A,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,E,gE;A,6D;A,+D;A,gC;A,G,E,O,E,E,C,E,+C;A,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,I,C,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,qD;A,yE;A,I,E,E,E,Y;A,U,O,S,A,a,O,O,O,O,C,E,A,Y,O,Q,O,G,C,O,W,O,C,G,G,C,I,C,E,C,C,C,C,E,C,Q,C,S,C,C,C,C,C,EC2HA,SAAS,IACL,aAAa,KAAA,CAAM,OAAA,CAAU,OAC7B,cAAc,KAAA,CAAM,OAAA,CAAU,OAC9B,aAAa,KAAA,CAAM,OAAA,CAAU,OAC7B,WAAW,KAAA,CAAM,OAAA,CAAU,OAC3B,YAAY,KAAA,CAAM,OAAA,CAAU,MAChC,CAEA,eAAe,IAEX,OADA,SAAS,cAAA,CAAe,oBAAoB,cAA5C,GACO,IAAI,QAAQ,CAAC,EAAS,KAC3B,SAAS;AACT,IAAM,EAAgB,SAAS,cAAA,CAAe,wBAC9C,AAAK,EAAc,KAAA,CAKZ,EAAQ,CAAA,IAJb,EAAc,iBAAA,CAAkB,C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","sources":["<anon>","reclaim.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        this\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"7h7Hl\":[function(require,module,exports) {\nfunction initializePage(item) {\n    const itemTitle = (item.cleanedBrand || item.brand).trim() + \"-\" + item.category.toLowerCase();\n    document.getElementById(\"itemTitle\").innerText = itemTitle;\n    document.getElementById(\"itemTitleBanner\").innerText = itemTitle;\n    console.log(\"item\", item);\n    console.log(\"soldDate\", item.soldDate);\n    const soldDate = new Date(item.soldDate).toLocaleDateString(\"sv-SE\", {\n        day: \"numeric\",\n        month: \"long\",\n        year: \"numeric\"\n    });\n    const subtitleText = `${item.soldPrice} kr, ${soldDate}`;\n    document.getElementById(\"itemSubtitle\").innerText = \"K\\xf6ptes f\\xf6r \" + subtitleText;\n    document.getElementById(\"itemSubtitleBanner\").innerText = subtitleText;\n    const imageUrl = window.innerWidth <= 400 ? item?.images?.modelImage || item?.images?.enhancedFrontImageSmall || item?.images?.enhancedFrontImage || item?.images?.frontImageSmall || item?.images?.frontImage : item?.images?.modelImage || item?.images?.enhancedFrontImage || item?.images?.frontImage;\n    document.getElementById(\"itemImage\").src = imageUrl;\n    document.getElementById(\"itemImageBanner\").src = imageUrl;\n    document.getElementById(\"resellButton\").href = `./sell-item?id=${item.id}`;\n    let compensation = Math.round(item.soldPrice * 0.1);\n    compensation = compensation < 60 ? 60 : compensation > 250 ? 250 : compensation;\n    discount10PercentText.innerText = `Behålla plagget och få ${compensation} kr återbetalt`;\n    const contact = item.buyer.Email || item.buyer.PhoneNumber;\n    thankYouText.innerText = `Vi tittar på ärendet och skickar svar ${contact.includes(\"@\") ? `till din email ${contact}` : `på SMS till ditt telefonnummer ${contact}`}`;\n    // Om reclaim redan finns -> Gå direkt till Tack!\n    if (item?.reclaim?.status) {\n        hideAllButtons();\n        toMaiButton.style.display = \"flex\";\n        introDiv.style.display = \"none\";\n        thankYouDiv.style.display = \"block\";\n        itemBanner.style.display = \"block\";\n    }\n}\nfunction addEventListeners() {\n    document.getElementById(\"reclaimButton\").addEventListener(\"click\", function() {\n        itemBanner.style.display = \"block\";\n        document.getElementById(\"reclaimForm\").style.display = \"block\";\n        cancelButton.style.display = \"flex\";\n        doneButton.style.display = \"flex\";\n        resellButton.style.display = \"none\";\n        reclaimButton.style.display = \"none\";\n        document.getElementById(\"introDiv\").style.display = \"none\";\n    });\n    reclaimReason.onchange = function() {\n        // Color and label\n        let input = this.value;\n        console.log(\"input\", input);\n        if (input === \"\") {\n            reasonLabel.style.display = \"none\";\n            this.style.color = \"#929292\";\n            return;\n        } else {\n            reasonLabel.style.display = \"block\";\n            this.style.color = \"#101010\";\n        }\n        // Hide all fields\n        const elements = document.querySelectorAll(\".simple-input-container\");\n        elements.forEach(function(element) {\n            if (!element.id.includes(\"Reason\")) element.style.display = \"none\";\n        });\n        reclaimImagesContainer.style.display = \"none\";\n        // Show the right fields\n        if (input.includes(\"Defects\")) {\n            reclaimDescriptionContainer.style.display = \"block\";\n            reclaimImagesContainer.style.display = \"block\";\n        } else if (input.includes(\"Listing\")) reclaimListingErrorContainer.style.display = \"block\";\n        else if (input.includes(\"False\")) {\n            reclaimDescriptionContainer.style.display = \"block\";\n            reclaimImagesContainer.style.display = \"block\";\n        } else if (input.includes(\"Dirty\")) {\n            reclaimDescriptionContainer.style.display = \"block\";\n            reclaimImagesContainer.style.display = \"block\";\n        } else if (input.includes(\"Smelly\")) reclaimDescriptionContainer.style.display = \"block\";\n        else {\n            reclaimDescriptionContainer.style.display = \"block\";\n            reclaimImagesContainer.style.display = \"block\";\n        }\n        compensationPreferenceDiv.style.display = \"block\";\n    };\n    reclaimListingError.onchange = function() {\n        // Color and label\n        let input = this.value;\n        if (input === \"\") {\n            listingErrorLabel.style.display = \"none\";\n            this.style.color = \"#929292\";\n            return;\n        } else {\n            listingErrorLabel.style.display = \"block\";\n            this.style.color = \"#101010\";\n        }\n        if (input === \"Other\") reclaimDescriptionContainer.style.display = \"block\";\n    };\n    document.getElementById(\"doneButton\").addEventListener(\"click\", async function() {\n        //showSpinner();\n        const params = getParamsObject();\n        await saveReclaim(params.id);\n        console.log(\"RECLAIM SAVED\");\n        reclaimForm.style.display = \"none\";\n        hideAllButtons();\n        toMaiButton.style.display = \"flex\";\n        thankYouDiv.style.display = \"block\";\n    });\n// Image event listeners\n/*\n    const imageElements = [\"reclaimImage1\", \"reclaimImage2\", \"reclaimImage3\", \"reclaimImage4\"];\n    imageElements.forEach(imageName => {\n        document.getElementById(`delete${capitalizeFirstLetter(imageName)}Icon`).addEventListener('click', () => {\n            removeSavedImage(imageName);\n        });\n    })\n    */ }\nfunction hideAllButtons() {\n    resellButton.style.display = \"none\";\n    reclaimButton.style.display = \"none\";\n    cancelButton.style.display = \"none\";\n    doneButton.style.display = \"none\";\n    toMaiButton.style.display = \"none\";\n}\nasync function validateInput() {\n    document.getElementById(\"reclaimFormInner\").reportValidity();\n    return new Promise((resolve, reject)=>{\n        // Custom\n        const reclaimReason1 = document.getElementById(\"reclaimReason\");\n        if (!reclaimReason1.value) {\n            reclaimReason1.setCustomValidity(`Välj anledning till reklamationen`);\n            document.getElementById(\"reclaimFormInner\").reportValidity();\n            return resolve(false);\n        }\n        return resolve(true);\n    });\n}\nasync function saveReclaim(itemId) {\n    if (!await validateInput()) return;\n    const now = new Date();\n    const reason = reclaimReason.value;\n    const listingError = reclaimListingError.value || \"\";\n    const description = reclaimDescription.value || \"\";\n    let compensationPreference = \"\";\n    const radios = document.getElementsByName(\"compensationPreference\");\n    for(var i = 0; i < radios.length; i++)if (radios[i].checked) compensationPreference = radios[i].value;\n    let reclaim = {\n        createdAt: now,\n        status: \"Pending\",\n        reason,\n        description,\n        listingError,\n        compensationPreference\n    };\n    console.log(\"Will update: \", {\n        itemId,\n        reclaim\n    });\n    await callFirebaseFunction(\"europe-west1\", \"saveReclaim\", {\n        itemId,\n        reclaim\n    });\n}\nconst getItem = async (itemId)=>{\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable(\"getItem\")({\n        itemId\n    });\n    return {\n        ...res?.data || {},\n        id: itemId\n    };\n};\nconst main = async ()=>{\n    const params = getParamsObject();\n    const item = params.id ? await getItem(params.id) : \"\";\n    if (!item) {\n        console.error(\"Invalid item id param\");\n        location.href = \"/\";\n    }\n    initializePage(item);\n    addEventListeners();\n    triggerShowContent.click();\n};\nmain();\n\n},{}]},[\"7h7Hl\"], \"7h7Hl\", \"parcelRequire81ca\")\n\n//# sourceMappingURL=reclaim.js.map\n","function initializePage(item) {\n    const itemTitle = (item.cleanedBrand || item.brand).trim() + \"-\" + item.category.toLowerCase();\n    document.getElementById('itemTitle').innerText = itemTitle;\n    document.getElementById('itemTitleBanner').innerText = itemTitle;\n    console.log('item', item);\n    console.log('soldDate', item.soldDate);\n    const soldDate = new Date(item.soldDate).toLocaleDateString('sv-SE', { day: 'numeric', month: 'long', year: 'numeric' });\n    const subtitleText = `${item.soldPrice} kr, ${soldDate}`;\n    document.getElementById('itemSubtitle').innerText = 'Köptes för ' + subtitleText;\n    document.getElementById('itemSubtitleBanner').innerText = subtitleText;\n    const imageUrl = window.innerWidth <= 400 ?\n        item?.images?.modelImage || item?.images?.enhancedFrontImageSmall || item?.images?.enhancedFrontImage || item?.images?.frontImageSmall || item?.images?.frontImage :\n        item?.images?.modelImage || item?.images?.enhancedFrontImage || item?.images?.frontImage;\n    document.getElementById('itemImage').src = imageUrl;\n    document.getElementById('itemImageBanner').src = imageUrl;\n    document.getElementById('resellButton').href = `./sell-item?id=${item.id}`;\n    let compensation = Math.round(item.soldPrice * 0.1)\n    compensation = compensation < 60 ? 60 : compensation > 250 ? 250 : compensation ;\n    discount10PercentText.innerText = `Behålla plagget och få ${compensation} kr återbetalt`;\n    const contact = item.buyer.Email || item.buyer.PhoneNumber;\n    thankYouText.innerText = `Vi tittar på ärendet och skickar svar ${contact.includes('@') ? `till din email ${contact}` : `på SMS till ditt telefonnummer ${contact}`}`;\n    // Om reclaim redan finns -> Gå direkt till Tack!\n    if (item?.reclaim?.status){\n        hideAllButtons();\n        toMaiButton.style.display = 'flex';\n        introDiv.style.display = 'none';\n        thankYouDiv.style.display = 'block';\n        itemBanner.style.display = 'block';\n    }\n}\n\nfunction addEventListeners() {\n    document.getElementById('reclaimButton').addEventListener('click', function () {\n        itemBanner.style.display = 'block';\n        document.getElementById('reclaimForm').style.display = 'block';\n        cancelButton.style.display = 'flex';\n        doneButton.style.display = 'flex';\n        resellButton.style.display = 'none';\n        reclaimButton.style.display = 'none';\n        document.getElementById('introDiv').style.display = 'none';\n    });\n\n    reclaimReason.onchange = function () {\n        // Color and label\n        let input = this.value;\n        console.log('input', input);\n        if (input === '') {\n            reasonLabel.style.display = 'none';\n            this.style.color = \"#929292\";\n            return\n        } else {\n            reasonLabel.style.display = 'block';\n            this.style.color = \"#101010\";\n        }\n        \n        // Hide all fields\n        const elements = document.querySelectorAll('.simple-input-container');\n        elements.forEach(function (element) {\n            if (!element.id.includes('Reason')) {\n                element.style.display = 'none';\n            }\n        });\n        reclaimImagesContainer.style.display = 'none';        \n\n        // Show the right fields\n        if (input.includes('Defects')) {\n            reclaimDescriptionContainer.style.display = 'block';\n            reclaimImagesContainer.style.display = 'block';\n        } else if (input.includes('Listing')) {\n            reclaimListingErrorContainer.style.display = 'block';\n        } else if (input.includes('False')) {\n            reclaimDescriptionContainer.style.display = 'block';\n            reclaimImagesContainer.style.display = 'block';\n        } else if (input.includes('Dirty')) {\n            reclaimDescriptionContainer.style.display = 'block';\n            reclaimImagesContainer.style.display = 'block';\n        } else if (input.includes('Smelly')) {\n            reclaimDescriptionContainer.style.display = 'block';\n        } else {\n            reclaimDescriptionContainer.style.display = 'block';\n            reclaimImagesContainer.style.display = 'block';\n        }\n        compensationPreferenceDiv.style.display = 'block';\n    };\n\n    reclaimListingError.onchange = function () {\n        // Color and label\n        let input = this.value;\n        if (input === '') {\n            listingErrorLabel.style.display = 'none';\n            this.style.color = \"#929292\";\n            return\n        } else {\n            listingErrorLabel.style.display = 'block';\n            this.style.color = \"#101010\";\n        }\n        if (input === 'Other'){\n            reclaimDescriptionContainer.style.display = 'block';\n        }\n    };\n\n    document.getElementById('doneButton').addEventListener('click', async function () {\n        //showSpinner();\n        const params = getParamsObject();\n        await saveReclaim(params.id);\n        console.log('RECLAIM SAVED');\n        reclaimForm.style.display = 'none';\n        hideAllButtons();\n        toMaiButton.style.display = 'flex';\n        thankYouDiv.style.display = 'block';\n    });\n\n    // Image event listeners\n    /*\n    const imageElements = [\"reclaimImage1\", \"reclaimImage2\", \"reclaimImage3\", \"reclaimImage4\"];\n    imageElements.forEach(imageName => {\n        document.getElementById(`delete${capitalizeFirstLetter(imageName)}Icon`).addEventListener('click', () => {\n            removeSavedImage(imageName);\n        });\n    })\n    */\n}\n\nfunction hideAllButtons(){\n    resellButton.style.display = 'none';\n    reclaimButton.style.display = 'none';\n    cancelButton.style.display = 'none';\n    doneButton.style.display = 'none';\n    toMaiButton.style.display = 'none';\n}\n\nasync function validateInput() {\n    document.getElementById('reclaimFormInner').reportValidity();\n    return new Promise((resolve, reject) => {\n      // Custom\n      const reclaimReason = document.getElementById('reclaimReason');\n      if (!reclaimReason.value) {\n        reclaimReason.setCustomValidity(`Välj anledning till reklamationen`);\n        document.getElementById('reclaimFormInner').reportValidity();\n        return resolve(false);\n      }\n      return resolve(true)\n    });\n}\n\nasync function saveReclaim(itemId) {\n    if (!(await validateInput())) { return; }\n    const now = new Date();\n    const reason = reclaimReason.value;\n    const listingError = reclaimListingError.value || '';\n    const description = reclaimDescription.value || '';\n    let compensationPreference = '';\n    const radios = document.getElementsByName('compensationPreference');\n    for (var i = 0; i < radios.length; i++) {\n      if (radios[i].checked) { compensationPreference = radios[i].value; }\n    }\n    let reclaim = {\n        createdAt: now,\n        status: 'Pending',\n        reason,\n        description,\n        listingError,\n        compensationPreference\n    }\n\n    console.log('Will update: ', { itemId, reclaim });\n\n    await callFirebaseFunction(\"europe-west1\", 'saveReclaim', { itemId, reclaim });\n}\n\nconst getItem = async (itemId) => {\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable('getItem')({ itemId });\n    return { ...(res?.data || {}), id: itemId };\n}\n\nconst main = async () => {\n    const params = getParamsObject();\n    const item = params.id ? await getItem(params.id) : '';\n    if (!item) {\n        console.error(\"Invalid item id param\");\n        location.href = '/';\n    }\n    initializePage(item);\n    addEventListeners();\n    triggerShowContent.click();\n}\n\nmain();\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","hideAllButtons","resellButton","style","display","reclaimButton","cancelButton","doneButton","toMaiButton","validateInput","document","getElementById","reportValidity","Promise","reject","reclaimReason1","value","setCustomValidity","saveReclaim","itemId","now","Date","reason","reclaimReason","listingError","reclaimListingError","description","reclaimDescription","compensationPreference","radios","getElementsByName","checked","reclaim","createdAt","status","console","log","callFirebaseFunction","getItem","firebase","app","functions","httpsCallable","data","main","params","getParamsObject","item","error","location","href","initializePage","itemTitle","cleanedBrand","brand","trim","category","toLowerCase","innerText","soldDate","toLocaleDateString","day","month","year","subtitleText","soldPrice","imageUrl","innerWidth","images","modelImage","enhancedFrontImageSmall","enhancedFrontImage","frontImageSmall","frontImage","src","compensation","Math","round","discount10PercentText","contact","buyer","Email","PhoneNumber","thankYouText","includes","introDiv","thankYouDiv","itemBanner","addEventListener","onchange","input","reasonLabel","color","elements","querySelectorAll","forEach","element","reclaimImagesContainer","reclaimDescriptionContainer","reclaimListingErrorContainer","compensationPreferenceDiv","listingErrorLabel","reclaimForm","triggerShowContent","click"],"version":3,"file":"reclaim.js.map"}