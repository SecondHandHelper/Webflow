{"mappings":"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","sources":["<anon>","itemValuation.js"],"sourcesContent":["(function () {\nwindow.itemValuationJsLoaded = true;\nasync function $21333b374a3a0336$var$showDeclineValuation(item) {\n    document.getElementById(\"valuationHeading\").style.display = \"none\";\n    document.getElementById(\"valuationMotivation\").style.display = \"none\";\n    document.getElementById(\"valuationText\").innerText = \"S\\xe4ljer ej\";\n    document.getElementById(\"valuationText\").style.display = \"block\";\n    document.getElementById(\"rejectButton\").style.display = \"none\";\n    document.getElementById(\"confirmButton\").style.display = \"none\";\n    document.getElementById(\"okejButton\").style.display = \"flex\";\n    document.getElementById(\"newItemButton\").style.display = \"flex\";\n    document.getElementById(\"declineExplanation\").style.display = \"block\";\n    document.getElementById(\"valuationRange\").style.display = \"none\";\n    document.getElementById(\"adjustIntervalButton\").style.display = \"none\";\n    document.getElementById(\"valuationExplanation\").style.display = \"none\";\n    document.getElementById(\"valuationExplanationHeader\").style.display = \"none\";\n    document.getElementById(\"chatDiv\").style.display = \"block\";\n    document.getElementById(\"newItemButton\").addEventListener(\"click\", ()=>{\n        sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n        localStorage.removeItem(\"newItem\");\n        sessionStorage.removeItem(\"newItemId\");\n        sessionStorage.removeItem(\"itemValuation\");\n        window.location.href = \"/sell-item\";\n    });\n    document.getElementById(\"okejButton\").addEventListener(\"click\", ()=>{\n        sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n        localStorage.removeItem(\"newItem\");\n        sessionStorage.removeItem(\"newItemId\");\n        sessionStorage.removeItem(\"itemValuation\");\n        window.location.href = \"/private\";\n    });\n    if (item.id) await firebase.app().functions(\"europe-west1\").httpsCallable(\"markItemRejected\")({\n        itemId: item.id,\n        userDecline: false\n    });\n}\nconst $21333b374a3a0336$var$adjustmentOk = (minPrice, maxPrice)=>{\n    const adjustedMin = document.getElementById(\"minPrice\").value;\n    const adjustedMax = document.getElementById(\"maxPrice\").value;\n    return !$21333b374a3a0336$var$adjustmentRequiresReview(minPrice, maxPrice, Number(adjustedMin), Number(adjustedMax));\n};\nconst $21333b374a3a0336$var$priceTooHigh = (price, adjustedPrice)=>{\n    if (price < 500 && adjustedPrice > price * 1.5) return true;\n    else if (price >= 500 && price < 1000 && adjustedPrice > price * 1.4) return true;\n    else if (price >= 1000 && adjustedPrice > price * 1.3) return true;\n    return false;\n};\nconst $21333b374a3a0336$var$minPriceNotOk = (minPrice, maxPrice, adjustedMin)=>$21333b374a3a0336$var$priceTooHigh(minPrice, adjustedMin) || adjustedMin > $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice);\nconst $21333b374a3a0336$var$adjustmentRequiresReview = (minPrice, maxPrice, adjustmentMin, adjustmentMax)=>$21333b374a3a0336$var$minPriceNotOk(minPrice, maxPrice, adjustmentMin) || $21333b374a3a0336$var$priceTooHigh(maxPrice, adjustmentMax);\nconst $21333b374a3a0336$var$maxTooHighWarning = (maxPrice, adjustmentMax)=>$21333b374a3a0336$var$priceTooHigh(maxPrice, adjustmentMax) ? \"Ovanligt h\\xf6gt startpris\" : null;\nconst $21333b374a3a0336$var$minTooHighWarning = (minPrice, adjustmentMin)=>$21333b374a3a0336$var$priceTooHigh(minPrice, adjustmentMin) ? \"Ovanligt h\\xf6gt l\\xe4gsta pris\" : null;\nconst $21333b374a3a0336$var$minAboveValuationWarning = (adjustmentMin, estimatedPrice)=>adjustmentMin > estimatedPrice ? \"L\\xe4gsta priset \\xf6verstiger v\\xe5r v\\xe4rdering\" : null;\nconst $21333b374a3a0336$var$adjustmentWarningText = (minPrice, maxPrice, adjustmentMin, adjustmentMax)=>[\n        $21333b374a3a0336$var$maxTooHighWarning(maxPrice, adjustmentMax),\n        $21333b374a3a0336$var$minTooHighWarning(minPrice, adjustmentMin),\n        $21333b374a3a0336$var$minAboveValuationWarning(adjustmentMin, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice))\n    ].filter((p)=>p).join(\"<br>\");\nconst $21333b374a3a0336$var$adjustmentValidations = (minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput)=>{\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    adjustmentMaxInput.style.color = $21333b374a3a0336$var$priceTooHigh(maxPrice, adjustmentMax) ? \"#E20000\" : \"#333\";\n    adjustmentMinInput.style.color = $21333b374a3a0336$var$minPriceNotOk(minPrice, maxPrice, adjustmentMin) ? \"#E20000\" : \"#333\";\n    if ($21333b374a3a0336$var$adjustmentRequiresReview(minPrice, maxPrice, adjustmentMin, adjustmentMax)) {\n        if (document.getElementById(\"requiresReviewDiv\").style.display !== \"block\") {\n            document.getElementById(\"requiresReviewDiv\").style.display = \"block\";\n            analytics.track(\"Element Viewed\", {\n                elementID: \"requiresReviewDiv\"\n            });\n        }\n        document.getElementById(\"adjustmentWarningText\").innerHTML = $21333b374a3a0336$var$adjustmentWarningText(minPrice, maxPrice, adjustmentMin, adjustmentMax);\n        document.getElementById(\"noteDiv\").style.display = \"none\";\n        document.getElementById(\"sendForReviewButton\").style.display = \"flex\";\n        document.getElementById(\"confirmButton\").style.display = \"none\";\n        document.getElementById(\"rejectButton\").style.display = \"none\";\n    } else if (adjustmentMax !== maxPrice || adjustmentMin !== minPrice) {\n        document.getElementById(\"confirmButton\").style.display = \"flex\";\n        document.getElementById(\"sendForReviewButton\").style.display = \"none\";\n        if (document.getElementById(\"resetButton\").style.visibility !== \"visible\") {\n            document.getElementById(\"resetButton\").style.visibility = \"visible\";\n            analytics.track(\"Element Viewed\", {\n                elementID: \"resetButton\"\n            });\n        }\n        document.getElementById(\"requiresReviewDiv\").style.display = \"none\";\n        const noteTextBefore = document.getElementById(\"noteText\").innerText;\n        let noteText = \"\";\n        if (adjustmentMax > maxPrice) noteText += \"Ett h\\xf6jt startpris kan inneb\\xe4ra att det tar l\\xe4ngre tid f\\xf6r\\xa0plagget att s\\xe4ljas.\";\n        if (adjustmentMin > minPrice) noteText += `${noteText ? \" \" : \"\"}Ett h\\xf6jt l\\xe4gsta pris minskar sannolikheten att det blir s\\xe5lt.`;\n        if (!noteText) noteText = \"Bra att du kan t\\xe4nka dig s\\xe4nka priset! Det \\xf6kar sannolikheten att det blir s\\xe5lt.\";\n        document.getElementById(\"noteHeading\").innerHTML = \"Notera!\";\n        document.getElementById(\"noteText\").innerText = noteText;\n        document.getElementById(\"noteDiv\").style.display = \"block\";\n        if (noteText !== noteTextBefore) document.getElementById(\"noteDiv\").click(); // Animation trigger to get users attention\n        document.getElementById(\"confirmButton\").innerText = \"P\\xe5b\\xf6rja f\\xf6rs\\xe4ljning\";\n        document.getElementById(\"rejectButton\").style.display = \"flex\";\n    } else {\n        document.getElementById(\"resetButton\").style.visibility = \"hidden\";\n        document.getElementById(\"noteHeading\").innerHTML = \"Tips!\";\n        document.getElementById(\"noteText\").innerText = \"S\\xe4nkta priser ger en s\\xe4krare och snabbare f\\xf6rs\\xe4ljning. H\\xf6jda priser kan ge mer pengar, men riskerar ocks\\xe5 att det blir os\\xe5lt eller tar l\\xe4ngre tid.\";\n        document.getElementById(\"noteDiv\").style.display = \"block\";\n        document.getElementById(\"requiresReviewDiv\").style.display = \"none\";\n        document.getElementById(\"confirmButton\").style.display = \"flex\";\n        document.getElementById(\"sendForReviewButton\").style.display = \"none\";\n        document.getElementById(\"rejectButton\").style.display = \"flex\";\n    }\n};\nfunction $21333b374a3a0336$var$validateInput() {\n    const adjustmentMinInput = document.getElementById(\"minPrice\");\n    const adjustmentMaxInput = document.getElementById(\"maxPrice\");\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    if (adjustmentMin < 100) adjustmentMinInput.setCustomValidity(\"Vi f\\xf6rs\\xf6ker tyv\\xe4rr aldrig s\\xe4lja n\\xe5got under 100kr\");\n    else if (adjustmentMin > adjustmentMax) {\n        adjustmentMaxInput.setCustomValidity(\"Startpris m\\xe5ste vara h\\xf6gre \\xe4n l\\xe4gsta pris\");\n        adjustmentMinInput.setCustomValidity(\"L\\xe4gsta pris m\\xe5ste vara mindre \\xe4n startpris\");\n    } else {\n        adjustmentMinInput.setCustomValidity(\"\");\n        adjustmentMaxInput.setCustomValidity(\"\");\n    }\n    return document.getElementById(\"wf-form-Valuation-form\").reportValidity();\n}\nasync function $21333b374a3a0336$var$saveValuationStatus(itemId, minPrice, maxPrice) {\n    if (!$21333b374a3a0336$var$validateInput()) return;\n    const minInput = document.getElementById(\"minPrice\");\n    const adjustedMin = Number(minInput.value);\n    const maxInput = document.getElementById(\"maxPrice\");\n    const adjustedMax = Number(maxInput.value);\n    if (sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\")) {\n        const savedItem = JSON.parse(sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\"));\n        savedItem.item.infoRequests.price.status = \"Resolved\";\n        savedItem.item.infoRequests.price.response = \"Accepted\";\n        if (adjustedMin !== minPrice || adjustedMax !== maxPrice) {\n            savedItem.item.infoRequests.price.userAdjustedMin = adjustedMin;\n            savedItem.item.infoRequests.price.userAdjustedMax = adjustedMax;\n            if ($21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice)) {\n                savedItem.item.minPriceEstimate = minPrice;\n                savedItem.item.maxPriceEstimate = maxPrice;\n            } else {\n                savedItem.item.infoRequests.price.response = \"User proposal\";\n                savedItem.item.infoRequests.price.userProposalMotivation = document.getElementById(\"userProposalMotivation\").value;\n            }\n        } else {\n            savedItem.item.minPriceEstimate = minPrice;\n            savedItem.item.maxPriceEstimate = maxPrice;\n        }\n        sessionStorage.setItem(\"itemToBeCreatedAfterSignIn\", JSON.stringify(savedItem));\n        return window.location.href = \"/sign-in\";\n    } else {\n        await firebase.app().functions(\"europe-west1\").httpsCallable(\"saveValuationStatus\")({\n            itemId: itemId,\n            minPrice: minPrice,\n            maxPrice: maxPrice,\n            adjustmentMin: adjustedMin,\n            adjustmentMax: adjustedMax,\n            userProposalMotivation: document.getElementById(\"userProposalMotivation\").value,\n            adjustmentRequiresReview: !$21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice)\n        });\n        if (localStorage.getItem(\"latestItemCreated\") && !params.id) {\n            const latestItemCreated = JSON.parse(localStorage.getItem(\"latestItemCreated\"));\n            latestItemCreated.infoRequests.price.response = $21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice) ? \"Accepted\" : \"User proposal\";\n            if ($21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice)) {\n                latestItemCreated.minPriceEstimate = adjustedMin;\n                latestItemCreated.maxPriceEstimate = adjustedMax;\n            }\n            localStorage.setItem(\"latestItemCreated\", JSON.stringify(latestItemCreated));\n        }\n        if (!document.referrer.includes(\"/private\")) {\n            const userPhoneSet = user.current?.phoneNumber?.length;\n            return window.location.href = userPhoneSet ? `/item-confirmation` : `/user-contact`;\n        } else return window.location.href = `/private`;\n    }\n}\nconst $21333b374a3a0336$var$initialPageSetup = (item)=>{\n    document.getElementById(\"itemImage\").src = window.innerWidth <= 400 ? item?.images?.enhancedFrontImageSmall || item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImageSmall || item?.images?.frontImage : item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImage;\n    const { minPriceEstimate: minPriceEstimate, newMinPriceEstimate: newMinPriceEstimate, newMaxPriceEstimate: newMaxPriceEstimate, maxPriceEstimate: maxPriceEstimate } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n    document.getElementById(\"chatLink\").onclick = ()=>Intercom(\"showNewMessage\", item.mlValuation?.decline ? `ID: ${item.id}\n\nG\\xe4llande att ni tackat nej till ${item.brand.trim()}-${item.category.toLowerCase()}:\\n\\n` : `ID: ${item.id}\n\nG\\xe4llande prisintervallet p\\xe5 ${minPrice}-${maxPrice} kr f\\xf6r ${item.brand.trim()}-${item.category.toLowerCase()}. Vad skulle du vilja \\xe4ndra det till och varf\\xf6r?\n\n`);\n    document.getElementById(\"valuationClose\").addEventListener(\"click\", ()=>{\n        sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n        if (!params.id) {\n            localStorage.removeItem(\"newItem\");\n            sessionStorage.removeItem(\"newItemId\");\n        }\n        return window.location.href = \"/private\";\n    });\n};\nconst $21333b374a3a0336$var$rejectValuation = async (item)=>{\n    if (item.id) await firebase.app().functions(\"europe-west1\").httpsCallable(\"markItemRejected\")({\n        itemId: item.id,\n        userDecline: true\n    });\n    sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n    if (!params.id) {\n        localStorage.removeItem(\"newItem\");\n        localStorage.removeItem(\"latestItemCreated\");\n        sessionStorage.removeItem(\"newItemId\");\n    }\n    return window.location.href = \"/private\";\n};\nconst $21333b374a3a0336$var$hideTooltip = ()=>{\n    for (const element of document.getElementsByClassName(\"tooltip-motivation\"))element.classList.remove(\"tooltip-show\");\n};\nconst $21333b374a3a0336$var$priceAdjustment = (inputValue)=>{\n    if (inputValue < 200) return 20;\n    else if (inputValue < 500) return 50;\n    return 100;\n};\nconst $21333b374a3a0336$var$lowerPrice = (input, origValue)=>{\n    const value = Number(input.value);\n    const valPriceAdjustment = $21333b374a3a0336$var$priceAdjustment(origValue);\n    const newValue = Math.floor(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = Math.max(0, newValue === value ? value - valPriceAdjustment : newValue);\n    input.dispatchEvent(new Event(\"input\"));\n};\nconst $21333b374a3a0336$var$increasePrice = (input, origValue)=>{\n    const value = Number(input.value);\n    const valPriceAdjustment = $21333b374a3a0336$var$priceAdjustment(origValue);\n    const newValue = Math.ceil(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = newValue === value ? value + valPriceAdjustment : newValue;\n    input.dispatchEvent(new Event(\"input\"));\n};\nconst $21333b374a3a0336$var$estimatedPrice = (minPrice, maxPrice)=>Math.round((minPrice + maxPrice) / 20) * 10;\nconst $21333b374a3a0336$var$showMlValuation = async (item)=>{\n    const { minPriceEstimate: minPriceEstimate, newMinPriceEstimate: newMinPriceEstimate, newMaxPriceEstimate: newMaxPriceEstimate, maxPriceEstimate: maxPriceEstimate, decline: decline, newBrand: newBrand, newBrandCategory: newBrandCategory } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n    document.getElementById(\"valuationText\").innerText = `${$21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice)} kr`;\n    document.getElementById(\"valuationResultDiv\").style.display = \"flex\";\n    document.body.addEventListener(\"click\", $21333b374a3a0336$var$hideTooltip);\n    document.getElementById(\"valuationRange\").style.display = \"flex\";\n    document.getElementById(\"minPrice\").value = minPrice;\n    document.getElementById(\"minPrice\").disabled = true;\n    document.getElementById(\"maxPrice\").value = maxPrice;\n    document.getElementById(\"maxPrice\").disabled = true;\n    if (item.infoRequests?.price?.description) {\n        document.getElementById(\"valuationExplanation\").innerText = item.infoRequests.price.description;\n        if (item.infoRequests?.price?.type === \"Final Offer\") {\n            document.getElementById(\"valuationExplanationHeader\").innerText = \"Motivering\";\n            document.getElementById(\"valuationExplanationHeader\").style.display = \"block\";\n        }\n    } else if (newBrand || newBrandCategory) {\n        document.getElementById(\"valuationExplanationHeader\").style.display = \"block\";\n        document.getElementById(\"valuationExplanation\").innerText = newBrand ? \"Vi har inte s\\xe5lt s\\xe5 mycket av detta varum\\xe4rke tidigare och har d\\xe4rf\\xf6r lite mindre data. Du f\\xe5r justera om du upplever att v\\xe4rderingen inte \\xe4r rimlig. Vi b\\xf6rjar med startpriset, och justerar successivt ner till l\\xe4gsta priset under s\\xe4ljperioden p\\xe5 30 dagar.\" : \"Vi har inte s\\xe5lt s\\xe5 mycket av denna kategori fr\\xe5n varum\\xe4rket tidigare och har d\\xe4rf\\xf6r lite mindre data. Du f\\xe5r justera om du upplever att v\\xe4rderingen inte \\xe4r rimlig. Vi b\\xf6rjar med startpriset, och justerar successivt ner till l\\xe4gsta priset under s\\xe4ljperioden p\\xe5 30 dagar.\";\n    }\n    document.getElementById(\"valuationText\").style.display = \"block\";\n    if (sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\")) document.getElementById(\"chatDiv\").style.display = \"none\";\n    await $21333b374a3a0336$var$showAdjustValuation(item);\n    if (decline) await $21333b374a3a0336$var$showDeclineValuation(item);\n    else {\n        document.getElementById(\"confirmButton\").addEventListener(\"click\", ()=>$21333b374a3a0336$var$saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById(\"sendForReviewButton\").addEventListener(\"click\", ()=>$21333b374a3a0336$var$saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById(\"rejectButton\").addEventListener(\"click\", ()=>$21333b374a3a0336$var$rejectValuation(item));\n    }\n    triggerShowContent.click();\n};\nconst $21333b374a3a0336$var$showAdjustValuation = async (item)=>{\n    const { minPriceEstimate: minPriceEstimate, newMinPriceEstimate: newMinPriceEstimate, newMaxPriceEstimate: newMaxPriceEstimate, maxPriceEstimate: maxPriceEstimate, adjustmentAllowed: adjustmentAllowed } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n    if (adjustmentAllowed || [\n        \"1A\",\n        \"1B\",\n        \"1C\",\n        \"2A\",\n        \"3\",\n        \"5A\",\n        \"7\",\n        \"8\"\n    ].includes(item.brandSegment)) {\n        document.getElementById(\"adjustIntervalButton\").style.display = \"flex\";\n        analytics.track(\"Element Viewed\", {\n            elementID: \"adjustIntervalButton\"\n        });\n        document.getElementById(\"chatDiv\").style.display = \"none\";\n        document.getElementById(\"adjustIntervalButton\").addEventListener(\"click\", ()=>{\n            document.getElementById(\"valuationExplanation\").style.display = \"none\";\n            document.getElementById(\"valuationExplanationHeader\").style.display = \"none\";\n            document.getElementById(\"minPrice\").disabled = false;\n            document.getElementById(\"maxPrice\").disabled = false;\n            document.getElementById(\"adjustIntervalButton\").style.display = \"none\";\n            document.getElementById(\"noteDiv\").style.display = \"block\";\n            document.getElementById(\"origMinPrice\").style.display = \"block\";\n            document.getElementById(\"origMaxPrice\").style.display = \"block\";\n            document.getElementById(\"sliderDiv\").style.display = \"block\";\n            document.querySelectorAll(\".field-underline\").forEach((x)=>x.style.visibility = \"visible\");\n        });\n    }\n    if (item.infoRequests?.price?.type === \"Final Offer\") {\n        document.getElementById(\"adjustIntervalButton\").style.display = \"none\";\n        document.getElementById(\"chatDiv\").style.display = \"none\";\n    }\n    $21333b374a3a0336$var$rangeSlider(minPrice, maxPrice);\n    document.getElementById(\"valuationMotivation\").addEventListener(\"click\", (e)=>{\n        const elements = document.getElementsByClassName(\"tooltip-motivation\");\n        const visible = elements[0]?.classList.contains(\"tooltip-show\");\n        for (const element of elements)visible ? element.classList.remove(\"tooltip-show\") : element.classList.add(\"tooltip-show\");\n        e.stopPropagation();\n    });\n    document.getElementById(\"origMinPrice\").innerText = minPrice;\n    document.getElementById(\"origMinPrice\").style.visibility = \"hidden\";\n    document.getElementById(\"origMaxPrice\").innerText = maxPrice;\n    document.getElementById(\"origMaxPrice\").style.visibility = \"hidden\";\n    document.getElementById(\"resetButton\").addEventListener(\"click\", ()=>{\n        document.getElementById(\"minPrice\").value = minPrice;\n        document.getElementById(\"maxPrice\").value = maxPrice;\n        document.getElementById(\"minPrice\").dispatchEvent(new Event(\"input\"));\n        document.getElementById(\"maxPrice\").dispatchEvent(new Event(\"input\"));\n        document.getElementById(\"adjustmentSlider\").value = 3;\n        document.getElementById(\"resetButton\").style.visibility = \"hidden\";\n        $21333b374a3a0336$var$validateInput();\n    });\n    document.getElementById(\"minPrice\").addEventListener(\"blur\", ()=>$21333b374a3a0336$var$validateInput());\n    document.getElementById(\"minPrice\").addEventListener(\"input\", ()=>{\n        const adjustmentMinInput = document.getElementById(\"minPrice\");\n        const adjustmentMaxInput = document.getElementById(\"maxPrice\");\n        const adjustmentMin = Number(adjustmentMinInput.value);\n        if (adjustmentMin !== minPrice) document.getElementById(\"origMinPrice\").style.visibility = \"visible\";\n        else document.getElementById(\"origMinPrice\").style.visibility = \"hidden\";\n        $21333b374a3a0336$var$adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n    });\n    document.getElementById(\"minIncrease\").addEventListener(\"click\", ()=>{\n        $21333b374a3a0336$var$increasePrice(document.getElementById(\"minPrice\"), minPrice);\n        analytics.track(\"Click\", {\n            elementID: \"minIncrease\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    document.getElementById(\"minDecrease\").addEventListener(\"click\", ()=>{\n        $21333b374a3a0336$var$lowerPrice(document.getElementById(\"minPrice\"), minPrice);\n        analytics.track(\"Click\", {\n            elementID: \"minDecrease\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    document.getElementById(\"maxPrice\").addEventListener(\"blur\", ()=>$21333b374a3a0336$var$validateInput());\n    document.getElementById(\"maxPrice\").addEventListener(\"input\", ()=>{\n        const adjustmentMaxInput = document.getElementById(\"maxPrice\");\n        const adjustmentMinInput = document.getElementById(\"minPrice\");\n        const adjustmentMax = Number(adjustmentMaxInput.value);\n        if (adjustmentMax !== maxPrice) document.getElementById(\"origMaxPrice\").style.visibility = \"visible\";\n        else document.getElementById(\"origMaxPrice\").style.visibility = \"hidden\";\n        $21333b374a3a0336$var$adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n    });\n    document.getElementById(\"maxIncrease\").addEventListener(\"click\", ()=>{\n        $21333b374a3a0336$var$increasePrice(document.getElementById(\"maxPrice\"), maxPrice);\n        analytics.track(\"Click\", {\n            elementID: \"maxIncrease\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    document.getElementById(\"maxDecrease\").addEventListener(\"click\", ()=>{\n        $21333b374a3a0336$var$lowerPrice(document.getElementById(\"maxPrice\"), maxPrice);\n        analytics.track(\"Click\", {\n            elementID: \"maxDecrease\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    if (item.infoRequests?.price?.type === \"Final Offer\" || item.infoRequests?.price?.type === \"Valuation\") document.getElementById(\"valuationMotivation\").style.display = \"none\";\n};\nconst $21333b374a3a0336$var$getItem = async (itemId)=>{\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable(\"getItem\")({\n        itemId: itemId\n    });\n    return {\n        ...res?.data || {},\n        id: itemId\n    };\n};\nconst $21333b374a3a0336$var$maxIncrease = (price)=>{\n    if (price < 500) return price * 0.5;\n    else if (price < 1000) return price * 0.4;\n    return price * 0.3;\n};\nconst $21333b374a3a0336$var$minPriceMaxIncrease = (minPrice, maxPrice)=>Math.min($21333b374a3a0336$var$maxIncrease(minPrice), $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice) - minPrice);\nfunction $21333b374a3a0336$var$rangeSlider(minPrice, maxPrice) {\n    const range = document.getElementById(\"adjustmentSlider\");\n    range.addEventListener(\"touchend\", ()=>{\n        range.value = Math.round(Number(range.value));\n        analytics.track(\"Click\", {\n            elementID: \"adjustmentSlider\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    range.addEventListener(\"mouseup\", ()=>{\n        range.value = Math.round(Number(range.value));\n        analytics.track(\"Click\", {\n            elementID: \"adjustmentSlider\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    range.addEventListener(\"input\", function() {\n        let minInput = document.getElementById(\"minPrice\");\n        let maxInput = document.getElementById(\"maxPrice\");\n        const closestValue = Math.round(Number(range.value));\n        switch(closestValue){\n            case 0:\n                minInput.value = Math.max(100, Math.round(minPrice * 0.5 / 10) * 10);\n                maxInput.value = Math.max(100, Math.round(maxPrice * 0.5 / 10) * 10);\n                break;\n            case 1:\n                minInput.value = Math.max(100, Math.round(minPrice * 0.66 / 10) * 10);\n                maxInput.value = Math.max(100, Math.round(maxPrice * 0.66 / 10) * 10);\n                break;\n            case 2:\n                minInput.value = Math.max(100, Math.round(minPrice * 0.83 / 10) * 10);\n                maxInput.value = Math.max(100, Math.round(maxPrice * 0.83 / 10) * 10);\n                break;\n            case 3:\n                minInput.value = minPrice;\n                maxInput.value = maxPrice;\n                break;\n            case 4:\n                minInput.value = Math.round((minPrice + $21333b374a3a0336$var$minPriceMaxIncrease(minPrice, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice)) * 0.33) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + $21333b374a3a0336$var$maxIncrease(maxPrice) * 0.33) / 10) * 10;\n                break;\n            case 5:\n                minInput.value = Math.round((minPrice + $21333b374a3a0336$var$minPriceMaxIncrease(minPrice, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice)) * 0.67) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + $21333b374a3a0336$var$maxIncrease(maxPrice) * 0.67) / 10) * 10;\n                break;\n            case 6:\n                minInput.value = Math.floor((minPrice + $21333b374a3a0336$var$minPriceMaxIncrease(minPrice, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice))) / 10) * 10;\n                maxInput.value = Math.floor((maxPrice + $21333b374a3a0336$var$maxIncrease(maxPrice)) / 10) * 10;\n                break;\n        }\n        minInput.dispatchEvent(new Event(\"input\"));\n        maxInput.dispatchEvent(new Event(\"input\"));\n    });\n}\nconst $21333b374a3a0336$var$main = async ()=>{\n    window.intercomSettings = {\n        app_id: \"klyy0le5\"\n    };\n    (function() {\n        var w = window;\n        var ic = w.Intercom;\n        if (typeof ic === \"function\") {\n            ic(\"reattach_activator\");\n            ic(\"update\", w.intercomSettings);\n        } else {\n            var d = document;\n            var i = function() {\n                i.c(arguments);\n            };\n            i.q = [];\n            i.c = function(args) {\n                i.q.push(args);\n            };\n            w.Intercom = i;\n            var l = function() {\n                var s = d.createElement(\"script\");\n                s.type = \"text/javascript\";\n                s.async = true;\n                s.src = \"https://widget.intercom.io/widget/klyy0le5\";\n                var x = d.getElementsByTagName(\"script\")[0];\n                x.parentNode.insertBefore(s, x);\n            };\n            if (w.attachEvent) w.attachEvent(\"onload\", l);\n            else w.addEventListener(\"load\", l, false);\n        }\n    })();\n    Intercom(\"update\", {\n        \"hide_default_launcher\": true\n    });\n    const item = params.id ? await $21333b374a3a0336$var$getItem(params.id) : JSON.parse(sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\") || \"{}\")?.item || JSON.parse(localStorage.getItem(\"latestItemCreated\") || \"{}\");\n    if (!item) {\n        console.error(\"Invalid item id or no saved item to show valuation for\");\n        return location.href = \"/private\";\n    }\n    $21333b374a3a0336$var$initialPageSetup(item);\n    await $21333b374a3a0336$var$showMlValuation(item);\n};\n$21333b374a3a0336$var$main();\n\n})();\n//# sourceMappingURL=itemValuation.js.map\n","window.itemValuationJsLoaded = true;\nasync function showDeclineValuation(item) {\n    document.getElementById('valuationHeading').style.display = 'none';\n    document.getElementById('valuationMotivation').style.display = 'none';\n    document.getElementById('valuationText').innerText = 'Säljer ej';\n    document.getElementById('valuationText').style.display = 'block';\n    document.getElementById('rejectButton').style.display = 'none';\n    document.getElementById('confirmButton').style.display = 'none';\n    document.getElementById('okejButton').style.display = 'flex';\n    document.getElementById('newItemButton').style.display = 'flex';\n    document.getElementById('declineExplanation').style.display = 'block';\n    document.getElementById('valuationRange').style.display = 'none';\n    document.getElementById('adjustIntervalButton').style.display = 'none';\n    document.getElementById('valuationExplanation').style.display = 'none';\n    document.getElementById('valuationExplanationHeader').style.display = 'none';\n    document.getElementById('chatDiv').style.display = 'block';\n    document.getElementById('newItemButton').addEventListener('click', () => {\n        sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n        localStorage.removeItem('newItem');\n        sessionStorage.removeItem('newItemId');\n        sessionStorage.removeItem('itemValuation');\n        window.location.href = '/sell-item';\n    });\n    document.getElementById('okejButton').addEventListener('click', () => {\n        sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n        localStorage.removeItem('newItem');\n        sessionStorage.removeItem('newItemId');\n        sessionStorage.removeItem('itemValuation');\n        window.location.href = '/private';\n    });\n    if (item.id) {\n        await firebase.app().functions(\"europe-west1\").httpsCallable('markItemRejected')({\n            itemId: item.id, userDecline: false\n        });\n    }\n}\n\nconst adjustmentOk = (minPrice, maxPrice) => {\n    const adjustedMin = document.getElementById('minPrice').value;\n    const adjustedMax = document.getElementById('maxPrice').value;\n    return !adjustmentRequiresReview(minPrice, maxPrice, Number(adjustedMin), Number(adjustedMax));\n}\n\nconst priceTooHigh = (price, adjustedPrice) => {\n    if (price < 500 && adjustedPrice > price * 1.5) {\n        return true;\n    } else if (price >= 500 && price < 1000 && adjustedPrice > price * 1.4) {\n        return true;\n    } else if (price >= 1000 && adjustedPrice > price * 1.3) {\n        return true\n    }\n    return false;\n}\n\nconst minPriceNotOk = (minPrice, maxPrice, adjustedMin) =>\n    priceTooHigh(minPrice, adjustedMin) || adjustedMin > estimatedPrice(minPrice, maxPrice);\n\nconst adjustmentRequiresReview = (minPrice, maxPrice, adjustmentMin, adjustmentMax) =>\n    minPriceNotOk(minPrice, maxPrice, adjustmentMin) || priceTooHigh(maxPrice, adjustmentMax);\n\nconst maxTooHighWarning = (maxPrice, adjustmentMax) => priceTooHigh(maxPrice, adjustmentMax) ? 'Ovanligt högt startpris' : null;\nconst minTooHighWarning = (minPrice, adjustmentMin) => priceTooHigh(minPrice, adjustmentMin) ? 'Ovanligt högt lägsta pris' : null;\nconst minAboveValuationWarning = (adjustmentMin, estimatedPrice) => adjustmentMin > estimatedPrice ? 'Lägsta priset överstiger vår värdering' : null;\n\nconst adjustmentWarningText = (minPrice, maxPrice, adjustmentMin, adjustmentMax) => [\n    maxTooHighWarning(maxPrice, adjustmentMax),\n    minTooHighWarning(minPrice, adjustmentMin),\n    minAboveValuationWarning(adjustmentMin, estimatedPrice(minPrice, maxPrice))\n].filter(p => p).join('<br>');\n\nconst adjustmentValidations = (minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput) => {\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    adjustmentMaxInput.style.color = priceTooHigh(maxPrice, adjustmentMax) ? '#E20000' : '#333';\n    adjustmentMinInput.style.color = minPriceNotOk(minPrice, maxPrice, adjustmentMin) ? '#E20000' : '#333';\n    if (adjustmentRequiresReview(minPrice, maxPrice, adjustmentMin, adjustmentMax)) {\n        if (document.getElementById('requiresReviewDiv').style.display !== 'block') {\n            document.getElementById('requiresReviewDiv').style.display = 'block';\n            analytics.track(\"Element Viewed\", { elementID: \"requiresReviewDiv\" });\n        }\n        document.getElementById('adjustmentWarningText').innerHTML = adjustmentWarningText(minPrice, maxPrice, adjustmentMin, adjustmentMax);\n        document.getElementById('noteDiv').style.display = 'none';\n        document.getElementById('sendForReviewButton').style.display = 'flex';\n        document.getElementById('confirmButton').style.display = 'none';\n        document.getElementById('rejectButton').style.display = 'none';\n    } else if (adjustmentMax !== maxPrice || adjustmentMin !== minPrice) {\n        document.getElementById('confirmButton').style.display = 'flex';\n        document.getElementById('sendForReviewButton').style.display = 'none';\n        if (document.getElementById('resetButton').style.visibility !== 'visible') {\n            document.getElementById('resetButton').style.visibility = 'visible';\n            analytics.track(\"Element Viewed\", { elementID: \"resetButton\" });\n        }\n        document.getElementById('requiresReviewDiv').style.display = 'none';\n        const noteTextBefore = document.getElementById('noteText').innerText;\n        let noteText = '';\n        if (adjustmentMax > maxPrice) {\n            noteText += 'Ett höjt startpris kan innebära att det tar längre tid för plagget att säljas.';\n        }\n        if (adjustmentMin > minPrice) {\n            noteText += `${noteText ? ' ' : ''}Ett höjt lägsta pris minskar sannolikheten att det blir sålt.`;\n        }\n        if (!noteText) {\n            noteText = 'Bra att du kan tänka dig sänka priset! Det ökar sannolikheten att det blir sålt.';\n        }\n        document.getElementById('noteHeading').innerHTML = 'Notera!';\n        document.getElementById('noteText').innerText = noteText;\n        document.getElementById('noteDiv').style.display = 'block';\n        if (noteText !== noteTextBefore) {\n            document.getElementById('noteDiv').click(); // Animation trigger to get users attention\n        }\n        document.getElementById('confirmButton').innerText = 'Påbörja försäljning';\n        document.getElementById('rejectButton').style.display = 'flex';\n    } else {\n        document.getElementById('resetButton').style.visibility = 'hidden';\n        document.getElementById('noteHeading').innerHTML = 'Tips!';\n        document.getElementById('noteText').innerText = 'Sänkta priser ger en säkrare och snabbare försäljning. Höjda priser kan ge mer pengar, men riskerar också att det blir osålt eller tar längre tid.';\n        document.getElementById('noteDiv').style.display = 'block';\n        document.getElementById('requiresReviewDiv').style.display = 'none';\n        document.getElementById('confirmButton').style.display = 'flex';\n        document.getElementById('sendForReviewButton').style.display = 'none';\n        document.getElementById('rejectButton').style.display = 'flex';\n    }\n}\n\nfunction validateInput() {\n    const adjustmentMinInput = document.getElementById('minPrice');\n    const adjustmentMaxInput = document.getElementById('maxPrice');\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    if (adjustmentMin < 100) {\n        adjustmentMinInput.setCustomValidity('Vi försöker tyvärr aldrig sälja något under 100kr');\n    } else if (adjustmentMin > adjustmentMax) {\n        adjustmentMaxInput.setCustomValidity('Startpris måste vara högre än lägsta pris');\n        adjustmentMinInput.setCustomValidity('Lägsta pris måste vara mindre än startpris');\n    } else {\n        adjustmentMinInput.setCustomValidity('');\n        adjustmentMaxInput.setCustomValidity('');\n    }\n    return document.getElementById('wf-form-Valuation-form').reportValidity();\n}\n\nasync function saveValuationStatus(itemId, minPrice, maxPrice) {\n    if (!validateInput()) {\n        return;\n    }\n    const minInput = document.getElementById('minPrice');\n    const adjustedMin = Number(minInput.value);\n    const maxInput = document.getElementById('maxPrice');\n    const adjustedMax = Number(maxInput.value);\n    if (sessionStorage.getItem('itemToBeCreatedAfterSignIn')) {\n        const savedItem = JSON.parse(sessionStorage.getItem('itemToBeCreatedAfterSignIn'));\n        savedItem.item.infoRequests.price.status = 'Resolved';\n        savedItem.item.infoRequests.price.response = 'Accepted';\n        if (adjustedMin !== minPrice || adjustedMax !== maxPrice) {\n            savedItem.item.infoRequests.price.userAdjustedMin = adjustedMin;\n            savedItem.item.infoRequests.price.userAdjustedMax = adjustedMax;\n            if (adjustmentOk(minPrice, maxPrice)) {\n                savedItem.item.minPriceEstimate = minPrice;\n                savedItem.item.maxPriceEstimate = maxPrice;\n            } else {\n                savedItem.item.infoRequests.price.response = 'User proposal';\n                savedItem.item.infoRequests.price.userProposalMotivation = document.getElementById('userProposalMotivation').value;\n            }\n        } else {\n            savedItem.item.minPriceEstimate = minPrice;\n            savedItem.item.maxPriceEstimate = maxPrice;\n        }\n        sessionStorage.setItem('itemToBeCreatedAfterSignIn', JSON.stringify(savedItem));\n        return window.location.href = '/sign-in';\n    } else {\n        await firebase.app().functions(\"europe-west1\").httpsCallable('saveValuationStatus')({\n            itemId, minPrice, maxPrice, adjustmentMin: adjustedMin, adjustmentMax: adjustedMax,\n            userProposalMotivation: document.getElementById('userProposalMotivation').value,\n            adjustmentRequiresReview: !adjustmentOk(minPrice, maxPrice)\n        });\n        if (localStorage.getItem('latestItemCreated') && !params.id) {\n            const latestItemCreated = JSON.parse(localStorage.getItem('latestItemCreated'));\n            latestItemCreated.infoRequests.price.response = adjustmentOk(minPrice, maxPrice) ? 'Accepted' : 'User proposal';\n            if (adjustmentOk(minPrice, maxPrice)) {\n                latestItemCreated.minPriceEstimate = adjustedMin;\n                latestItemCreated.maxPriceEstimate = adjustedMax;\n            }\n            localStorage.setItem('latestItemCreated', JSON.stringify(latestItemCreated));\n        }\n        if (!document.referrer.includes('/private')) {\n            const userPhoneSet = user.current?.phoneNumber?.length;\n            return window.location.href = userPhoneSet ? `/item-confirmation` :\n                `/user-contact`;\n        } else {\n            return window.location.href = `/private`;\n        }\n    }\n}\n\nconst initialPageSetup = (item) => {\n    document.getElementById('itemImage').src = window.innerWidth <= 400 ?\n        item?.images?.enhancedFrontImageSmall || item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImageSmall || item?.images?.frontImage :\n        item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImage;\n    const { minPriceEstimate, newMinPriceEstimate, newMaxPriceEstimate, maxPriceEstimate } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n\n    document.getElementById('chatLink').onclick = () => Intercom('showNewMessage',\n        item.mlValuation?.decline ?\n            `ID: ${item.id}\\n\\nGällande att ni tackat nej till ${item.brand.trim()}-${item.category.toLowerCase()}:\\n\\n` :\n            `ID: ${item.id}\\n\\nGällande prisintervallet på ${minPrice}-${maxPrice} kr för ${item.brand.trim()}-${item.category.toLowerCase()}. Vad skulle du vilja ändra det till och varför?\\n\\n`);\n    document.getElementById('valuationClose').addEventListener('click', () => {\n        sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n        if (!params.id) {\n            localStorage.removeItem('newItem');\n            sessionStorage.removeItem('newItemId');\n        }\n        return window.location.href = '/private';\n    })\n}\n\nconst rejectValuation = async (item) => {\n    if (item.id) {\n        await firebase.app().functions(\"europe-west1\").httpsCallable('markItemRejected')({\n            itemId: item.id, userDecline: true\n        });\n    }\n    sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n    if (!params.id) {\n        localStorage.removeItem('newItem');\n        localStorage.removeItem('latestItemCreated');\n        sessionStorage.removeItem('newItemId');\n    }\n    return window.location.href = '/private';\n}\n\nconst hideTooltip = () => {\n    for (const element of document.getElementsByClassName('tooltip-motivation')) {\n        element.classList.remove('tooltip-show');\n    }\n}\n\nconst priceAdjustment = (inputValue) => {\n    if (inputValue < 200) {\n        return 20;\n    } else if (inputValue < 500) {\n        return 50;\n    }\n    return 100;\n}\nconst lowerPrice = (input, origValue) => {\n    const value = Number(input.value);\n    const valPriceAdjustment = priceAdjustment(origValue);\n    const newValue = Math.floor(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = Math.max(0, newValue === value ? value - valPriceAdjustment : newValue);\n    input.dispatchEvent(new Event('input'));\n}\n\nconst increasePrice = (input, origValue) => {\n    const value = Number(input.value);\n    const valPriceAdjustment = priceAdjustment(origValue);\n    const newValue = Math.ceil(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = newValue === value ? value + valPriceAdjustment : newValue;\n    input.dispatchEvent(new Event('input'));\n}\n\nconst estimatedPrice = (minPrice, maxPrice) => Math.round((minPrice + maxPrice) / 20) * 10;\nconst showMlValuation = async (item) => {\n    const { minPriceEstimate, newMinPriceEstimate, newMaxPriceEstimate, maxPriceEstimate, decline, newBrand, newBrandCategory } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n    document.getElementById('valuationText').innerText = `${estimatedPrice(minPrice, maxPrice)} kr`;\n    document.getElementById('valuationResultDiv').style.display = 'flex';\n    document.body.addEventListener('click', hideTooltip);\n    document.getElementById('valuationRange').style.display = 'flex';\n    document.getElementById('minPrice').value = minPrice;\n    document.getElementById('minPrice').disabled = true;\n    document.getElementById('maxPrice').value = maxPrice;\n    document.getElementById('maxPrice').disabled = true;\n    if (item.infoRequests?.price?.description) {\n        document.getElementById('valuationExplanation').innerText = item.infoRequests.price.description;\n        if (item.infoRequests?.price?.type === 'Final Offer') {\n            document.getElementById('valuationExplanationHeader').innerText = 'Motivering';\n            document.getElementById('valuationExplanationHeader').style.display = 'block';\n        }\n    } else if (newBrand || newBrandCategory) {\n        document.getElementById('valuationExplanationHeader').style.display = 'block';\n        document.getElementById('valuationExplanation').innerText = newBrand ?\n            'Vi har inte sålt så mycket av detta varumärke tidigare och har därför lite mindre data. Du får justera om du upplever att värderingen inte är rimlig. Vi börjar med startpriset, och justerar successivt ner till lägsta priset under säljperioden på 30 dagar.' :\n            'Vi har inte sålt så mycket av denna kategori från varumärket tidigare och har därför lite mindre data. Du får justera om du upplever att värderingen inte är rimlig. Vi börjar med startpriset, och justerar successivt ner till lägsta priset under säljperioden på 30 dagar.';\n    }\n    document.getElementById('valuationText').style.display = 'block';\n    if (sessionStorage.getItem('itemToBeCreatedAfterSignIn')) {\n        document.getElementById('chatDiv').style.display = 'none';\n    }\n\n    await showAdjustValuation(item);\n\n    if (decline) {\n        await showDeclineValuation(item);\n    } else {\n        document.getElementById('confirmButton').addEventListener('click', () => saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById('sendForReviewButton').addEventListener('click', () => saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById('rejectButton').addEventListener('click', () => rejectValuation(item));\n    }\n    triggerShowContent.click();\n}\n\nconst showAdjustValuation = async (item) => {\n\n    const { minPriceEstimate, newMinPriceEstimate, newMaxPriceEstimate, maxPriceEstimate, adjustmentAllowed } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n\n    if ((adjustmentAllowed || ['1A', '1B', '1C', '2A', '3', '5A', '7', '8'].includes(item.brandSegment))) { // Lade till detta som en tillfällig grej, för att man ska få det när man kommer från private page /Tobias\n        document.getElementById('adjustIntervalButton').style.display = 'flex';\n        analytics.track(\"Element Viewed\", { elementID: \"adjustIntervalButton\" });\n        document.getElementById('chatDiv').style.display = 'none';\n        document.getElementById('adjustIntervalButton').addEventListener('click', () => {\n            document.getElementById('valuationExplanation').style.display = 'none';\n            document.getElementById('valuationExplanationHeader').style.display = 'none';\n            document.getElementById('minPrice').disabled = false;\n            document.getElementById('maxPrice').disabled = false;\n            document.getElementById('adjustIntervalButton').style.display = 'none';\n            document.getElementById('noteDiv').style.display = 'block';\n            document.getElementById('origMinPrice').style.display = 'block';\n            document.getElementById('origMaxPrice').style.display = 'block';\n\n            document.getElementById('sliderDiv').style.display = 'block';\n            document.querySelectorAll(\".field-underline\").forEach(x => x.style.visibility = 'visible');\n        })\n    }\n    if (item.infoRequests?.price?.type === 'Final Offer') {\n        document.getElementById('adjustIntervalButton').style.display = 'none';\n        document.getElementById('chatDiv').style.display = 'none';\n    }\n\n    rangeSlider(minPrice, maxPrice);\n    document.getElementById('valuationMotivation').addEventListener('click', (e) => {\n        const elements = document.getElementsByClassName('tooltip-motivation');\n        const visible = elements[0]?.classList.contains('tooltip-show');\n        for (const element of elements) {\n            visible ? element.classList.remove('tooltip-show') : element.classList.add('tooltip-show');\n        }\n        e.stopPropagation();\n    });\n    document.getElementById('origMinPrice').innerText = minPrice;\n    document.getElementById('origMinPrice').style.visibility = 'hidden';\n    document.getElementById('origMaxPrice').innerText = maxPrice;\n    document.getElementById('origMaxPrice').style.visibility = 'hidden';\n    document.getElementById('resetButton').addEventListener('click', () => {\n        document.getElementById('minPrice').value = minPrice;\n        document.getElementById('maxPrice').value = maxPrice;\n        document.getElementById('minPrice').dispatchEvent(new Event('input'));\n        document.getElementById('maxPrice').dispatchEvent(new Event('input'));\n        document.getElementById('adjustmentSlider').value = 3;\n        document.getElementById('resetButton').style.visibility = 'hidden';\n        validateInput();\n    });\n    document.getElementById('minPrice').addEventListener('blur', () => validateInput());\n    document.getElementById('minPrice').addEventListener('input', () => {\n        const adjustmentMinInput = document.getElementById('minPrice');\n        const adjustmentMaxInput = document.getElementById('maxPrice');\n        const adjustmentMin = Number(adjustmentMinInput.value);\n        if (adjustmentMin !== minPrice) {\n            document.getElementById('origMinPrice').style.visibility = 'visible';\n        } else {\n            document.getElementById('origMinPrice').style.visibility = 'hidden';\n        }\n        adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n    });\n    document.getElementById('minIncrease').addEventListener('click', () => {\n        increasePrice(document.getElementById('minPrice'), minPrice);\n        analytics.track('Click', { elementID: 'minIncrease' });\n        validateInput();\n    });\n    document.getElementById('minDecrease').addEventListener('click', () => {\n        lowerPrice(document.getElementById('minPrice'), minPrice);\n        analytics.track('Click', { elementID: 'minDecrease' });\n        validateInput();\n    });\n    document.getElementById('maxPrice').addEventListener('blur', () => validateInput());\n    document.getElementById('maxPrice').addEventListener('input', () => {\n        const adjustmentMaxInput = document.getElementById('maxPrice');\n        const adjustmentMinInput = document.getElementById('minPrice');\n        const adjustmentMax = Number(adjustmentMaxInput.value);\n        if (adjustmentMax !== maxPrice) {\n            document.getElementById('origMaxPrice').style.visibility = 'visible';\n        } else {\n            document.getElementById('origMaxPrice').style.visibility = 'hidden';\n        }\n        adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n    });\n    document.getElementById('maxIncrease').addEventListener('click', () => {\n        increasePrice(document.getElementById('maxPrice'), maxPrice);\n        analytics.track('Click', { elementID: 'maxIncrease' });\n        validateInput();\n    });\n    document.getElementById('maxDecrease').addEventListener('click', () => {\n        lowerPrice(document.getElementById('maxPrice'), maxPrice);\n        analytics.track('Click', { elementID: 'maxDecrease' });\n        validateInput();\n    });\n\n    if (item.infoRequests?.price?.type === 'Final Offer' || item.infoRequests?.price?.type === 'Valuation') {\n        document.getElementById('valuationMotivation').style.display = 'none';\n    }\n}\n\nconst getItem = async (itemId) => {\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable('getItem')({ itemId })\n    return { ...(res?.data || {}), id: itemId };\n}\n\nconst maxIncrease = (price) => {\n    if (price < 500) {\n        return price * 0.5;\n    } else if (price < 1000) {\n        return price * 0.4;\n    }\n    return price * 0.3;\n}\n\nconst minPriceMaxIncrease = (minPrice, maxPrice) => Math.min(maxIncrease(minPrice), estimatedPrice(minPrice, maxPrice) - minPrice);\n\nfunction rangeSlider(minPrice, maxPrice) {\n    const range = document.getElementById('adjustmentSlider');\n    range.addEventListener('touchend', () => {\n        range.value = Math.round(Number(range.value));\n        analytics.track('Click', { elementID: 'adjustmentSlider' });\n        validateInput();\n    });\n    range.addEventListener('mouseup', () => {\n        range.value = Math.round(Number(range.value));\n        analytics.track('Click', { elementID: 'adjustmentSlider' });\n        validateInput();\n    });\n    range.addEventListener('input', function () {\n        let minInput = document.getElementById('minPrice');\n        let maxInput = document.getElementById('maxPrice');\n        const closestValue = Math.round(Number(range.value));\n        switch (closestValue) {\n            case 0: // -50%\n                minInput.value = Math.max(100, Math.round((minPrice * 0.5) / 10) * 10);\n                maxInput.value = Math.max(100, Math.round((maxPrice * 0.5) / 10) * 10);\n                break;\n            case 1: // -33%\n                minInput.value = Math.max(100, Math.round((minPrice * 0.66) / 10) * 10);\n                maxInput.value = Math.max(100, Math.round((maxPrice * 0.66) / 10) * 10);\n                break;\n            case 2: // -17%\n                minInput.value = Math.max(100, Math.round((minPrice * 0.83) / 10) * 10);\n                maxInput.value = Math.max(100, Math.round((maxPrice * 0.83) / 10) * 10);\n                break;\n            case 3:\n                minInput.value = minPrice;\n                maxInput.value = maxPrice;\n                break;\n            case 4:\n                minInput.value = Math.round((minPrice + minPriceMaxIncrease(minPrice, estimatedPrice(minPrice, maxPrice)) * 0.33) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + maxIncrease(maxPrice) * 0.33) / 10) * 10;\n                break;\n            case 5:\n                minInput.value = Math.round((minPrice + minPriceMaxIncrease(minPrice, estimatedPrice(minPrice, maxPrice)) * 0.67) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + maxIncrease(maxPrice) * 0.67) / 10) * 10;\n                break;\n            case 6:\n                minInput.value = Math.floor((minPrice + minPriceMaxIncrease(minPrice, estimatedPrice(minPrice, maxPrice))) / 10) * 10;\n                maxInput.value = Math.floor((maxPrice + maxIncrease(maxPrice)) / 10) * 10;\n                break;\n        }\n        minInput.dispatchEvent(new Event('input'));\n        maxInput.dispatchEvent(new Event('input'));\n    });\n}\n\nconst main = async () => {\n    window.intercomSettings = {\n        app_id: \"klyy0le5\"\n    };\n    (function () { var w = window; var ic = w.Intercom; if (typeof ic === \"function\") { ic('reattach_activator'); ic('update', w.intercomSettings); } else { var d = document; var i = function () { i.c(arguments); }; i.q = []; i.c = function (args) { i.q.push(args); }; w.Intercom = i; var l = function () { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/klyy0le5'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }; if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })();\n    Intercom('update', { 'hide_default_launcher': true });\n\n    const item = params.id ? (await getItem(params.id)) :\n        (JSON.parse(sessionStorage.getItem('itemToBeCreatedAfterSignIn') || '{}')?.item || JSON.parse(localStorage.getItem('latestItemCreated') || '{}'));\n    if (!item) {\n        console.error('Invalid item id or no saved item to show valuation for');\n        return location.href = '/private';\n    }\n    initialPageSetup(item);\n    await showMlValuation(item);\n}\n\nmain();\n"],"names":["$21333b374a3a0336$var$showDeclineValuation","item","document","getElementById","style","display","innerText","addEventListener","sessionStorage","removeItem","localStorage","window","location","href","id","firebase","app","functions","httpsCallable","itemId","userDecline","itemValuationJsLoaded","$21333b374a3a0336$var$adjustmentOk","minPrice","maxPrice","adjustedMin","value","adjustedMax","$21333b374a3a0336$var$adjustmentRequiresReview","Number","$21333b374a3a0336$var$priceTooHigh","price","adjustedPrice","$21333b374a3a0336$var$minPriceNotOk","$21333b374a3a0336$var$estimatedPrice","adjustmentMin","adjustmentMax","$21333b374a3a0336$var$maxTooHighWarning","$21333b374a3a0336$var$minTooHighWarning","$21333b374a3a0336$var$minAboveValuationWarning","estimatedPrice","$21333b374a3a0336$var$adjustmentWarningText","filter","p","join","$21333b374a3a0336$var$adjustmentValidations","adjustmentMinInput","adjustmentMaxInput","color","analytics","track","elementID","innerHTML","visibility","noteTextBefore","noteText","click","$21333b374a3a0336$var$validateInput","setCustomValidity","reportValidity","$21333b374a3a0336$var$saveValuationStatus","minInput","maxInput","getItem","savedItem","JSON","parse","infoRequests","status","response","userAdjustedMin","userAdjustedMax","minPriceEstimate","maxPriceEstimate","userProposalMotivation","setItem","stringify","adjustmentRequiresReview","params","latestItemCreated","referrer","includes","userPhoneSet","user","current","phoneNumber","length","$21333b374a3a0336$var$initialPageSetup","src","innerWidth","images","enhancedFrontImageSmall","enhancedFrontImage","modelImage","frontImageSmall","frontImage","newMinPriceEstimate","newMaxPriceEstimate","mlValuation","onclick","Intercom","decline","brand","trim","category","toLowerCase","$21333b374a3a0336$var$rejectValuation","$21333b374a3a0336$var$hideTooltip","element","getElementsByClassName","classList","remove","$21333b374a3a0336$var$priceAdjustment","inputValue","$21333b374a3a0336$var$lowerPrice","input","origValue","valPriceAdjustment","newValue","Math","floor","max","dispatchEvent","Event","$21333b374a3a0336$var$increasePrice","ceil","round","$21333b374a3a0336$var$showMlValuation","newBrand","newBrandCategory","body","disabled","description","type","$21333b374a3a0336$var$showAdjustValuation","triggerShowContent","adjustmentAllowed","brandSegment","querySelectorAll","forEach","x","$21333b374a3a0336$var$rangeSlider","range","closestValue","$21333b374a3a0336$var$minPriceMaxIncrease","$21333b374a3a0336$var$maxIncrease","e","elements","visible","contains","add","stopPropagation","$21333b374a3a0336$var$getItem","res","data","min","$21333b374a3a0336$var$main","intercomSettings","app_id","w","ic","d","i","c","arguments","q","args","push","l","s","createElement","async","getElementsByTagName","parentNode","insertBefore","attachEvent","console","error"],"version":3,"file":"itemValuation.js.map"}