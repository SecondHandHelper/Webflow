{"mappings":"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","sources":["<anon>","itemValuation.js"],"sourcesContent":["(function () {\nwindow.itemValuationJsLoaded = true;\nasync function $21333b374a3a0336$var$showDeclineValuation(item) {\n    document.getElementById(\"valuationHeading\").style.display = \"none\";\n    document.getElementById(\"valuationMotivation\").style.display = \"none\";\n    document.getElementById(\"valuationText\").innerText = \"S\\xe4ljer ej\";\n    document.getElementById(\"valuationText\").style.display = \"block\";\n    document.getElementById(\"rejectButton\").style.display = \"none\";\n    document.getElementById(\"confirmButton\").style.display = \"none\";\n    document.getElementById(\"okejButton\").style.display = \"flex\";\n    document.getElementById(\"newItemButton\").style.display = \"flex\";\n    document.getElementById(\"declineExplanation\").style.display = \"block\";\n    document.getElementById(\"valuationRange\").style.display = \"none\";\n    document.getElementById(\"adjustIntervalButton\").style.display = \"none\";\n    document.getElementById(\"valuationExplanation\").style.display = \"none\";\n    document.getElementById(\"valuationExplanationHeader\").style.display = \"none\";\n    document.getElementById(\"chatDiv\").style.display = \"block\";\n    document.getElementById(\"newItemButton\").addEventListener(\"click\", ()=>{\n        sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n        localStorage.removeItem(\"newItem\");\n        sessionStorage.removeItem(\"newItemId\");\n        sessionStorage.removeItem(\"itemValuation\");\n        window.location.href = \"/sell-item\";\n    });\n    document.getElementById(\"okejButton\").addEventListener(\"click\", ()=>{\n        sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n        localStorage.removeItem(\"newItem\");\n        sessionStorage.removeItem(\"newItemId\");\n        sessionStorage.removeItem(\"itemValuation\");\n        window.location.href = \"/private\";\n    });\n    if (item.id) await firebase.app().functions(\"europe-west1\").httpsCallable(\"markItemRejected\")({\n        itemId: item.id,\n        userDecline: false\n    });\n}\nconst $21333b374a3a0336$var$adjustmentOk = (minPrice, maxPrice)=>{\n    const adjustedMin = document.getElementById(\"minPrice\").value;\n    const adjustedMax = document.getElementById(\"maxPrice\").value;\n    return !$21333b374a3a0336$var$adjustmentRequiresReview(minPrice, maxPrice, Number(adjustedMin), Number(adjustedMax));\n};\nconst $21333b374a3a0336$var$priceTooHigh = (price, adjustedPrice)=>{\n    if (price < 500 && adjustedPrice > price * 1.5) return true;\n    else if (price >= 500 && price < 1000 && adjustedPrice > price * 1.4) return true;\n    else if (price >= 1000 && adjustedPrice > price * 1.3) return true;\n    return false;\n};\nconst $21333b374a3a0336$var$minPriceNotOk = (minPrice, maxPrice, adjustedMin)=>$21333b374a3a0336$var$priceTooHigh(minPrice, adjustedMin) || adjustedMin > $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice);\nconst $21333b374a3a0336$var$adjustmentRequiresReview = (minPrice, maxPrice, adjustmentMin, adjustmentMax)=>$21333b374a3a0336$var$minPriceNotOk(minPrice, maxPrice, adjustmentMin) || $21333b374a3a0336$var$priceTooHigh(maxPrice, adjustmentMax);\nconst $21333b374a3a0336$var$maxTooHighWarning = (maxPrice, adjustmentMax)=>$21333b374a3a0336$var$priceTooHigh(maxPrice, adjustmentMax) ? \"Ovanligt h\\xf6gt startpris\" : null;\nconst $21333b374a3a0336$var$minTooHighWarning = (minPrice, adjustmentMin)=>$21333b374a3a0336$var$priceTooHigh(minPrice, adjustmentMin) ? \"Ovanligt h\\xf6gt l\\xe4gsta pris\" : null;\nconst $21333b374a3a0336$var$minAboveValuationWarning = (adjustmentMin, estimatedPrice)=>adjustmentMin > estimatedPrice ? \"L\\xe4gsta priset \\xf6verstiger v\\xe5r v\\xe4rdering\" : null;\nconst $21333b374a3a0336$var$adjustmentWarningText = (minPrice, maxPrice, adjustmentMin, adjustmentMax)=>[\n        $21333b374a3a0336$var$maxTooHighWarning(maxPrice, adjustmentMax),\n        $21333b374a3a0336$var$minTooHighWarning(minPrice, adjustmentMin),\n        $21333b374a3a0336$var$minAboveValuationWarning(adjustmentMin, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice))\n    ].filter((p)=>p).join(\"<br>\");\nconst $21333b374a3a0336$var$adjustmentValidations = (minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput)=>{\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    adjustmentMaxInput.style.color = $21333b374a3a0336$var$priceTooHigh(maxPrice, adjustmentMax) ? \"#E20000\" : \"#333\";\n    adjustmentMinInput.style.color = $21333b374a3a0336$var$minPriceNotOk(minPrice, maxPrice, adjustmentMin) ? \"#E20000\" : \"#333\";\n    if ($21333b374a3a0336$var$adjustmentRequiresReview(minPrice, maxPrice, adjustmentMin, adjustmentMax)) {\n        if (document.getElementById(\"requiresReviewDiv\").style.display !== \"block\") {\n            document.getElementById(\"requiresReviewDiv\").style.display = \"block\";\n            analytics.track(\"Element Viewed\", {\n                elementID: \"requiresReviewDiv\"\n            });\n        }\n        document.getElementById(\"adjustmentWarningText\").innerHTML = $21333b374a3a0336$var$adjustmentWarningText(minPrice, maxPrice, adjustmentMin, adjustmentMax);\n        document.getElementById(\"noteDiv\").style.display = \"none\";\n        document.getElementById(\"sendForReviewButton\").style.display = \"flex\";\n        document.getElementById(\"confirmButton\").style.display = \"none\";\n        document.getElementById(\"rejectButton\").style.display = \"none\";\n    } else if (adjustmentMax !== maxPrice || adjustmentMin !== minPrice) {\n        document.getElementById(\"confirmButton\").style.display = \"flex\";\n        document.getElementById(\"sendForReviewButton\").style.display = \"none\";\n        if (document.getElementById(\"resetButton\").style.visibility !== \"visible\") {\n            document.getElementById(\"resetButton\").style.visibility = \"visible\";\n            analytics.track(\"Element Viewed\", {\n                elementID: \"resetButton\"\n            });\n        }\n        document.getElementById(\"requiresReviewDiv\").style.display = \"none\";\n        const noteTextBefore = document.getElementById(\"noteText\").innerText;\n        let noteText = \"\";\n        if (adjustmentMax > maxPrice) noteText += \"Ett h\\xf6jt startpris kan inneb\\xe4ra att det tar l\\xe4ngre tid f\\xf6r\\xa0plagget att s\\xe4ljas.\";\n        if (adjustmentMin > minPrice) noteText += `${noteText ? \" \" : \"\"}Ett höjt lägsta pris minskar sannolikheten att det blir sålt.`;\n        if (!noteText) noteText = \"Bra att du kan t\\xe4nka dig s\\xe4nka priset! Det \\xf6kar sannolikheten att det blir s\\xe5lt.\";\n        document.getElementById(\"noteHeading\").innerHTML = \"Notera!\";\n        document.getElementById(\"noteText\").innerText = noteText;\n        document.getElementById(\"noteDiv\").style.display = \"block\";\n        if (noteText !== noteTextBefore) document.getElementById(\"noteDiv\").click(); // Animation trigger to get users attention\n        document.getElementById(\"confirmButton\").innerText = \"P\\xe5b\\xf6rja f\\xf6rs\\xe4ljning\";\n        document.getElementById(\"rejectButton\").style.display = \"flex\";\n    } else {\n        document.getElementById(\"resetButton\").style.visibility = \"hidden\";\n        document.getElementById(\"noteHeading\").innerHTML = \"Tips!\";\n        document.getElementById(\"noteText\").innerText = \"S\\xe4nkta priser ger en s\\xe4krare och snabbare f\\xf6rs\\xe4ljning. H\\xf6jda priser kan ge mer pengar, men riskerar ocks\\xe5 att det blir os\\xe5lt eller tar l\\xe4ngre tid.\";\n        document.getElementById(\"noteDiv\").style.display = \"block\";\n        document.getElementById(\"requiresReviewDiv\").style.display = \"none\";\n        document.getElementById(\"confirmButton\").style.display = \"flex\";\n        document.getElementById(\"sendForReviewButton\").style.display = \"none\";\n        document.getElementById(\"rejectButton\").style.display = \"flex\";\n    }\n};\nfunction $21333b374a3a0336$var$validateInput() {\n    const adjustmentMinInput = document.getElementById(\"minPrice\");\n    const adjustmentMaxInput = document.getElementById(\"maxPrice\");\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    if (adjustmentMin < 100) adjustmentMinInput.setCustomValidity(\"Vi f\\xf6rs\\xf6ker tyv\\xe4rr aldrig s\\xe4lja n\\xe5got under 100kr\");\n    else if (adjustmentMin > adjustmentMax) {\n        adjustmentMaxInput.setCustomValidity(\"Startpris m\\xe5ste vara h\\xf6gre \\xe4n l\\xe4gsta pris\");\n        adjustmentMinInput.setCustomValidity(\"L\\xe4gsta pris m\\xe5ste vara mindre \\xe4n startpris\");\n    } else {\n        adjustmentMinInput.setCustomValidity(\"\");\n        adjustmentMaxInput.setCustomValidity(\"\");\n    }\n    return document.getElementById(\"wf-form-Valuation-form\").reportValidity();\n}\nasync function $21333b374a3a0336$var$saveValuationStatus(itemId, minPrice, maxPrice) {\n    if (!$21333b374a3a0336$var$validateInput()) return;\n    const minInput = document.getElementById(\"minPrice\");\n    const adjustedMin = Number(minInput.value);\n    const maxInput = document.getElementById(\"maxPrice\");\n    const adjustedMax = Number(maxInput.value);\n    if (sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\")) {\n        const savedItem = JSON.parse(sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\"));\n        savedItem.item.infoRequests.price.status = \"Resolved\";\n        savedItem.item.infoRequests.price.response = \"Accepted\";\n        if (featureIsEnabled(\"adjustValuation\") && (adjustedMin !== minPrice || adjustedMax !== maxPrice)) {\n            savedItem.item.infoRequests.price.userAdjustedMin = adjustedMin;\n            savedItem.item.infoRequests.price.userAdjustedMax = adjustedMax;\n            if ($21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice)) {\n                savedItem.item.minPriceEstimate = minPrice;\n                savedItem.item.maxPriceEstimate = maxPrice;\n            } else {\n                savedItem.item.infoRequests.price.response = \"User proposal\";\n                savedItem.item.infoRequests.price.userProposalMotivation = document.getElementById(\"userProposalMotivation\").value;\n            }\n        } else {\n            savedItem.item.minPriceEstimate = minPrice;\n            savedItem.item.maxPriceEstimate = maxPrice;\n        }\n        sessionStorage.setItem(\"itemToBeCreatedAfterSignIn\", JSON.stringify(savedItem));\n        return window.location.href = \"/sign-in\";\n    } else {\n        await firebase.app().functions(\"europe-west1\").httpsCallable(\"saveValuationStatus\")({\n            itemId: itemId,\n            minPrice: minPrice,\n            maxPrice: maxPrice,\n            adjustmentMin: adjustedMin,\n            adjustmentMax: adjustedMax,\n            userProposalMotivation: document.getElementById(\"userProposalMotivation\").value,\n            adjustmentRequiresReview: !$21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice)\n        });\n        if (localStorage.getItem(\"latestItemCreated\")) {\n            const latestItemCreated = JSON.parse(localStorage.getItem(\"latestItemCreated\"));\n            latestItemCreated.infoRequests.price.response = $21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice) ? \"Accepted\" : \"User proposal\";\n            if ($21333b374a3a0336$var$adjustmentOk(minPrice, maxPrice)) {\n                latestItemCreated.minPriceEstimate = adjustedMin;\n                latestItemCreated.maxPriceEstimate = adjustedMax;\n            }\n            localStorage.setItem(\"latestItemCreated\", JSON.stringify(latestItemCreated));\n        }\n        if (!document.referrer.includes(\"/private\")) {\n            const userPhoneSet = user.current?.phoneNumber?.length;\n            return window.location.href = userPhoneSet ? `/item-confirmation` : `/user-contact`;\n        } else return window.location.href = `/private`;\n    }\n}\nconst $21333b374a3a0336$var$initialPageSetup = (item)=>{\n    document.getElementById(\"itemImage\").src = window.innerWidth <= 400 ? item?.images?.enhancedFrontImageSmall || item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImageSmall || item?.images?.frontImage : item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImage;\n    const { minPriceEstimate: minPriceEstimate, newMinPriceEstimate: newMinPriceEstimate, newMaxPriceEstimate: newMaxPriceEstimate, maxPriceEstimate: maxPriceEstimate } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n    document.getElementById(\"chatLink\").onclick = ()=>Intercom(\"showNewMessage\", item.mlValuation?.decline ? `ID: ${item.id}\\n\\nGällande att ni tackat nej till ${item.brand.trim()}-${item.category.toLowerCase()}:\\n\\n` : `ID: ${item.id}\\n\\nGällande prisintervallet på ${minPrice}-${maxPrice} kr för ${item.brand.trim()}-${item.category.toLowerCase()}. Vad skulle du vilja ändra det till och varför?\\n\\n`);\n    document.getElementById(\"valuationClose\").addEventListener(\"click\", ()=>{\n        sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n        if (!params.id) {\n            localStorage.removeItem(\"newItem\");\n            sessionStorage.removeItem(\"newItemId\");\n        }\n        return window.location.href = \"/private\";\n    });\n};\nconst $21333b374a3a0336$var$rejectValuation = async (item)=>{\n    if (item.id) await firebase.app().functions(\"europe-west1\").httpsCallable(\"markItemRejected\")({\n        itemId: item.id,\n        userDecline: true\n    });\n    sessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\n    if (!params.id) {\n        localStorage.removeItem(\"newItem\");\n        localStorage.removeItem(\"latestItemCreated\");\n        sessionStorage.removeItem(\"newItemId\");\n    }\n    return window.location.href = \"/private\";\n};\nconst $21333b374a3a0336$var$hideTooltip = ()=>{\n    for (const element of document.getElementsByClassName(\"tooltip-motivation\"))element.classList.remove(\"tooltip-show\");\n};\nconst $21333b374a3a0336$var$priceAdjustment = (inputValue)=>{\n    if (inputValue < 200) return 20;\n    else if (inputValue < 500) return 50;\n    return 100;\n};\nconst $21333b374a3a0336$var$lowerPrice = (input, origValue)=>{\n    const value = Number(input.value);\n    const valPriceAdjustment = $21333b374a3a0336$var$priceAdjustment(origValue);\n    const newValue = Math.floor(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = Math.max(0, newValue === value ? value - valPriceAdjustment : newValue);\n    input.dispatchEvent(new Event(\"input\"));\n};\nconst $21333b374a3a0336$var$increasePrice = (input, origValue)=>{\n    const value = Number(input.value);\n    const valPriceAdjustment = $21333b374a3a0336$var$priceAdjustment(origValue);\n    const newValue = Math.ceil(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = newValue === value ? value + valPriceAdjustment : newValue;\n    input.dispatchEvent(new Event(\"input\"));\n};\nconst $21333b374a3a0336$var$estimatedPrice = (minPrice, maxPrice)=>Math.round((minPrice + maxPrice) / 20) * 10;\nconst $21333b374a3a0336$var$showMlValuation = async (item)=>{\n    const { minPriceEstimate: minPriceEstimate, newMinPriceEstimate: newMinPriceEstimate, newMaxPriceEstimate: newMaxPriceEstimate, maxPriceEstimate: maxPriceEstimate, decline: decline, newBrand: newBrand, newBrandCategory: newBrandCategory } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n    document.getElementById(\"valuationText\").innerText = `${$21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice)} kr`;\n    document.getElementById(\"valuationResultDiv\").style.display = \"flex\";\n    document.body.addEventListener(\"click\", $21333b374a3a0336$var$hideTooltip);\n    document.getElementById(\"valuationRange\").style.display = \"flex\";\n    document.getElementById(\"minPrice\").value = minPrice;\n    document.getElementById(\"minPrice\").disabled = true;\n    document.getElementById(\"maxPrice\").value = maxPrice;\n    document.getElementById(\"maxPrice\").disabled = true;\n    if (item.infoRequests?.price?.description) {\n        document.getElementById(\"valuationExplanation\").innerText = item.infoRequests.price.description;\n        if (item.infoRequests?.price?.type === \"Final Offer\") {\n            document.getElementById(\"valuationExplanationHeader\").innerText = \"Motivering\";\n            document.getElementById(\"valuationExplanationHeader\").style.display = \"block\";\n        }\n    } else if (newBrand || newBrandCategory) {\n        document.getElementById(\"valuationExplanationHeader\").style.display = \"block\";\n        document.getElementById(\"valuationExplanation\").innerText = newBrand ? \"Vi har inte s\\xe5lt s\\xe5 mycket av detta varum\\xe4rke tidigare och har d\\xe4rf\\xf6r lite mindre data. Du f\\xe5r justera om du upplever att v\\xe4rderingen inte \\xe4r rimlig. Vi b\\xf6rjar med startpriset, och justerar successivt ner till l\\xe4gsta priset under s\\xe4ljperioden p\\xe5 30 dagar.\" : \"Vi har inte s\\xe5lt s\\xe5 mycket av denna kategori fr\\xe5n varum\\xe4rket tidigare och har d\\xe4rf\\xf6r lite mindre data. Du f\\xe5r justera om du upplever att v\\xe4rderingen inte \\xe4r rimlig. Vi b\\xf6rjar med startpriset, och justerar successivt ner till l\\xe4gsta priset under s\\xe4ljperioden p\\xe5 30 dagar.\";\n    }\n    document.getElementById(\"valuationText\").style.display = \"block\";\n    if (sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\")) document.getElementById(\"chatDiv\").style.display = \"none\";\n    if (decline) await $21333b374a3a0336$var$showDeclineValuation(item);\n    else {\n        document.getElementById(\"confirmButton\").addEventListener(\"click\", ()=>$21333b374a3a0336$var$saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById(\"sendForReviewButton\").addEventListener(\"click\", ()=>$21333b374a3a0336$var$saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById(\"rejectButton\").addEventListener(\"click\", ()=>$21333b374a3a0336$var$rejectValuation(item));\n    }\n    triggerShowContent.click();\n};\nconst $21333b374a3a0336$var$showAdjustValuation = async (item)=>{\n    if (featureIsEnabled(\"adjustValuation\")) {\n        const { minPriceEstimate: minPriceEstimate, newMinPriceEstimate: newMinPriceEstimate, newMaxPriceEstimate: newMaxPriceEstimate, maxPriceEstimate: maxPriceEstimate, adjustmentAllowed: adjustmentAllowed } = item.mlValuation || {};\n        const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n        const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n        if (adjustmentAllowed || [\n            \"1A\",\n            \"1B\",\n            \"1C\",\n            \"2A\",\n            \"3\",\n            \"5A\",\n            \"7\",\n            \"8\"\n        ].includes(item.brandSegment)) {\n            document.getElementById(\"adjustIntervalButton\").style.display = \"flex\";\n            analytics.track(\"Element Viewed\", {\n                elementID: \"adjustIntervalButton\"\n            });\n            document.getElementById(\"chatDiv\").style.display = \"none\";\n            document.getElementById(\"adjustIntervalButton\").addEventListener(\"click\", ()=>{\n                document.getElementById(\"valuationExplanation\").style.display = \"none\";\n                document.getElementById(\"valuationExplanationHeader\").style.display = \"none\";\n                document.getElementById(\"minPrice\").disabled = false;\n                document.getElementById(\"maxPrice\").disabled = false;\n                document.getElementById(\"adjustIntervalButton\").style.display = \"none\";\n                document.getElementById(\"noteDiv\").style.display = \"block\";\n                document.getElementById(\"origMinPrice\").style.display = \"block\";\n                document.getElementById(\"origMaxPrice\").style.display = \"block\";\n                document.getElementById(\"sliderDiv\").style.display = \"block\";\n                document.querySelectorAll(\".field-underline\").forEach((x)=>x.style.visibility = \"visible\");\n            });\n        }\n        if (item.infoRequests?.price?.type === \"Final Offer\") {\n            document.getElementById(\"adjustIntervalButton\").style.display = \"none\";\n            document.getElementById(\"chatDiv\").style.display = \"none\";\n        }\n        $21333b374a3a0336$var$rangeSlider(minPrice, maxPrice);\n        document.getElementById(\"valuationMotivation\").addEventListener(\"click\", (e)=>{\n            const elements = document.getElementsByClassName(\"tooltip-motivation\");\n            const visible = elements[0]?.classList.contains(\"tooltip-show\");\n            for (const element of elements)visible ? element.classList.remove(\"tooltip-show\") : element.classList.add(\"tooltip-show\");\n            e.stopPropagation();\n        });\n        document.getElementById(\"origMinPrice\").innerText = minPrice;\n        document.getElementById(\"origMinPrice\").style.visibility = \"hidden\";\n        document.getElementById(\"origMaxPrice\").innerText = maxPrice;\n        document.getElementById(\"origMaxPrice\").style.visibility = \"hidden\";\n        document.getElementById(\"resetButton\").addEventListener(\"click\", ()=>{\n            document.getElementById(\"minPrice\").value = minPrice;\n            document.getElementById(\"maxPrice\").value = maxPrice;\n            document.getElementById(\"minPrice\").dispatchEvent(new Event(\"input\"));\n            document.getElementById(\"maxPrice\").dispatchEvent(new Event(\"input\"));\n            document.getElementById(\"adjustmentSlider\").value = 3;\n            document.getElementById(\"resetButton\").style.visibility = \"hidden\";\n            $21333b374a3a0336$var$validateInput();\n        });\n        document.getElementById(\"minPrice\").addEventListener(\"blur\", ()=>$21333b374a3a0336$var$validateInput());\n        document.getElementById(\"minPrice\").addEventListener(\"input\", ()=>{\n            const adjustmentMinInput = document.getElementById(\"minPrice\");\n            const adjustmentMaxInput = document.getElementById(\"maxPrice\");\n            const adjustmentMin = Number(adjustmentMinInput.value);\n            if (adjustmentMin !== minPrice) document.getElementById(\"origMinPrice\").style.visibility = \"visible\";\n            else document.getElementById(\"origMinPrice\").style.visibility = \"hidden\";\n            $21333b374a3a0336$var$adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n        });\n        document.getElementById(\"minIncrease\").addEventListener(\"click\", ()=>{\n            $21333b374a3a0336$var$increasePrice(document.getElementById(\"minPrice\"), minPrice);\n            analytics.track(\"Click\", {\n                elementID: \"minIncrease\"\n            });\n            $21333b374a3a0336$var$validateInput();\n        });\n        document.getElementById(\"minDecrease\").addEventListener(\"click\", ()=>{\n            $21333b374a3a0336$var$lowerPrice(document.getElementById(\"minPrice\"), minPrice);\n            analytics.track(\"Click\", {\n                elementID: \"minDecrease\"\n            });\n            $21333b374a3a0336$var$validateInput();\n        });\n        document.getElementById(\"maxPrice\").addEventListener(\"blur\", ()=>$21333b374a3a0336$var$validateInput());\n        document.getElementById(\"maxPrice\").addEventListener(\"input\", ()=>{\n            const adjustmentMaxInput = document.getElementById(\"maxPrice\");\n            const adjustmentMinInput = document.getElementById(\"minPrice\");\n            const adjustmentMax = Number(adjustmentMaxInput.value);\n            if (adjustmentMax !== maxPrice) document.getElementById(\"origMaxPrice\").style.visibility = \"visible\";\n            else document.getElementById(\"origMaxPrice\").style.visibility = \"hidden\";\n            $21333b374a3a0336$var$adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n        });\n        document.getElementById(\"maxIncrease\").addEventListener(\"click\", ()=>{\n            $21333b374a3a0336$var$increasePrice(document.getElementById(\"maxPrice\"), maxPrice);\n            analytics.track(\"Click\", {\n                elementID: \"maxIncrease\"\n            });\n            $21333b374a3a0336$var$validateInput();\n        });\n        document.getElementById(\"maxDecrease\").addEventListener(\"click\", ()=>{\n            $21333b374a3a0336$var$lowerPrice(document.getElementById(\"maxPrice\"), maxPrice);\n            analytics.track(\"Click\", {\n                elementID: \"maxDecrease\"\n            });\n            $21333b374a3a0336$var$validateInput();\n        });\n        if (item.infoRequests?.price?.type === \"Final Offer\" || item.infoRequests?.price?.type === \"Valuation\") document.getElementById(\"valuationMotivation\").style.display = \"none\";\n    }\n};\nconst $21333b374a3a0336$var$getItem = async (itemId)=>{\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable(\"getItem\")({\n        itemId: itemId\n    });\n    return {\n        ...res?.data || {},\n        id: itemId\n    };\n};\nconst $21333b374a3a0336$var$maxIncrease = (price)=>{\n    if (price < 500) return price * 0.5;\n    else if (price < 1000) return price * 0.4;\n    return price * 0.3;\n};\nconst $21333b374a3a0336$var$minPriceMaxIncrease = (minPrice, maxPrice)=>Math.min($21333b374a3a0336$var$maxIncrease(minPrice), $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice) - minPrice);\nfunction $21333b374a3a0336$var$rangeSlider(minPrice, maxPrice) {\n    const range = document.getElementById(\"adjustmentSlider\");\n    range.addEventListener(\"touchend\", ()=>{\n        range.value = Math.round(Number(range.value));\n        analytics.track(\"Click\", {\n            elementID: \"adjustmentSlider\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    range.addEventListener(\"mouseup\", ()=>{\n        range.value = Math.round(Number(range.value));\n        analytics.track(\"Click\", {\n            elementID: \"adjustmentSlider\"\n        });\n        $21333b374a3a0336$var$validateInput();\n    });\n    range.addEventListener(\"input\", function() {\n        let minInput = document.getElementById(\"minPrice\");\n        let maxInput = document.getElementById(\"maxPrice\");\n        const closestValue = Math.round(Number(range.value));\n        switch(closestValue){\n            case 0:\n                minInput.value = Math.max(100, Math.round(minPrice * 0.5 / 10) * 10);\n                maxInput.value = Math.max(100, Math.round(maxPrice * 0.5 / 10) * 10);\n                break;\n            case 1:\n                minInput.value = Math.max(100, Math.round(minPrice * 0.66 / 10) * 10);\n                maxInput.value = Math.max(100, Math.round(maxPrice * 0.66 / 10) * 10);\n                break;\n            case 2:\n                minInput.value = Math.max(100, Math.round(minPrice * 0.83 / 10) * 10);\n                maxInput.value = Math.max(100, Math.round(maxPrice * 0.83 / 10) * 10);\n                break;\n            case 3:\n                minInput.value = minPrice;\n                maxInput.value = maxPrice;\n                break;\n            case 4:\n                minInput.value = Math.round((minPrice + $21333b374a3a0336$var$minPriceMaxIncrease(minPrice, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice)) * 0.33) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + $21333b374a3a0336$var$maxIncrease(maxPrice) * 0.33) / 10) * 10;\n                break;\n            case 5:\n                minInput.value = Math.round((minPrice + $21333b374a3a0336$var$minPriceMaxIncrease(minPrice, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice)) * 0.67) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + $21333b374a3a0336$var$maxIncrease(maxPrice) * 0.67) / 10) * 10;\n                break;\n            case 6:\n                minInput.value = Math.floor((minPrice + $21333b374a3a0336$var$minPriceMaxIncrease(minPrice, $21333b374a3a0336$var$estimatedPrice(minPrice, maxPrice))) / 10) * 10;\n                maxInput.value = Math.floor((maxPrice + $21333b374a3a0336$var$maxIncrease(maxPrice)) / 10) * 10;\n                break;\n        }\n        minInput.dispatchEvent(new Event(\"input\"));\n        maxInput.dispatchEvent(new Event(\"input\"));\n    });\n}\nconst $21333b374a3a0336$var$main = async ()=>{\n    window.intercomSettings = {\n        app_id: \"klyy0le5\"\n    };\n    (function() {\n        var w = window;\n        var ic = w.Intercom;\n        if (typeof ic === \"function\") {\n            ic(\"reattach_activator\");\n            ic(\"update\", w.intercomSettings);\n        } else {\n            var d = document;\n            var i = function() {\n                i.c(arguments);\n            };\n            i.q = [];\n            i.c = function(args) {\n                i.q.push(args);\n            };\n            w.Intercom = i;\n            var l = function() {\n                var s = d.createElement(\"script\");\n                s.type = \"text/javascript\";\n                s.async = true;\n                s.src = \"https://widget.intercom.io/widget/klyy0le5\";\n                var x = d.getElementsByTagName(\"script\")[0];\n                x.parentNode.insertBefore(s, x);\n            };\n            if (w.attachEvent) w.attachEvent(\"onload\", l);\n            else w.addEventListener(\"load\", l, false);\n        }\n    })();\n    Intercom(\"update\", {\n        \"hide_default_launcher\": true\n    });\n    const item = params.id ? await $21333b374a3a0336$var$getItem(params.id) : JSON.parse(sessionStorage.getItem(\"itemToBeCreatedAfterSignIn\") || \"{}\")?.item || JSON.parse(localStorage.getItem(\"latestItemCreated\") || \"{}\");\n    if (!item) {\n        console.error(\"Invalid item id or no saved item to show valuation for\");\n        return location.href = \"/private\";\n    }\n    $21333b374a3a0336$var$initialPageSetup(item);\n    await $21333b374a3a0336$var$showMlValuation(item);\n    await user.whenSet(()=>$21333b374a3a0336$var$showAdjustValuation(item));\n};\n$21333b374a3a0336$var$main();\n\n})();\n//# sourceMappingURL=itemValuation.js.map\n","window.itemValuationJsLoaded = true;\nasync function showDeclineValuation(item) {\n    document.getElementById('valuationHeading').style.display = 'none';\n    document.getElementById('valuationMotivation').style.display = 'none';\n    document.getElementById('valuationText').innerText = 'Säljer ej';\n    document.getElementById('valuationText').style.display = 'block';\n    document.getElementById('rejectButton').style.display = 'none';\n    document.getElementById('confirmButton').style.display = 'none';\n    document.getElementById('okejButton').style.display = 'flex';\n    document.getElementById('newItemButton').style.display = 'flex';\n    document.getElementById('declineExplanation').style.display = 'block';\n    document.getElementById('valuationRange').style.display = 'none';\n    document.getElementById('adjustIntervalButton').style.display = 'none';\n    document.getElementById('valuationExplanation').style.display = 'none';\n    document.getElementById('valuationExplanationHeader').style.display = 'none';\n    document.getElementById('chatDiv').style.display = 'block';\n    document.getElementById('newItemButton').addEventListener('click', () => {\n        sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n        localStorage.removeItem('newItem');\n        sessionStorage.removeItem('newItemId');\n        sessionStorage.removeItem('itemValuation');\n        window.location.href = '/sell-item';\n    });\n    document.getElementById('okejButton').addEventListener('click', () => {\n        sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n        localStorage.removeItem('newItem');\n        sessionStorage.removeItem('newItemId');\n        sessionStorage.removeItem('itemValuation');\n        window.location.href = '/private';\n    });\n    if (item.id) {\n        await firebase.app().functions(\"europe-west1\").httpsCallable('markItemRejected')({\n            itemId: item.id, userDecline: false\n        });\n    }\n}\n\nconst adjustmentOk = (minPrice, maxPrice) => {\n    const adjustedMin = document.getElementById('minPrice').value;\n    const adjustedMax = document.getElementById('maxPrice').value;\n    return !adjustmentRequiresReview(minPrice, maxPrice, Number(adjustedMin), Number(adjustedMax));\n}\n\nconst priceTooHigh = (price, adjustedPrice) => {\n    if (price < 500 && adjustedPrice > price * 1.5) {\n        return true;\n    } else if (price >= 500 && price < 1000 && adjustedPrice > price * 1.4) {\n        return true;\n    } else if (price >= 1000 && adjustedPrice > price * 1.3) {\n        return true\n    }\n    return false;\n}\n\nconst minPriceNotOk = (minPrice, maxPrice, adjustedMin) =>\n    priceTooHigh(minPrice, adjustedMin) || adjustedMin > estimatedPrice(minPrice, maxPrice);\n\nconst adjustmentRequiresReview = (minPrice, maxPrice, adjustmentMin, adjustmentMax) =>\n    minPriceNotOk(minPrice, maxPrice, adjustmentMin) || priceTooHigh(maxPrice, adjustmentMax);\n\nconst maxTooHighWarning = (maxPrice, adjustmentMax) => priceTooHigh(maxPrice, adjustmentMax) ? 'Ovanligt högt startpris' : null;\nconst minTooHighWarning = (minPrice, adjustmentMin) => priceTooHigh(minPrice, adjustmentMin) ? 'Ovanligt högt lägsta pris' : null;\nconst minAboveValuationWarning = (adjustmentMin, estimatedPrice) => adjustmentMin > estimatedPrice ? 'Lägsta priset överstiger vår värdering' : null;\n\nconst adjustmentWarningText = (minPrice, maxPrice, adjustmentMin, adjustmentMax) => [\n    maxTooHighWarning(maxPrice, adjustmentMax),\n    minTooHighWarning(minPrice, adjustmentMin),\n    minAboveValuationWarning(adjustmentMin, estimatedPrice(minPrice, maxPrice))\n].filter(p => p).join('<br>');\n\nconst adjustmentValidations = (minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput) => {\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    adjustmentMaxInput.style.color = priceTooHigh(maxPrice, adjustmentMax) ? '#E20000' : '#333';\n    adjustmentMinInput.style.color = minPriceNotOk(minPrice, maxPrice, adjustmentMin) ? '#E20000' : '#333';\n    if (adjustmentRequiresReview(minPrice, maxPrice, adjustmentMin, adjustmentMax)) {\n        if (document.getElementById('requiresReviewDiv').style.display !== 'block') {\n            document.getElementById('requiresReviewDiv').style.display = 'block';\n            analytics.track(\"Element Viewed\", { elementID: \"requiresReviewDiv\" });\n        }\n        document.getElementById('adjustmentWarningText').innerHTML = adjustmentWarningText(minPrice, maxPrice, adjustmentMin, adjustmentMax);\n        document.getElementById('noteDiv').style.display = 'none';\n        document.getElementById('sendForReviewButton').style.display = 'flex';\n        document.getElementById('confirmButton').style.display = 'none';\n        document.getElementById('rejectButton').style.display = 'none';\n    } else if (adjustmentMax !== maxPrice || adjustmentMin !== minPrice) {\n        document.getElementById('confirmButton').style.display = 'flex';\n        document.getElementById('sendForReviewButton').style.display = 'none';\n        if (document.getElementById('resetButton').style.visibility !== 'visible') {\n            document.getElementById('resetButton').style.visibility = 'visible';\n            analytics.track(\"Element Viewed\", { elementID: \"resetButton\" });\n        }\n        document.getElementById('requiresReviewDiv').style.display = 'none';\n        const noteTextBefore = document.getElementById('noteText').innerText;\n        let noteText = '';\n        if (adjustmentMax > maxPrice) {\n            noteText += 'Ett höjt startpris kan innebära att det tar längre tid för plagget att säljas.';\n        } \n        if (adjustmentMin > minPrice) {\n            noteText += `${noteText ? ' ' : ''}Ett höjt lägsta pris minskar sannolikheten att det blir sålt.`;\n        } \n        if(!noteText) {\n            noteText = 'Bra att du kan tänka dig sänka priset! Det ökar sannolikheten att det blir sålt.';\n        }\n        document.getElementById('noteHeading').innerHTML = 'Notera!';\n        document.getElementById('noteText').innerText = noteText;\n        document.getElementById('noteDiv').style.display = 'block';\n        if (noteText !== noteTextBefore) {\n            document.getElementById('noteDiv').click(); // Animation trigger to get users attention\n        }\n        document.getElementById('confirmButton').innerText = 'Påbörja försäljning';\n        document.getElementById('rejectButton').style.display = 'flex';\n    } else {\n        document.getElementById('resetButton').style.visibility = 'hidden';\n        document.getElementById('noteHeading').innerHTML = 'Tips!';\n        document.getElementById('noteText').innerText = 'Sänkta priser ger en säkrare och snabbare försäljning. Höjda priser kan ge mer pengar, men riskerar också att det blir osålt eller tar längre tid.';\n        document.getElementById('noteDiv').style.display = 'block';\n        document.getElementById('requiresReviewDiv').style.display = 'none';\n        document.getElementById('confirmButton').style.display = 'flex';\n        document.getElementById('sendForReviewButton').style.display = 'none';\n        document.getElementById('rejectButton').style.display = 'flex';\n    }\n}\n\nfunction validateInput() {\n    const adjustmentMinInput = document.getElementById('minPrice');\n    const adjustmentMaxInput = document.getElementById('maxPrice');\n    const adjustmentMin = Number(adjustmentMinInput.value);\n    const adjustmentMax = Number(adjustmentMaxInput.value);\n    if (adjustmentMin < 100) {\n        adjustmentMinInput.setCustomValidity('Vi försöker tyvärr aldrig sälja något under 100kr');\n    } else if (adjustmentMin > adjustmentMax) {\n        adjustmentMaxInput.setCustomValidity('Startpris måste vara högre än lägsta pris');\n        adjustmentMinInput.setCustomValidity('Lägsta pris måste vara mindre än startpris');\n    } else {\n        adjustmentMinInput.setCustomValidity('');\n        adjustmentMaxInput.setCustomValidity('');\n    }\n    return document.getElementById('wf-form-Valuation-form').reportValidity();\n}\n\nasync function saveValuationStatus(itemId, minPrice, maxPrice) {\n    if (!validateInput()) {\n        return;\n    }\n    const minInput = document.getElementById('minPrice');\n    const adjustedMin = Number(minInput.value);\n    const maxInput = document.getElementById('maxPrice');\n    const adjustedMax = Number(maxInput.value);\n    if (sessionStorage.getItem('itemToBeCreatedAfterSignIn')) {\n        const savedItem = JSON.parse(sessionStorage.getItem('itemToBeCreatedAfterSignIn'));\n        savedItem.item.infoRequests.price.status = 'Resolved';\n        savedItem.item.infoRequests.price.response = 'Accepted';\n        if (featureIsEnabled('adjustValuation') && (adjustedMin !== minPrice || adjustedMax !== maxPrice)) {\n            savedItem.item.infoRequests.price.userAdjustedMin = adjustedMin;\n            savedItem.item.infoRequests.price.userAdjustedMax = adjustedMax;\n            if (adjustmentOk(minPrice, maxPrice)) {\n                savedItem.item.minPriceEstimate = minPrice;\n                savedItem.item.maxPriceEstimate = maxPrice;\n            } else {\n                savedItem.item.infoRequests.price.response = 'User proposal';\n                savedItem.item.infoRequests.price.userProposalMotivation = document.getElementById('userProposalMotivation').value;\n            }\n        } else {\n            savedItem.item.minPriceEstimate = minPrice;\n            savedItem.item.maxPriceEstimate = maxPrice;\n        }\n        sessionStorage.setItem('itemToBeCreatedAfterSignIn', JSON.stringify(savedItem));\n        return window.location.href = '/sign-in';\n    } else {\n        await firebase.app().functions(\"europe-west1\").httpsCallable('saveValuationStatus')({\n            itemId, minPrice, maxPrice, adjustmentMin: adjustedMin, adjustmentMax: adjustedMax,\n            userProposalMotivation: document.getElementById('userProposalMotivation').value,\n            adjustmentRequiresReview: !adjustmentOk(minPrice, maxPrice)\n        });\n        if (localStorage.getItem('latestItemCreated')) {\n            const latestItemCreated = JSON.parse(localStorage.getItem('latestItemCreated'));\n            latestItemCreated.infoRequests.price.response = adjustmentOk(minPrice, maxPrice) ? 'Accepted' : 'User proposal';\n            if (adjustmentOk(minPrice, maxPrice)) {\n                latestItemCreated.minPriceEstimate = adjustedMin;\n                latestItemCreated.maxPriceEstimate = adjustedMax;\n            }\n            localStorage.setItem('latestItemCreated', JSON.stringify(latestItemCreated));\n        }\n        if (!document.referrer.includes('/private')) {\n            const userPhoneSet = user.current?.phoneNumber?.length;\n            return window.location.href = userPhoneSet ? `/item-confirmation` :\n                `/user-contact`;\n        } else {\n            return window.location.href = `/private`;\n        }\n    }\n}\n\nconst initialPageSetup = (item) => {\n    document.getElementById('itemImage').src = window.innerWidth <= 400 ?\n        item?.images?.enhancedFrontImageSmall || item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImageSmall || item?.images?.frontImage :\n        item?.images?.enhancedFrontImage || item?.images?.modelImage || item?.images?.frontImage;\n    const { minPriceEstimate, newMinPriceEstimate, newMaxPriceEstimate, maxPriceEstimate } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n\n    document.getElementById('chatLink').onclick = () => Intercom('showNewMessage',\n        item.mlValuation?.decline ?\n            `ID: ${item.id}\\n\\nGällande att ni tackat nej till ${item.brand.trim()}-${item.category.toLowerCase()}:\\n\\n` :\n            `ID: ${item.id}\\n\\nGällande prisintervallet på ${minPrice}-${maxPrice} kr för ${item.brand.trim()}-${item.category.toLowerCase()}. Vad skulle du vilja ändra det till och varför?\\n\\n`);\n    document.getElementById('valuationClose').addEventListener('click', () => {\n        sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n        if (!params.id) {\n            localStorage.removeItem('newItem');\n            sessionStorage.removeItem('newItemId');\n        }\n        return window.location.href = '/private';\n    })\n}\n\nconst rejectValuation = async (item) => {\n    if (item.id) {\n        await firebase.app().functions(\"europe-west1\").httpsCallable('markItemRejected')({\n            itemId: item.id, userDecline: true\n        });\n    }\n    sessionStorage.removeItem('itemToBeCreatedAfterSignIn');\n    if (!params.id) {\n        localStorage.removeItem('newItem');\n        localStorage.removeItem('latestItemCreated');\n        sessionStorage.removeItem('newItemId');\n    }\n    return window.location.href = '/private';\n}\n\nconst hideTooltip = () => {\n    for (const element of document.getElementsByClassName('tooltip-motivation')) {\n        element.classList.remove('tooltip-show');\n    }\n}\n\nconst priceAdjustment = (inputValue) => {\n    if (inputValue < 200) {\n        return 20;\n    } else if (inputValue < 500) {\n        return 50;\n    }\n    return 100;\n}\nconst lowerPrice = (input, origValue) => {\n    const value = Number(input.value);\n    const valPriceAdjustment = priceAdjustment(origValue);\n    const newValue = Math.floor(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = Math.max(0, newValue === value ? value - valPriceAdjustment : newValue);\n    input.dispatchEvent(new Event('input'));\n}\n\nconst increasePrice = (input, origValue) => {\n    const value = Number(input.value);\n    const valPriceAdjustment = priceAdjustment(origValue);\n    const newValue = Math.ceil(value / valPriceAdjustment) * valPriceAdjustment;\n    input.value = newValue === value ? value + valPriceAdjustment : newValue;\n    input.dispatchEvent(new Event('input'));\n}\n\nconst estimatedPrice = (minPrice, maxPrice) => Math.round((minPrice + maxPrice) / 20) * 10;\nconst showMlValuation = async (item) => {\n    const { minPriceEstimate, newMinPriceEstimate, newMaxPriceEstimate, maxPriceEstimate, decline, newBrand, newBrandCategory } = item.mlValuation || {};\n    const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n    const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n\n    document.getElementById('valuationText').innerText = `${estimatedPrice(minPrice, maxPrice)} kr`;\n    document.getElementById('valuationResultDiv').style.display = 'flex';\n\n    document.body.addEventListener('click', hideTooltip);\n\n    document.getElementById('valuationRange').style.display = 'flex';\n    document.getElementById('minPrice').value = minPrice;\n    document.getElementById('minPrice').disabled = true;\n    document.getElementById('maxPrice').value = maxPrice;\n    document.getElementById('maxPrice').disabled = true;\n\n    if (item.infoRequests?.price?.description) {\n        document.getElementById('valuationExplanation').innerText = item.infoRequests.price.description;\n        if (item.infoRequests?.price?.type === 'Final Offer') {\n            document.getElementById('valuationExplanationHeader').innerText = 'Motivering';\n            document.getElementById('valuationExplanationHeader').style.display = 'block';\n        }\n    } else if (newBrand || newBrandCategory) {\n        document.getElementById('valuationExplanationHeader').style.display = 'block';\n        document.getElementById('valuationExplanation').innerText = newBrand ?\n            'Vi har inte sålt så mycket av detta varumärke tidigare och har därför lite mindre data. Du får justera om du upplever att värderingen inte är rimlig. Vi börjar med startpriset, och justerar successivt ner till lägsta priset under säljperioden på 30 dagar.' :\n            'Vi har inte sålt så mycket av denna kategori från varumärket tidigare och har därför lite mindre data. Du får justera om du upplever att värderingen inte är rimlig. Vi börjar med startpriset, och justerar successivt ner till lägsta priset under säljperioden på 30 dagar.';\n    }\n\n\n    document.getElementById('valuationText').style.display = 'block';\n    if (sessionStorage.getItem('itemToBeCreatedAfterSignIn')) {\n        document.getElementById('chatDiv').style.display = 'none';\n    }\n    if (decline) {\n        await showDeclineValuation(item);\n    } else {\n        document.getElementById('confirmButton').addEventListener('click', () => saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById('sendForReviewButton').addEventListener('click', () => saveValuationStatus(item.id, minPrice, maxPrice));\n        document.getElementById('rejectButton').addEventListener('click', () => rejectValuation(item));\n    }\n    triggerShowContent.click();\n}\n\nconst showAdjustValuation = async (item) => {\n    if (featureIsEnabled('adjustValuation')) {\n        const { minPriceEstimate, newMinPriceEstimate, newMaxPriceEstimate, maxPriceEstimate, adjustmentAllowed } = item.mlValuation || {};\n        const minPrice = item.infoRequests?.price?.minPrice || newMinPriceEstimate || minPriceEstimate;\n        const maxPrice = item.infoRequests?.price?.maxPrice || newMaxPriceEstimate || maxPriceEstimate;\n\n        if ((adjustmentAllowed || ['1A', '1B', '1C', '2A', '3', '5A', '7', '8'].includes(item.brandSegment))) { // Lade till detta som en tillfällig grej, fråga mig varför /Tobias\n            document.getElementById('adjustIntervalButton').style.display = 'flex';\n            analytics.track(\"Element Viewed\", { elementID: \"adjustIntervalButton\" });\n            document.getElementById('chatDiv').style.display = 'none';\n            document.getElementById('adjustIntervalButton').addEventListener('click', () => {\n                document.getElementById('valuationExplanation').style.display = 'none';\n                document.getElementById('valuationExplanationHeader').style.display = 'none';\n                document.getElementById('minPrice').disabled = false;\n                document.getElementById('maxPrice').disabled = false;\n                document.getElementById('adjustIntervalButton').style.display = 'none';\n                document.getElementById('noteDiv').style.display = 'block';\n                document.getElementById('origMinPrice').style.display = 'block';\n                document.getElementById('origMaxPrice').style.display = 'block';\n\n                document.getElementById('sliderDiv').style.display = 'block';\n                document.querySelectorAll(\".field-underline\").forEach(x => x.style.visibility = 'visible');\n            })\n        }\n        if (item.infoRequests?.price?.type === 'Final Offer') {\n            document.getElementById('adjustIntervalButton').style.display = 'none';\n            document.getElementById('chatDiv').style.display = 'none';\n        }\n\n        rangeSlider(minPrice, maxPrice);\n        document.getElementById('valuationMotivation').addEventListener('click', (e) => {\n            const elements = document.getElementsByClassName('tooltip-motivation');\n            const visible = elements[0]?.classList.contains('tooltip-show');\n            for (const element of elements) {\n                visible ? element.classList.remove('tooltip-show') : element.classList.add('tooltip-show');\n            }\n            e.stopPropagation();\n        });\n        document.getElementById('origMinPrice').innerText = minPrice;\n        document.getElementById('origMinPrice').style.visibility = 'hidden';\n        document.getElementById('origMaxPrice').innerText = maxPrice;\n        document.getElementById('origMaxPrice').style.visibility = 'hidden';\n        document.getElementById('resetButton').addEventListener('click', () => {\n            document.getElementById('minPrice').value = minPrice;\n            document.getElementById('maxPrice').value = maxPrice;\n            document.getElementById('minPrice').dispatchEvent(new Event('input'));\n            document.getElementById('maxPrice').dispatchEvent(new Event('input'));\n            document.getElementById('adjustmentSlider').value = 3;\n            document.getElementById('resetButton').style.visibility = 'hidden';\n            validateInput();\n        });\n        document.getElementById('minPrice').addEventListener('blur', () => validateInput());\n        document.getElementById('minPrice').addEventListener('input', () => {\n            const adjustmentMinInput = document.getElementById('minPrice');\n            const adjustmentMaxInput = document.getElementById('maxPrice');\n            const adjustmentMin = Number(adjustmentMinInput.value);\n            if (adjustmentMin !== minPrice) {\n                document.getElementById('origMinPrice').style.visibility = 'visible';\n            } else {\n                document.getElementById('origMinPrice').style.visibility = 'hidden';\n            }\n            adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n        });\n        document.getElementById('minIncrease').addEventListener('click', () => {\n            increasePrice(document.getElementById('minPrice'), minPrice);\n            analytics.track('Click', { elementID: 'minIncrease' });\n            validateInput();\n        });\n        document.getElementById('minDecrease').addEventListener('click', () => {\n            lowerPrice(document.getElementById('minPrice'), minPrice);\n            analytics.track('Click', { elementID: 'minDecrease' });\n            validateInput();\n        });\n        document.getElementById('maxPrice').addEventListener('blur', () => validateInput());\n        document.getElementById('maxPrice').addEventListener('input', () => {\n            const adjustmentMaxInput = document.getElementById('maxPrice');\n            const adjustmentMinInput = document.getElementById('minPrice');\n            const adjustmentMax = Number(adjustmentMaxInput.value);\n            if (adjustmentMax !== maxPrice) {\n                document.getElementById('origMaxPrice').style.visibility = 'visible';\n            } else {\n                document.getElementById('origMaxPrice').style.visibility = 'hidden';\n            }\n            adjustmentValidations(minPrice, maxPrice, adjustmentMinInput, adjustmentMaxInput);\n        });\n        document.getElementById('maxIncrease').addEventListener('click', () => {\n            increasePrice(document.getElementById('maxPrice'), maxPrice);\n            analytics.track('Click', { elementID: 'maxIncrease' });\n            validateInput();\n        });\n        document.getElementById('maxDecrease').addEventListener('click', () => {\n            lowerPrice(document.getElementById('maxPrice'), maxPrice);\n            analytics.track('Click', { elementID: 'maxDecrease' });\n            validateInput();\n        });\n\n        if (item.infoRequests?.price?.type === 'Final Offer' || item.infoRequests?.price?.type === 'Valuation') {\n            document.getElementById('valuationMotivation').style.display = 'none';\n        }\n    }\n}\n\nconst getItem = async (itemId) => {\n    const res = await firebase.app().functions(\"europe-west1\").httpsCallable('getItem')({ itemId })\n    return { ...(res?.data || {}), id: itemId };\n}\n\nconst maxIncrease = (price) => {\n    if (price < 500) {\n        return price * 0.5;\n    } else if (price < 1000) {\n        return price * 0.4;\n    }\n    return price * 0.3;\n}\n\nconst minPriceMaxIncrease = (minPrice, maxPrice) => Math.min(maxIncrease(minPrice), estimatedPrice(minPrice, maxPrice) - minPrice);\n\nfunction rangeSlider(minPrice, maxPrice) {\n    const range = document.getElementById('adjustmentSlider');\n    range.addEventListener('touchend', () => {\n        range.value = Math.round(Number(range.value));\n        analytics.track('Click', { elementID: 'adjustmentSlider' });\n        validateInput();\n    });\n    range.addEventListener('mouseup', () => {\n        range.value = Math.round(Number(range.value));\n        analytics.track('Click', { elementID: 'adjustmentSlider' });\n        validateInput();\n    });\n    range.addEventListener('input', function () {\n        let minInput = document.getElementById('minPrice');\n        let maxInput = document.getElementById('maxPrice');\n        const closestValue = Math.round(Number(range.value));\n        switch (closestValue) {\n            case 0: // -50%\n                minInput.value = Math.max(100, Math.round((minPrice * 0.5) / 10) * 10);\n                maxInput.value = Math.max(100, Math.round((maxPrice * 0.5) / 10) * 10);\n                break;\n            case 1: // -33%\n                minInput.value = Math.max(100, Math.round((minPrice * 0.66) / 10) * 10);\n                maxInput.value = Math.max(100, Math.round((maxPrice * 0.66) / 10) * 10);\n                break;\n            case 2: // -17%\n                minInput.value = Math.max(100, Math.round((minPrice * 0.83) / 10) * 10);\n                maxInput.value = Math.max(100, Math.round((maxPrice * 0.83) / 10) * 10);\n                break;\n            case 3:\n                minInput.value = minPrice;\n                maxInput.value = maxPrice;\n                break;\n            case 4:\n                minInput.value = Math.round((minPrice + minPriceMaxIncrease(minPrice, estimatedPrice(minPrice, maxPrice)) * 0.33) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + maxIncrease(maxPrice) * 0.33) / 10) * 10;\n                break;\n            case 5:\n                minInput.value = Math.round((minPrice + minPriceMaxIncrease(minPrice, estimatedPrice(minPrice, maxPrice)) * 0.67) / 10) * 10;\n                maxInput.value = Math.round((maxPrice + maxIncrease(maxPrice) * 0.67) / 10) * 10;\n                break;\n            case 6:\n                minInput.value = Math.floor((minPrice + minPriceMaxIncrease(minPrice, estimatedPrice(minPrice, maxPrice))) / 10) * 10;\n                maxInput.value = Math.floor((maxPrice + maxIncrease(maxPrice)) / 10) * 10;\n                break;\n        }\n        minInput.dispatchEvent(new Event('input'));\n        maxInput.dispatchEvent(new Event('input'));\n    });\n}\n\nconst main = async () => {\n    window.intercomSettings = {\n        app_id: \"klyy0le5\"\n    };\n    (function () { var w = window; var ic = w.Intercom; if (typeof ic === \"function\") { ic('reattach_activator'); ic('update', w.intercomSettings); } else { var d = document; var i = function () { i.c(arguments); }; i.q = []; i.c = function (args) { i.q.push(args); }; w.Intercom = i; var l = function () { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/klyy0le5'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }; if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })();\n    Intercom('update', { 'hide_default_launcher': true });\n\n    const item = params.id ? (await getItem(params.id)) :\n        (JSON.parse(sessionStorage.getItem('itemToBeCreatedAfterSignIn') || '{}')?.item || JSON.parse(localStorage.getItem('latestItemCreated') || '{}'));\n    if (!item) {\n        console.error('Invalid item id or no saved item to show valuation for');\n        return location.href = '/private';\n    }\n    initialPageSetup(item);\n    await showMlValuation(item);\n    await user.whenSet(() => showAdjustValuation(item));\n}\n\nmain();\n"],"names":["$21333b374a3a0336$var$showDeclineValuation","item","document","getElementById","style","display","innerText","addEventListener","sessionStorage","removeItem","localStorage","window","location","href","id","firebase","app","functions","httpsCallable","itemId","userDecline","itemValuationJsLoaded","$21333b374a3a0336$var$adjustmentOk","minPrice","maxPrice","adjustedMin","value","adjustedMax","$21333b374a3a0336$var$adjustmentRequiresReview","Number","$21333b374a3a0336$var$priceTooHigh","price","adjustedPrice","$21333b374a3a0336$var$minPriceNotOk","$21333b374a3a0336$var$estimatedPrice","adjustmentMin","adjustmentMax","$21333b374a3a0336$var$maxTooHighWarning","$21333b374a3a0336$var$minTooHighWarning","$21333b374a3a0336$var$minAboveValuationWarning","estimatedPrice","$21333b374a3a0336$var$adjustmentWarningText","filter","p","join","$21333b374a3a0336$var$adjustmentValidations","adjustmentMinInput","adjustmentMaxInput","color","analytics","track","elementID","innerHTML","visibility","noteTextBefore","noteText","click","$21333b374a3a0336$var$validateInput","setCustomValidity","reportValidity","$21333b374a3a0336$var$saveValuationStatus","minInput","maxInput","getItem","savedItem","JSON","parse","infoRequests","status","response","featureIsEnabled","userAdjustedMin","userAdjustedMax","minPriceEstimate","maxPriceEstimate","userProposalMotivation","setItem","stringify","adjustmentRequiresReview","latestItemCreated","referrer","includes","userPhoneSet","user","current","phoneNumber","length","$21333b374a3a0336$var$initialPageSetup","src","innerWidth","images","enhancedFrontImageSmall","enhancedFrontImage","modelImage","frontImageSmall","frontImage","newMinPriceEstimate","newMaxPriceEstimate","mlValuation","onclick","Intercom","decline","brand","trim","category","toLowerCase","params","$21333b374a3a0336$var$rejectValuation","$21333b374a3a0336$var$hideTooltip","element","getElementsByClassName","classList","remove","$21333b374a3a0336$var$priceAdjustment","inputValue","$21333b374a3a0336$var$lowerPrice","input","origValue","valPriceAdjustment","newValue","Math","floor","max","dispatchEvent","Event","$21333b374a3a0336$var$increasePrice","ceil","round","$21333b374a3a0336$var$showMlValuation","newBrand","newBrandCategory","body","disabled","description","type","triggerShowContent","$21333b374a3a0336$var$showAdjustValuation","adjustmentAllowed","brandSegment","querySelectorAll","forEach","x","$21333b374a3a0336$var$rangeSlider","range","closestValue","$21333b374a3a0336$var$minPriceMaxIncrease","$21333b374a3a0336$var$maxIncrease","e","elements","visible","contains","add","stopPropagation","$21333b374a3a0336$var$getItem","res","data","min","$21333b374a3a0336$var$main","intercomSettings","app_id","w","ic","d","i","c","arguments","q","args","push","l","s","createElement","async","getElementsByTagName","parentNode","insertBefore","attachEvent","console","error","whenSet"],"version":3,"file":"itemValuation.js.map"}