{"mappings":"C,A,kC;A,uC;A,E;A,2D;A,E;A,4D;A,wD;A,S,C,C,C,C,C,C,C,C,C,E,2B,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,0D;A,+D;A,8B;A,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,E,gE;A,6D;A,+D;A,gC;A,G,E,O,E,E,C,E,+C;A,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,I,C,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,qD;A,yE;A,I,E,E,E,Y;A,U,O,S,A,a,O,O,O,O,C,E,A,Y,O,Q,O,G,C,O,W,O,C,G,G,C,I,C,E,C,C,C,C,E,C,M,C,S,C,C,C,C,C,E,ICII,EACA,EACA,E,E,E,kD,E,iB,C,GAEJ,EAAA,MAAA,CAAA,EAAA,WAAA,IAAgB,GAwZhB,EAAA,MAAA,CAAA,EAAA,mBAAA,IAAgB,GAhahB,IAAA,EAAA,EAAA,aACA,EAAA,EAAA,2BACA,EAAA,EAAA,mBAMO,SAAS,EAAS,CAAM,CAAE,CAAE,CAAE,CAAE,EACrC,IAAI,EAAQ,EACR,EAAQ,CAEE,QAAV,GACF,CAAA,EAAQ,EADV,EAGc,OAAV,GACF,CAAA,EAAQ,EADV,EAIA,OAAO,gBAAA,CAAmB,CACxB,OAAQ,WACR,QAAS,CAAC,EAAE,EAAO,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","sources":["<anon>","private.js","general.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","infoRequestsFunctions.js","loadItemCards.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        this\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"flS2m\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"updateIC\", ()=>updateIC);\nparcelHelpers.export(exports, \"closePickupToast\", ()=>closePickupToast);\nvar _general = require(\"./general\");\nvar _infoRequestsFunctions = require(\"./infoRequestsFunctions\");\nvar _loadItemCards = require(\"./loadItemCards\");\nvar userId;\nvar email;\nvar phone;\nfunction updateIC(userId, em, ph) {\n    let email = em;\n    let phone = ph;\n    if (email === null) email = \"\";\n    if (phone === null) phone = \"\";\n    window.intercomSettings = {\n        app_id: \"klyy0le5\",\n        user_id: `${userId}`\n    };\n    var docRef = db.collection(\"users\").doc(userId);\n    docRef.get().then((doc)=>{\n        if (doc.exists) {\n            const data = doc.data();\n            let name = \"\";\n            let city = \"\";\n            if (data.addressFirstName) {\n                const fn = data.addressFirstName;\n                const ln = data.addressLastName;\n                name = fn + \" \" + ln;\n                city = data.addressCity;\n            }\n            if (data.phoneNumber) phone = data.phoneNumber;\n            // Update intercom\n            var fields = {\n                mai_user_id: `${userId}`,\n                user_id: `${userId}`,\n                phone: `${phone}`,\n                email: `${email}`,\n                name: `${name}`,\n                city: `${city}`\n            };\n            Intercom(\"update\", fields);\n        } else console.log(\"No such user document exist!\");\n    }).catch((error)=>{\n        errorHandler.report(error);\n        console.log(\"Error getting document:\", error);\n    });\n}\nfunction showAccountInfo() {\n    let identifier;\n    if (authUser.current.phoneNumber) identifier = authUser.current.phoneNumber;\n    else if (authUser.current.email) identifier = authUser.current.email;\n    if (identifier) {\n        account.innerHTML = identifier;\n        account.style.display = \"block\";\n    }\n    if (user.current.addressFirstName && user.current.addressLastName) {\n        accountName.innerHTML = user.current.addressFirstName + \" \" + user.current.addressLastName;\n        accountName.style.display = \"block\";\n    }\n}\nasync function showOrderBagsSection() {\n    const maxBags = await firebase.app().functions(\"europe-west1\").httpsCallable(\"maxNumBags\")();\n    if (maxBags?.data?.maxOrderBags > 0) document.getElementById(\"orderBagsSection\").style.display = \"block\";\n}\nfunction showInviteToast(items) {\n    let nowDate = new Date();\n    let daysSinceLatestSold = 10;\n    let soldItemsCount = 0;\n    let oneSoldNotSentItemExist = false;\n    // Last viewed\n    let inviteToastViews = user.current?.elementViews ? user.current.elementViews.filter((e)=>e.elementID === \"inviteToast\") : [];\n    const daysSinceToastViewsArray = inviteToastViews.length ? Array.from(inviteToastViews, (e)=>parseInt(Math.floor((nowDate.getTime() - e.timestamp.toDate().getTime()) / 86400000))) : [];\n    const daysSinceToastLastViewed = daysSinceToastViewsArray.length ? Math.min(...daysSinceToastViewsArray) : null;\n    let viewedToastBefore = inviteToastViews.length ? true : false;\n    if (items) items.forEach((doc)=>{\n        var itemId = doc.id;\n        var i = doc.data();\n        let soldDate = i.soldDate;\n        const status = i.status;\n        const shippingStatus = i.shippingStatus;\n        const archived = i.archived;\n        if (!archived && status === \"Sold\" && soldDate) {\n            soldItemsCount++;\n            if (soldDate) {\n                soldDate = new Date(soldDate);\n                let timeDifference = nowDate.getTime() - soldDate.getTime();\n                let daysDiff = Math.floor(timeDifference / 86400000);\n                if (daysDiff <= daysSinceLatestSold) daysSinceLatestSold = daysDiff;\n            }\n            if (shippingStatus !== \"Sent\") oneSoldNotSentItemExist = true;\n        }\n    });\n    if (!user.current?.referralData?.referralCode) return;\n    if ((!viewedToastBefore || daysSinceToastLastViewed > 45) && (daysSinceLatestSold <= 7 || soldItemsCount >= 3 && daysSinceLatestSold <= 45)) {\n        referralCodeText.innerHTML = user.current.referralData.referralCode;\n        triggerInviteToastOpen.click();\n        // Store elementViews to be able to not show it again\n        db.collection(\"users\").doc(authUser.current.uid).update({\n            elementViews: firebase.firestore.FieldValue.arrayUnion({\n                elementID: \"inviteToast\",\n                timestamp: new Date()\n            })\n        });\n        // Track with segment\n        analytics.track(\"Element Viewed\", {\n            elementID: \"inviteToast\"\n        });\n    }\n}\nfunction loadSoldByOthers(userID) {\n    var itemListSoldByOthers = document.getElementById(\"itemListSoldByOthers\");\n    itemListSoldByOthers.innerHTML = \"\";\n    // SOLD BY OTHERS QUERY + Add cards to list\n    db.collection(\"items\").where(\"status\", \"==\", \"Sold\").orderBy(\"soldDate\", \"desc\").limit(30).get().then((querySnapshot)=>{\n        querySnapshot.forEach((doc)=>{\n            var sellerId = doc.data().user;\n            var brand = doc.data().brand;\n            var soldPrice = doc.data().soldPrice;\n            var imageUrl = (0, _general.itemCoverImage)(doc.data());\n            // Add card to list if seller is other than myself\n            if (sellerId != userID && soldPrice >= 200) {\n                var soldByOthersItemCardHTML = `<div class=\"div-block-14\"><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\"><div class=\"img-container\" style=\"background-image: url('${imageUrl}');\"></div></div></div><div class=\"text-block-14\">${soldPrice} kr</div><div class='text-block-34'>${brand}</div></div>`;\n                itemListSoldByOthers.innerHTML += soldByOthersItemCardHTML;\n            }\n        });\n    });\n    soldByOthersDiv.style.display = \"block\";\n}\nasync function askForAdditionalUserDetails(userID) {\n    let status = \"\";\n    let shippingStatus = \"\";\n    let addressFirstName = \"\";\n    let personalId;\n    let personalIdExists = true;\n    let oneItemNotPaid = false;\n    let oneItemNotSent = false;\n    let pickupShippingMethod = false;\n    // First, get items with status \"Sold\" and shippingStatus \"Not sent\"\n    await db.collection(\"items\").where(\"user\", \"==\", userID).where(\"status\", \"==\", \"Sold\").orderBy(\"soldDate\").get().then((querySnapshot)=>{\n        querySnapshot.forEach((doc)=>{\n            status = doc.data().status;\n            shippingStatus = doc.data().shippingStatus;\n            const payoutStatus = doc.data().payoutStatus;\n            if (shippingStatus === \"Not sent\") oneItemNotSent = true;\n            if (payoutStatus !== \"Payed\") oneItemNotPaid = true;\n        });\n    });\n    // Second, check if user has no address or personal id added yet\n    await db.collection(\"users\").doc(userID).get().then((doc)=>{\n        addressFirstName = doc.data().addressFirstName;\n        personalId = doc.data().personalId;\n        const shippingMethod = doc.data()?.preferences?.shippingMethod;\n        if (personalId) {\n            if (personalId === \"\") personalIdExists = false;\n        } else personalIdExists = false;\n        if (shippingMethod == \"Pickup\") pickupShippingMethod = true;\n    });\n    // Redirect user if user has no address and at least one item that's sold but not shipped (only if shippingMethod is pickup)\n    if (oneItemNotSent == true && addressFirstName == undefined && pickupShippingMethod) location.href = \"/address-form\";\n    // Redirect user to personalId form if they haven't added it yet\n    if (oneItemNotPaid == true && personalIdExists == false) location.href = \"/personal-id-form\";\n}\ncheckCookie(\"invite\");\nlocalStorage.removeItem(\"latestItemCreated\");\nsessionStorage.removeItem(\"itemToBeCreatedAfterSignIn\");\nconsole.log(`user ${user.current}`);\nuser.whenSet(privateMain);\nasync function privateMain() {\n    console.log(\"privateMain running\");\n    if (!user.current) return;\n    userId = authUser.current.uid;\n    email = authUser.current.email || sessionStorage.getItem(\"email\");\n    phone = authUser.current.phoneNumber || sessionStorage.getItem(\"phoneNumber\");\n    updateIC(userId, email, phone);\n    askForAdditionalUserDetails(userId);\n    loadSoldByOthers(userId);\n    setPreferredLogInMethodCookie(authUser.current.providerData[0].providerId);\n    //For testing purposes only - To see what a certain user sees\n    if (userId === \"3OkW5av20HP8ScpUDS8ip9fBEZr1\" && window.location.origin.includes(\"shh-test\")) userId = \"Cc4y5YYg03TgezoLFkD7QSoKKe73\";\n    //Yearly Summary\n    /*\n  yearlyDataExist(userId).then((result) => {\n    if (result) {\n      console.log('Yearly data exist!');\n      document.getElementById('yearlySummaryDiv').style.display = 'block';\n      document.getElementById('yearlySummaryDiv').addEventListener(\"click\", function () {\n        location.href = `/2023withmai?id=${userId.substring(0, 10)}`;\n      });\n    } else {\n      console.log('No yearly summary exist!');\n    }\n  });\n  */ const items = await getItems(userId);\n    showNpsSurvey(items);\n    showInviteToast(items);\n    if (user.current?.referralData?.referralCode) {\n        referralCodeText.innerHTML = user.current.referralData.referralCode;\n        headerInviteButton.style.display = \"flex\";\n        menuInviteLink.style.display = \"block\";\n    }\n    const inviteCode = checkCookie(\"invite\");\n    if (inviteCode) await connectReferralUsers(inviteCode);\n    // Set invite code cookie\n    const photoInvite = checkCookie(\"photo_invite\");\n    if (photoInvite && !localStorage.getItem(\"photoShootBooked\")) {\n        photoShootOffer.style.display = \"block\";\n        bonusSection.style.display = \"block\";\n    }\n    showBonusSection();\n    showAccountInfo();\n    (0, _loadItemCards.loadItemCards)(items);\n    (0, _infoRequestsFunctions.loadInfoRequests)(userId);\n    showOrderBagsSection();\n    showReferralSection();\n    fetchAndShowRecommendedItems(items);\n    //showHolidayModeDiv(items);\n    // Create refCode\n    if (user.current && user.current.addressFirstName && user.current.addressLastName && !user.current?.referralData?.referralCode) await createReferralCode();\n}\nfunction showHolidayModeDiv(items) {\n    if (items) items.forEach((doc)=>{\n        var itemId = doc.id;\n        var i = doc.data();\n        let publishedDate = i.publishedDate;\n        const status = i.status;\n        const archived = i.archived;\n        if (!archived && status === \"Published\" && publishedDate) {\n            if (publishedDate) {\n                publishedDate = new Date(publishedDate);\n                let nowDate = new Date();\n                const daysDiff = Math.floor((nowDate.getTime() - publishedDate.getTime()) / 86400000);\n                if (daysDiff <= 45) document.getElementById(\"holidayModeDiv\").style.display = \"block\";\n            }\n        }\n    });\n}\nasync function yearlyDataExist(userId) {\n    //Get data\n    const url = \"https://europe-west3-second-hand-helper.cloudfunctions.net/yearlyData\";\n    const options = {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            id: userId\n        })\n    };\n    const yearlyDataResponse = await fetch(url, options);\n    if (!yearlyDataResponse.ok) throw new Error(\"Network response was not ok.\");\n    const yearlyDataJson = await yearlyDataResponse.json();\n    const yearlyData = yearlyDataJson.data;\n    return yearlyData.sold ? true : false;\n}\nasync function showNpsSurvey(items) {\n    if (!user) return;\n    const nowDate = new Date();\n    let daysSinceFirstPublished = 0;\n    let daysSinceLastPublished = 0;\n    // Last viewed\n    const x = user.current?.elementViews ? user.current.elementViews.reverse().find((e)=>e.elementID === \"npsSurvey\") : null;\n    const surveyLastViewed = x ? x.timestamp.toDate() : null;\n    const daysSinceSurveyLastViewed = surveyLastViewed ? Math.floor((nowDate.getTime() - surveyLastViewed.getTime()) / 86400000) : null;\n    if (items) items.forEach((doc)=>{\n        const i = doc.data();\n        if (i.publishedDate && !i.archived) {\n            const publishedDate = new Date(i.publishedDate);\n            const daysDiff = Math.floor((nowDate.getTime() - publishedDate.getTime()) / 86400000);\n            if (daysDiff > daysSinceFirstPublished) daysSinceFirstPublished = daysDiff;\n            if (daysDiff < daysSinceLastPublished || daysSinceLastPublished === 0 && daysDiff > 0) daysSinceLastPublished = daysDiff;\n        }\n    });\n    //console.log(\"IF all true -> Show NPS: \", `daysSinceFirstPublished(${daysSinceFirstPublished}) >= 25 && daysSinceLastPublished(${daysSinceLastPublished}) <= 60 && (!surveyLastViewed(${surveyLastViewed}) || daysSinceSurveyLastViewed(${daysSinceSurveyLastViewed}) > 90)`);\n    if (daysSinceFirstPublished >= 25 && daysSinceLastPublished <= 60 && (!surveyLastViewed || daysSinceSurveyLastViewed > 90) && !document.referrer.includes(\"feedback-nps\")) location.href = \"/feedback-nps\";\n}\n//Disable webflow form submissions\nWebflow.push(function() {\n    $(\"form\").submit(function() {\n        return false;\n    });\n});\nasync function fetchAndShowRecommendedItems(items) {\n    try {\n        const ids = [];\n        items.forEach((doc)=>ids.push(doc.id));\n        const response = await firebase.app().functions(\"europe-west1\").httpsCallable(\"itemRecommendations\")({\n            items: ids.slice(0, 10),\n            number: 20\n        });\n        if (!response.data.length) return;\n        document.getElementById(\"recommendedItemsDiv\").style.display = \"block\";\n        const itemList = document.getElementById(\"recommendedItemsList\");\n        itemList.innerHTML = \"\";\n        let itemSizes = [];\n        let idx = 0;\n        for (const item of response.data){\n            if (!itemSizes.includes(item.maiSize)) itemSizes.push(item.maiSize);\n            const image = item.images.modelImageLarge || item.images.modelImage || item.images.enhancedFrontImageLarge || item.images.enhancedFrontImage;\n            const itemCardHTML = `<div class=\"div-block-14-big\"><a id=\"recommendedItemCard${idx++}\" href=\"${item.platformListings.maiShop.url}\"/><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\">\n                        <div class=\"img-container\" style=\"background-image: url('${image}')\"></div></div></div>\n                        <div class=\"recently-added-text-block\">\n                            <div class=\"recent-added-items-subheader\">${item.cleanedBrand}</div>\n                            <div class=\"recent-added-items-subheader-category\">${item.category}, ${item.maiSize}</div>\n                            <div class=\"recently-added-price\">${item.platformListings.maiShop.currentPrice} kr</div>\n                            <div class=\"recently-added-brands-link-text\">Mai Shop</div>\n                        </div><a/></div>`;\n            itemList.innerHTML += itemCardHTML;\n        }\n        itemList.querySelectorAll(\"a\").forEach((link)=>link.addEventListener(\"click\", linkClickTracker));\n        document.getElementById(\"goToMaiShopLinkRecommendations\").setAttribute(\"href\", `https://shop.maiapp.se/collections/damklader/${response.data[0].sex || \"Woman\"}?sort_by=created-descending&filter.p.m.global.size=${itemSizes.join(\"&filter.p.m.global.size=\")}`);\n        const observer = new IntersectionObserver((entries, opts)=>{\n            const rect = itemList.getBoundingClientRect();\n            const isVisible = rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight);\n            if (isVisible) {\n                console.log(\"Recommendations viewed\");\n                analytics.track(\"Element Viewed\", {\n                    elementID: \"recommendedItems\"\n                });\n                observer.disconnect();\n            }\n        }, {\n            threshold: 1,\n            root: null\n        });\n        observer.observe(itemList);\n    } catch (e) {\n        errorHandler.report(e);\n        console.log(\"error\", e);\n    }\n}\nfunction closePickupToast() {\n    document.getElementById(\"triggerPickupToastClose\").click();\n}\nfunction closeFeedbackForm() {\n    document.getElementById(\"triggerFeedbackFormClose\").click();\n    setTimeout(function() {\n        location.reload();\n    }, 400);\n}\nasync function bookPickup() {\n    let pickupDate = \"\";\n    var pickupRadioButtons = document.getElementsByName(\"Pickup\");\n    for(var x = 0; x < pickupRadioButtons.length; x++)if (pickupRadioButtons[x].checked) pickupDate = pickupRadioButtons[x].value; // yyyy--mm-dd\n    db.collection(\"items\").doc(pickupFlowItemId).update({\n        pickupDate,\n        shippingMethod: \"Pickup\"\n    }).then((docRef)=>{\n        console.log(`pickupDate '${pickupDate}' and shippingMethod 'Pickup' is now updated on Firestore item`);\n        closePickupToast();\n        document.getElementById(\"triggerFeedbackFormOpen\").click();\n    });\n}\nasync function setHappinessRate(value) {\n    const itemRef = db.collection(\"items\").doc(pickupFlowItemId);\n    const res = await itemRef.update({\n        happinessRate: value\n    }).then(function() {\n        console.log(`happinessRate is now set on Firestore item`);\n        happinessQuestionDiv.style.display = \"none\";\n        openQuestionDiv.style.display = \"block\";\n        feedbackSubmitButton.style.display = \"block\";\n    });\n}\nasync function storeFeedback() {\n    const value = feedbackTextField.value;\n    const itemRef = db.collection(\"items\").doc(pickupFlowItemId);\n    const res = await itemRef.update({\n        feedbackText: value\n    }).then(function() {\n        console.log(`feedbackText is now set on Firestore item`);\n        closeFeedbackForm();\n    });\n}\nlet loadHandlerHasRun = false;\nfunction onLoadHandler() {\n    console.log(\"onLoadHandler running\");\n    menuSignoutButton.addEventListener(\"click\", (0, _general.signOut));\n    bookPickupForm.addEventListener(\"submit\", bookPickup);\n    closePickupToastIcon.addEventListener(\"click\", closePickupToast);\n    closeFeedbackFormButton.addEventListener(\"click\", closeFeedbackForm);\n    happySmileyButton.addEventListener(\"click\", function() {\n        setHappinessRate(3);\n    }, false);\n    neutralSmileyButton.addEventListener(\"click\", function() {\n        setHappinessRate(2);\n    }, false);\n    angrySmileyButton.addEventListener(\"click\", function() {\n        setHappinessRate(1);\n    }, false);\n    feedbackSubmitButton.addEventListener(\"click\", storeFeedback);\n    saveReferralCodeButton.addEventListener(\"click\", async function() {\n        saveRefCodeLoadingDiv.style.display = \"flex\";\n        saveReferralCodeButton.style.display = \"none\";\n        const inputCode = referralCodeInput.value;\n        await connectReferralUsers(inputCode);\n    });\n    closeMeasurementsToastButton.addEventListener(\"click\", function() {\n        triggerMeasurementsToastClose.click();\n    });\n    closeNewPriceToastButton.addEventListener(\"click\", function() {\n        triggerNewPriceToastClose.click();\n    });\n    closeInviteToastButton.addEventListener(\"click\", function() {\n        triggerInviteToastClose.click();\n    });\n    closeServicePointToastButton.addEventListener(\"click\", function() {\n        triggerServicePointToastClose.click();\n    });\n    confirmServicePointButton.addEventListener(\"click\", function() {\n        document.getElementById(\"feedbackFormTitle\").innerHTML = \"\";\n        triggerServicePointToastClose.click();\n        triggerFeedbackFormOpen.click();\n    });\n    closeLongerPeriodToastButton.addEventListener(\"click\", function() {\n        triggerLongerPeriodToastClose.click();\n    });\n    shareCodeButton.addEventListener(\"click\", (0, _general.shareCode));\n    sharePersonalLinkButton.addEventListener(\"click\", (0, _general.shareCode));\n    loadHandlerHasRun = true;\n    menuButton.addEventListener(\"click\", function() {\n        Intercom(\"update\", {\n            \"hide_default_launcher\": true\n        });\n    });\n    closeMenuButton.addEventListener(\"click\", function() {\n        Intercom(\"update\", {\n            \"hide_default_launcher\": false\n        });\n    });\n    document.getElementById(\"christmasHolidayDiv\").onclick = ()=>Intercom(\"showNewMessage\", \"N\\xe4r reser du iv\\xe4g, och n\\xe4r \\xe4r du tillbaka?\\n\\n\");\n}\nwindow.addEventListener(\"load\", onLoadHandler);\nconsole.log(`document.readyState ${document.readyState}`);\nif (document.readyState === \"complete\" && !loadHandlerHasRun) {\n    console.log(\"Running it since event listener did not\");\n    onLoadHandler();\n}\nwindow.addEventListener(\"pageshow\", (event)=>{\n    if (event.persisted) {\n        console.log(\"This page was restored from the bfcache.\");\n        if (menu.style.display !== \"none\") menu.style.display = \"none\";\n    } else console.log(\"This page was loaded normally.\");\n});\nwindow.intercomSettings = {\n    app_id: \"klyy0le5\"\n};\n(function() {\n    var w = window;\n    var ic = w.Intercom;\n    if (typeof ic === \"function\") {\n        ic(\"reattach_activator\");\n        ic(\"update\", w.intercomSettings);\n    } else {\n        var d = document;\n        var i = function() {\n            i.c(arguments);\n        };\n        i.q = [];\n        i.c = function(args) {\n            i.q.push(args);\n        };\n        w.Intercom = i;\n        var l = function() {\n            var s = d.createElement(\"script\");\n            s.type = \"text/javascript\";\n            s.async = true;\n            s.src = \"https://widget.intercom.io/widget/klyy0le5\";\n            var x = d.getElementsByTagName(\"script\")[0];\n            x.parentNode.insertBefore(s, x);\n        };\n        if (w.attachEvent) w.attachEvent(\"onload\", l);\n        else w.addEventListener(\"load\", l, false);\n    }\n})();\n\n},{\"./general\":\"1tOWF\",\"./infoRequestsFunctions\":\"21npA\",\"./loadItemCards\":\"dxOtH\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"bNgzC\"}],\"1tOWF\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"signOut\", ()=>signOut);\nparcelHelpers.export(exports, \"setFormAddressFields\", ()=>setFormAddressFields);\nparcelHelpers.export(exports, \"getFormAddressFields\", ()=>getFormAddressFields);\n// Validate Swedish Social Security Number (personnummer) using checksum\n//   Note: this is somewhat simplified because it does not take into account\n//   that the date of the number is valid (e.g. \"000000-0000\" does return as true)\nparcelHelpers.export(exports, \"isValidSwedishSsn\", ()=>isValidSwedishSsn);\nparcelHelpers.export(exports, \"formatPersonalId\", ()=>formatPersonalId);\nparcelHelpers.export(exports, \"itemCoverImage\", ()=>itemCoverImage);\nparcelHelpers.export(exports, \"shareCode\", ()=>shareCode);\nfunction signOut() {\n    firebase.auth().signOut().then(()=>{\n        console.log(\"User signed out\");\n        authUser.current = null;\n        user.current = null;\n        userId = null;\n        location.href = \"/\";\n        deleteCookie(\"maiAuth\");\n        sessionStorage.removeItem(\"sessionUser\");\n    }).catch((error)=>{\n        errorHandler.report(error);\n        console.log(error);\n    });\n}\nfunction setFormAddressFields(user1) {\n    document.getElementById(\"addressFirstName\").value = user1.addressFirstName || \"\";\n    document.getElementById(\"addressFirstName\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"addressLastName\").value = user1.addressLastName || \"\";\n    document.getElementById(\"addressLastName\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"addressStreetAddress\").value = user1.addressStreetAddress || \"\";\n    document.getElementById(\"addressStreetAddress\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"addressCO\").value = user1.addressCO || \"\";\n    document.getElementById(\"addressCO\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"addressPostalCode\").value = user1.addressPostalCode || \"\";\n    document.getElementById(\"addressPostalCode\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"addressCity\").value = user1.addressCity || \"\";\n    document.getElementById(\"addressCity\").dispatchEvent(new Event(\"input\"));\n    document.getElementById(\"addressDoorCode\").value = user1.addressDoorCode || \"\";\n    document.getElementById(\"addressDoorCode\").dispatchEvent(new Event(\"input\"));\n}\nfunction getFormAddressFields() {\n    let addressFirstName = document.getElementById(\"addressFirstName\").value;\n    let addressLastName = document.getElementById(\"addressLastName\").value;\n    let addressStreetAddress = document.getElementById(\"addressStreetAddress\").value;\n    let addressCO = document.getElementById(\"addressCO\").value;\n    let addressPostalCode = document.getElementById(\"addressPostalCode\").value;\n    let addressCity = document.getElementById(\"addressCity\").value;\n    let addressDoorCode = document.getElementById(\"addressDoorCode\").value;\n    addressFirstName = addressFirstName ? addressFirstName.trim().charAt(0).toUpperCase() + addressFirstName.trim().slice(1) : \"\";\n    addressLastName = addressLastName ? addressLastName.trim().charAt(0).toUpperCase() + addressLastName.trim().slice(1) : \"\";\n    addressStreetAddress = addressStreetAddress ? addressStreetAddress.trim().charAt(0).toUpperCase() + addressStreetAddress.trim().slice(1) : \"\";\n    addressCO = addressCO ? addressCO.trim() : \"\";\n    addressPostalCode = addressPostalCode ? addressPostalCode.trim().replace(/\\D/g, \"\") : \"\";\n    addressCity = addressCity ? addressCity.trim().charAt(0).toUpperCase() + addressCity.trim().slice(1) : \"\";\n    addressDoorCode = addressDoorCode ? addressDoorCode.trim() : \"\";\n    return {\n        addressFirstName,\n        addressLastName,\n        addressStreetAddress,\n        addressCO,\n        addressPostalCode,\n        addressCity,\n        addressDoorCode\n    };\n}\nfunction isValidSwedishSsn(ssn) {\n    ssn = ssn.replace(/\\D/g, \"\") // strip out all but digits\n    .split(\"\") // convert string to array\n    .reverse() // reverse order for Luhn\n    .slice(0, 10); // keep only 10 digits (i.e. 1977 becomes 77)\n    // verify we got 10 digits, otherwise it is invalid\n    if (ssn.length !== 10) return false;\n    const sum = ssn.map((n)=>Number(n)).reduce((previous, current, index)=>{\n        if (index % 2) current *= 2;\n        if (current > 9) current -= 9;\n        return previous + current;\n    });\n    return 0 === sum % 10;\n}\nfunction formatPersonalId(personalIdInput) {\n    let personalId = personalIdInput.replace(\"-\", \"\");\n    if (personalId.length !== 12 && (personalId.substring(0, 2) !== \"19\" || personalId.substring(0, 2) !== \"20\")) {\n        if (Number(personalId.substring(0, 2)) <= 99 && Number(personalId.substring(0, 2)) > 25) personalId = \"19\" + personalId;\n        else personalId = \"20\" + personalId;\n    }\n    if (personalId.length === 12) return personalId;\n    return null;\n}\nfunction itemCoverImage(item) {\n    const images = item.images;\n    if (images.modelImage) return images.modelImageSmall || images.modelImage;\n    if (images.coverImage) return images.coverImageSmall || images.coverImage;\n    if (images.enhancedFrontImage) return images.enhancedFrontImageSmall || images.enhancedFrontImage;\n    return images.frontImageSmall || images.frontImage;\n}\nfunction shareCode() {\n    const code = user.current.referralData.referralCode;\n    //const text = `Hej, jag vill tipsa om Mai fr att rensa ur garderoben. Mai r en tjnst som hjlper dig att slja dina klder p ett enkelt stt. Man tar bara bilder p sina plagg, sedan skter Mai resten - ssom vrdering, annonsering p flera plattformar, kontakt med kpare och frakt nr det blir slt. Man fr sjlv behlla 80% av vinsten, och blir det inte slt kostar det ingenting.\\n\\nOm du registrerar dig med min kod (flj lnken) och provar slja ett plagg inom 7 dagar fr du behlla 100% av vinsten fr det frsta plagget (istllet fr 80%). Min kod: ${code}\\n\\nLs mer och anvnd min kod hr:`;\n    const text = `Hej! Flj min personliga lnk s sljer Mai ditt frsta plagg kostnadsfritt! Mai skter frsljningen av dina klder, inklusive vrdering, lgger ut p flera plattformar samtidigt, har kontakten med kpare och ordnar med frakt nr det blir slt. Man fr sjlv behlla 80% av vinsten, och blir det inte slt kostar det ingenting.\\n\\nOm du registrerar dig med min kod (flj lnken) och provar slja ett plagg inom 7 dagar fr du behlla 100% av vinsten fr det frsta plagget (istllet fr 80%). Min kod: ${code}`;\n    if (navigator.share) navigator.share({\n        text: text,\n        url: `https://maiapp.se/?invite=${code}`\n    }).then(()=>{\n        console.log(\"Thanks for sharing!\");\n    }).catch((e)=>{\n        console.error(e);\n        errorHandler.report(e);\n    });\n    else {\n        console.log(\"Browser doesn't support navigator.share => Copy to clipboard!\");\n        const shareText = text + \"\\n\" + `https://maiapp.se/?invite=${code}`;\n        navigator.clipboard.writeText(shareText);\n        linkCopiedBanner.style.display = \"flex\";\n        setTimeout(function() {\n            linkCopiedBanner.style.display = \"none\";\n        }, 1500);\n    }\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"bNgzC\"}],\"bNgzC\":[function(require,module,exports) {\nexports.interopDefault = function(a) {\n    return a && a.__esModule ? a : {\n        default: a\n    };\n};\nexports.defineInteropFlag = function(a) {\n    Object.defineProperty(a, \"__esModule\", {\n        value: true\n    });\n};\nexports.exportAll = function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n        if (key === \"default\" || key === \"__esModule\" || dest.hasOwnProperty(key)) return;\n        Object.defineProperty(dest, key, {\n            enumerable: true,\n            get: function() {\n                return source[key];\n            }\n        });\n    });\n    return dest;\n};\nexports.export = function(dest, destName, get) {\n    Object.defineProperty(dest, destName, {\n        enumerable: true,\n        get: get\n    });\n};\n\n},{}],\"21npA\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"loadInfoRequests\", ()=>loadInfoRequests);\nvar _general = require(\"./general\");\nasync function openMeasurementsToast(itemId, description) {\n    measurementDescriptionText.innerHTML = description;\n    measurementsSubmitButton.addEventListener(\"click\", async function() {\n        const input = measurementsInput.value;\n        if (input.length > 0 && input !== \" \") await db.collection(\"items\").doc(itemId).update({\n            measurements: input,\n            \"infoRequests.measurements.status\": \"Resolved\"\n        });\n        triggerMeasurementsToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 400);\n    });\n    triggerMeasurementsToastOpen.click();\n}\nasync function openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore) {\n    if (!itemId) return;\n    console.log(\"is this happening?\");\n    // If user is qualified to get the discount question -> Show it to the user\n    const price = currentMinPrice;\n    const priceWithDiscount30 = Math.ceil(price * 0.7 / 10) * 10;\n    const priceWithDiscount20 = Math.ceil(price * 0.8 / 10) * 10;\n    priceAfterDiscount30.innerHTML = `(Priset blir ${priceWithDiscount30} kr)`;\n    priceAfterDiscount20.innerHTML = `(Priset blir ${priceWithDiscount20} kr)`;\n    priceNoDiscount.innerHTML = `(${price} kr)`;\n    if (price >= 140 && !deniedBefore) {\n        longerPeriodDescriptionText.innerHTML = `Sljperioden fr ditt ${brand}-plagg har ntt sitt slut. Vlj om du vill frlnga sljperioden med ytterligare 30 dagar och om du vill snka priset fr att ka chansen att f det slt.`;\n        discountFormDiv.style.display = \"block\";\n    } else {\n        longerPeriodDescriptionText.innerHTML = `Sljperioden fr ditt ${brand}-plagg har ntt sitt slut. Vill du frlnga sljperioden med ytterligare 30 dagar eller avsluta frsljningen?`;\n        discountFormDiv.style.display = \"none\";\n    }\n    // Accept longer selling window and store chosen discount\n    longerPeriodAcceptButton.addEventListener(\"click\", async function() {\n        const today = new Date();\n        const todayDate = today.toISOString().split(\"T\")[0];\n        let newPrice = price;\n        let discount = 0;\n        var discountRadioButtons = document.getElementsByName(\"Discount\");\n        for(var x = 0; x < discountRadioButtons.length; x++)if (discountRadioButtons[x].checked) {\n            const input = discountRadioButtons[x].value;\n            if (input === \"30\") {\n                newPrice = priceWithDiscount30;\n                discount = 30;\n            }\n            if (input === \"20\") {\n                newPrice = priceWithDiscount20;\n                discount = 20;\n            }\n        }\n        await db.collection(\"items\").doc(itemId).update({\n            longerPeriodAcceptedDate: todayDate,\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Accepted\",\n            longerPeriodAcceptedDiscount: discount,\n            minPriceEstimate: newPrice\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 300);\n    });\n    // Decline longer selling period and quit sales\n    longerPeriodDenyButton.addEventListener(\"click\", async function() {\n        await db.collection(\"items\").doc(itemId).update({\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Denied\",\n            \"status\": \"Unsold\" // This field is normally mastered by AT - I do this for the user to see the effect immediately (the card is removed)\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 300);\n    });\n    triggerLongerPeriodToastOpen.click();\n}\nasync function storePriceResponse(itemId, max, min, response, status) {\n    console.log(\"storePriceResponse\", itemId, max, min, response);\n    // Accept price\n    if (response === \"Accepted\") await db.collection(\"items\").doc(itemId).update({\n        \"infoRequests.price.status\": \"Resolved\",\n        \"infoRequests.price.response\": \"Accepted\",\n        \"maxPriceEstimate\": max,\n        \"minPriceEstimate\": min\n    }).then(function() {\n        triggerNewPriceToastClose.click();\n        setTimeout(function() {\n            location.reload();\n        }, 300);\n    });\n    // Deny price\n    if (response === \"Denied\") {\n        let fields = {\n            \"infoRequests.price.status\": \"Resolved\",\n            \"infoRequests.price.response\": \"Denied\"\n        };\n        if (status === \"New\") {\n            fields[\"archived\"] = true;\n            fields[\"willNotSell\"] = true;\n        }\n        await db.collection(\"items\").doc(itemId).update(fields).then(function() {\n            triggerNewPriceToastClose.click();\n            setTimeout(function() {\n                location.reload();\n            }, 300);\n        });\n    }\n}\nasync function openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMax, currentMin) {\n    console.log(\"openNewPriceToast\", itemId, status, max, min, brand, description, category, type, currentMax, currentMin);\n    previousMinPrice.style.display = \"none\";\n    previousMaxPrice.style.display = \"none\";\n    maxPriceDiv.style.display = \"block\";\n    minPriceDiv.style.display = \"block\";\n    // Set content of toast\n    newPriceToastTitle.innerHTML = \"Nytt l\\xe4gsta pris\";\n    newPriceHeading.innerHTML = `${brand}-plagg`;\n    const c = category.toLowerCase();\n    if (c && c !== \"null\") newPriceHeading.innerHTML = `${brand}-${c}`;\n    maxPrice.innerHTML = max;\n    minPrice.innerHTML = min;\n    if (currentMax && currentMax !== \"null\" && currentMax !== \"\" && currentMax !== \"undefined\" && max !== currentMax) {\n        previousMaxPrice.innerHTML = currentMax;\n        previousMaxPrice.style.display = \"block\";\n    }\n    if (currentMin && currentMin !== \"null\" && currentMin !== \"\" && currentMin !== \"undefined\" && min !== currentMin) {\n        previousMinPrice.innerHTML = currentMin;\n        previousMinPrice.style.display = \"block\";\n    }\n    acceptNewPriceButton.innerHTML = \"S\\xe4lj med nytt pris\";\n    denyNewPriceButton.innerHTML = \"S\\xe4nk ej\";\n    if (status === \"New\" && type === \"Valuation\") {\n        newPriceToastTitle.innerHTML = \"V\\xe4rdering\";\n        acceptNewPriceButton.innerHTML = \"S\\xe4lj till v\\xe4rdering\";\n        denyNewPriceButton.innerHTML = \"Avb\\xf6j och avsluta\";\n    }\n    if (type === \"Adjusted ML Valuation\") newPriceToastTitle.innerHTML = \"Nytt prisintervall\";\n    if (type !== \"Valuation\" && type !== \"Adjusted ML Valuation\") {\n        minPrice.innerHTML = `${min} kr`;\n        maxPriceDiv.style.display = \"none\";\n    }\n    if (description && description !== \"undefined\" && description !== \"\" && description !== \"null\") {\n        newPriceText.innerHTML = description;\n        descriptionDiv.style.display = \"block\";\n    }\n    acceptNewPriceButton.addEventListener(\"click\", ()=>{\n        storePriceResponse(itemId, max, min, \"Accepted\", status);\n    });\n    denyNewPriceButton.addEventListener(\"click\", ()=>{\n        storePriceResponse(itemId, max, min, \"Denied\", status);\n    });\n    // Open toast\n    triggerNewPriceToastOpen.click();\n}\nfunction loadInfoRequests(userId) {\n    const measurementsClone = document.getElementById(\"infoRequestMeasurementsTemplate\").cloneNode(true);\n    const longerPeriodClone = document.getElementById(\"infoRequestLongerPeriodTemplate\").cloneNode(true);\n    const updateImagesClone = document.getElementById(\"infoRequestImagesTemplate\").cloneNode(true);\n    const valuationClone = document.getElementById(\"infoRequestValuationTemplate\").cloneNode(true);\n    const infoRequestsList = document.getElementById(\"infoRequestsList\");\n    infoRequestsList.replaceChildren();\n    db.collection(\"items\").where(\"user\", \"==\", userId).get().then((querySnapshot)=>{\n        querySnapshot.forEach((doc)=>{\n            const itemId = doc.id;\n            const item = doc.data();\n            const infoRequests = item.infoRequests;\n            const status = item.status;\n            const brand = item.brand.replace(/'/g, \"\");\n            const currentMinPrice = item.minPriceEstimate;\n            const currentMaxPrice = item.maxPriceEstimate;\n            const deniedBefore = item?.infoRequests?.price?.response === \"Denied\" ? true : false;\n            const archived = item.archived;\n            const category = item.category;\n            const frontImageUrl = (0, _general.itemCoverImage)(item);\n            if (archived == undefined && status !== \"Unsold\" && status !== \"Sold\" && infoRequests) displayRequests();\n            function displayRequests() {\n                for(const req in infoRequests)if (infoRequests[req]?.status === \"Active\") {\n                    let description = infoRequests[req].description;\n                    if (description) description = description.replace(/'/g, \"\");\n                    // PRICE REQUEST\n                    if (req === \"price\") {\n                        const type = infoRequests[req].type;\n                        const newRequest = valuationClone.cloneNode(true);\n                        newRequest.id = `infoRequestPrice-${itemId}`;\n                        newRequest.querySelector(\".img-container\").style.backgroundImage = `url('${frontImageUrl}')`;\n                        newRequest.querySelector(\"a .pricebuttontext\").innerText = \"Se prisf\\xf6rslag\";\n                        newRequest.querySelector(\".text-block-72\").innerText = \"Vill du s\\xe4nka priset och f\\xe5 det s\\xe5lt?\";\n                        infoRequestsList.appendChild(newRequest);\n                        if (status === \"New\" && type !== \"Adjusted ML Valuation\") {\n                            newRequest.querySelector(\"a .pricebuttontext\").innerText = \"Se v\\xe4rdering\";\n                            newRequest.querySelector(\".text-block-72\").innerText = \"Vill du s\\xe4lja till v\\xe5r v\\xe4rdering?\";\n                            newRequest.querySelector(\"a\").href = `/item-valuation?id=${itemId}`;\n                        } else setTimeout(()=>{\n                            const max = infoRequests[req].maxPrice;\n                            const min = infoRequests[req].minPrice;\n                            document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener(\"click\", async ()=>{\n                                await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);\n                            });\n                        }, 0);\n                    }\n                    // MEASUREMENTS REQUEST\n                    if (req === \"measurements\") {\n                        const newRequest = measurementsClone.cloneNode(true);\n                        newRequest.id = `infoRequestMeasurements-${itemId}`;\n                        newRequest.querySelector(\".img-container\").style.backgroundImage = `url('${frontImageUrl}')`;\n                        infoRequestsList.appendChild(newRequest);\n                        setTimeout(()=>{\n                            document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener(\"click\", async ()=>{\n                                await openMeasurementsToast(itemId, description);\n                            });\n                        }, 0);\n                    }\n                    // IMAGES REQUEST\n                    if (req === \"images\") {\n                        const newRequest = updateImagesClone.cloneNode(true);\n                        newRequest.id = `infoRequestImages-${itemId}`;\n                        newRequest.querySelector(\".img-container\").style.backgroundImage = `url('${frontImageUrl}')`;\n                        newRequest.querySelector(\"a\").href = `/edit-item?id=${itemId}`;\n                        infoRequestsList.appendChild(newRequest);\n                    }\n                    // LONGER PERIOD REQUEST\n                    if (req === \"longerPeriod\") {\n                        const newRequest = longerPeriodClone.cloneNode(true);\n                        newRequest.id = `infoRequestLongerPeriod-${itemId}`;\n                        newRequest.querySelector(\".img-container\").style.backgroundImage = `url('${frontImageUrl}')`;\n                        infoRequestsList.appendChild(newRequest);\n                        setTimeout(()=>{\n                            document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener(\"click\", async ()=>{\n                                await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);\n                            });\n                        }, 0);\n                    }\n                    infoRequestsDiv.style.display = \"block\";\n                }\n            }\n        });\n    });\n}\n\n},{\"./general\":\"1tOWF\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"bNgzC\"}],\"dxOtH\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"loadItemCards\", ()=>loadItemCards);\nvar _general = require(\"./general\");\nvar _private = require(\"./private\");\n/**\n * @param {String} HTML representing a single element.\n * @param {Boolean} flag representing whether or not to trim input whitespace, defaults to true.\n * @return {Element | HTMLCollection | null}\n */ function fromHTML(html, trim = true) {\n    // Process the HTML string.\n    html = trim ? html : html.trim();\n    if (!html) return null;\n    // Then set up a new template element.\n    const template = document.createElement(\"template\");\n    template.innerHTML = html;\n    const result = template.content.children;\n    // Then return either an HTMLElement or HTMLCollection,\n    // based on whether the input HTML had one or more roots.\n    if (result.length === 1) return result[0];\n    return result;\n}\nfunction getQrCodeButton(itemId) {\n    let itemPageUrl = window.location.origin + `/ship-item?id=${itemId}`;\n    const div = `<a id=\"qrCodeButton\" href=\"${itemPageUrl}\" class=\"link-block-39\">\n                            <div class=\"div-block-194\">\n                                            <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63bdeaf1af902f05607f86ef_Group.svg\" class=\"image-43\">\n                                            <div class=\"text-block-113\">Visa QR</div>\n                            </div>\n                    </a>`;\n    return div;\n}\nfunction getBarcodeButton(itemId) {\n    let itemPageUrl = window.location.origin + `/ship-item?id=${itemId}`;\n    const div = `<a id=\"barcodeButton\" href=\"${itemPageUrl}\" class=\"link-block-39\">\n                            <div class=\"div-block-194\">\n                                            <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65418186f29682eaff3f74be_barcode-icon%20(1).svg\" class=\"image-100\">\n                                            <div class=\"text-block-113\">Visa streckkod</div>\n                            </div>\n                    </a>`;\n    return div;\n}\nfunction getBookPickupButton(itemId) {\n    const div = `<a id=\"bookPickupButton-${itemId}\" href=\"#\" class=\"link-block-39\">\n                            <div class=\"div-block-194\">\n                                <div class=\"text-block-113\">Boka hmtning</div>\n                            </div>\n                    </a>`;\n    return div;\n}\nasync function storeShippingMethod(itemId, method) {\n    console.log(`storeShippingMethod(${itemId}, ${method}) is running`);\n    await db.collection(\"items\").doc(itemId).update({\n        shippingMethod: method\n    }).then((docRef)=>{\n        console.log(`Shipping method '${method}' stored on item with ID: `, itemId);\n        window.pickupFlowItemId = itemId; // Legacy from before. Bad way of doing it. Should clean up 'pickupFlowItemId' at some point.\n        if (method == \"Service point\") {\n            document.getElementById(\"feedbackFormTitle\").innerHTML = \"Tack, d\\xe5 vet vi att paketet snart l\\xe4mnas till ett ombud.\";\n            document.getElementById(\"triggerShippingToastClose\").click();\n        }\n        (0, _private.closePickupToast)();\n        document.getElementById(\"triggerFeedbackFormOpen\").click();\n    });\n}\nfunction openShippingToast(itemId, soldDate) {\n    console.log(`openShippingToast(${itemId}, ${soldDate})`);\n    window.pickupFlowItemId = itemId;\n    setTimeout(()=>{\n        document.getElementById(\"servicePointButton\").addEventListener(\"click\", async ()=>{\n            await storeShippingMethod(itemId, \"Service point\");\n        });\n        document.getElementById(\"bookPickupButton\").addEventListener(\"click\", ()=>{\n            openPickupToast(itemId, soldDate);\n        });\n    }, 0);\n    triggerShippingToastOpen.click();\n}\nfunction openServicePointToast(itemId, soldDate) {\n    console.log(\"openServicePointToast\");\n    changeToPickupButton.addEventListener(\"click\", ()=>{\n        openPickupToast(itemId, soldDate);\n    });\n    triggerServicePointToastOpen.click();\n}\nfunction openPickupToast(itemId, soldDate, servicePointButtonDisplay = \"none\") {\n    console.log(`openPickupToast(${itemId}, ${soldDate}) is running`);\n    triggerShippingToastClose.click();\n    triggerServicePointToastClose.click();\n    changeToServicePointButton.addEventListener(\"click\", async ()=>{\n        await storeShippingMethod(itemId, \"Service point\");\n    });\n    changeToServicePointButton.style.display = servicePointButtonDisplay;\n    setDatesOfPickupToast(soldDate);\n    window.pickupFlowItemId = itemId;\n    triggerPickupAnimation.click();\n}\nfunction setDatesOfPickupToast(soldDate) {\n    console.log(`setDatesOfPickupToast(${soldDate}) is running`);\n    // Hide all options first, to later determine which ones to show\n    radioFieldOne.style.display = \"none\";\n    radioFieldTwo.style.display = \"none\";\n    radioFieldThree.style.display = \"none\";\n    radioFieldFour.style.display = \"none\";\n    // Create the 4 first possible pickup dates, starting 4 b-days after soldDate\n    var firstDate = new Date(soldDate);\n    firstDate.setTime(firstDate.getTime() + 3600000); // With soldDate on format \"yyyy-m-dd\" (note one m) the time is set to 00 which resulted in bug, had to add 1 hour, or fix the format.\n    firstDate.setDate(firstDate.getDate() + 4);\n    if (firstDate.getDay() == 6 || firstDate.getDay() == 0 || firstDate.getDay() == 1 || firstDate.getDay() == 2) firstDate.setDate(firstDate.getDate() + 2); // If sat, sun, mon, tue => compensate for weekend with 2 days\n    else if (firstDate.getDay() == 3) firstDate.setDate(firstDate.getDate() + 1); // If wednesday, add 1 days to compensate for sunday\n    var secondDate = new Date(firstDate);\n    secondDate.setDate(secondDate.getDate() + 1);\n    if (secondDate.getDay() == 6) secondDate.setDate(secondDate.getDate() + 2);\n    var thirdDate = new Date(secondDate);\n    thirdDate.setDate(thirdDate.getDate() + 1);\n    if (thirdDate.getDay() == 6) thirdDate.setDate(thirdDate.getDate() + 2);\n    var forthDate = new Date(thirdDate);\n    forthDate.setDate(forthDate.getDate() + 1);\n    if (forthDate.getDay() == 6) forthDate.setDate(forthDate.getDate() + 2);\n    var days = [\n        \"S\\xf6ndag\",\n        \"M\\xe5ndag\",\n        \"Tisdag\",\n        \"Onsdag\",\n        \"Torsdag\",\n        \"Fredag\",\n        \"L\\xf6rdag\"\n    ];\n    var months = [\n        \"jan\",\n        \"feb\",\n        \"mar\",\n        \"apr\",\n        \"maj\",\n        \"jun\",\n        \"jul\",\n        \"aug\",\n        \"sep\",\n        \"okt\",\n        \"nov\",\n        \"dec\"\n    ];\n    // Change value of radio buttons and display to user\n    let today = new Date();\n    let optionsDisplayed = 0;\n    console.log(\"Today\", today);\n    console.log(\"firstDate > today\", firstDate > today);\n    console.log(\"secondDate > today\", secondDate > today);\n    console.log(\"thirdDate > today\", thirdDate > today);\n    console.log(\"forthDate > today\", forthDate > today);\n    const pickupDateOne = document.getElementById(\"pickupDateOne\");\n    const pickupDateTwo = document.getElementById(\"pickupDateTwo\");\n    const pickupDateThree = document.getElementById(\"pickupDateThree\");\n    const pickupDateFour = document.getElementById(\"pickupDateFour\");\n    if (firstDate > today) {\n        $(\"#radioButtonOne\").val(firstDate.toISOString().split(\"T\")[0]); //yyyy-mm-dd\n        pickupDateOne.innerHTML = days[firstDate.getDay()] + \", \" + firstDate.getDate() + \" \" + months[firstDate.getMonth()] + \", kl 9-16\";\n        radioFieldOne.style.display = \"flex\";\n        optionsDisplayed++;\n    }\n    if (secondDate > today) {\n        $(\"#radioButtonTwo\").val(secondDate.toISOString().split(\"T\")[0]);\n        pickupDateTwo.innerHTML = days[secondDate.getDay()] + \", \" + secondDate.getDate() + \" \" + months[secondDate.getMonth()] + \", kl 9-16\";\n        radioFieldTwo.style.display = \"flex\";\n        optionsDisplayed++;\n    }\n    if (thirdDate > today) {\n        $(\"#radioButtonThree\").val(thirdDate.toISOString().split(\"T\")[0]);\n        pickupDateThree.innerHTML = days[thirdDate.getDay()] + \", \" + thirdDate.getDate() + \" \" + months[thirdDate.getMonth()] + \", kl 9-16\";\n        radioFieldThree.style.display = \"flex\";\n        optionsDisplayed++;\n    }\n    if (forthDate > today) {\n        $(\"#radioButtonFour\").val(forthDate.toISOString().split(\"T\")[0]);\n        pickupDateFour.innerHTML = days[forthDate.getDay()] + \", \" + forthDate.getDate() + \" \" + months[forthDate.getMonth()] + \", kl 9-16\";\n        radioFieldFour.style.display = \"flex\";\n        optionsDisplayed++;\n    }\n    // If less than two options displayed, add at least two options\n    if (optionsDisplayed < 2) {\n        radioFieldOne.style.display = \"none\";\n        radioFieldTwo.style.display = \"none\";\n        radioFieldThree.style.display = \"none\";\n        radioFieldFour.style.display = \"none\";\n        var dayOne = new Date();\n        dayOne.setDate(today.getDate() + 1);\n        if (dayOne.getDay() == 0) dayOne.setDate(dayOne.getDate() + 1);\n        else if (dayOne.getDay() == 6) dayOne.setDate(dayOne.getDate() + 2);\n        var dayTwo = new Date(dayOne);\n        dayTwo.setDate(dayTwo.getDate() + 1);\n        if (dayTwo.getDay() == 6) dayTwo.setDate(dayTwo.getDate() + 2);\n        console.log(\"dayOne: \", dayOne);\n        console.log(\"dayTwo: \", dayTwo);\n        // Show tomorrow as an option\n        $(\"#radioButtonOne\").val(dayOne.toISOString().split(\"T\")[0]);\n        pickupDateOne.innerHTML = days[dayOne.getDay()] + \", \" + dayOne.getDate() + \" \" + months[dayOne.getMonth()] + \", kl 9-16\";\n        radioFieldOne.style.display = \"flex\";\n        // Show day after tomorrow as an option\n        $(\"#radioButtonTwo\").val(dayTwo.toISOString().split(\"T\")[0]);\n        pickupDateTwo.innerHTML = days[dayTwo.getDay()] + \", \" + dayTwo.getDate() + \" \" + months[dayTwo.getMonth()] + \", kl 9-16\";\n        radioFieldTwo.style.display = \"flex\";\n    }\n}\nfunction bagReceivedAction(checkbox, itemId, soldDate, shippingMethod) {\n    if (checkbox.checked) {\n        db.collection(\"items\").doc(itemId).update({\n            bagReceived: true\n        }).then((docRef)=>{\n            console.log(`Stored in DB that bag is received for item with ID: `, itemId);\n        });\n        if (shippingMethod === \"Pickup\") openPickupToast(itemId, soldDate, \"flex\");\n        else if (shippingMethod === \"Service point\") openServicePointToast(itemId, soldDate);\n        else openShippingToast(itemId, soldDate);\n    } else db.collection(\"items\").doc(itemId).update({\n        bagReceived: false\n    }).then((docRef)=>{\n        console.log(`Stored in DB that bag is NOT received for item with ID: `, itemId);\n    });\n}\nfunction getBagReceivedCheckbox(itemId, soldDate, shippingMethod) {\n    const div = `<div class=\"w-form\">\n            <form method=\"get\" name=\"wf-form-\" id=\"bagReceivedForm\">\n                <label class=\"w-checkbox checkbox-field-3\">\n                    <div class=\"w-checkbox-input w-checkbox-input--inputType-custom checkbox-2\"></div>\n                    <input type=\"checkbox\" id=\"bagReceivedCheckbox-${itemId}\" style=\"opacity:0;position:absolute;z-index:-1\">\n                    <span class=\"checkbox-label-3 w-form-label\">Etiketten har kommit</span>\n                </label>\n            </form>\n        </div>`;\n    return div;\n}\nfunction getShippingInfoDiv(itemId, method, soldDate, pickupDate, bagReceived, shipper) {\n    let shippingInfo = ``;\n    const infoIcon = !bagReceived || bagReceived && method == \"Pickup\" && !pickupDate ? `<img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg\" class=\"image-44\">` : \"\";\n    const shipItemPageUrl = window.location.origin + `/ship-item?id=${itemId}`;\n    if (method == \"Service point\") {\n        let shipperIcon = \"6297d3d527db5dd4cf02e924/6399ac2a3505ee6071fbc18a_Vector%20(1).svg\";\n        if (shipper === \"postnord\") shipperIcon = \"6297d3d527db5dd4cf02e924/655d182c37fc30df71b078cd_postnord-square-icon%20(1).svg\";\n        if (shipper === \"dhl\") shipperIcon = \"6297d3d527db5dd4cf02e924/655d1830f259c0bc084c2937_dhl-square-icon%20(1).svg\";\n        shippingInfo += `\n                        <img src=\"https://global-uploads.webflow.com/${shipperIcon}\" class=\"shipper-icon\">\n                        <div class=\"next-step-text-small\">Lmnas till ombud</div>\n                        ${infoIcon}\n                    `;\n    } else if (method == \"Pickup\") {\n        if (pickupDate) {\n            var date = new Date(pickupDate);\n            var days = [\n                \"S\\xf6n\",\n                \"M\\xe5n\",\n                \"Tis\",\n                \"Ons\",\n                \"Tors\",\n                \"Fre\",\n                \"L\\xf6r\"\n            ];\n            var months = [\n                \"jan\",\n                \"feb\",\n                \"mar\",\n                \"apr\",\n                \"maj\",\n                \"jun\",\n                \"jul\",\n                \"aug\",\n                \"sep\",\n                \"okt\",\n                \"nov\",\n                \"dec\"\n            ];\n            var dateNumber = date.getDate();\n            var monthName = months[date.getMonth()];\n            var dayName = days[date.getDay()];\n            var pickupTimeInfoText = dayName + \", \" + dateNumber + \" \" + monthName + \", kl 9-16\";\n            shippingInfo += `\n                                <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg\" class=\"image-45\">\n                                <div class=\"next-step-text-small\">${pickupTimeInfoText}</div>`;\n        } else shippingInfo += `\n                            <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg\" class=\"image-45\">\n                            <div class=\"next-step-text-small\">Upphmtning</div>\n                            ${infoIcon}\n                        `;\n    }\n    // Turn shipping info into a link to ship item page\n    const div = `\n                        <a id=\"shipItemPageLink\" href=\"${shipItemPageUrl}\" class=\"link-block-40\">\n                                ${shippingInfo}\n                        </a>`;\n    return div;\n}\nasync function loadItemCards(items) {\n    itemListSelling.innerHTML = \"\";\n    itemListSoldNotSent.innerHTML = \"\";\n    itemListSold.innerHTML = \"\";\n    var youEarned = 0;\n    items.forEach((doc)=>{\n        var itemId = doc.id;\n        var createdDate = doc.data().createdAt;\n        var soldDate = doc.data().soldDate;\n        var status = doc.data().status;\n        var shippingStatus = doc.data().shippingStatus;\n        var brand = doc.data().brand;\n        var soldPrice = doc.data().soldPrice;\n        var sellerGets = doc.data().sellerGets ? Math.ceil(doc.data().sellerGets) : doc.data().sellerGets;\n        var buyerFirstName = doc.data().buyer?.FirstName || doc.data().buyerFirstName;\n        var buyerAddressCity = doc.data().buyer?.City || doc.data().buyerAddressCity;\n        var minPriceEstimate = doc.data().minPriceEstimate;\n        var maxPriceEstimate = doc.data().maxPriceEstimate;\n        var infoRequests = doc.data().infoRequests;\n        var pickupDate = doc.data().pickupDate;\n        var shippingMethod = doc.data().shippingMethod;\n        var postnordQrCode = doc.data().postnordQrCode;\n        var dhlBarcode = doc.data().dhlLicensePlateBarcodeSrc;\n        var bagReceived = doc.data().bagReceived;\n        var soldPlatform = doc.data().soldPlatform;\n        var archived = doc.data().archived;\n        var holidayMode = doc.data().holidayMode;\n        var longerPeriodAcceptedDate = doc.data().longerPeriodAcceptedDate;\n        const images = doc.data().images;\n        var frontImageUrl = (0, _general.itemCoverImage)(doc.data());\n        let daysLeftText = \"\";\n        let publishedDate = doc.data().publishedDate;\n        if (publishedDate) {\n            publishedDate = new Date(publishedDate);\n            let nowDate = new Date();\n            let timeDifference = nowDate.getTime() - publishedDate.getTime();\n            let daysDifference = timeDifference / 86400000;\n            let sellingPeriodLength = longerPeriodAcceptedDate ? 60 : 30;\n            let daysLeft = Math.round(sellingPeriodLength - daysDifference);\n            if (daysLeft <= 0) daysLeftText = `0 dagar kvar`;\n            else daysLeftText = `${daysLeft} dagar kvar`;\n        }\n        if (archived == undefined && status != \"Unsold\") displayItemCard();\n        function displayItemCard() {\n            //Putting the items in the right list\n            let itemPageUrl = window.location.origin + `/item?id=${itemId}`;\n            // WE SELL RIGHT NOW\n            if (status != \"Sold\") {\n                let textDiv1 = \"\";\n                let textDiv2 = \"\";\n                if (status === \"New\") {\n                    if (infoRequests?.price?.status === \"Active\") textDiv1 = `<div class='text-block-34'>Invntar ditt svar</div>`;\n                    else if (minPriceEstimate && maxPriceEstimate) {\n                        textDiv1 = `<div class='text-block-34'>${minPriceEstimate} - ${maxPriceEstimate} kr</div>`;\n                        textDiv2 = `<div class='text-block-34'>Frbereds</div>`;\n                    } else textDiv1 = `<div class='text-block-34'>Vrdering pgr</div>`;\n                }\n                if (status === \"Published\" && minPriceEstimate && maxPriceEstimate) {\n                    textDiv1 = `<div class='text-block-34'>${minPriceEstimate} - ${maxPriceEstimate} kr</div>`;\n                    const text2 = holidayMode ? \"Pausad\" : daysLeftText;\n                    textDiv2 = `<div class='text-block-34'>${text2}</div>`;\n                }\n                let sellingItemCardHTML = `<div class=\"div-block-14\"><a id=\"itemLinkBlock\" href=\"${itemPageUrl}\" class=\"link-block-18 w-inline-block\"><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\"><div class=\"img-container\" style=\"background-image: url('${frontImageUrl}');\"></div></div></div><div class=\"text-block-14\">${brand}</div>${textDiv1}${textDiv2}</a></div>`;\n                itemListSelling.innerHTML += sellingItemCardHTML;\n                //Display list\n                myItemsDiv.style.display = \"block\";\n                //Hide empty state\n                noItemsDiv.style.display = \"none\";\n                headerSellItemButton.style.display = \"block\";\n                sellButtonText.innerHTML = \"S\\xe4lj ett plagg\";\n            // SOLD - NOT SENT\n            } else if (status == \"Sold\" && shippingStatus != \"Sent\") {\n                // Prepare card\n                var buyerInfoTextHTML = \"\";\n                if (buyerFirstName != null && buyerAddressCity != null && soldPrice) {\n                    const str = `Sld till ${buyerFirstName} i ${buyerAddressCity} fr ${soldPrice} kr`;\n                    // Split sentence into two equally long rows\n                    let output = \"\";\n                    const words = str.split(\" \");\n                    words.forEach(function(word) {\n                        if (output.trim().length > str.length / 2 && !output.includes(\"<br>\")) output += \"<br>\";\n                        output += word + \" \";\n                    });\n                    output = output.trim();\n                    buyerInfoTextHTML = `<div class=\"text-block-44\">${output}</div>`;\n                }\n                var userActionDiv = \"\";\n                var shippingInfoDiv = \"\";\n                let changeShippingMethod = \"\";\n                let shipper = \"\";\n                // Add a user action, such as 'show QR button', 'show barcode' or 'bag received checkbox'\n                if (shippingMethod === \"Service point\") {\n                    if (dhlBarcode) {\n                        userActionDiv = getBarcodeButton(itemId);\n                        shipper = \"dhl\";\n                    } else if (soldPlatform === \"Vestiaire Collective\" || soldPlatform === \"Grailed\") {\n                        if (!bagReceived) {\n                            userActionDiv = getBagReceivedCheckbox(itemId, soldDate, shippingMethod);\n                            setTimeout(()=>{\n                                document.getElementById(`bagReceivedCheckbox-${itemId}`).addEventListener(\"click\", (event)=>{\n                                    bagReceivedAction(event.target, itemId, soldDate, shippingMethod);\n                                });\n                            }, 0);\n                        }\n                    } else if (postnordQrCode) {\n                        shipper = \"postnord\";\n                        userActionDiv = getQrCodeButton(itemId);\n                    }\n                }\n                if (shippingMethod === \"Pickup\") {\n                    if (!bagReceived) {\n                        userActionDiv = getBagReceivedCheckbox(itemId, soldDate, shippingMethod);\n                        setTimeout(()=>{\n                            document.getElementById(`bagReceivedCheckbox-${itemId}`).addEventListener(\"click\", (event)=>{\n                                bagReceivedAction(event.target, itemId, soldDate, shippingMethod);\n                            });\n                        }, 0);\n                    } else if (bagReceived && !pickupDate) {\n                        userActionDiv = getBookPickupButton(itemId);\n                        setTimeout(()=>{\n                            document.getElementById(`bookPickUpButton-${itemId}`).addEventListener(\"click\", ()=>{\n                                openPickupToast(itemId, soldDate);\n                            });\n                        }, 0);\n                    }\n                }\n                // Always show the 'shippingInfoDiv' - Styling depending on state is set in the function\n                shippingInfoDiv = getShippingInfoDiv(itemId, shippingMethod, soldDate, pickupDate, bagReceived, shipper);\n                // Add \"change shipping method\" when applicable and some spacing\n                if (bagReceived && (shippingMethod === \"Service point\" || shippingMethod === \"Pickup\" && pickupDate)) {\n                    shippingInfoDiv = '<div class=\"spacing-15-px\"></div>' + shippingInfoDiv;\n                    changeShippingMethod += `\n          <a id=\"changeShippingMethodA-${itemId}\" href=\"#\">\n              <div id=\"changeShippingMethod-${itemId}\" class=\"change-shipping-method-text\">ndra fraktstt</div>\n          </a>`;\n                    setTimeout(()=>{\n                        document.getElementById(`changeShippingMethodA-${itemId}`).addEventListener(\"click\", ()=>{\n                            openShippingToast(itemId, soldDate);\n                        });\n                    }, 0);\n                }\n                //Create card\n                var soldNotSentCardHTML = ``;\n                soldNotSentCardHTML = `<div class=\"div-block-118\"><div class=\"div-block-45\"><div class=\"div-block-43\"><div class=\"ratio-box _16-9\"><div class=\"content-block with-image\"><a id=\"itemLinkFromSoldNotSentSection\" href=\"${itemPageUrl}\"><div class=\"img-container\" style=\"background-image: url('${frontImageUrl}');\"></div></a></div></div></div><div class=\"div-block-46\"><div class=\"div-block-47\"><div class=\"text-block-43\">Du fr ${sellerGets} kr</div>${buyerInfoTextHTML}\n                      ${userActionDiv}\n                      ${shippingInfoDiv}\n                      ${changeShippingMethod}\n                  </div></div></div></div>`;\n                itemListSoldNotSent.innerHTML += soldNotSentCardHTML;\n                // Display list\n                soldNotSentDiv.style.display = \"block\";\n                // Hide empty state\n                noItemsDiv.style.display = \"none\";\n                headerSellItemButton.style.display = \"block\";\n                sellButtonText.innerHTML = \"S\\xe4lj ett plagg\";\n            // SOLD BEFORE\n            } else {\n                var soldItemCardHTML = `<div class=\"div-block-14\"><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\"><a id=\"itemLinkFromSoldBeforeSection\" href=\"${itemPageUrl}\"><div class=\"img-container\" style=\"background-image: url('${frontImageUrl}');\"></div></a></div></div><div class=\"text-block-14\">${soldPrice} kr</div><div class='text-block-34'>Du fick ${sellerGets} kr</div></div>`;\n                itemListSold.innerHTML += soldItemCardHTML;\n                // Display list, hide empty state\n                soldItemsDiv.style.display = \"block\";\n                itemListSoldContainer.style.display = \"block\";\n                sellButtonText.innerHTML = \"S\\xe4lj ett plagg\";\n                youEarned = youEarned + sellerGets;\n                youEarnedDiv.innerHTML = `Du har tjnat ${Math.round(youEarned).toLocaleString(\"en-US\").replaceAll(\",\", \" \")} kr`;\n            }\n        }\n    });\n    loadingDiv.style.display = \"none\";\n    sectionsDiv.style.display = \"block\";\n    quickInfoDiv.style.display = \"block\";\n}\n\n},{\"./general\":\"1tOWF\",\"./private\":\"flS2m\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"bNgzC\"}]},[\"flS2m\"], \"flS2m\", \"parcelRequire81ca\")\n\n//# sourceMappingURL=private.js.map\n","import {itemCoverImage, shareCode, signOut} from \"./general\";\nimport {loadInfoRequests} from \"./infoRequestsFunctions\";\nimport {loadItemCards} from \"./loadItemCards\";\n\nvar userId;\nvar email;\nvar phone;\n\nexport function updateIC(userId, em, ph) {\n  let email = em;\n  let phone = ph;\n\n  if (email === null) {\n    email = \"\";\n  }\n  if (phone === null) {\n    phone = \"\";\n  }\n\n  window.intercomSettings = {\n    app_id: \"klyy0le5\",\n    user_id: `${userId}`\n  };\n\n  var docRef = db.collection(\"users\").doc(userId);\n  docRef.get().then((doc) => {\n    if (doc.exists) {\n      const data = doc.data();\n      let name = \"\";\n      let city = \"\";\n      if (data.addressFirstName) {\n        const fn = data.addressFirstName;\n        const ln = data.addressLastName;\n        name = fn + \" \" + ln;\n        city = data.addressCity;\n      }\n      if (data.phoneNumber) {\n        phone = data.phoneNumber;\n      }\n\n      // Update intercom\n      var fields = {\n        mai_user_id: `${userId}`,\n        user_id: `${userId}`,\n        phone: `${phone}`,\n        email: `${email}`,\n        name: `${name}`,\n        city: `${city}`\n      };\n\n      Intercom('update', fields);\n    } else {\n      console.log(\"No such user document exist!\");\n    }\n  }).catch((error) => {\n    errorHandler.report(error);\n    console.log(\"Error getting document:\", error);\n  });\n}\n\nfunction showAccountInfo() {\n  let identifier;\n  if (authUser.current.phoneNumber) {\n    identifier = authUser.current.phoneNumber;\n  } else if (authUser.current.email) {\n    identifier = authUser.current.email;\n  }\n  if (identifier) {\n    account.innerHTML = identifier;\n    account.style.display = 'block'\n  }\n  if (user.current.addressFirstName && user.current.addressLastName) {\n    accountName.innerHTML = user.current.addressFirstName + ' ' + user.current.addressLastName;\n    accountName.style.display = 'block';\n  }\n}\n\nasync function showOrderBagsSection() {\n  const maxBags = await firebase.app().functions(\"europe-west1\").httpsCallable('maxNumBags')();\n  if (maxBags?.data?.maxOrderBags > 0) {\n    document.getElementById('orderBagsSection').style.display = 'block';\n  }\n}\n\nfunction showInviteToast(items) {\n  let nowDate = new Date();\n  let daysSinceLatestSold = 10;\n  let soldItemsCount = 0;\n  let oneSoldNotSentItemExist = false;\n  \n\n  // Last viewed\n  let inviteToastViews = user.current?.elementViews ? user.current.elementViews.filter(e => e.elementID === 'inviteToast') : [];\n  const daysSinceToastViewsArray = inviteToastViews.length ? Array.from(inviteToastViews, (e) => parseInt(Math.floor((nowDate.getTime() - e.timestamp.toDate().getTime()) / (1000 * 3600 * 24)))) : [] ;\n  const daysSinceToastLastViewed = daysSinceToastViewsArray.length ? Math.min(...daysSinceToastViewsArray) : null ;\n  let viewedToastBefore = inviteToastViews.length ? true : false;\n\n  if (items) {\n    items.forEach((doc) => { // Items is a global variable that equals to querySnapshot from loadCardLists.js\n      var itemId = doc.id;\n      var i = doc.data();\n      let soldDate = i.soldDate;\n      const status = i.status;\n      const shippingStatus = i.shippingStatus;\n      const archived = i.archived;\n\n      if (!archived && status === 'Sold' && soldDate) {\n        soldItemsCount++;\n        if (soldDate) {\n          soldDate = new Date(soldDate);\n          let timeDifference = nowDate.getTime() - soldDate.getTime();\n          let daysDiff = Math.floor(timeDifference / (1000 * 3600 * 24));\n          if (daysDiff <= daysSinceLatestSold) { daysSinceLatestSold = daysDiff; }\n        }\n        if (shippingStatus !== 'Sent') {\n          oneSoldNotSentItemExist = true;\n        }\n      }\n    });\n  }\n  if (!user.current?.referralData?.referralCode) { return }\n  if ((!viewedToastBefore || daysSinceToastLastViewed > 45) && (daysSinceLatestSold <= 7 || (soldItemsCount >= 3 && daysSinceLatestSold <= 45))) {\n    referralCodeText.innerHTML = user.current.referralData.referralCode;\n    triggerInviteToastOpen.click();\n\n    // Store elementViews to be able to not show it again\n    db.collection('users').doc(authUser.current.uid).update({ elementViews: firebase.firestore.FieldValue.arrayUnion({ elementID: \"inviteToast\", timestamp: new Date() }) });\n    // Track with segment\n    analytics.track(\"Element Viewed\", { elementID: \"inviteToast\" });\n  }\n}\n\nfunction loadSoldByOthers(userID) {\n  var itemListSoldByOthers = document.getElementById('itemListSoldByOthers');\n  itemListSoldByOthers.innerHTML = \"\";\n\n  // SOLD BY OTHERS QUERY + Add cards to list\n  db.collection(\"items\")\n    .where(\"status\", \"==\", \"Sold\")\n    .orderBy('soldDate', 'desc')\n    .limit(30)\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        var sellerId = doc.data().user;\n        var brand = doc.data().brand;\n        var soldPrice = doc.data().soldPrice;\n        var imageUrl = itemCoverImage(doc.data());\n\n        // Add card to list if seller is other than myself\n        if (sellerId != userID && soldPrice >= 200) {\n          var soldByOthersItemCardHTML = `<div class=\"div-block-14\"><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\"><div class=\"img-container\" style=\"background-image: url('${imageUrl}');\"></div></div></div><div class=\"text-block-14\">${soldPrice} kr</div><div class='text-block-34'>${brand}</div></div>`;\n          itemListSoldByOthers.innerHTML += soldByOthersItemCardHTML;\n        }\n      });\n    });\n\n  soldByOthersDiv.style.display = \"block\";\n}\n\nasync function askForAdditionalUserDetails(userID) {\n  let status = \"\";\n  let shippingStatus = \"\";\n  let addressFirstName = \"\";\n  let personalId;\n  let personalIdExists = true;\n  let oneItemNotPaid = false;\n  let oneItemNotSent = false;\n  let pickupShippingMethod = false;\n\n  // First, get items with status \"Sold\" and shippingStatus \"Not sent\"\n  await db.collection(\"items\")\n    .where(\"user\", \"==\", userID)\n    .where(\"status\", \"==\", \"Sold\")\n    .orderBy(\"soldDate\")\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        status = doc.data().status;\n        shippingStatus = doc.data().shippingStatus;\n        const payoutStatus = doc.data().payoutStatus;\n        if (shippingStatus === \"Not sent\") {\n          oneItemNotSent = true;\n        }\n        if (payoutStatus !== \"Payed\") {\n          oneItemNotPaid = true;\n        }\n      });\n    });\n\n  // Second, check if user has no address or personal id added yet\n  await db.collection(\"users\").doc(userID).get().then((doc) => {\n    addressFirstName = doc.data().addressFirstName;\n    personalId = doc.data().personalId;\n    const shippingMethod = doc.data()?.preferences?.shippingMethod;\n    if (personalId) {\n      if (personalId === \"\") {\n        personalIdExists = false;\n      }\n    } else {\n      personalIdExists = false;\n    }\n    if (shippingMethod == 'Pickup') {\n      pickupShippingMethod = true;\n    }\n  });\n\n  // Redirect user if user has no address and at least one item that's sold but not shipped (only if shippingMethod is pickup)\n  if (oneItemNotSent == true && addressFirstName == undefined && pickupShippingMethod) {\n    location.href = \"/address-form\";\n  }\n\n  // Redirect user to personalId form if they haven't added it yet\n  if (oneItemNotPaid == true && personalIdExists == false) {\n    location.href = \"/personal-id-form\";\n  }\n}\n\ncheckCookie(\"invite\");\nlocalStorage.removeItem('latestItemCreated');\nsessionStorage.removeItem('itemToBeCreatedAfterSignIn');\nconsole.log(`user ${user.current}`);\nuser.whenSet(privateMain);\nasync function privateMain() {\n  console.log('privateMain running')\n  if (!user.current) {\n    return;\n  }\n  userId = authUser.current.uid;\n  email = authUser.current.email || sessionStorage.getItem(\"email\");\n  phone = authUser.current.phoneNumber || sessionStorage.getItem(\"phoneNumber\");\n\n  updateIC(userId, email, phone);\n  askForAdditionalUserDetails(userId);\n  loadSoldByOthers(userId);\n  setPreferredLogInMethodCookie(authUser.current.providerData[0].providerId);\n\n  //For testing purposes only - To see what a certain user sees\n  if (userId === \"3OkW5av20HP8ScpUDS8ip9fBEZr1\" && window.location.origin.includes(\"shh-test\")) {\n    userId = \"Cc4y5YYg03TgezoLFkD7QSoKKe73\";\n  }\n  //Yearly Summary\n  /*\n  yearlyDataExist(userId).then((result) => {\n    if (result) {\n      console.log('Yearly data exist!');\n      document.getElementById('yearlySummaryDiv').style.display = 'block';\n      document.getElementById('yearlySummaryDiv').addEventListener(\"click\", function () {\n        location.href = `/2023withmai?id=${userId.substring(0, 10)}`;\n      });\n    } else {\n      console.log('No yearly summary exist!');\n    }\n  });\n  */\n\n  const items = await getItems(userId);\n  showNpsSurvey(items);\n  showInviteToast(items);\n  if (user.current?.referralData?.referralCode) {\n    referralCodeText.innerHTML = user.current.referralData.referralCode;\n    headerInviteButton.style.display = 'flex';\n    menuInviteLink.style.display = 'block';\n  }\n\n  const inviteCode = checkCookie(\"invite\");\n  if (inviteCode) {\n    await connectReferralUsers(inviteCode);\n  }\n  // Set invite code cookie\n  const photoInvite = checkCookie(\"photo_invite\");\n  if (photoInvite && !localStorage.getItem('photoShootBooked')) {\n    photoShootOffer.style.display = 'block';\n    bonusSection.style.display = 'block';\n  }\n  showBonusSection();\n  showAccountInfo();\n  loadItemCards(items);\n  loadInfoRequests(userId);\n  showOrderBagsSection();\n  showReferralSection();\n  fetchAndShowRecommendedItems(items);\n  //showHolidayModeDiv(items);\n\n  // Create refCode\n  if (user.current && user.current.addressFirstName && user.current.addressLastName && !user.current?.referralData?.referralCode) {\n    await createReferralCode();\n  }\n}\n\nfunction showHolidayModeDiv(items) {\n  if (items) {\n    items.forEach((doc) => { // Items is a global variable that equals to querySnapshot from loadCardLists.js\n      var itemId = doc.id;\n      var i = doc.data();\n      let publishedDate = i.publishedDate;\n      const status = i.status;\n      const archived = i.archived;\n\n      if (!archived && status === 'Published' && publishedDate) {\n        if (publishedDate) {\n          publishedDate = new Date(publishedDate);\n          let nowDate = new Date();\n          const daysDiff = Math.floor((nowDate.getTime() - publishedDate.getTime()) / (1000 * 3600 * 24));\n          if (daysDiff <= 45) {\n            document.getElementById('holidayModeDiv').style.display = 'block';\n          }\n        }\n      }\n    });\n  }\n}\n\nasync function yearlyDataExist(userId) {\n  //Get data\n  const url = 'https://europe-west3-second-hand-helper.cloudfunctions.net/yearlyData';\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ id: userId })\n  };\n  const yearlyDataResponse = await fetch(url, options);\n  if (!yearlyDataResponse.ok) { throw new Error('Network response was not ok.'); }\n  const yearlyDataJson = await yearlyDataResponse.json();\n  const yearlyData = yearlyDataJson.data;\n  return yearlyData.sold ? true : false\n}\n\nasync function showNpsSurvey(items) {\n  if (!user) { return; }\n  const nowDate = new Date();\n  let daysSinceFirstPublished = 0;\n  let daysSinceLastPublished = 0;\n\n  // Last viewed\n  const x = user.current?.elementViews ? user.current.elementViews.reverse().find(e => e.elementID === 'npsSurvey') : null;\n  const surveyLastViewed = x ? x.timestamp.toDate() : null;\n  const daysSinceSurveyLastViewed = surveyLastViewed ? Math.floor((nowDate.getTime() - surveyLastViewed.getTime()) / (1000 * 3600 * 24)) : null;\n\n  if (items) {\n    items.forEach((doc) => {\n      const i = doc.data();\n      if (i.publishedDate && !i.archived) {\n        const publishedDate = new Date(i.publishedDate);\n        const daysDiff = Math.floor((nowDate.getTime() - publishedDate.getTime()) / (1000 * 3600 * 24));\n        if (daysDiff > daysSinceFirstPublished) {\n          daysSinceFirstPublished = daysDiff;\n        }\n        if (daysDiff < daysSinceLastPublished || (daysSinceLastPublished === 0 && daysDiff > 0)) {\n          daysSinceLastPublished = daysDiff;\n        }\n      }\n    });\n  }\n\n  //console.log(\"IF all true -> Show NPS: \", `daysSinceFirstPublished(${daysSinceFirstPublished}) >= 25 && daysSinceLastPublished(${daysSinceLastPublished}) <= 60 && (!surveyLastViewed(${surveyLastViewed}) || daysSinceSurveyLastViewed(${daysSinceSurveyLastViewed}) > 90)`);\n  if (daysSinceFirstPublished >= 25 && daysSinceLastPublished <= 60 && (!surveyLastViewed || daysSinceSurveyLastViewed > 90) && !document.referrer.includes('feedback-nps')) {\n    location.href = \"/feedback-nps\";\n  }\n}\n//Disable webflow form submissions\nWebflow.push(function () {\n  $('form').submit(function () {\n    return false;\n  });\n});\n\nasync function fetchAndShowRecommendedItems(items) {\n  try {\n    const ids = [];\n    items.forEach(doc => ids.push(doc.id));\n    const response = await firebase.app().functions(\"europe-west1\").httpsCallable('itemRecommendations')({ items: ids.slice(0, 10), number: 20 })\n    if (!response.data.length) {\n      return;\n    }\n    document.getElementById('recommendedItemsDiv').style.display = 'block';\n    const itemList = document.getElementById('recommendedItemsList');\n    itemList.innerHTML = \"\";\n    let itemSizes = [];\n    let idx = 0;\n    for (const item of response.data) {\n      if (!itemSizes.includes(item.maiSize)) { itemSizes.push(item.maiSize) }\n      const image = item.images.modelImageLarge || item.images.modelImage || item.images.enhancedFrontImageLarge || item.images.enhancedFrontImage;\n      const itemCardHTML = `<div class=\"div-block-14-big\"><a id=\"recommendedItemCard${idx++}\" href=\"${item.platformListings.maiShop.url}\"/><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\">\n                        <div class=\"img-container\" style=\"background-image: url('${image}')\"></div></div></div>\n                        <div class=\"recently-added-text-block\">\n                            <div class=\"recent-added-items-subheader\">${item.cleanedBrand}</div>\n                            <div class=\"recent-added-items-subheader-category\">${item.category}, ${item.maiSize}</div>\n                            <div class=\"recently-added-price\">${item.platformListings.maiShop.currentPrice} kr</div>\n                            <div class=\"recently-added-brands-link-text\">Mai Shop</div>\n                        </div><a/></div>`;\n      itemList.innerHTML += itemCardHTML;\n    }\n    itemList.querySelectorAll(\"a\").forEach(link => link.addEventListener('click', linkClickTracker) );\n\n    document.getElementById('goToMaiShopLinkRecommendations').setAttribute(\"href\",\n      `https://shop.maiapp.se/collections/damklader/${response.data[0].sex || 'Woman'}?sort_by=created-descending&filter.p.m.global.size=${itemSizes.join('&filter.p.m.global.size=')}`);\n    const observer = new IntersectionObserver((entries, opts) => {\n      const rect = itemList.getBoundingClientRect();\n      const isVisible = rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)\n      if (isVisible) {\n        console.log(\"Recommendations viewed\");\n        analytics.track(\"Element Viewed\", {elementID: \"recommendedItems\"});\n        observer.disconnect();\n      }\n    }, { threshold: 1, root: null })\n    observer.observe(itemList);\n  } catch (e) {\n    errorHandler.report(e);\n    console.log('error', e)\n  }\n}\n\n\nexport function closePickupToast() {\n  document.getElementById('triggerPickupToastClose').click();\n}\n\nfunction closeFeedbackForm() {\n  document.getElementById('triggerFeedbackFormClose').click();\n  setTimeout(function () {\n    location.reload();\n  }, 400);\n}\n\nasync function bookPickup() {\n  let pickupDate = \"\";\n  var pickupRadioButtons = document.getElementsByName(\"Pickup\");\n  for (var x = 0; x < pickupRadioButtons.length; x++) {\n    if (pickupRadioButtons[x].checked) {\n      pickupDate = pickupRadioButtons[x].value; // yyyy--mm-dd\n    }\n  }\n\n  db.collection('items').doc(pickupFlowItemId).update({\n    pickupDate,\n    shippingMethod: 'Pickup'\n  }).then((docRef) => {\n    console.log(`pickupDate '${pickupDate}' and shippingMethod 'Pickup' is now updated on Firestore item`);\n    closePickupToast();\n    document.getElementById('triggerFeedbackFormOpen').click();\n  });\n}\n\nasync function setHappinessRate(value) {\n  const itemRef = db.collection('items').doc(pickupFlowItemId);\n  const res = await itemRef.update({\n    happinessRate: value\n  }).then(function () {\n    console.log(`happinessRate is now set on Firestore item`);\n    happinessQuestionDiv.style.display = 'none';\n    openQuestionDiv.style.display = 'block';\n    feedbackSubmitButton.style.display = 'block';\n  });\n}\n\nasync function storeFeedback() {\n  const value = feedbackTextField.value;\n  const itemRef = db.collection('items').doc(pickupFlowItemId);\n  const res = await itemRef.update({\n    feedbackText: value\n  }).then(function () {\n    console.log(`feedbackText is now set on Firestore item`);\n    closeFeedbackForm();\n  });\n}\nlet loadHandlerHasRun = false;\n\nfunction onLoadHandler() {\n  console.log('onLoadHandler running');\n  menuSignoutButton.addEventListener('click', signOut);\n  bookPickupForm.addEventListener(\"submit\", bookPickup);\n  closePickupToastIcon.addEventListener(\"click\", closePickupToast);\n  closeFeedbackFormButton.addEventListener(\"click\", closeFeedbackForm);\n  happySmileyButton.addEventListener(\"click\", function () { setHappinessRate(3); }, false);\n  neutralSmileyButton.addEventListener(\"click\", function () { setHappinessRate(2); }, false);\n  angrySmileyButton.addEventListener(\"click\", function () { setHappinessRate(1); }, false);\n  feedbackSubmitButton.addEventListener(\"click\", storeFeedback);\n  saveReferralCodeButton.addEventListener(\"click\", async function () {\n    saveRefCodeLoadingDiv.style.display = 'flex';\n    saveReferralCodeButton.style.display = 'none';\n    const inputCode = referralCodeInput.value;\n    await connectReferralUsers(inputCode);\n  });\n\n  closeMeasurementsToastButton.addEventListener(\"click\", function () { triggerMeasurementsToastClose.click(); });\n  closeNewPriceToastButton.addEventListener(\"click\", function () { triggerNewPriceToastClose.click(); });\n  closeInviteToastButton.addEventListener(\"click\", function () { triggerInviteToastClose.click(); });\n  closeServicePointToastButton.addEventListener(\"click\", function () { triggerServicePointToastClose.click(); });\n  confirmServicePointButton.addEventListener(\"click\", function () {\n    document.getElementById('feedbackFormTitle').innerHTML = '';\n    triggerServicePointToastClose.click();\n    triggerFeedbackFormOpen.click();\n  });\n  closeLongerPeriodToastButton.addEventListener(\"click\", function () { triggerLongerPeriodToastClose.click(); });\n  shareCodeButton.addEventListener('click', shareCode);\n  sharePersonalLinkButton.addEventListener('click', shareCode);\n  loadHandlerHasRun = true;\n  menuButton.addEventListener(\"click\", function () {\n    Intercom('update', {\n      \"hide_default_launcher\": true\n    });\n  });\n  closeMenuButton.addEventListener(\"click\", function () {\n    Intercom('update', {\n      \"hide_default_launcher\": false\n    });\n  });\n  document.getElementById('christmasHolidayDiv').onclick = () => Intercom('showNewMessage', 'Nr reser du ivg, och nr r du tillbaka?\\n\\n');\n}\nwindow.addEventListener('load', onLoadHandler);\nconsole.log(`document.readyState ${document.readyState}`);\nif (document.readyState === \"complete\" && !loadHandlerHasRun) {\n  console.log(\"Running it since event listener did not\")\n  onLoadHandler();\n}\n\nwindow.addEventListener('pageshow', (event) => {\n  if (event.persisted) {\n    console.log('This page was restored from the bfcache.');\n    if (menu.style.display !== 'none') { menu.style.display = 'none' }\n  } else {\n    console.log('This page was loaded normally.');\n  }\n});\n\nwindow.intercomSettings = {\n  app_id: \"klyy0le5\"\n};\n(function () { var w = window; var ic = w.Intercom; if (typeof ic === \"function\") { ic('reattach_activator'); ic('update', w.intercomSettings); } else { var d = document; var i = function () { i.c(arguments); }; i.q = []; i.c = function (args) { i.q.push(args); }; w.Intercom = i; var l = function () { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/klyy0le5'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }; if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })();\n","export function signOut() {\n    firebase.auth().signOut().then(() => {\n        console.log('User signed out');\n        authUser.current = null;\n        user.current = null;\n        userId = null;\n        location.href = '/';\n        deleteCookie('maiAuth');\n        sessionStorage.removeItem('sessionUser');\n    }).catch((error) => {\n        errorHandler.report(error);\n        console.log(error);\n    });\n}\n\nexport function setFormAddressFields(user) {\n    document.getElementById(\"addressFirstName\").value = user.addressFirstName || '';\n    document.getElementById(\"addressFirstName\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressLastName\").value = user.addressLastName || '';\n    document.getElementById(\"addressLastName\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressStreetAddress\").value = user.addressStreetAddress || '';\n    document.getElementById(\"addressStreetAddress\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressCO\").value = user.addressCO || '';\n    document.getElementById(\"addressCO\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressPostalCode\").value = user.addressPostalCode || '';\n    document.getElementById(\"addressPostalCode\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressCity\").value = user.addressCity || '';\n    document.getElementById(\"addressCity\").dispatchEvent(new Event('input'));\n    document.getElementById(\"addressDoorCode\").value = user.addressDoorCode || '';\n    document.getElementById(\"addressDoorCode\").dispatchEvent(new Event('input'));\n}\nexport function getFormAddressFields() {\n    let addressFirstName = document.getElementById(\"addressFirstName\").value;\n    let addressLastName = document.getElementById(\"addressLastName\").value;\n    let addressStreetAddress = document.getElementById(\"addressStreetAddress\").value;\n    let addressCO = document.getElementById(\"addressCO\").value;\n    let addressPostalCode = document.getElementById(\"addressPostalCode\").value;\n    let addressCity = document.getElementById(\"addressCity\").value;\n    let addressDoorCode = document.getElementById(\"addressDoorCode\").value;\n\n    addressFirstName = addressFirstName ? addressFirstName.trim().charAt(0).toUpperCase() + addressFirstName.trim().slice(1) : \"\";\n    addressLastName = addressLastName ? addressLastName.trim().charAt(0).toUpperCase() + addressLastName.trim().slice(1) : \"\";\n    addressStreetAddress = addressStreetAddress ? addressStreetAddress.trim().charAt(0).toUpperCase() + addressStreetAddress.trim().slice(1) : \"\";\n    addressCO = addressCO ? addressCO.trim() : \"\";\n    addressPostalCode = addressPostalCode ? addressPostalCode.trim().replace(/\\D/g, '') : \"\";\n    addressCity = addressCity ? addressCity.trim().charAt(0).toUpperCase() + addressCity.trim().slice(1) : \"\";\n    addressDoorCode = addressDoorCode ? addressDoorCode.trim() : \"\";\n    return { addressFirstName, addressLastName, addressStreetAddress, addressCO, addressPostalCode, addressCity, addressDoorCode };\n}\n\n\n// Validate Swedish Social Security Number (personnummer) using checksum\n//   Note: this is somewhat simplified because it does not take into account\n//   that the date of the number is valid (e.g. \"000000-0000\" does return as true)\nexport function isValidSwedishSsn(ssn) {\n    ssn = ssn\n        .replace(/\\D/g, \"\")     // strip out all but digits\n        .split(\"\")              // convert string to array\n        .reverse()              // reverse order for Luhn\n        .slice(0, 10);          // keep only 10 digits (i.e. 1977 becomes 77)\n\n    // verify we got 10 digits, otherwise it is invalid\n    if (ssn.length !== 10) {\n        return false;\n    }\n    const sum = ssn.map((n) => Number(n))\n        .reduce((previous, current, index) => {\n            if (index % 2) current *= 2;\n            if (current > 9) current -= 9;\n            return previous + current;\n        });\n    return 0 === sum % 10;\n}\n\n\nexport function formatPersonalId(personalIdInput) {\n    let personalId = personalIdInput.replace('-', '');\n    if (personalId.length !== 12 && (personalId.substring(0, 2) !== '19' || personalId.substring(0, 2) !== '20')) {\n        if (Number(personalId.substring(0, 2)) <= 99 && Number(personalId.substring(0, 2)) > 25) {\n            personalId = \"19\" + personalId;\n        } else {\n            personalId = \"20\" + personalId;\n        }\n    }\n    if (personalId.length === 12) {\n        return personalId;\n    }\n    return null;\n}\n\nexport function itemCoverImage(item) {\n    const images = item.images;\n    if (images.modelImage) {\n        return images.modelImageSmall || images.modelImage\n    }\n    if (images.coverImage) {\n        return images.coverImageSmall || images.coverImage\n    }\n    if (images.enhancedFrontImage) {\n        return images.enhancedFrontImageSmall || images.enhancedFrontImage\n    }\n    return images.frontImageSmall || images.frontImage\n}\n\n\nexport function shareCode() {\n    const code = user.current.referralData.referralCode;\n    //const text = `Hej, jag vill tipsa om Mai fr att rensa ur garderoben. Mai r en tjnst som hjlper dig att slja dina klder p ett enkelt stt. Man tar bara bilder p sina plagg, sedan skter Mai resten - ssom vrdering, annonsering p flera plattformar, kontakt med kpare och frakt nr det blir slt. Man fr sjlv behlla 80% av vinsten, och blir det inte slt kostar det ingenting.\\n\\nOm du registrerar dig med min kod (flj lnken) och provar slja ett plagg inom 7 dagar fr du behlla 100% av vinsten fr det frsta plagget (istllet fr 80%). Min kod: ${code}\\n\\nLs mer och anvnd min kod hr:`;\n    const text = `Hej! Flj min personliga lnk s sljer Mai ditt frsta plagg kostnadsfritt! Mai skter frsljningen av dina klder, inklusive vrdering, lgger ut p flera plattformar samtidigt, har kontakten med kpare och ordnar med frakt nr det blir slt. Man fr sjlv behlla 80% av vinsten, och blir det inte slt kostar det ingenting.\\n\\nOm du registrerar dig med min kod (flj lnken) och provar slja ett plagg inom 7 dagar fr du behlla 100% av vinsten fr det frsta plagget (istllet fr 80%). Min kod: ${code}`;\n    if (navigator.share) {\n        navigator.share({\n            text: text,\n            url: `https://maiapp.se/?invite=${code}`\n        }).then(() => { console.log('Thanks for sharing!'); }).catch((e) => {\n            console.error(e);\n            errorHandler.report(e);\n        });\n    } else {\n        console.log(\"Browser doesn't support navigator.share => Copy to clipboard!\");\n        const shareText = text + \"\\n\" + `https://maiapp.se/?invite=${code}`;\n        navigator.clipboard.writeText(shareText);\n        linkCopiedBanner.style.display = 'flex';\n        setTimeout(function () { linkCopiedBanner.style.display = 'none'; }, 1500);\n    }\n}\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import {itemCoverImage} from \"./general\";\n\nasync function openMeasurementsToast(itemId, description) {\n    measurementDescriptionText.innerHTML = description;\n    measurementsSubmitButton.addEventListener('click', async function () {\n        const input = measurementsInput.value;\n        if (input.length > 0 && input !== \" \") {\n            await db.collection('items').doc(itemId).update({\n                measurements: input,\n                \"infoRequests.measurements.status\": \"Resolved\"\n            });\n        }\n        triggerMeasurementsToastClose.click();\n        setTimeout(function () { location.reload(); }, 400);\n    });\n    triggerMeasurementsToastOpen.click();\n}\n\nasync function openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore) {\n    if(!itemId){return}\n    console.log('is this happening?');\n    // If user is qualified to get the discount question -> Show it to the user\n    const price = currentMinPrice;\n    const priceWithDiscount30 = Math.ceil((price * 0.7) / 10) * 10;\n    const priceWithDiscount20 = Math.ceil((price * 0.8) / 10) * 10;\n    priceAfterDiscount30.innerHTML = `(Priset blir ${priceWithDiscount30} kr)`;\n    priceAfterDiscount20.innerHTML = `(Priset blir ${priceWithDiscount20} kr)`;\n    priceNoDiscount.innerHTML = `(${price} kr)`;\n    if (price >= 140 && !deniedBefore) {\n        longerPeriodDescriptionText.innerHTML = `Sljperioden fr ditt ${brand}-plagg har ntt sitt slut. Vlj om du vill frlnga sljperioden med ytterligare 30 dagar och om du vill snka priset fr att ka chansen att f det slt.`;\n        discountFormDiv.style.display = 'block';\n    } else {\n        longerPeriodDescriptionText.innerHTML = `Sljperioden fr ditt ${brand}-plagg har ntt sitt slut. Vill du frlnga sljperioden med ytterligare 30 dagar eller avsluta frsljningen?`;\n        discountFormDiv.style.display = 'none';\n    }\n\n    // Accept longer selling window and store chosen discount\n    longerPeriodAcceptButton.addEventListener('click', async function () {\n        const today = new Date();\n        const todayDate = today.toISOString().split('T')[0];\n        let newPrice = price;\n        let discount = 0\n        var discountRadioButtons = document.getElementsByName(\"Discount\");\n        for (var x = 0; x < discountRadioButtons.length; x++) {\n            if (discountRadioButtons[x].checked) {\n                const input = discountRadioButtons[x].value;\n                if (input === '30') {\n                    newPrice = priceWithDiscount30;\n                    discount = 30;\n                }\n                if (input === '20') {\n                    newPrice = priceWithDiscount20;\n                    discount = 20;\n                }\n            }\n        }\n        await db.collection('items').doc(itemId).update({\n            longerPeriodAcceptedDate: todayDate,\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Accepted\",\n            longerPeriodAcceptedDiscount: discount,\n            minPriceEstimate: newPrice\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function () { location.reload(); }, 300);\n    });\n    // Decline longer selling period and quit sales\n    longerPeriodDenyButton.addEventListener('click', async function () {\n        await db.collection('items').doc(itemId).update({\n            \"infoRequests.longerPeriod.status\": \"Resolved\",\n            \"infoRequests.longerPeriod.response\": \"Denied\",\n            \"status\": \"Unsold\" // This field is normally mastered by AT - I do this for the user to see the effect immediately (the card is removed)\n        });\n        triggerLongerPeriodToastClose.click();\n        setTimeout(function () { location.reload(); }, 300);\n    });\n    triggerLongerPeriodToastOpen.click();\n}\n\nasync function storePriceResponse(itemId, max, min, response, status) {\n    console.log(\"storePriceResponse\", itemId, max, min, response);\n    // Accept price\n    if (response === \"Accepted\") {\n        await db.collection('items').doc(itemId).update({\n            \"infoRequests.price.status\": \"Resolved\",\n            \"infoRequests.price.response\": \"Accepted\",\n            \"maxPriceEstimate\": max,\n            \"minPriceEstimate\": min\n        }).then(function () {\n            triggerNewPriceToastClose.click();\n            setTimeout(function () { location.reload(); }, 300);\n        });\n    }\n    // Deny price\n    if (response === \"Denied\") {\n        let fields = {\n            \"infoRequests.price.status\": \"Resolved\",\n            \"infoRequests.price.response\": \"Denied\"\n        };\n        if (status === \"New\") {\n            fields[\"archived\"] = true;\n            fields[\"willNotSell\"] = true;\n        }\n        await db.collection('items').doc(itemId).update(fields).then(function () {\n            triggerNewPriceToastClose.click();\n            setTimeout(function () { location.reload(); }, 300);\n        });\n    }\n}\n\nasync function openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMax, currentMin) {\n    console.log(\"openNewPriceToast\", itemId, status, max, min, brand, description, category, type, currentMax, currentMin);\n    previousMinPrice.style.display = 'none';\n    previousMaxPrice.style.display = 'none';\n    maxPriceDiv.style.display = 'block';\n    minPriceDiv.style.display = 'block';\n\n    // Set content of toast\n    newPriceToastTitle.innerHTML = \"Nytt lgsta pris\";\n    newPriceHeading.innerHTML = `${brand}-plagg`;\n    const c = category.toLowerCase();\n    if (c && c !== \"null\") { newPriceHeading.innerHTML = `${brand}-${c}`; }\n    maxPrice.innerHTML = max;\n    minPrice.innerHTML = min;\n    if (currentMax && currentMax !== 'null' && currentMax !== '' && currentMax !== 'undefined' && max !== currentMax){\n        previousMaxPrice.innerHTML = currentMax;\n        previousMaxPrice.style.display = 'block';\n    }\n    if (currentMin && currentMin !== 'null' && currentMin !== '' && currentMin !== 'undefined' && min !== currentMin){\n        previousMinPrice.innerHTML = currentMin;\n        previousMinPrice.style.display = 'block';\n    }\n    acceptNewPriceButton.innerHTML = \"Slj med nytt pris\";\n    denyNewPriceButton.innerHTML = \"Snk ej\";\n\n    if (status === \"New\" && type === 'Valuation') {\n        newPriceToastTitle.innerHTML = \"Vrdering\";\n        acceptNewPriceButton.innerHTML = \"Slj till vrdering\";\n        denyNewPriceButton.innerHTML = \"Avbj och avsluta\";\n    }\n    if (type === 'Adjusted ML Valuation'){\n        newPriceToastTitle.innerHTML = \"Nytt prisintervall\";\n\n    }\n    if (type !== 'Valuation' && type !== 'Adjusted ML Valuation'){ //Custom lowered price and automatic price dump cases\n        minPrice.innerHTML = `${min} kr`;\n        maxPriceDiv.style.display = 'none';\n    }\n    if (description && description !== 'undefined' && description !== '' && description !== 'null') {\n        newPriceText.innerHTML = description;\n        descriptionDiv.style.display = 'block';\n    }\n    acceptNewPriceButton.addEventListener('click', () => {\n      storePriceResponse(itemId, max, min, 'Accepted', status);\n    })\n    denyNewPriceButton.addEventListener('click', () => {\n      storePriceResponse(itemId, max, min, 'Denied', status);\n    })\n\n    // Open toast\n    triggerNewPriceToastOpen.click();\n}\n\nexport function loadInfoRequests(userId) {\n    const measurementsClone = document.getElementById('infoRequestMeasurementsTemplate').cloneNode(true);\n    const longerPeriodClone = document.getElementById('infoRequestLongerPeriodTemplate').cloneNode(true);\n    const updateImagesClone = document.getElementById('infoRequestImagesTemplate').cloneNode(true);\n    const valuationClone = document.getElementById('infoRequestValuationTemplate').cloneNode(true);\n    const infoRequestsList = document.getElementById('infoRequestsList')\n    infoRequestsList.replaceChildren();\n    db.collection(\"items\").where(\"user\", \"==\", userId).get().then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n            const itemId = doc.id;\n            const item = doc.data();\n            const infoRequests = item.infoRequests;\n            const status = item.status;\n            const brand = item.brand.replace(/'/g, '');\n            const currentMinPrice = item.minPriceEstimate;\n            const currentMaxPrice = item.maxPriceEstimate;\n            const deniedBefore = item?.infoRequests?.price?.response === \"Denied\" ? true : false;\n            const archived = item.archived;\n            const category = item.category;\n            const frontImageUrl = itemCoverImage(item);\n            if (archived == undefined && status !== \"Unsold\" && status !== \"Sold\" && infoRequests) {\n                displayRequests();\n            }\n\n            function displayRequests() {\n                for (const req in infoRequests) {\n                    if (infoRequests[req]?.status === \"Active\") {\n                        let description = infoRequests[req].description;\n                        \n                        if (description) { description = description.replace(/'/g, ''); }\n                        // PRICE REQUEST\n                        if (req === \"price\") {\n                            const type = infoRequests[req].type;\n                            const newRequest = valuationClone.cloneNode(true);\n                            newRequest.id = `infoRequestPrice-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a .pricebuttontext').innerText = 'Se prisfrslag';\n                            newRequest.querySelector('.text-block-72').innerText = \"Vill du snka priset och f det slt?\";\n                            infoRequestsList.appendChild(newRequest);\n                            if (status === \"New\" && type !== 'Adjusted ML Valuation') {\n                                newRequest.querySelector('a .pricebuttontext').innerText = 'Se vrdering';\n                                newRequest.querySelector('.text-block-72').innerText = 'Vill du slja till vr vrdering?'\n                                newRequest.querySelector('a').href = `/item-valuation?id=${itemId}`;\n                            } else {\n                                setTimeout(() => {\n                                    const max = infoRequests[req].maxPrice;\n                                    const min = infoRequests[req].minPrice;\n                                    document.querySelector(`#infoRequestPrice-${itemId} a`).addEventListener('click', async () => {\n                                        await openNewPriceToast(itemId, status, max, min, brand, description, category, type, currentMaxPrice, currentMinPrice);\n                                    })\n                                }, 0);\n                            }\n                        }\n                        // MEASUREMENTS REQUEST\n                        if (req === \"measurements\") {\n                            const newRequest = measurementsClone.cloneNode(true);\n                            newRequest.id = `infoRequestMeasurements-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestMeasurements-${itemId} a`).addEventListener('click', async () => {\n                                await openMeasurementsToast(itemId, description);\n                              })\n                            }, 0);\n                        }\n                        // IMAGES REQUEST\n                        if (req === \"images\") {\n                            const newRequest = updateImagesClone.cloneNode(true);\n                            newRequest.id = `infoRequestImages-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            newRequest.querySelector('a').href = `/edit-item?id=${itemId}`;\n                            infoRequestsList.appendChild(newRequest);\n                        }\n                        // LONGER PERIOD REQUEST\n                        if (req === \"longerPeriod\") {\n                            const newRequest = longerPeriodClone.cloneNode(true);\n                            newRequest.id = `infoRequestLongerPeriod-${itemId}`;\n                            newRequest.querySelector('.img-container').style.backgroundImage = `url('${frontImageUrl}')`;\n                            infoRequestsList.appendChild(newRequest);\n                            setTimeout(() => {\n                              document.querySelector(`#infoRequestLongerPeriod-${itemId} a`).addEventListener('click', async () => {\n                                await openLongerPeriodToast(itemId, brand, currentMinPrice, deniedBefore);\n                              })\n                            }, 0);\n                        }\n                        infoRequestsDiv.style.display = \"block\";\n                    }\n                }\n            }\n        });\n    });\n}\n","import {itemCoverImage} from \"./general\";\nimport {closePickupToast} from \"./private\";\n\n/**\n * @param {String} HTML representing a single element.\n * @param {Boolean} flag representing whether or not to trim input whitespace, defaults to true.\n * @return {Element | HTMLCollection | null}\n */\nfunction fromHTML(html, trim = true) {\n  // Process the HTML string.\n  html = trim ? html : html.trim();\n  if (!html) return null;\n\n  // Then set up a new template element.\n  const template = document.createElement('template');\n  template.innerHTML = html;\n  const result = template.content.children;\n\n  // Then return either an HTMLElement or HTMLCollection,\n  // based on whether the input HTML had one or more roots.\n  if (result.length === 1) return result[0];\n  return result;\n}\n\nfunction getQrCodeButton(itemId) {\n  let itemPageUrl = window.location.origin + `/ship-item?id=${itemId}`;\n  const div = `<a id=\"qrCodeButton\" href=\"${itemPageUrl}\" class=\"link-block-39\">\n                            <div class=\"div-block-194\">\n                                            <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63bdeaf1af902f05607f86ef_Group.svg\" class=\"image-43\">\n                                            <div class=\"text-block-113\">Visa QR</div>\n                            </div>\n                    </a>`;\n  return div;\n}\n\nfunction getBarcodeButton(itemId) {\n  let itemPageUrl = window.location.origin + `/ship-item?id=${itemId}`;\n  const div = `<a id=\"barcodeButton\" href=\"${itemPageUrl}\" class=\"link-block-39\">\n                            <div class=\"div-block-194\">\n                                            <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/65418186f29682eaff3f74be_barcode-icon%20(1).svg\" class=\"image-100\">\n                                            <div class=\"text-block-113\">Visa streckkod</div>\n                            </div>\n                    </a>`;\n  return div;\n}\n\nfunction getBookPickupButton(itemId) {\n  const div = `<a id=\"bookPickupButton-${itemId}\" href=\"#\" class=\"link-block-39\">\n                            <div class=\"div-block-194\">\n                                <div class=\"text-block-113\">Boka hmtning</div>\n                            </div>\n                    </a>`;\n  return div;\n}\n\nasync function storeShippingMethod(itemId, method) {\n  console.log(`storeShippingMethod(${itemId}, ${method}) is running`);\n  await db.collection('items').doc(itemId).update({ shippingMethod: method }).then((docRef) => {\n    console.log(`Shipping method '${method}' stored on item with ID: `, itemId);\n    window.pickupFlowItemId = itemId; // Legacy from before. Bad way of doing it. Should clean up 'pickupFlowItemId' at some point.\n    if (method == \"Service point\") {\n      document.getElementById('feedbackFormTitle').innerHTML = 'Tack, d vet vi att paketet snart lmnas till ett ombud.';\n      document.getElementById('triggerShippingToastClose').click();\n    }\n    closePickupToast();\n    document.getElementById('triggerFeedbackFormOpen').click();\n  });\n}\n\nfunction openShippingToast(itemId, soldDate) {\n  console.log(`openShippingToast(${itemId}, ${soldDate})`);\n  window.pickupFlowItemId = itemId;\n  setTimeout(() => {\n    document.getElementById('servicePointButton').addEventListener('click', async () => {\n      await storeShippingMethod(itemId, 'Service point');\n    });\n    document.getElementById('bookPickupButton').addEventListener('click', () => {\n      openPickupToast(itemId, soldDate);\n    });\n  }, 0);\n  triggerShippingToastOpen.click();\n}\n\nfunction openServicePointToast(itemId, soldDate) {\n  console.log(\"openServicePointToast\");\n  changeToPickupButton.addEventListener('click', () => {\n    openPickupToast(itemId, soldDate);\n  });\n  triggerServicePointToastOpen.click();\n}\n\nfunction openPickupToast(itemId, soldDate, servicePointButtonDisplay = 'none') {\n  console.log(`openPickupToast(${itemId}, ${soldDate}) is running`);\n  triggerShippingToastClose.click();\n  triggerServicePointToastClose.click();\n  changeToServicePointButton.addEventListener('click', async () => {\n    await storeShippingMethod(itemId, 'Service point');\n  });\n  changeToServicePointButton.style.display = servicePointButtonDisplay;\n  setDatesOfPickupToast(soldDate);\n  window.pickupFlowItemId = itemId;\n  triggerPickupAnimation.click();\n}\n\nfunction setDatesOfPickupToast(soldDate) {\n  console.log(`setDatesOfPickupToast(${soldDate}) is running`);\n  // Hide all options first, to later determine which ones to show\n  radioFieldOne.style.display = 'none';\n  radioFieldTwo.style.display = 'none';\n  radioFieldThree.style.display = 'none';\n  radioFieldFour.style.display = 'none';\n\n  // Create the 4 first possible pickup dates, starting 4 b-days after soldDate\n  var firstDate = new Date(soldDate);\n  firstDate.setTime(firstDate.getTime() + (1 * 60 * 60 * 1000)); // With soldDate on format \"yyyy-m-dd\" (note one m) the time is set to 00 which resulted in bug, had to add 1 hour, or fix the format.\n  firstDate.setDate(firstDate.getDate() + 4);\n  if (firstDate.getDay() == 6 || firstDate.getDay() == 0 || firstDate.getDay() == 1 || firstDate.getDay() == 2) {\n    firstDate.setDate(firstDate.getDate() + 2); // If sat, sun, mon, tue => compensate for weekend with 2 days\n  } else if (firstDate.getDay() == 3) {\n    firstDate.setDate(firstDate.getDate() + 1); // If wednesday, add 1 days to compensate for sunday\n  }\n\n  var secondDate = new Date(firstDate);\n  secondDate.setDate(secondDate.getDate() + 1);\n  if (secondDate.getDay() == 6) {\n    secondDate.setDate(secondDate.getDate() + 2);\n  }\n\n  var thirdDate = new Date(secondDate);\n  thirdDate.setDate(thirdDate.getDate() + 1);\n  if (thirdDate.getDay() == 6) {\n    thirdDate.setDate(thirdDate.getDate() + 2);\n  }\n\n  var forthDate = new Date(thirdDate);\n  forthDate.setDate(forthDate.getDate() + 1);\n  if (forthDate.getDay() == 6) {\n    forthDate.setDate(forthDate.getDate() + 2);\n  }\n\n  var days = ['Sndag', 'Mndag', 'Tisdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lrdag'];\n  var months = ['jan', 'feb', 'mar', 'apr', 'maj', 'jun', 'jul', 'aug', 'sep', 'okt', 'nov', 'dec'];\n\n  // Change value of radio buttons and display to user\n  let today = new Date();\n  let optionsDisplayed = 0;\n  console.log(\"Today\", today);\n\n  console.log(\"firstDate > today\", (firstDate > today));\n  console.log(\"secondDate > today\", (secondDate > today));\n  console.log(\"thirdDate > today\", (thirdDate > today));\n  console.log(\"forthDate > today\", (forthDate > today));\n\n  const pickupDateOne = document.getElementById('pickupDateOne');\n  const pickupDateTwo = document.getElementById('pickupDateTwo');\n  const pickupDateThree = document.getElementById('pickupDateThree');\n  const pickupDateFour = document.getElementById('pickupDateFour');\n\n  if (firstDate > today) {\n    $('#radioButtonOne').val(firstDate.toISOString().split('T')[0]); //yyyy-mm-dd\n    pickupDateOne.innerHTML = days[firstDate.getDay()] + \", \" + firstDate.getDate() + \" \" + months[firstDate.getMonth()] + \", kl 9-16\";\n    radioFieldOne.style.display = 'flex';\n    optionsDisplayed++;\n  }\n  if (secondDate > today) {\n    $('#radioButtonTwo').val(secondDate.toISOString().split('T')[0]);\n    pickupDateTwo.innerHTML = days[secondDate.getDay()] + \", \" + secondDate.getDate() + \" \" + months[secondDate.getMonth()] + \", kl 9-16\";\n    radioFieldTwo.style.display = 'flex';\n    optionsDisplayed++;\n  }\n  if (thirdDate > today) {\n    $('#radioButtonThree').val(thirdDate.toISOString().split('T')[0]);\n    pickupDateThree.innerHTML = days[thirdDate.getDay()] + \", \" + thirdDate.getDate() + \" \" + months[thirdDate.getMonth()] + \", kl 9-16\";\n    radioFieldThree.style.display = 'flex';\n    optionsDisplayed++;\n  }\n  if (forthDate > today) {\n    $('#radioButtonFour').val(forthDate.toISOString().split('T')[0]);\n    pickupDateFour.innerHTML = days[forthDate.getDay()] + \", \" + forthDate.getDate() + \" \" + months[forthDate.getMonth()] + \", kl 9-16\";\n    radioFieldFour.style.display = 'flex';\n    optionsDisplayed++;\n  }\n\n  // If less than two options displayed, add at least two options\n  if (optionsDisplayed < 2) {\n    radioFieldOne.style.display = 'none';\n    radioFieldTwo.style.display = 'none';\n    radioFieldThree.style.display = 'none';\n    radioFieldFour.style.display = 'none';\n\n    var dayOne = new Date();\n    dayOne.setDate(today.getDate() + 1);\n    if (dayOne.getDay() == 0) {\n      dayOne.setDate(dayOne.getDate() + 1);\n    } else if (dayOne.getDay() == 6) {\n      dayOne.setDate(dayOne.getDate() + 2);\n    }\n    var dayTwo = new Date(dayOne);\n    dayTwo.setDate(dayTwo.getDate() + 1);\n    if (dayTwo.getDay() == 6) {\n      dayTwo.setDate(dayTwo.getDate() + 2);\n    }\n    console.log(\"dayOne: \", dayOne);\n    console.log(\"dayTwo: \", dayTwo);\n    // Show tomorrow as an option\n    $('#radioButtonOne').val(dayOne.toISOString().split('T')[0]);\n    pickupDateOne.innerHTML = days[dayOne.getDay()] + \", \" + dayOne.getDate() + \" \" + months[dayOne.getMonth()] + \", kl 9-16\";\n    radioFieldOne.style.display = 'flex';\n\n    // Show day after tomorrow as an option\n    $('#radioButtonTwo').val(dayTwo.toISOString().split('T')[0]);\n    pickupDateTwo.innerHTML = days[dayTwo.getDay()] + \", \" + dayTwo.getDate() + \" \" + months[dayTwo.getMonth()] + \", kl 9-16\";\n    radioFieldTwo.style.display = 'flex';\n  }\n}\n\nfunction bagReceivedAction(checkbox, itemId, soldDate, shippingMethod) {\n  if (checkbox.checked) {\n    db.collection('items').doc(itemId).update({ bagReceived: true }).then((docRef) => {\n      console.log(`Stored in DB that bag is received for item with ID: `, itemId);\n    });\n    if (shippingMethod === 'Pickup') {\n      openPickupToast(itemId, soldDate, 'flex');\n    } else if (shippingMethod === 'Service point') {\n      openServicePointToast(itemId, soldDate);\n    } else {\n      openShippingToast(itemId, soldDate);\n    }\n  } else {\n    db.collection('items').doc(itemId).update({ bagReceived: false }).then((docRef) => {\n      console.log(`Stored in DB that bag is NOT received for item with ID: `, itemId);\n    });\n  }\n}\n\nfunction getBagReceivedCheckbox(itemId, soldDate, shippingMethod) {\n  const div = `<div class=\"w-form\">\n            <form method=\"get\" name=\"wf-form-\" id=\"bagReceivedForm\">\n                <label class=\"w-checkbox checkbox-field-3\">\n                    <div class=\"w-checkbox-input w-checkbox-input--inputType-custom checkbox-2\"></div>\n                    <input type=\"checkbox\" id=\"bagReceivedCheckbox-${itemId}\" style=\"opacity:0;position:absolute;z-index:-1\">\n                    <span class=\"checkbox-label-3 w-form-label\">Etiketten har kommit</span>\n                </label>\n            </form>\n        </div>`;\n  return div;\n}\n\nfunction getShippingInfoDiv(itemId, method, soldDate, pickupDate, bagReceived, shipper) {\n  let shippingInfo = ``;\n  const infoIcon = !bagReceived || (bagReceived && method == \"Pickup\" && !pickupDate) ? `<img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63be70f55a4305a398cf918e_info-icon.svg\" class=\"image-44\">` : '';\n  const shipItemPageUrl = window.location.origin + `/ship-item?id=${itemId}`;\n\n  if (method == \"Service point\") {\n    let shipperIcon = '6297d3d527db5dd4cf02e924/6399ac2a3505ee6071fbc18a_Vector%20(1).svg';\n    if (shipper === 'postnord'){\n      shipperIcon = '6297d3d527db5dd4cf02e924/655d182c37fc30df71b078cd_postnord-square-icon%20(1).svg';\n    }\n    if (shipper === 'dhl'){\n      shipperIcon = '6297d3d527db5dd4cf02e924/655d1830f259c0bc084c2937_dhl-square-icon%20(1).svg';\n    }\n    shippingInfo += `\n                        <img src=\"https://global-uploads.webflow.com/${shipperIcon}\" class=\"shipper-icon\">\n                        <div class=\"next-step-text-small\">Lmnas till ombud</div>\n                        ${infoIcon}\n                    `;\n  } else if (method == \"Pickup\") {\n    if (pickupDate) {\n      var date = new Date(pickupDate);\n      var days = ['Sn', 'Mn', 'Tis', 'Ons', 'Tors', 'Fre', 'Lr'];\n      var months = ['jan', 'feb', 'mar', 'apr', 'maj', 'jun', 'jul', 'aug', 'sep', 'okt', 'nov', 'dec'];\n      var dateNumber = date.getDate();\n      var monthName = months[date.getMonth()];\n      var dayName = days[date.getDay()];\n      var pickupTimeInfoText = dayName + \", \" + dateNumber + \" \" + monthName + \", kl 9-16\";\n      shippingInfo += `\n                                <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg\" class=\"image-45\">\n                                <div class=\"next-step-text-small\">${pickupTimeInfoText}</div>`;\n    } else {\n      shippingInfo += `\n                            <img src=\"https://global-uploads.webflow.com/6297d3d527db5dd4cf02e924/63999dabb3be9ead61bf6488_Vector.svg\" class=\"image-45\">\n                            <div class=\"next-step-text-small\">Upphmtning</div>\n                            ${infoIcon}\n                        `;\n    }\n  }\n\n  // Turn shipping info into a link to ship item page\n  const div = `\n                        <a id=\"shipItemPageLink\" href=\"${shipItemPageUrl}\" class=\"link-block-40\">\n                                ${shippingInfo}\n                        </a>`;\n  return div;\n}\n\nexport async function loadItemCards(items) {\n  itemListSelling.innerHTML = \"\";\n  itemListSoldNotSent.innerHTML = \"\";\n  itemListSold.innerHTML = \"\";\n  var youEarned = 0;\n\n  items.forEach((doc) => {\n    var itemId = doc.id;\n    var createdDate = doc.data().createdAt;\n    var soldDate = doc.data().soldDate;\n    var status = doc.data().status;\n    var shippingStatus = doc.data().shippingStatus;\n    var brand = doc.data().brand;\n    var soldPrice = doc.data().soldPrice;\n    var sellerGets = doc.data().sellerGets ? Math.ceil(doc.data().sellerGets) : doc.data().sellerGets;\n    var buyerFirstName = doc.data().buyer?.FirstName || doc.data().buyerFirstName;\n    var buyerAddressCity = doc.data().buyer?.City || doc.data().buyerAddressCity;\n    var minPriceEstimate = doc.data().minPriceEstimate;\n    var maxPriceEstimate = doc.data().maxPriceEstimate;\n    var infoRequests = doc.data().infoRequests;\n    var pickupDate = doc.data().pickupDate;\n    var shippingMethod = doc.data().shippingMethod;\n    var postnordQrCode = doc.data().postnordQrCode;\n    var dhlBarcode = doc.data().dhlLicensePlateBarcodeSrc;\n    var bagReceived = doc.data().bagReceived;\n    var soldPlatform = doc.data().soldPlatform;\n    var archived = doc.data().archived;\n    var holidayMode = doc.data().holidayMode;\n    var longerPeriodAcceptedDate = doc.data().longerPeriodAcceptedDate;\n    const images = doc.data().images;\n    var frontImageUrl = itemCoverImage(doc.data());\n    let daysLeftText = \"\";\n    let publishedDate = doc.data().publishedDate;\n    if (publishedDate) {\n      publishedDate = new Date(publishedDate);\n      let nowDate = new Date();\n      let timeDifference = nowDate.getTime() - publishedDate.getTime();\n      let daysDifference = timeDifference / (1000 * 3600 * 24);\n      let sellingPeriodLength = longerPeriodAcceptedDate ? 60 : 30;\n      let daysLeft = Math.round(sellingPeriodLength - daysDifference);\n      if (daysLeft <= 0) {\n        daysLeftText = `0 dagar kvar`;\n      } else {\n        daysLeftText = `${daysLeft} dagar kvar`;\n      }\n    }\n    if (archived == undefined && status != \"Unsold\") { displayItemCard(); }\n\n    function displayItemCard() {\n      //Putting the items in the right list\n      let itemPageUrl = window.location.origin + `/item?id=${itemId}`;\n\n      // WE SELL RIGHT NOW\n      if (status != \"Sold\") {\n        let textDiv1 = \"\";\n        let textDiv2 = \"\";\n\n        if (status === \"New\") {\n          if (infoRequests?.price?.status === \"Active\") {\n            textDiv1 = `<div class='text-block-34'>Invntar ditt svar</div>`;\n          } else if (minPriceEstimate && maxPriceEstimate) {\n            textDiv1 = `<div class='text-block-34'>${minPriceEstimate} - ${maxPriceEstimate} kr</div>`;\n            textDiv2 = `<div class='text-block-34'>Frbereds</div>`;\n          } else {\n            textDiv1 = `<div class='text-block-34'>Vrdering pgr</div>`;\n          }\n        }\n        if (status === \"Published\" && minPriceEstimate && maxPriceEstimate) {\n          textDiv1 = `<div class='text-block-34'>${minPriceEstimate} - ${maxPriceEstimate} kr</div>`;\n          const text2 = holidayMode ? \"Pausad\" : daysLeftText;\n          textDiv2 = `<div class='text-block-34'>${text2}</div>`;\n        }\n\n        let sellingItemCardHTML = `<div class=\"div-block-14\"><a id=\"itemLinkBlock\" href=\"${itemPageUrl}\" class=\"link-block-18 w-inline-block\"><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\"><div class=\"img-container\" style=\"background-image: url('${frontImageUrl}');\"></div></div></div><div class=\"text-block-14\">${brand}</div>${textDiv1}${textDiv2}</a></div>`;\n        itemListSelling.innerHTML += sellingItemCardHTML;\n\n        //Display list\n        myItemsDiv.style.display = \"block\";\n        //Hide empty state\n        noItemsDiv.style.display = \"none\";\n        headerSellItemButton.style.display = \"block\";\n        sellButtonText.innerHTML = \"Slj ett plagg\";\n\n        // SOLD - NOT SENT\n      } else if (status == \"Sold\" && shippingStatus != \"Sent\") {\n        // Prepare card\n        var buyerInfoTextHTML = '';\n        if (buyerFirstName != null && buyerAddressCity != null && soldPrice) {\n          const str = `Sld till ${buyerFirstName} i ${buyerAddressCity} fr ${soldPrice} kr`;\n\n          // Split sentence into two equally long rows\n          let output = '';\n          const words = str.split(' ');\n          words.forEach(function (word) {\n            if (output.trim().length > str.length / 2 && !output.includes('<br>')) {\n              output += '<br>';\n            }\n            output += word + ' ';\n          });\n          output = output.trim();\n          buyerInfoTextHTML = `<div class=\"text-block-44\">${output}</div>`;\n        }\n        var userActionDiv = '';\n        var shippingInfoDiv = '';\n        let changeShippingMethod = '';\n        let shipper = '';\n\n        // Add a user action, such as 'show QR button', 'show barcode' or 'bag received checkbox'\n        if (shippingMethod === 'Service point') {\n          if (dhlBarcode) {\n            userActionDiv = getBarcodeButton(itemId);\n            shipper = 'dhl';\n          } else if (soldPlatform === 'Vestiaire Collective' || soldPlatform === 'Grailed') {\n            if (!bagReceived) {\n              userActionDiv = getBagReceivedCheckbox(itemId, soldDate, shippingMethod);\n              setTimeout(() => {\n                document.getElementById(`bagReceivedCheckbox-${itemId}`).addEventListener('click', (event) => {\n                  bagReceivedAction(event.target, itemId, soldDate, shippingMethod);\n                });\n              }, 0)\n            }\n          }\n          else if (postnordQrCode) {\n            shipper = 'postnord';\n            userActionDiv = getQrCodeButton(itemId);\n          }\n        }\n        if (shippingMethod === 'Pickup') {\n          if (!bagReceived) {\n            userActionDiv = getBagReceivedCheckbox(itemId, soldDate, shippingMethod);\n            setTimeout(() => {\n              document.getElementById(`bagReceivedCheckbox-${itemId}`).addEventListener('click', (event) => {\n                bagReceivedAction(event.target, itemId, soldDate, shippingMethod);\n              });\n            }, 0)\n          } else if (bagReceived && !pickupDate) {\n            userActionDiv = getBookPickupButton(itemId);\n            setTimeout(() => {\n              document.getElementById(`bookPickUpButton-${itemId}`).addEventListener('click', () => {\n                openPickupToast(itemId, soldDate);\n              });\n            }, 0)\n          }\n        }\n\n        // Always show the 'shippingInfoDiv' - Styling depending on state is set in the function\n        shippingInfoDiv = getShippingInfoDiv(itemId, shippingMethod, soldDate, pickupDate, bagReceived, shipper);\n\n        // Add \"change shipping method\" when applicable and some spacing\n        if (bagReceived && (shippingMethod === \"Service point\" || (shippingMethod === \"Pickup\" && pickupDate))) {\n          shippingInfoDiv = '<div class=\"spacing-15-px\"></div>' + shippingInfoDiv;\n          changeShippingMethod += `\n          <a id=\"changeShippingMethodA-${itemId}\" href=\"#\">\n              <div id=\"changeShippingMethod-${itemId}\" class=\"change-shipping-method-text\">ndra fraktstt</div>\n          </a>`;\n          setTimeout(() => {\n            document.getElementById(`changeShippingMethodA-${itemId}`).addEventListener('click', () => {\n              openShippingToast(itemId, soldDate);\n            })\n          }, 0)\n        }\n\n        //Create card\n        var soldNotSentCardHTML = ``;\n        soldNotSentCardHTML =\n          `<div class=\"div-block-118\"><div class=\"div-block-45\"><div class=\"div-block-43\"><div class=\"ratio-box _16-9\"><div class=\"content-block with-image\"><a id=\"itemLinkFromSoldNotSentSection\" href=\"${itemPageUrl}\"><div class=\"img-container\" style=\"background-image: url('${frontImageUrl}');\"></div></a></div></div></div><div class=\"div-block-46\"><div class=\"div-block-47\"><div class=\"text-block-43\">Du fr ${sellerGets} kr</div>${buyerInfoTextHTML}\n                      ${userActionDiv}\n                      ${shippingInfoDiv}\n                      ${changeShippingMethod}\n                  </div></div></div></div>`;\n        itemListSoldNotSent.innerHTML += soldNotSentCardHTML;\n\n        // Display list\n        soldNotSentDiv.style.display = \"block\";\n        // Hide empty state\n        noItemsDiv.style.display = \"none\";\n        headerSellItemButton.style.display = \"block\";\n        sellButtonText.innerHTML = \"Slj ett plagg\";\n\n        // SOLD BEFORE\n      } else {\n        var soldItemCardHTML = `<div class=\"div-block-14\"><div class=\"ratio-box _16-9\"><div class=\"conten-block with-image\"><a id=\"itemLinkFromSoldBeforeSection\" href=\"${itemPageUrl}\"><div class=\"img-container\" style=\"background-image: url('${frontImageUrl}');\"></div></a></div></div><div class=\"text-block-14\">${soldPrice} kr</div><div class='text-block-34'>Du fick ${sellerGets} kr</div></div>`;\n        itemListSold.innerHTML += soldItemCardHTML;\n\n        // Display list, hide empty state\n        soldItemsDiv.style.display = \"block\";\n        itemListSoldContainer.style.display = \"block\";\n        sellButtonText.innerHTML = \"Slj ett plagg\";\n        youEarned = youEarned + sellerGets;\n        youEarnedDiv.innerHTML = `Du har tjnat ${Math.round(youEarned).toLocaleString('en-US').replaceAll(',', ' ')} kr`;\n      }\n    }\n  });\n\n  loadingDiv.style.display = \"none\";\n  sectionsDiv.style.display = \"block\";\n  quickInfoDiv.style.display = \"block\";\n}\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","userId","email","phone","parcelHelpers","defineInteropFlag","export","updateIC","closePickupToast","_general","_infoRequestsFunctions","_loadItemCards","em","ph","intercomSettings","app_id","user_id","docRef","db","collection","doc","then","exists","data","city","addressFirstName","fn","ln","addressLastName","addressCity","phoneNumber","fields","mai_user_id","Intercom","console","log","catch","error","errorHandler","report","showOrderBagsSection","maxBags","firebase","app","functions","httpsCallable","maxOrderBags","document","getElementById","style","display","askForAdditionalUserDetails","userID","personalId","shippingStatus","personalIdExists","oneItemNotPaid","oneItemNotSent","pickupShippingMethod","where","orderBy","querySnapshot","forEach","status","payoutStatus","shippingMethod","preferences","undefined","location","href","privateMain","itemListSoldByOthers","identifier","user","current","authUser","uid","sessionStorage","getItem","innerHTML","limit","sellerId","brand","soldPrice","imageUrl","itemCoverImage","soldByOthersItemCardHTML","soldByOthersDiv","setPreferredLogInMethodCookie","providerData","providerId","origin","includes","items","getItems","showNpsSurvey","showInviteToast","nowDate","Date","daysSinceLatestSold","soldItemsCount","inviteToastViews","elementViews","filter","e","elementID","daysSinceToastViewsArray","Array","from","parseInt","Math","floor","getTime","timestamp","toDate","daysSinceToastLastViewed","min","viewedToastBefore","soldDate","archived","daysDiff","timeDifference","referralData","referralCode","referralCodeText","triggerInviteToastOpen","click","update","firestore","FieldValue","arrayUnion","analytics","track","headerInviteButton","menuInviteLink","inviteCode","checkCookie","connectReferralUsers","photoInvite","localStorage","photoShootOffer","bonusSection","showBonusSection","account","accountName","loadItemCards","loadInfoRequests","showReferralSection","fetchAndShowRecommendedItems","createReferralCode","daysSinceFirstPublished","daysSinceLastPublished","reverse","find","surveyLastViewed","daysSinceSurveyLastViewed","publishedDate","referrer","ids","push","response","slice","number","itemList","itemSizes","idx","item","maiSize","image","images","modelImageLarge","modelImage","enhancedFrontImageLarge","enhancedFrontImage","itemCardHTML","platformListings","maiShop","url","cleanedBrand","category","currentPrice","querySelectorAll","link","addEventListener","linkClickTracker","setAttribute","sex","join","observer","IntersectionObserver","entries","opts","rect","getBoundingClientRect","isVisible","top","bottom","innerHeight","documentElement","clientHeight","disconnect","threshold","root","observe","closeFeedbackForm","setTimeout","reload","bookPickup","pickupDate","pickupRadioButtons","getElementsByName","checked","value","pickupFlowItemId","setHappinessRate","itemRef","happinessRate","happinessQuestionDiv","openQuestionDiv","feedbackSubmitButton","storeFeedback","feedbackTextField","feedbackText","removeItem","whenSet","Webflow","$","submit","loadHandlerHasRun","onLoadHandler","menuSignoutButton","signOut","bookPickupForm","closePickupToastIcon","closeFeedbackFormButton","happySmileyButton","neutralSmileyButton","angrySmileyButton","saveReferralCodeButton","saveRefCodeLoadingDiv","inputCode","referralCodeInput","closeMeasurementsToastButton","triggerMeasurementsToastClose","closeNewPriceToastButton","triggerNewPriceToastClose","closeInviteToastButton","triggerInviteToastClose","closeServicePointToastButton","triggerServicePointToastClose","confirmServicePointButton","triggerFeedbackFormOpen","closeLongerPeriodToastButton","triggerLongerPeriodToastClose","shareCodeButton","shareCode","sharePersonalLinkButton","menuButton","closeMenuButton","onclick","readyState","event","persisted","menu","w","ic","d","c","arguments","q","args","l","s","createElement","type","async","src","getElementsByTagName","parentNode","insertBefore","attachEvent","auth","deleteCookie","setFormAddressFields","user1","dispatchEvent","Event","addressStreetAddress","addressCO","addressPostalCode","addressDoorCode","getFormAddressFields","trim","charAt","toUpperCase","replace","isValidSwedishSsn","ssn","split","sum","map","n","Number","reduce","previous","index","formatPersonalId","personalIdInput","substring","modelImageSmall","coverImage","coverImageSmall","enhancedFrontImageSmall","frontImageSmall","frontImage","text","navigator","share","shareText","clipboard","writeText","linkCopiedBanner","interopDefault","a","__esModule","default","exportAll","source","dest","keys","key","hasOwnProperty","enumerable","destName","openMeasurementsToast","itemId","description","measurementDescriptionText","measurementsSubmitButton","input","measurementsInput","measurements","triggerMeasurementsToastOpen","openLongerPeriodToast","currentMinPrice","deniedBefore","priceWithDiscount30","ceil","price","priceWithDiscount20","priceAfterDiscount30","priceAfterDiscount20","priceNoDiscount","longerPeriodDescriptionText","discountFormDiv","longerPeriodAcceptButton","today","todayDate","toISOString","newPrice","discount","discountRadioButtons","longerPeriodAcceptedDate","longerPeriodAcceptedDiscount","minPriceEstimate","longerPeriodDenyButton","triggerLongerPeriodToastOpen","storePriceResponse","max","openNewPriceToast","currentMax","currentMin","previousMinPrice","previousMaxPrice","maxPriceDiv","minPriceDiv","newPriceToastTitle","newPriceHeading","toLowerCase","maxPrice","minPrice","acceptNewPriceButton","denyNewPriceButton","newPriceText","descriptionDiv","triggerNewPriceToastOpen","measurementsClone","cloneNode","longerPeriodClone","updateImagesClone","valuationClone","infoRequestsList","replaceChildren","infoRequests","currentMaxPrice","maxPriceEstimate","frontImageUrl","displayRequests","req","newRequest","querySelector","backgroundImage","innerText","appendChild","infoRequestsDiv","_private","storeShippingMethod","method","openShippingToast","openPickupToast","triggerShippingToastOpen","servicePointButtonDisplay","triggerShippingToastClose","changeToServicePointButton","setDatesOfPickupToast","radioFieldOne","radioFieldTwo","radioFieldThree","radioFieldFour","firstDate","setTime","setDate","getDate","getDay","secondDate","thirdDate","forthDate","days","months","optionsDisplayed","pickupDateOne","pickupDateTwo","pickupDateThree","pickupDateFour","val","getMonth","dayOne","dayTwo","triggerPickupAnimation","bagReceivedAction","checkbox","bagReceived","changeToPickupButton","triggerServicePointToastOpen","getBagReceivedCheckbox","div","itemListSelling","itemListSoldNotSent","itemListSold","youEarned","createdAt","sellerGets","buyerFirstName","buyer","FirstName","buyerAddressCity","City","postnordQrCode","dhlBarcode","dhlLicensePlateBarcodeSrc","soldPlatform","holidayMode","daysLeftText","daysLeft","round","sellingPeriodLength","displayItemCard","itemPageUrl","textDiv1","textDiv2","text2","sellingItemCardHTML","myItemsDiv","noItemsDiv","headerSellItemButton","sellButtonText","buyerInfoTextHTML","str","output","words","word","userActionDiv","shippingInfoDiv","changeShippingMethod","shipper","getBarcodeButton","target","getQrCodeButton","getBookPickupButton","getShippingInfoDiv","shippingInfo","infoIcon","shipItemPageUrl","shipperIcon","date","dateNumber","monthName","dayName","soldNotSentCardHTML","soldNotSentDiv","soldItemCardHTML","soldItemsDiv","itemListSoldContainer","youEarnedDiv","toLocaleString","replaceAll","loadingDiv","sectionsDiv","quickInfoDiv"],"version":3,"file":"private.js.map"}